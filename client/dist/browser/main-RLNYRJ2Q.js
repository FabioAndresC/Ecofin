import{$ as U,$a as Ph,$b as Yn,A as D,Aa as Vo,Ab as Ps,B as gh,Ba as zo,Bb as wn,C as _h,Ca as ut,Cb as Mh,D as yh,Da as Xe,Db as Si,E as Ot,Ea as j,Eb as xn,F as bh,Fa as we,Fb as Ms,G as Bt,Ga as vn,Gb as Rs,H as vh,Ha as $o,Hb as Ds,I as jo,Ia as Kt,Ib as hu,J as Ut,Ja as He,Jb as Zo,K as st,Ka as vt,Kb as ot,L as Ge,La as Be,Lb as Ei,M as w,Ma as Ze,Mb as Wo,N as k,Na as Ke,Nb as _i,O as d,Oa as ue,Ob as Rh,P as Bn,Pa as ft,Pb as Qo,Q as bn,Qa as Ch,Qb as Jo,R as Qe,Ra as Bo,Rb as Ns,S as ee,Sa as Uo,Sb as ti,T as wh,Ta as Th,Tb as Dh,U as Un,Ua as Sh,Ub as Yo,V as Hn,Va as Eh,Vb as Xo,W as qn,Wa as Oh,Wb as el,X as _,Xa as Ah,Xb as Nh,Y as y,Ya as Ho,Yb as Fh,Z as A,Za as Ti,Zb as tl,_ as B,_a as kh,_b as Jn,a as ph,aa as re,ab as gi,ac as Fi,b as hh,ba as H,bb as fe,bc as Fs,c as $e,ca as L,cb as dt,cc as mu,d as oi,da as f,db as Ni,dc as fu,e as mt,ea as Ht,eb as qo,ec as il,f as Ae,fa as Ct,fb as an,fc as nl,g as Os,ga as Kn,gb as Ko,gc as Gt,h as Pr,ha as xh,hb as Tt,hc as be,i as M,ia as Me,ib as Mr,ic as Ls,j as Z,ja as me,jb as ka,k as ke,ka as W,kb as Le,l as Aa,la as Q,lb as Ue,m as As,ma as et,mb as At,n as E,na as N,nb as C,o as O,oa as ye,ob as Go,p as nt,pa as Je,pb as at,q as rt,qa as Ih,qb as pu,r as mh,ra as Rt,rb as ei,s as We,sa as Dt,sb as li,t as $,ta as Nt,tb as Gn,u as Et,ua as qt,ub as Zn,v as du,va as xe,vb as Wn,w as ks,wa as Fe,wb as Qn,x as fi,xa as le,xb as gt,y as fh,ya as qe,yb as Re,z as m,za as sn,zb as on}from"./chunk-NBQ5QSYY.js";import"./chunk-JENGY3ED.js";import{a as c,b as v,c as Ee,d as ai,e as dh,f as rn,g as Es,h,i as R,j as ne,k as $t,l as G}from"./chunk-LV7Y7JYD.js";var Qm=ai((yL,Wm)=>{"use strict";Wm.exports=function(n,t){if(typeof n!="string")throw new TypeError("Expected a string");return t=typeof t>"u"?"_":t,n.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}});var rf=ai((bL,rd)=>{"use strict";var JC=/[\p{Lu}]/u,YC=/[\p{Ll}]/u,Jm=/^[\p{Lu}](?![\p{Lu}])/gu,ef=/([\p{Alpha}\p{N}_]|$)/u,tf=/[_.\- ]+/,XC=new RegExp("^"+tf.source),Ym=new RegExp(tf.source+ef.source,"gu"),Xm=new RegExp("\\d+"+ef.source,"gu"),eT=(n,t,e)=>{let i=!1,r=!1,s=!1;for(let a=0;a<n.length;a++){let o=n[a];i&&JC.test(o)?(n=n.slice(0,a)+"-"+n.slice(a),i=!1,s=r,r=!0,a++):r&&s&&YC.test(o)?(n=n.slice(0,a-1)+"-"+n.slice(a-1),s=r,r=!1,i=!0):(i=t(o)===o&&e(o)!==o,s=r,r=e(o)===o&&t(o)!==o)}return n},tT=(n,t)=>(Jm.lastIndex=0,n.replace(Jm,e=>t(e))),iT=(n,t)=>(Ym.lastIndex=0,Xm.lastIndex=0,n.replace(Ym,(e,i)=>t(i)).replace(Xm,e=>t(e))),nf=(n,t)=>{if(!(typeof n=="string"||Array.isArray(n)))throw new TypeError("Expected the input to be `string | string[]`");if(t=c({pascalCase:!1,preserveConsecutiveUppercase:!1},t),Array.isArray(n)?n=n.map(s=>s.trim()).filter(s=>s.length).join("-"):n=n.trim(),n.length===0)return"";let e=t.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(t.locale),i=t.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(t.locale);return n.length===1?t.pascalCase?i(n):e(n):(n!==e(n)&&(n=eT(n,e,i)),n=n.replace(XC,""),t.preserveConsecutiveUppercase?n=tT(n,e):n=e(n),t.pascalCase&&(n=i(n.charAt(0))+n.slice(1)),iT(n,i))};rd.exports=nf;rd.exports.default=nf});var Df=ai((ej,Rf)=>{"use strict";function ki(n,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(n)),this._timeouts=n,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}Rf.exports=ki;ki.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};ki.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};ki.prototype.retry=function(n){if(this._timeout&&clearTimeout(this._timeout),!n)return!1;var t=new Date().getTime();if(n&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(n),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(n);var e=this._timeouts.shift();if(e===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),e=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},e),this._options.unref&&this._timer.unref(),!0};ki.prototype.attempt=function(n,t){this._fn=n,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var e=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){e._operationTimeoutCb()},e._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};ki.prototype.try=function(n){console.log("Using RetryOperation.try() is deprecated"),this.attempt(n)};ki.prototype.start=function(n){console.log("Using RetryOperation.start() is deprecated"),this.attempt(n)};ki.prototype.start=ki.prototype.try;ki.prototype.errors=function(){return this._errors};ki.prototype.attempts=function(){return this._attempts};ki.prototype.mainError=function(){if(this._errors.length===0)return null;for(var n={},t=null,e=0,i=0;i<this._errors.length;i++){var r=this._errors[i],s=r.message,a=(n[s]||0)+1;n[s]=a,a>=e&&(t=r,e=a)}return t}});var Nf=ai(ms=>{"use strict";var lS=Df();ms.operation=function(n){var t=ms.timeouts(n);return new lS(t,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})};ms.timeouts=function(n){if(n instanceof Array)return[].concat(n);var t={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var e in n)t[e]=n[e];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],r=0;r<t.retries;r++)i.push(this.createTimeout(r,t));return n&&n.forever&&!i.length&&i.push(this.createTimeout(r,t)),i.sort(function(s,a){return s-a}),i};ms.createTimeout=function(n,t){var e=t.randomize?Math.random()+1:1,i=Math.round(e*Math.max(t.minTimeout,1)*Math.pow(t.factor,n));return i=Math.min(i,t.maxTimeout),i};ms.wrap=function(n,t,e){if(t instanceof Array&&(e=t,t=null),!e){e=[];for(var i in n)typeof n[i]=="function"&&e.push(i)}for(var r=0;r<e.length;r++){var s=e[r],a=n[s];n[s]=(function(l){var u=ms.operation(t),p=Array.prototype.slice.call(arguments,1),g=p.pop();p.push(function(b){u.retry(b)||(b&&(arguments[0]=u.mainError()),g.apply(this,arguments))}),u.attempt(function(){l.apply(n,p)})}).bind(n,a),n[s].options=t}}});var Lf=ai((ij,Ff)=>{"use strict";Ff.exports=Nf()});var Jl=ai((Vf,Ql)=>{"use strict";var cS=Lf(),uS=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],Wl=class extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}},dS=(n,t,e)=>{let i=e.retries-(t-1);return n.attemptNumber=t,n.retriesLeft=i,n},pS=n=>uS.includes(n),jf=(n,t)=>new Promise((e,i)=>{t=c({onFailedAttempt:()=>{},retries:10},t);let r=cS.operation(t);r.attempt(s=>h(Vf,null,function*(){try{e(yield n(s))}catch(a){if(!(a instanceof Error)){i(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof Wl)r.stop(),i(a.originalError);else if(a instanceof TypeError&&!pS(a.message))r.stop(),i(a);else{dS(a,s,t);try{yield t.onFailedAttempt(a)}catch(o){i(o);return}r.retry(a)||i(r.mainError())}}}))});Ql.exports=jf;Ql.exports.default=jf;Ql.exports.AbortError=Wl});var Zf=ai((Tj,Gf)=>{"use strict";var qf=(n=0)=>t=>`\x1B[${38+n};5;${t}m`,Kf=(n=0)=>(t,e,i)=>`\x1B[${38+n};2;${t};${e};${i}m`;function CS(){let n=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[e,i]of Object.entries(t)){for(let[r,s]of Object.entries(i))t[r]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},i[r]=t[r],n.set(s[0],s[1]);Object.defineProperty(t,e,{value:i,enumerable:!1})}return Object.defineProperty(t,"codes",{value:n,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",t.color.ansi256=qf(),t.color.ansi16m=Kf(),t.bgColor.ansi256=qf(10),t.bgColor.ansi16m=Kf(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,i,r)=>e===i&&i===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:e=>{let i=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!i)return[0,0,0];let{colorString:r}=i.groups;r.length===3&&(r=r.split("").map(a=>a+a).join(""));let s=Number.parseInt(r,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1}}),t}Object.defineProperty(Gf,"exports",{enumerable:!0,get:CS})});var Xf=ai((Uj,Fd)=>{"use strict";var PS=Object.prototype.hasOwnProperty,ri="~";function lo(){}Object.create&&(lo.prototype=Object.create(null),new lo().__proto__||(ri=!1));function MS(n,t,e){this.fn=n,this.context=t,this.once=e||!1}function Yf(n,t,e,i,r){if(typeof e!="function")throw new TypeError("The listener must be a function");var s=new MS(e,i||n,r),a=ri?ri+t:t;return n._events[a]?n._events[a].fn?n._events[a]=[n._events[a],s]:n._events[a].push(s):(n._events[a]=s,n._eventsCount++),n}function ic(n,t){--n._eventsCount===0?n._events=new lo:delete n._events[t]}function Jt(){this._events=new lo,this._eventsCount=0}Jt.prototype.eventNames=function(){var t=[],e,i;if(this._eventsCount===0)return t;for(i in e=this._events)PS.call(e,i)&&t.push(ri?i.slice(1):i);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};Jt.prototype.listeners=function(t){var e=ri?ri+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,a=new Array(s);r<s;r++)a[r]=i[r].fn;return a};Jt.prototype.listenerCount=function(t){var e=ri?ri+t:t,i=this._events[e];return i?i.fn?1:i.length:0};Jt.prototype.emit=function(t,e,i,r,s,a){var o=ri?ri+t:t;if(!this._events[o])return!1;var l=this._events[o],u=arguments.length,p,g;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,r),!0;case 5:return l.fn.call(l.context,e,i,r,s),!0;case 6:return l.fn.call(l.context,e,i,r,s,a),!0}for(g=1,p=new Array(u-1);g<u;g++)p[g-1]=arguments[g];l.fn.apply(l.context,p)}else{var b=l.length,x;for(g=0;g<b;g++)switch(l[g].once&&this.removeListener(t,l[g].fn,void 0,!0),u){case 1:l[g].fn.call(l[g].context);break;case 2:l[g].fn.call(l[g].context,e);break;case 3:l[g].fn.call(l[g].context,e,i);break;case 4:l[g].fn.call(l[g].context,e,i,r);break;default:if(!p)for(x=1,p=new Array(u-1);x<u;x++)p[x-1]=arguments[x];l[g].fn.apply(l[g].context,p)}}return!0};Jt.prototype.on=function(t,e,i){return Yf(this,t,e,i,!1)};Jt.prototype.once=function(t,e,i){return Yf(this,t,e,i,!0)};Jt.prototype.removeListener=function(t,e,i,r){var s=ri?ri+t:t;if(!this._events[s])return this;if(!e)return ic(this,s),this;var a=this._events[s];if(a.fn)a.fn===e&&(!r||a.once)&&(!i||a.context===i)&&ic(this,s);else{for(var o=0,l=[],u=a.length;o<u;o++)(a[o].fn!==e||r&&!a[o].once||i&&a[o].context!==i)&&l.push(a[o]);l.length?this._events[s]=l.length===1?l[0]:l:ic(this,s)}return this};Jt.prototype.removeAllListeners=function(t){var e;return t?(e=ri?ri+t:t,this._events[e]&&ic(this,e)):(this._events=new lo,this._eventsCount=0),this};Jt.prototype.off=Jt.prototype.removeListener;Jt.prototype.addListener=Jt.prototype.on;Jt.prefixed=ri;Jt.EventEmitter=Jt;typeof Fd<"u"&&(Fd.exports=Jt)});var tg=ai((Hj,eg)=>{"use strict";eg.exports=(n,t)=>(t=t||(()=>{}),n.then(e=>new Promise(i=>{i(t())}).then(()=>e),e=>new Promise(i=>{i(t())}).then(()=>{throw e})))});var ng=ai((qj,rc)=>{"use strict";var RS=tg(),nc=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},ig=(n,t,e)=>new Promise((i,r)=>{if(typeof t!="number"||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0){i(n);return}let s=setTimeout(()=>{if(typeof e=="function"){try{i(e())}catch(l){r(l)}return}let a=typeof e=="string"?e:`Promise timed out after ${t} milliseconds`,o=e instanceof Error?e:new nc(a);typeof n.cancel=="function"&&n.cancel(),r(o)},t);RS(n.then(i,r),()=>{clearTimeout(s)})});rc.exports=ig;rc.exports.default=ig;rc.exports.TimeoutError=nc});var rg=ai(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});function DS(n,t,e){let i=0,r=n.length;for(;r>0;){let s=r/2|0,a=i+s;e(n[a],t)<=0?(i=++a,r-=s+1):r=s}return i}Ld.default=DS});var sg=ai(Vd=>{"use strict";Object.defineProperty(Vd,"__esModule",{value:!0});var NS=rg(),jd=class{constructor(){this._queue=[]}enqueue(t,e){e=Object.assign({priority:0},e);let i={priority:e.priority,run:t};if(this.size&&this._queue[this.size-1].priority>=e.priority){this._queue.push(i);return}let r=NS.default(this._queue,i,(s,a)=>a.priority-s.priority);this._queue.splice(r,0,i)}dequeue(){let t=this._queue.shift();return t?.run}filter(t){return this._queue.filter(e=>e.priority===t.priority).map(e=>e.run)}get size(){return this._queue.length}};Vd.default=jd});var ac=ai($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});var FS=Xf(),ag=ng(),LS=sg(),sc=()=>{},jS=new ag.TimeoutError,zd=class extends FS{constructor(t){var e,i,r,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=sc,this._resolveIdle=sc,t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:LS.default},t),!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(i=(e=t.intervalCap)===null||e===void 0?void 0:e.toString())!==null&&i!==void 0?i:""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(r=t.interval)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""}\` (${typeof t.interval})`);this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||t.interval===0,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=t.throwOnTimeout===!0,this._isPaused=t.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=sc,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=sc,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let t=Date.now();if(this._intervalId===void 0){let e=this._intervalEnd-t;if(e<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},e)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let e=this._queue.dequeue();return e?(this.emit("active"),e(),t&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this._concurrency=t,this._processQueue()}add(i){return h(this,arguments,function*(t,e={}){return new Promise((r,s)=>{let a=()=>h(this,null,function*(){this._pendingCount++,this._intervalCount++;try{let o=this._timeout===void 0&&e.timeout===void 0?t():ag.default(Promise.resolve(t()),e.timeout===void 0?this._timeout:e.timeout,()=>{(e.throwOnTimeout===void 0?this._throwOnTimeout:e.throwOnTimeout)&&s(jS)});r(yield o)}catch(o){s(o)}this._next()});this._queue.enqueue(a,e),this._tryToStartAnother(),this.emit("add")})})}addAll(t,e){return h(this,null,function*(){return Promise.all(t.map(i=>h(this,null,function*(){return this.add(i,e)})))})}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}onEmpty(){return h(this,null,function*(){if(this._queue.size!==0)return new Promise(t=>{let e=this._resolveEmpty;this._resolveEmpty=()=>{e(),t()}})})}onIdle(){return h(this,null,function*(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(t=>{let e=this._resolveIdle;this._resolveIdle=()=>{e(),t()}})})}get size(){return this._queue.size}sizeBy(t){return this._queue.filter(t).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(t){this._timeout=t}};$d.default=zd});var a_=ai(Dc=>{"use strict";Dc.byteLength=CE;Dc.toByteArray=SE;Dc.fromByteArray=AE;var _n=[],Ri=[],IE=typeof Uint8Array<"u"?Uint8Array:Array,mp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(bs=0,r_=mp.length;bs<r_;++bs)_n[bs]=mp[bs],Ri[mp.charCodeAt(bs)]=bs;var bs,r_;Ri[45]=62;Ri[95]=63;function s_(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var i=e===t?0:4-e%4;return[e,i]}function CE(n){var t=s_(n),e=t[0],i=t[1];return(e+i)*3/4-i}function TE(n,t,e){return(t+e)*3/4-e}function SE(n){var t,e=s_(n),i=e[0],r=e[1],s=new IE(TE(n,i,r)),a=0,o=r>0?i-4:i,l;for(l=0;l<o;l+=4)t=Ri[n.charCodeAt(l)]<<18|Ri[n.charCodeAt(l+1)]<<12|Ri[n.charCodeAt(l+2)]<<6|Ri[n.charCodeAt(l+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=t&255;return r===2&&(t=Ri[n.charCodeAt(l)]<<2|Ri[n.charCodeAt(l+1)]>>4,s[a++]=t&255),r===1&&(t=Ri[n.charCodeAt(l)]<<10|Ri[n.charCodeAt(l+1)]<<4|Ri[n.charCodeAt(l+2)]>>2,s[a++]=t>>8&255,s[a++]=t&255),s}function EE(n){return _n[n>>18&63]+_n[n>>12&63]+_n[n>>6&63]+_n[n&63]}function OE(n,t,e){for(var i,r=[],s=t;s<e;s+=3)i=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),r.push(EE(i));return r.join("")}function AE(n){for(var t,e=n.length,i=e%3,r=[],s=16383,a=0,o=e-i;a<o;a+=s)r.push(OE(n,a,a+s>o?o:a+s));return i===1?(t=n[e-1],r.push(_n[t>>2]+_n[t<<4&63]+"==")):i===2&&(t=(n[e-2]<<8)+n[e-1],r.push(_n[t>>10]+_n[t>>4&63]+_n[t<<2&63]+"=")),r.join("")}});var Lh=(()=>{let t=class t{constructor(i){this.router=i}goToSignIn(){this.router.navigate(["/login"])}goToRegister(){this.router.navigate(["/register"])}};t.\u0275fac=function(r){return new(r||t)(D(Ti))},t.\u0275cmp=Z({type:t,selectors:[["app-home"]],standalone:!0,features:[xe],decls:22,vars:7,consts:[[1,"flex","flex-col","my-14","mx-20"],[1,"flex","items-center","justify-center","lg:gap-56","gap-32"],[1,""],["src","../assets/logo/logoEcofinHorizontal.png","alt","logo",1,"h-8"],[1,"flex","gap-2"],["label","Servicios",3,"outlined"],["label","Acerca de",3,"text"],["label","Contacto",3,"outlined"],["label","Rese\xF1as",3,"text"],[1,"flex","lg:flex-row","flex-col","items-center","justify-center","mt-20","gap-8"],[1,"flex","flex-col"],[1,"text-center","text-8xl","tracking-tight","animated-text"],[1,"text-center","text-xl","lg:w-[660px]","mt-14"],[1,"flex","items-center","justify-center","gap-4","mt-14"],["label","Iniciar sesion","size","large",3,"onClick","outlined","rounded"],["label","Registrarse","size","large",3,"onClick","rounded"],["src","../assets/images/finances.png",1,"lg:h-96","h-auto"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"div",1)(2,"div",2),A(3,"img",3),y(),_(4,"div",4),A(5,"p-button",5)(6,"p-button",6)(7,"p-button",7)(8,"p-button",8),y()(),_(9,"div",9)(10,"div",10)(11,"div",11),N(12," Juntos "),A(13,"br")(14,"span"),y(),_(15,"div",12),N(16," Ecofin est\xE1 centrado en facilitar el desarrollo de infraestructuras sostenibles y resilientes mediante un mayor apoyo financiero, tecnol\xF3gico y t\xE9cnico a los pa\xEDses menos adelantados como Bolivia, tomando en cuenta peque\xF1as provincias de Santa Cruz de la Sierra. "),y(),_(17,"div",13)(18,"p-button",14),L("onClick",function(){return s.goToSignIn()}),y(),_(19,"p-button",15),L("onClick",function(){return s.goToRegister()}),y()()(),_(20,"div",2),A(21,"img",16),y()()()),r&2&&(m(5),d("outlined",!0),m(),d("text",!0),m(),d("outlined",!0),m(),d("text",!0),m(10),d("outlined",!0)("rounded",!0),m(),d("rounded",!0))},dependencies:[gt,Qn,ue],styles:['.animated-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative}.animated-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"Construimos";color:#581fe6;animation:_ngcontent-%COMP%_words 20s infinite}.animated-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"";position:absolute;width:calc(100% + 8px);height:100%;background-color:#fff;border-left:2px solid #000000;right:-8px;animation:_ngcontent-%COMP%_cursor .8s infinite,typing 20s steps(14) infinite}@keyframes _ngcontent-%COMP%_cursor{to{border-left:2px solid rgba(255,127,80,0)}}@keyframes _ngcontent-%COMP%_words{0%,20%{content:"Construimos"}21%,40%{content:"Crecemos"}41%,60%{content:"Desarrollamos"}61%,80%{content:"Construimos"}81%,to{content:"Crecemos"}}@keyframes _ngcontent-%COMP%_typing{10%,15%,30%,35%,50%,55%,70%,75%,90%,95%{width:0}5%,20%,25%,40%,45%,60%,65%,80%,85%{width:calc(100% + 8px)}}']});let n=t;return n})();var jh=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Z({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[xe],decls:2,vars:0,template:function(r,s){r&1&&(_(0,"p"),N(1,"dashboard works!"),y())}});let n=t;return n})();var zs=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,Ue]})}return n})();var Vh=(()=>{class n{pFocusTrapDisabled=!1;host=Pr(We);onkeydown(e){if(this.pFocusTrapDisabled!==!0){e.preventDefault();let i=C.getNextFocusableElement(this.host.nativeElement,e.shiftKey);i&&(i.focus(),i.select?.())}}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Aa({type:n,selectors:[["","pFocusTrap",""]],hostAttrs:[1,"p-element"],hostBindings:function(i,r){i&1&&L("keydown.tab",function(a){return r.onkeydown(a)})("keydown.shift.tab",function(a){return r.onkeydown(a)})},inputs:{pFocusTrapDisabled:[M.HasDecoratorInputTransform,"pFocusTrapDisabled","pFocusTrapDisabled",j]},features:[Ge]})}return n})(),zh=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue]})}return n})();var gu=(()=>{class n extends at{pathId;ngOnInit(){this.pathId="url(#"+dt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=rt(n)))(r||n)}})();static \u0275cmp=Z({type:n,selectors:[["WindowMaximizeIcon"]],standalone:!0,features:[st,xe],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7 14H11.8C12.3835 14 12.9431 13.7682 13.3556 13.3556C13.7682 12.9431 14 12.3835 14 11.8V2.2C14 1.61652 13.7682 1.05694 13.3556 0.644365C12.9431 0.231785 12.3835 0 11.8 0H2.2C1.61652 0 1.05694 0.231785 0.644365 0.644365C0.231785 1.05694 0 1.61652 0 2.2V7C0 7.15913 0.063214 7.31174 0.175736 7.42426C0.288258 7.53679 0.44087 7.6 0.6 7.6C0.75913 7.6 0.911742 7.53679 1.02426 7.42426C1.13679 7.31174 1.2 7.15913 1.2 7V2.2C1.2 1.93478 1.30536 1.68043 1.49289 1.49289C1.68043 1.30536 1.93478 1.2 2.2 1.2H11.8C12.0652 1.2 12.3196 1.30536 12.5071 1.49289C12.6946 1.68043 12.8 1.93478 12.8 2.2V11.8C12.8 12.0652 12.6946 12.3196 12.5071 12.5071C12.3196 12.6946 12.0652 12.8 11.8 12.8H7C6.84087 12.8 6.68826 12.8632 6.57574 12.9757C6.46321 13.0883 6.4 13.2409 6.4 13.4C6.4 13.5591 6.46321 13.7117 6.57574 13.8243C6.68826 13.9368 6.84087 14 7 14ZM9.77805 7.42192C9.89013 7.534 10.0415 7.59788 10.2 7.59995C10.3585 7.59788 10.5099 7.534 10.622 7.42192C10.7341 7.30985 10.798 7.15844 10.8 6.99995V3.94242C10.8066 3.90505 10.8096 3.86689 10.8089 3.82843C10.8079 3.77159 10.7988 3.7157 10.7824 3.6623C10.756 3.55552 10.701 3.45698 10.622 3.37798C10.5099 3.2659 10.3585 3.20202 10.2 3.19995H7.00002C6.84089 3.19995 6.68828 3.26317 6.57576 3.37569C6.46324 3.48821 6.40002 3.64082 6.40002 3.79995C6.40002 3.95908 6.46324 4.11169 6.57576 4.22422C6.68828 4.33674 6.84089 4.39995 7.00002 4.39995H8.80006L6.19997 7.00005C6.10158 7.11005 6.04718 7.25246 6.04718 7.40005C6.04718 7.54763 6.10158 7.69004 6.19997 7.80005C6.30202 7.91645 6.44561 7.98824 6.59997 8.00005C6.75432 7.98824 6.89791 7.91645 6.99997 7.80005L9.60002 5.26841V6.99995C9.6021 7.15844 9.66598 7.30985 9.77805 7.42192ZM1.4 14H3.8C4.17066 13.9979 4.52553 13.8498 4.78763 13.5877C5.04973 13.3256 5.1979 12.9707 5.2 12.6V10.2C5.1979 9.82939 5.04973 9.47452 4.78763 9.21242C4.52553 8.95032 4.17066 8.80215 3.8 8.80005H1.4C1.02934 8.80215 0.674468 8.95032 0.412371 9.21242C0.150274 9.47452 0.00210008 9.82939 0 10.2V12.6C0.00210008 12.9707 0.150274 13.3256 0.412371 13.5877C0.674468 13.8498 1.02934 13.9979 1.4 14ZM1.25858 10.0586C1.29609 10.0211 1.34696 10 1.4 10H3.8C3.85304 10 3.90391 10.0211 3.94142 10.0586C3.97893 10.0961 4 10.147 4 10.2V12.6C4 12.6531 3.97893 12.704 3.94142 12.7415C3.90391 12.779 3.85304 12.8 3.8 12.8H1.4C1.34696 12.8 1.29609 12.779 1.25858 12.7415C1.22107 12.704 1.2 12.6531 1.2 12.6V10.2C1.2 10.147 1.22107 10.0961 1.25858 10.0586Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(nt(),_(0,"svg",0)(1,"g"),A(2,"path",1),y(),_(3,"defs")(4,"clipPath",2),A(5,"rect",3),y()()()),i&2&&(ee(r.getClassNames()),k("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),m(),k("clip-path",r.pathId),m(3),d("id",r.pathId))},encapsulation:2})}return n})();var _u=(()=>{class n extends at{pathId;ngOnInit(){this.pathId="url(#"+dt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=rt(n)))(r||n)}})();static \u0275cmp=Z({type:n,selectors:[["WindowMinimizeIcon"]],standalone:!0,features:[st,xe],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M11.8 0H2.2C1.61652 0 1.05694 0.231785 0.644365 0.644365C0.231785 1.05694 0 1.61652 0 2.2V7C0 7.15913 0.063214 7.31174 0.175736 7.42426C0.288258 7.53679 0.44087 7.6 0.6 7.6C0.75913 7.6 0.911742 7.53679 1.02426 7.42426C1.13679 7.31174 1.2 7.15913 1.2 7V2.2C1.2 1.93478 1.30536 1.68043 1.49289 1.49289C1.68043 1.30536 1.93478 1.2 2.2 1.2H11.8C12.0652 1.2 12.3196 1.30536 12.5071 1.49289C12.6946 1.68043 12.8 1.93478 12.8 2.2V11.8C12.8 12.0652 12.6946 12.3196 12.5071 12.5071C12.3196 12.6946 12.0652 12.8 11.8 12.8H7C6.84087 12.8 6.68826 12.8632 6.57574 12.9757C6.46321 13.0883 6.4 13.2409 6.4 13.4C6.4 13.5591 6.46321 13.7117 6.57574 13.8243C6.68826 13.9368 6.84087 14 7 14H11.8C12.3835 14 12.9431 13.7682 13.3556 13.3556C13.7682 12.9431 14 12.3835 14 11.8V2.2C14 1.61652 13.7682 1.05694 13.3556 0.644365C12.9431 0.231785 12.3835 0 11.8 0ZM6.368 7.952C6.44137 7.98326 6.52025 7.99958 6.6 8H9.8C9.95913 8 10.1117 7.93678 10.2243 7.82426C10.3368 7.71174 10.4 7.55913 10.4 7.4C10.4 7.24087 10.3368 7.08826 10.2243 6.97574C10.1117 6.86321 9.95913 6.8 9.8 6.8H8.048L10.624 4.224C10.73 4.11026 10.7877 3.95982 10.7849 3.80438C10.7822 3.64894 10.7192 3.50063 10.6093 3.3907C10.4994 3.28077 10.3511 3.2178 10.1956 3.21506C10.0402 3.21232 9.88974 3.27002 9.776 3.376L7.2 5.952V4.2C7.2 4.04087 7.13679 3.88826 7.02426 3.77574C6.91174 3.66321 6.75913 3.6 6.6 3.6C6.44087 3.6 6.28826 3.66321 6.17574 3.77574C6.06321 3.88826 6 4.04087 6 4.2V7.4C6.00042 7.47975 6.01674 7.55862 6.048 7.632C6.07656 7.70442 6.11971 7.7702 6.17475 7.82524C6.2298 7.88029 6.29558 7.92344 6.368 7.952ZM1.4 8.80005H3.8C4.17066 8.80215 4.52553 8.95032 4.78763 9.21242C5.04973 9.47452 5.1979 9.82939 5.2 10.2V12.6C5.1979 12.9707 5.04973 13.3256 4.78763 13.5877C4.52553 13.8498 4.17066 13.9979 3.8 14H1.4C1.02934 13.9979 0.674468 13.8498 0.412371 13.5877C0.150274 13.3256 0.00210008 12.9707 0 12.6V10.2C0.00210008 9.82939 0.150274 9.47452 0.412371 9.21242C0.674468 8.95032 1.02934 8.80215 1.4 8.80005ZM3.94142 12.7415C3.97893 12.704 4 12.6531 4 12.6V10.2C4 10.147 3.97893 10.0961 3.94142 10.0586C3.90391 10.0211 3.85304 10 3.8 10H1.4C1.34696 10 1.29609 10.0211 1.25858 10.0586C1.22107 10.0961 1.2 10.147 1.2 10.2V12.6C1.2 12.6531 1.22107 12.704 1.25858 12.7415C1.29609 12.779 1.34696 12.8 1.4 12.8H3.8C3.85304 12.8 3.90391 12.779 3.94142 12.7415Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(nt(),_(0,"svg",0)(1,"g"),A(2,"path",1),y(),_(3,"defs")(4,"clipPath",2),A(5,"rect",3),y()()()),i&2&&(ee(r.getClassNames()),k("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),m(),k("clip-path",r.pathId),m(3),d("id",r.pathId))},encapsulation:2})}return n})();var M0=["titlebar"],R0=["content"],D0=["footer"],N0=["*",[["p-header"]],[["p-footer"]]],F0=["*","p-header","p-footer"],L0=(n,t,e,i,r,s,a,o,l,u)=>({"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter":n,"p-dialog-mask-scrollblocker":t,"p-dialog-left":e,"p-dialog-right":i,"p-dialog-top":r,"p-dialog-top-left":s,"p-dialog-top-right":a,"p-dialog-bottom":o,"p-dialog-bottom-left":l,"p-dialog-bottom-right":u}),j0=(n,t,e,i)=>({"p-dialog p-component":!0,"p-dialog-rtl":n,"p-dialog-draggable":t,"p-dialog-resizable":e,"p-dialog-maximized":i}),V0=(n,t)=>({transform:n,transition:t}),z0=n=>({value:"visible",params:n}),$0=()=>({"p-dialog-header-icon p-dialog-header-maximize p-link":!0}),B0=()=>({"p-dialog-header-icon p-dialog-header-close p-link":!0});function U0(n,t){n&1&&re(0)}function H0(n,t){if(n&1&&(B(0),w(1,U0,1,0,"ng-container",10),U()),n&2){let e=f(3);m(),d("ngTemplateOutlet",e.headlessTemplate)}}function q0(n,t){if(n&1){let e=H();_(0,"div",15),L("mousedown",function(r){E(e);let s=f(4);return O(s.initResize(r))}),y()}}function K0(n,t){if(n&1&&(_(0,"span",21),N(1),y()),n&2){let e=f(5);d("id",e.ariaLabelledBy),m(),ye(e.header)}}function G0(n,t){if(n&1&&(_(0,"span",21),Ct(1,1),y()),n&2){let e=f(5);d("id",e.ariaLabelledBy)}}function Z0(n,t){n&1&&re(0)}function W0(n,t){if(n&1&&A(0,"span",25),n&2){let e=f(6);d("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}function Q0(n,t){n&1&&A(0,"WindowMaximizeIcon",27),n&2&&d("styleClass","p-dialog-header-maximize-icon")}function J0(n,t){n&1&&A(0,"WindowMinimizeIcon",27),n&2&&d("styleClass","p-dialog-header-maximize-icon")}function Y0(n,t){if(n&1&&(B(0),w(1,Q0,1,1,"WindowMaximizeIcon",26)(2,J0,1,1,"WindowMinimizeIcon",26),U()),n&2){let e=f(6);m(),d("ngIf",!e.maximized&&!e.maximizeIconTemplate),m(),d("ngIf",e.maximized&&!e.minimizeIconTemplate)}}function X0(n,t){}function ey(n,t){n&1&&w(0,X0,0,0,"ng-template")}function ty(n,t){if(n&1&&(B(0),w(1,ey,1,0,null,10),U()),n&2){let e=f(6);m(),d("ngTemplateOutlet",e.maximizeIconTemplate)}}function iy(n,t){}function ny(n,t){n&1&&w(0,iy,0,0,"ng-template")}function ry(n,t){if(n&1&&(B(0),w(1,ny,1,0,null,10),U()),n&2){let e=f(6);m(),d("ngTemplateOutlet",e.minimizeIconTemplate)}}function sy(n,t){if(n&1){let e=H();_(0,"button",22),L("click",function(){E(e);let r=f(5);return O(r.maximize())})("keydown.enter",function(){E(e);let r=f(5);return O(r.maximize())}),w(1,W0,1,1,"span",23)(2,Y0,3,2,"ng-container",24)(3,ty,2,1,"ng-container",24)(4,ry,2,1,"ng-container",24),y()}if(n&2){let e=f(5);d("ngClass",Fe(7,$0)),k("tabindex",e.maximizable?"0":"-1")("aria-label",e.maximizeLabel),m(),d("ngIf",e.maximizeIcon&&!e.maximizeIconTemplate&&!e.minimizeIconTemplate),m(),d("ngIf",!e.maximizeIcon),m(),d("ngIf",!e.maximized),m(),d("ngIf",e.maximized)}}function ay(n,t){if(n&1&&A(0,"span",30),n&2){let e=f(7);d("ngClass",e.closeIcon)}}function oy(n,t){n&1&&A(0,"TimesIcon",27),n&2&&d("styleClass","p-dialog-header-close-icon")}function ly(n,t){if(n&1&&(B(0),w(1,ay,1,1,"span",29)(2,oy,1,1,"TimesIcon",26),U()),n&2){let e=f(6);m(),d("ngIf",e.closeIcon),m(),d("ngIf",!e.closeIcon)}}function cy(n,t){}function uy(n,t){n&1&&w(0,cy,0,0,"ng-template")}function dy(n,t){if(n&1&&(_(0,"span"),w(1,uy,1,0,null,10),y()),n&2){let e=f(6);m(),d("ngTemplateOutlet",e.closeIconTemplate)}}function py(n,t){if(n&1){let e=H();_(0,"button",28),L("click",function(r){E(e);let s=f(5);return O(s.close(r))})("keydown.enter",function(r){E(e);let s=f(5);return O(s.close(r))}),w(1,ly,3,2,"ng-container",24)(2,dy,2,1,"span",24),y()}if(n&2){let e=f(5);d("ngClass",Fe(5,B0)),k("aria-label",e.closeAriaLabel)("tabindex",e.closeTabindex),m(),d("ngIf",!e.closeIconTemplate),m(),d("ngIf",e.closeIconTemplate)}}function hy(n,t){if(n&1){let e=H();_(0,"div",16,3),L("mousedown",function(r){E(e);let s=f(4);return O(s.initDrag(r))}),w(2,K0,2,2,"span",17)(3,G0,2,1,"span",17)(4,Z0,1,0,"ng-container",10),_(5,"div",18),w(6,sy,5,8,"button",19)(7,py,3,6,"button",20),y()()}if(n&2){let e=f(4);m(2),d("ngIf",!e.headerFacet&&!e.headerTemplate),m(),d("ngIf",e.headerFacet),m(),d("ngTemplateOutlet",e.headerTemplate),m(2),d("ngIf",e.maximizable),m(),d("ngIf",e.closable)}}function my(n,t){n&1&&re(0)}function fy(n,t){n&1&&re(0)}function gy(n,t){if(n&1&&(_(0,"div",31,4),Ct(2,2),w(3,fy,1,0,"ng-container",10),y()),n&2){let e=f(4);m(3),d("ngTemplateOutlet",e.footerTemplate)}}function _y(n,t){if(n&1&&(w(0,q0,1,0,"div",11)(1,hy,8,5,"div",12),_(2,"div",13,2),Ct(4),w(5,my,1,0,"ng-container",10),y(),w(6,gy,4,1,"div",14)),n&2){let e=f(3);d("ngIf",e.resizable),m(),d("ngIf",e.showHeader),m(),ee(e.contentStyleClass),d("ngClass","p-dialog-content")("ngStyle",e.contentStyle),m(3),d("ngTemplateOutlet",e.contentTemplate),m(),d("ngIf",e.footerFacet||e.footerTemplate)}}function yy(n,t){if(n&1){let e=H();_(0,"div",8,0),L("@animation.start",function(r){E(e);let s=f(2);return O(s.onAnimationStart(r))})("@animation.done",function(r){E(e);let s=f(2);return O(s.onAnimationEnd(r))}),w(2,H0,2,1,"ng-container",9)(3,_y,7,8,"ng-template",null,1,ut),y()}if(n&2){let e=et(4),i=f(2);ee(i.styleClass),d("ngClass",Vo(10,j0,i.rtl,i.draggable,i.resizable,i.maximized))("ngStyle",i.style)("pFocusTrapDisabled",i.focusTrap===!1)("@animation",le(18,z0,qe(15,V0,i.transformOptions,i.transitionOptions))),k("aria-labelledby",i.ariaLabelledBy)("aria-modal",!0),m(2),d("ngIf",i.headlessTemplate)("ngIfElse",e)}}function by(n,t){if(n&1&&(_(0,"div",6),w(1,yy,5,20,"div",7),y()),n&2){let e=f();Qe(e.maskStyle),ee(e.maskStyleClass),d("ngClass",zo(6,L0,[e.modal,e.modal||e.blockScroll,e.position==="left",e.position==="right",e.position==="top",e.position==="topleft"||e.position==="top-left",e.position==="topright"||e.position==="top-right",e.position==="bottom",e.position==="bottomleft"||e.position==="bottom-left",e.position==="bottomright"||e.position==="bottom-right"])),m(),d("ngIf",e.visible)}}var vy=Ms([Si({transform:"{{transform}}",opacity:0}),wn("{{transition}}")]),wy=Ms([wn("{{transition}}",Si({transform:"{{transform}}",opacity:0}))]),rl=(()=>{class n{document;platformId;el;renderer;zone;cd;config;header;draggable=!0;resizable=!0;get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}contentStyle;contentStyleClass;modal=!1;closeOnEscape=!0;dismissableMask=!1;rtl=!1;closable=!0;get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}appendTo;breakpoints;styleClass;maskStyleClass;maskStyle;showHeader=!0;get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}blockScroll=!1;autoZIndex=!0;baseZIndex=0;minX=0;minY=0;focusOnShow=!0;maximizable=!1;keepInViewport=!0;focusTrap=!0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";closeIcon;closeAriaLabel;closeTabindex="0";minimizeIcon;maximizeIcon;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style=c({},e),this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}onShow=new $;onHide=new $;visibleChange=new $;onResizeInit=new $;onResizeEnd=new $;onDragEnd=new $;onMaximize=new $;headerFacet;footerFacet;templates;headerViewChild;contentViewChild;footerViewChild;headerTemplate;contentTemplate;footerTemplate;maximizeIconTemplate;closeIconTemplate;minimizeIconTemplate;headlessTemplate;_visible=!1;maskVisible;container;wrapper;dragging;ariaLabelledBy=this.getAriaLabelledBy();documentDragListener;documentDragEndListener;resizing;documentResizeListener;documentResizeEndListener;documentEscapeListener;maskClickListener;lastPageX;lastPageY;preventVisibleChangePropagation;maximized;preMaximizeContentHeight;preMaximizeContainerWidth;preMaximizeContainerHeight;preMaximizePageX;preMaximizePageY;id=dt();_style={};_position="center";originalStyle;transformOptions="scale(0.7)";styleElement;window;get maximizeLabel(){return this.config.getTranslation(At.ARIA).maximizeLabel}constructor(e,i,r,s,a,o,l){this.document=e,this.platformId=i,this.el=r,this.renderer=s,this.zone=a,this.cd=o,this.config=l,this.window=this.document.defaultView}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template;break;case"maximizeicon":this.maximizeIconTemplate=e.template;break;case"minimizeicon":this.minimizeIconTemplate=e.template;break;case"headless":this.headlessTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}ngOnInit(){this.breakpoints&&this.createStyle()}getAriaLabelledBy(){return this.header!==null?dt()+"_header":null}focus(e=this.contentViewChild.nativeElement){let i=C.getFocusableElement(e,"[autofocus]");if(i){this.zone.runOutsideAngular(()=>{setTimeout(()=>i.focus(),5)});return}let r=C.getFocusableElement(e);r?this.zone.runOutsideAngular(()=>{setTimeout(()=>r.focus(),5)}):this.footerViewChild&&this.focus(this.footerViewChild.nativeElement)}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)})),this.modal&&C.blockBodyScroll()}disableModality(){if(this.wrapper){this.dismissableMask&&this.unbindMaskClickListener();let e=document.querySelectorAll(".p-dialog-mask-scrollblocker");this.modal&&e&&e.length==1&&C.unblockBodyScroll(),this.cd.destroyed||this.cd.detectChanges()}}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?C.blockBodyScroll():C.unblockBodyScroll()),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(Ni.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(ft(this.platformId)&&!this.styleElement){this.styleElement=this.renderer.createElement("style"),this.styleElement.type="text/css",this.renderer.appendChild(this.document.head,this.styleElement);let e="";for(let i in this.breakpoints)e+=`
                        @media screen and (max-width: ${i}) {
                            .p-dialog[${this.id}]:not(.p-dialog-maximized) {
                                width: ${this.breakpoints[i]} !important;
                            }
                        }
                    `;this.renderer.setProperty(this.styleElement,"innerHTML",e)}}initDrag(e){C.hasClass(e.target,"p-dialog-header-icon")||C.hasClass(e.target,"p-dialog-header-close-icon")||C.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",C.addClass(this.document.body,"p-unselectable-text"))}onDrag(e){if(this.dragging){let i=C.getOuterWidth(this.container),r=C.getOuterHeight(this.container),s=e.pageX-this.lastPageX,a=e.pageY-this.lastPageY,o=this.container.getBoundingClientRect(),l=getComputedStyle(this.container),u=parseFloat(l.marginLeft),p=parseFloat(l.marginTop),g=o.left+s-u,b=o.top+a-p,x=C.getViewport();this.container.style.position="fixed",this.keepInViewport?(g>=this.minX&&g+i<x.width&&(this._style.left=`${g}px`,this.lastPageX=e.pageX,this.container.style.left=`${g}px`),b>=this.minY&&b+r<x.height&&(this._style.top=`${b}px`,this.lastPageY=e.pageY,this.container.style.top=`${b}px`)):(this.lastPageX=e.pageX,this.container.style.left=`${g}px`,this.lastPageY=e.pageY,this.container.style.top=`${b}px`)}}endDrag(e){this.dragging&&(this.dragging=!1,C.removeClass(this.document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(e))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,C.addClass(this.document.body,"p-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let i=e.pageX-this.lastPageX,r=e.pageY-this.lastPageY,s=C.getOuterWidth(this.container),a=C.getOuterHeight(this.container),o=C.getOuterHeight(this.contentViewChild?.nativeElement),l=s+i,u=a+r,p=this.container.style.minWidth,g=this.container.style.minHeight,b=this.container.getBoundingClientRect(),x=C.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(l+=i,u+=r),(!p||l>parseInt(p))&&b.left+l<x.width&&(this._style.width=l+"px",this.container.style.width=this._style.width),(!g||u>parseInt(g))&&b.top+u<x.height&&(this.contentViewChild.nativeElement.style.height=o+u-a+"px",this._style.height&&(this._style.height=u+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,C.removeClass(this.document.body,"p-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.documentDragListener||this.zone.runOutsideAngular(()=>{this.documentDragListener=this.renderer.listen(this.window,"mousemove",this.onDrag.bind(this))})}unbindDocumentDragListener(){this.documentDragListener&&(this.documentDragListener(),this.documentDragListener=null)}bindDocumentDragEndListener(){this.documentDragEndListener||this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.renderer.listen(this.window,"mouseup",this.endDrag.bind(this))})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(this.documentDragEndListener(),this.documentDragEndListener=null)}bindDocumentResizeListeners(){!this.documentResizeListener&&!this.documentResizeEndListener&&this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.renderer.listen(this.window,"mousemove",this.onResize.bind(this)),this.documentResizeEndListener=this.renderer.listen(this.window,"mouseup",this.resizeEnd.bind(this))})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(this.documentResizeListener(),this.documentResizeEndListener(),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentEscapeListener=this.renderer.listen(e,"keydown",i=>{i.key=="Escape"&&this.close(i)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.wrapper):C.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container?.parentElement,this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.container?.setAttribute(this.id,""),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&C.addClass(this.document.body,"p-overflow-hidden"),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&C.addClass(this.wrapper,"p-component-overlay-leave");break}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({}),this.cd.markForCheck();break;case"visible":this.onShow.emit({});break}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(C.removeClass(this.document.body,"p-overflow-hidden"),this.document.body.style.removeProperty("--scrollbar-width"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&C.removeClass(this.document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&Ni.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?c({},this.originalStyle):{}}destroyStyle(){this.styleElement&&(this.renderer.removeChild(this.document.head,this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle()}static \u0275fac=function(i){return new(i||n)(D(Kt),D(Et),D(We),D(Ot),D(Bt),D(Xe),D(Tt))};static \u0275cmp=Z({type:n,selectors:[["p-dialog"]],contentQueries:function(i,r,s){if(i&1&&(Me(s,Mr,5),Me(s,ka,5),Me(s,Le,4)),i&2){let a;W(a=Q())&&(r.headerFacet=a.first),W(a=Q())&&(r.footerFacet=a.first),W(a=Q())&&(r.templates=a)}},viewQuery:function(i,r){if(i&1&&(me(M0,5),me(R0,5),me(D0,5)),i&2){let s;W(s=Q())&&(r.headerViewChild=s.first),W(s=Q())&&(r.contentViewChild=s.first),W(s=Q())&&(r.footerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",draggable:[M.HasDecoratorInputTransform,"draggable","draggable",j],resizable:[M.HasDecoratorInputTransform,"resizable","resizable",j],positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:[M.HasDecoratorInputTransform,"modal","modal",j],closeOnEscape:[M.HasDecoratorInputTransform,"closeOnEscape","closeOnEscape",j],dismissableMask:[M.HasDecoratorInputTransform,"dismissableMask","dismissableMask",j],rtl:[M.HasDecoratorInputTransform,"rtl","rtl",j],closable:[M.HasDecoratorInputTransform,"closable","closable",j],responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",maskStyle:"maskStyle",showHeader:[M.HasDecoratorInputTransform,"showHeader","showHeader",j],breakpoint:"breakpoint",blockScroll:[M.HasDecoratorInputTransform,"blockScroll","blockScroll",j],autoZIndex:[M.HasDecoratorInputTransform,"autoZIndex","autoZIndex",j],baseZIndex:[M.HasDecoratorInputTransform,"baseZIndex","baseZIndex",we],minX:[M.HasDecoratorInputTransform,"minX","minX",we],minY:[M.HasDecoratorInputTransform,"minY","minY",we],focusOnShow:[M.HasDecoratorInputTransform,"focusOnShow","focusOnShow",j],maximizable:[M.HasDecoratorInputTransform,"maximizable","maximizable",j],keepInViewport:[M.HasDecoratorInputTransform,"keepInViewport","keepInViewport",j],focusTrap:[M.HasDecoratorInputTransform,"focusTrap","focusTrap",j],transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",visible:"visible",style:"style",position:"position"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},features:[Ge],ngContentSelectors:F0,decls:1,vars:1,consts:[["container",""],["notHeadless",""],["content",""],["titlebar",""],["footer",""],[3,"class","style","ngClass",4,"ngIf"],[3,"ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["class","p-resizable-handle","style","z-index: 90;",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",2,"z-index","90",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["class","p-dialog-title",3,"id",4,"ngIf"],[1,"p-dialog-header-icons"],["role","button","type","button","pRipple","","pButton","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","pRipple","","pButton","",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title",3,"id"],["role","button","type","button","pRipple","","pButton","",3,"click","keydown.enter","ngClass"],["class","p-dialog-header-maximize-icon",3,"ngClass",4,"ngIf"],[4,"ngIf"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],[3,"styleClass",4,"ngIf"],[3,"styleClass"],["type","button","pRipple","","pButton","",3,"click","keydown.enter","ngClass"],["class","p-dialog-header-close-icon",3,"ngClass",4,"ngIf"],[1,"p-dialog-header-close-icon",3,"ngClass"],[1,"p-dialog-footer"]],template:function(i,r){i&1&&(Ht(N0),w(0,by,2,17,"div",5)),i&2&&d("ngIf",r.maskVisible)},dependencies:()=>[He,Be,Ke,Ze,Vh,Wn,ei,ot,gu,_u],styles:[`@layer primeng{.p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translateZ(0)}.p-dialog-maximized{-webkit-transition:none;transition:none;transform:none;width:100vw!important;height:100vh!important;top:0!important;left:0!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}}
`],encapsulation:2,data:{animation:[Ps("animation",[xn("void => visible",[Rs(vy)]),xn("visible => void",[Rs(wy)])])]},changeDetection:0})}return n})(),sl=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,zh,gt,li,ot,gu,_u,Ue]})}return n})();var xy=["overlay"],Iy=["content"],Cy=["*"],Ty=(n,t,e,i,r,s,a,o,l,u,p,g,b,x)=>({"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":n,"p-overlay-center":t,"p-overlay-top":e,"p-overlay-top-start":i,"p-overlay-top-end":r,"p-overlay-bottom":s,"p-overlay-bottom-start":a,"p-overlay-bottom-end":o,"p-overlay-left":l,"p-overlay-left-start":u,"p-overlay-left-end":p,"p-overlay-right":g,"p-overlay-right-start":b,"p-overlay-right-end":x}),Sy=(n,t,e)=>({showTransitionParams:n,hideTransitionParams:t,transform:e}),Ey=n=>({value:"visible",params:n}),Oy=n=>({mode:n}),Ay=n=>({$implicit:n});function ky(n,t){n&1&&re(0)}function Py(n,t){if(n&1){let e=H();_(0,"div",3,1),L("click",function(r){E(e);let s=f(2);return O(s.onOverlayContentClick(r))})("@overlayContentAnimation.start",function(r){E(e);let s=f(2);return O(s.onOverlayContentAnimationStart(r))})("@overlayContentAnimation.done",function(r){E(e);let s=f(2);return O(s.onOverlayContentAnimationDone(r))}),Ct(2),w(3,ky,1,0,"ng-container",4),y()}if(n&2){let e=f(2);ee(e.contentStyleClass),d("ngStyle",e.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",le(11,Ey,sn(7,Sy,e.showTransitionOptions,e.hideTransitionOptions,e.transformOptions[e.modal?e.overlayResponsiveDirection:"default"]))),m(3),d("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",le(15,Ay,le(13,Oy,e.overlayMode)))}}function My(n,t){if(n&1){let e=H();_(0,"div",3,0),L("click",function(){E(e);let r=f();return O(r.onOverlayClick())}),w(2,Py,4,17,"div",2),y()}if(n&2){let e=f();ee(e.styleClass),d("ngStyle",e.style)("ngClass",zo(5,Ty,[e.modal,e.modal&&e.overlayResponsiveDirection==="center",e.modal&&e.overlayResponsiveDirection==="top",e.modal&&e.overlayResponsiveDirection==="top-start",e.modal&&e.overlayResponsiveDirection==="top-end",e.modal&&e.overlayResponsiveDirection==="bottom",e.modal&&e.overlayResponsiveDirection==="bottom-start",e.modal&&e.overlayResponsiveDirection==="bottom-end",e.modal&&e.overlayResponsiveDirection==="left",e.modal&&e.overlayResponsiveDirection==="left-start",e.modal&&e.overlayResponsiveDirection==="left-end",e.modal&&e.overlayResponsiveDirection==="right",e.modal&&e.overlayResponsiveDirection==="right-start",e.modal&&e.overlayResponsiveDirection==="right-end"])),m(2),d("ngIf",e.visible)}}var Ry={provide:Ei,useExisting:oi(()=>Pa),multi:!0},Dy=Ms([Si({transform:"{{transform}}",opacity:0}),wn("{{showTransitionParams}}")]),Ny=Ms([wn("{{hideTransitionParams}}",Si({transform:"{{transform}}",opacity:0}))]),Pa=(()=>{class n{document;platformId;el;renderer;config;overlayService;cd;zone;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(e){this._mode=e}get style(){return fe.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(e){this._style=e}get styleClass(){return fe.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(e){this._styleClass=e}get contentStyle(){return fe.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(e){this._contentStyle=e}get contentStyleClass(){return fe.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(e){this._contentStyleClass=e}get target(){let e=this._target||this.overlayOptions?.target;return e===void 0?"@prev":e}set target(e){this._target=e}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(e){this._appendTo=e}get autoZIndex(){let e=this._autoZIndex||this.overlayOptions?.autoZIndex;return e===void 0?!0:e}set autoZIndex(e){this._autoZIndex=e}get baseZIndex(){let e=this._baseZIndex||this.overlayOptions?.baseZIndex;return e===void 0?0:e}set baseZIndex(e){this._baseZIndex=e}get showTransitionOptions(){let e=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return e===void 0?".12s cubic-bezier(0, 0, 0.2, 1)":e}set showTransitionOptions(e){this._showTransitionOptions=e}get hideTransitionOptions(){let e=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return e===void 0?".1s linear":e}set hideTransitionOptions(e){this._hideTransitionOptions=e}get listener(){return this._listener||this.overlayOptions?.listener}set listener(e){this._listener=e}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(e){this._responsive=e}get options(){return this._options}set options(e){this._options=e}visibleChange=new $;onBeforeShow=new $;onShow=new $;onBeforeHide=new $;onHide=new $;onAnimationStart=new $;onAnimationDone=new $;templates;overlayViewChild;contentViewChild;contentTemplate;_visible=!1;_mode;_style;_styleClass;_contentStyle;_contentStyleClass;_target;_appendTo;_autoZIndex;_baseZIndex;_showTransitionOptions;_hideTransitionOptions;_listener;_responsive;_options;modalVisible=!1;isOverlayClicked=!1;isOverlayContentClicked=!1;scrollHandler;documentClickListener;documentResizeListener;documentKeyboardListener;window;transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"};get modal(){if(ft(this.platformId))return this.mode==="modal"||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return c(c({},this.config?.overlayOptions),this.options)}get overlayResponsiveOptions(){return c(c({},this.overlayOptions?.responsive),this.responsive)}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return C.getTargetElement(this.target,this.el?.nativeElement)}constructor(e,i,r,s,a,o,l,u){this.document=e,this.platformId=i,this.el=r,this.renderer=s,this.config=a,this.overlayService=o,this.cd=l,this.zone=u,this.window=this.document.defaultView}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}show(e,i=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&C.focus(this.targetEl),this.modal&&C.addClass(this.document?.body,"p-overflow-hidden")}hide(e,i=!1){if(this.visible)this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&C.focus(this.targetEl),this.modal&&C.removeClass(this.document?.body,"p-overflow-hidden");else return}alignOverlay(){!this.modal&&C.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(e){this._visible=e,this.visibleChange.emit(e)}onOverlayClick(){this.isOverlayClicked=!0}onOverlayContentClick(e){this.overlayService.add({originalEvent:e,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(e){switch(e.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&Ni.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),C.appendOverlay(this.overlayEl,this.appendTo==="body"?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.modal&&C.addClass(this.overlayEl,"p-component-overlay-leave");break}this.handleEvents("onAnimationStart",e)}onOverlayContentAnimationDone(e){let i=this.overlayEl||e.element.parentElement;switch(e.toState){case"visible":this.show(i,!0),this.bindListeners();break;case"void":this.hide(i,!0),this.unbindListeners(),C.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),Ni.clear(i),this.modalVisible=!1,this.cd.markForCheck();break}this.handleEvents("onAnimationDone",e)}handleEvents(e,i){this[e].emit(i),this.options&&this.options[e]&&this.options[e](i),this.config?.overlayOptions&&(this.config?.overlayOptions)[e]&&(this.config?.overlayOptions)[e](i)}bindListeners(){this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindDocumentKeyboardListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindDocumentKeyboardListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Go(this.targetEl,e=>{(this.listener?this.listener(e,{type:"scroll",mode:this.overlayMode,valid:!0}):!0)&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{let r=!(this.targetEl&&(this.targetEl.isSameNode(e.target)||!this.isOverlayClicked&&this.targetEl.contains(e.target)))&&!this.isOverlayContentClicked;(this.listener?this.listener(e,{type:"outside",mode:this.overlayMode,valid:e.which!==3&&r}):r)&&this.hide(e),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen(this.window,"resize",e=>{(this.listener?this.listener(e,{type:"resize",mode:this.overlayMode,valid:!C.isTouchDevice()}):!C.isTouchDevice())&&this.hide(e,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindDocumentKeyboardListener(){this.documentKeyboardListener||this.zone.runOutsideAngular(()=>{this.documentKeyboardListener=this.renderer.listen(this.window,"keydown",e=>{if(this.overlayOptions.hideOnEscape===!1||e.code!=="Escape")return;(this.listener?this.listener(e,{type:"keydown",mode:this.overlayMode,valid:!C.isTouchDevice()}):!C.isTouchDevice())&&this.zone.run(()=>{this.hide(e,!0)})})})}unbindDocumentKeyboardListener(){this.documentKeyboardListener&&(this.documentKeyboardListener(),this.documentKeyboardListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(C.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),Ni.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}static \u0275fac=function(i){return new(i||n)(D(Kt),D(Et),D(We),D(Ot),D(Tt),D(Ko),D(Xe),D(Bt))};static \u0275cmp=Z({type:n,selectors:[["p-overlay"]],contentQueries:function(i,r,s){if(i&1&&Me(s,Le,4),i&2){let a;W(a=Q())&&(r.templates=a)}},viewQuery:function(i,r){if(i&1&&(me(xy,5),me(Iy,5)),i&2){let s;W(s=Q())&&(r.overlayViewChild=s.first),W(s=Q())&&(r.contentViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[qt([Ry])],ngContentSelectors:Cy,decls:1,vars:1,consts:[["overlay",""],["content",""],[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"click","ngStyle","ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,r){i&1&&(Ht(),w(0,My,3,20,"div",2)),i&2&&d("ngIf",r.modalVisible)},dependencies:[He,Be,Ke,Ze],styles:[`@layer primeng{.p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}}
`],encapsulation:2,data:{animation:[Ps("overlayContentAnimation",[xn(":enter",[Rs(Dy)]),xn(":leave",[Rs(Ny)])])]},changeDetection:0})}return n})(),Bs=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,Ue,Ue]})}return n})();var Fy=["element"],Ly=["content"],jy=["*"],Vy=(n,t,e)=>({"p-scroller":!0,"p-scroller-inline":n,"p-both-scroll":t,"p-horizontal-scroll":e}),yu=(n,t)=>({$implicit:n,options:t}),zy=n=>({"p-scroller-loading":n}),$y=n=>({"p-component-overlay":n}),By=n=>({numCols:n}),Uh=n=>({options:n}),Uy=()=>({styleClass:"p-scroller-loading-icon"}),Hy=(n,t)=>({rows:n,columns:t});function qy(n,t){n&1&&re(0)}function Ky(n,t){if(n&1&&(B(0),w(1,qy,1,0,"ng-container",10),U()),n&2){let e=f(2);m(),d("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",qe(2,yu,e.loadedItems,e.getContentOptions()))}}function Gy(n,t){n&1&&re(0)}function Zy(n,t){if(n&1&&(B(0),w(1,Gy,1,0,"ng-container",10),U()),n&2){let e=t.$implicit,i=t.index,r=f(3);m(),d("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",qe(2,yu,e,r.getOptions(i)))}}function Wy(n,t){if(n&1&&(_(0,"div",11,3),w(2,Zy,2,5,"ng-container",12),y()),n&2){let e=f(2);d("ngClass",le(5,zy,e.d_loading))("ngStyle",e.contentStyle),k("data-pc-section","content"),m(2),d("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function Qy(n,t){if(n&1&&A(0,"div",13),n&2){let e=f(2);d("ngStyle",e.spacerStyle),k("data-pc-section","spacer")}}function Jy(n,t){n&1&&re(0)}function Yy(n,t){if(n&1&&(B(0),w(1,Jy,1,0,"ng-container",10),U()),n&2){let e=t.index,i=f(4);m(),d("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",le(4,Uh,i.getLoaderOptions(e,i.both&&le(2,By,i._numItemsInViewport.cols))))}}function Xy(n,t){if(n&1&&(B(0),w(1,Yy,2,6,"ng-container",15),U()),n&2){let e=f(3);m(),d("ngForOf",e.loaderArr)}}function eb(n,t){n&1&&re(0)}function tb(n,t){if(n&1&&(B(0),w(1,eb,1,0,"ng-container",10),U()),n&2){let e=f(4);m(),d("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",le(3,Uh,Fe(2,Uy)))}}function ib(n,t){n&1&&A(0,"SpinnerIcon",16),n&2&&(d("styleClass","p-scroller-loading-icon pi-spin"),k("data-pc-section","loadingIcon"))}function nb(n,t){if(n&1&&w(0,tb,2,5,"ng-container",6)(1,ib,1,2,"ng-template",null,5,ut),n&2){let e=et(2),i=f(3);d("ngIf",i.loaderIconTemplate)("ngIfElse",e)}}function rb(n,t){if(n&1&&(_(0,"div",14),w(1,Xy,2,1,"ng-container",6)(2,nb,3,2,"ng-template",null,4,ut),y()),n&2){let e=et(3),i=f(2);d("ngClass",le(4,$y,!i.loaderTemplate)),k("data-pc-section","loader"),m(),d("ngIf",i.loaderTemplate)("ngIfElse",e)}}function sb(n,t){if(n&1){let e=H();B(0),_(1,"div",7,1),L("scroll",function(r){E(e);let s=f();return O(s.onContainerScroll(r))}),w(3,Ky,2,5,"ng-container",6)(4,Wy,3,7,"ng-template",null,2,ut)(6,Qy,1,2,"div",8)(7,rb,4,6,"div",9),y(),U()}if(n&2){let e=et(5),i=f();m(),ee(i._styleClass),d("ngStyle",i._style)("ngClass",sn(12,Vy,i.inline,i.both,i.horizontal)),k("id",i._id)("tabindex",i.tabindex)("data-pc-name","scroller")("data-pc-section","root"),m(2),d("ngIf",i.contentTemplate)("ngIfElse",e),m(3),d("ngIf",i._showSpacer),m(),d("ngIf",!i.loaderDisabled&&i._showLoader&&i.d_loading)}}function ab(n,t){n&1&&re(0)}function ob(n,t){if(n&1&&(B(0),w(1,ab,1,0,"ng-container",10),U()),n&2){let e=f(2);m(),d("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",qe(5,yu,e.items,qe(2,Hy,e._items,e.loadedColumns)))}}function lb(n,t){if(n&1&&(Ct(0),w(1,ob,2,8,"ng-container",17)),n&2){let e=f();m(),d("ngIf",e.contentTemplate)}}var al=(()=>{class n{document;platformId;renderer;cd;zone;get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get step(){return this._step}set step(e){this._step=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=e}get inline(){return this._inline}set inline(e){this._inline=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&typeof e=="object"&&Object.entries(e).forEach(([i,r])=>this[`_${i}`]!==r&&(this[`_${i}`]=r))}onLazyLoad=new $;onScroll=new $;onScrollIndexChange=new $;elementViewChild;contentViewChild;templates;_id;_style;_styleClass;_tabindex=0;_items;_itemSize=0;_scrollHeight;_scrollWidth;_orientation="vertical";_step=0;_delay=0;_resizeDelay=10;_appendOnly=!1;_inline=!1;_lazy=!1;_disabled=!1;_loaderDisabled=!1;_columns;_showSpacer=!0;_showLoader=!1;_numToleratedItems;_loading;_autoSize=!1;_trackBy;_options;d_loading=!1;d_numToleratedItems;contentEl;contentTemplate;itemTemplate;loaderTemplate;loaderIconTemplate;first=0;last=0;page=0;isRangeChanged=!1;numItemsInViewport=0;lastScrollPos=0;lazyLoadState={};loaderArr=[];spacerStyle={};contentStyle={};scrollTimeout;resizeTimeout;initialized=!1;windowResizeListener;defaultWidth;defaultHeight;defaultContentWidth;defaultContentHeight;get vertical(){return this._orientation==="vertical"}get horizontal(){return this._orientation==="horizontal"}get both(){return this._orientation==="both"}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}constructor(e,i,r,s,a){this.document=e,this.platformId=i,this.renderer=r,this.cd=s,this.zone=a}ngOnInit(){this.setInitialState()}ngOnChanges(e){let i=!1;if(e.loading){let{previousValue:r,currentValue:s}=e.loading;this.lazy&&r!==s&&s!==this.d_loading&&(this.d_loading=s,i=!0)}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){let{previousValue:r,currentValue:s}=e.numToleratedItems;r!==s&&s!==this.d_numToleratedItems&&(this.d_numToleratedItems=s)}if(e.options){let{previousValue:r,currentValue:s}=e.options;this.lazy&&r?.loading!==s?.loading&&s?.loading!==this.d_loading&&(this.d_loading=s.loading,i=!0),r?.numToleratedItems!==s?.numToleratedItems&&s?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=s.numToleratedItems)}this.initialized&&!i&&(e.items?.previousValue?.length!==e.items?.currentValue?.length||e.itemSize||e.scrollHeight||e.scrollWidth)&&(this.init(),this.calculateAutoSize())}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}ngAfterViewInit(){Promise.resolve().then(()=>{this.viewInit()})}ngAfterViewChecked(){this.initialized||this.viewInit()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){ft(this.platformId)&&!this.initialized&&C.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.defaultWidth=C.getWidth(this.elementViewChild?.nativeElement),this.defaultHeight=C.getHeight(this.elementViewChild?.nativeElement),this.defaultContentWidth=C.getWidth(this.contentEl),this.defaultContentHeight=C.getHeight(this.contentEl),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.bindResizeListener(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||C.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(e){return Math.floor(((e??this.first)+this.d_numToleratedItems*4)/(this._step||1))}isPageChanged(e){return this._step?this.page!==this.getPageByFirst(e??this.first):!0}scrollTo(e){this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,i="auto"){if(this.both?e.every(s=>s>-1):e>-1){let s=this.first,{scrollTop:a=0,scrollLeft:o=0}=this.elementViewChild?.nativeElement,{numToleratedItems:l}=this.calculateNumItems(),u=this.getContentPosition(),p=this.itemSize,g=(T=0,F)=>T<=F?0:T,b=(T,F,q)=>T*F+q,x=(T=0,F=0)=>this.scrollTo({left:T,top:F,behavior:i}),I=this.both?{rows:0,cols:0}:0,P=!1,S=!1;this.both?(I={rows:g(e[0],l[0]),cols:g(e[1],l[1])},x(b(I.cols,p[1],u.left),b(I.rows,p[0],u.top)),S=this.lastScrollPos.top!==a||this.lastScrollPos.left!==o,P=I.rows!==s.rows||I.cols!==s.cols):(I=g(e,l),this.horizontal?x(b(I,p,u.left),a):x(o,b(I,p,u.top)),S=this.lastScrollPos!==(this.horizontal?o:a),P=I!==s),this.isRangeChanged=P,S&&(this.first=I)}}scrollInView(e,i,r="auto"){if(i){let{first:s,viewport:a}=this.getRenderedRange(),o=(p=0,g=0)=>this.scrollTo({left:p,top:g,behavior:r}),l=i==="to-start",u=i==="to-end";if(l){if(this.both)a.first.rows-s.rows>e[0]?o(a.first.cols*this._itemSize[1],(a.first.rows-1)*this._itemSize[0]):a.first.cols-s.cols>e[1]&&o((a.first.cols-1)*this._itemSize[1],a.first.rows*this._itemSize[0]);else if(a.first-s>e){let p=(a.first-1)*this._itemSize;this.horizontal?o(p,0):o(0,p)}}else if(u){if(this.both)a.last.rows-s.rows<=e[0]+1?o(a.first.cols*this._itemSize[1],(a.first.rows+1)*this._itemSize[0]):a.last.cols-s.cols<=e[1]+1&&o((a.first.cols+1)*this._itemSize[1],a.first.rows*this._itemSize[0]);else if(a.last-s<=e+1){let p=(a.first+1)*this._itemSize;this.horizontal?o(p,0):o(0,p)}}}else this.scrollToIndex(e,r)}getRenderedRange(){let e=(s,a)=>a||s?Math.floor(s/(a||s)):0,i=this.first,r=0;if(this.elementViewChild?.nativeElement){let{scrollTop:s,scrollLeft:a}=this.elementViewChild.nativeElement;if(this.both)i={rows:e(s,this._itemSize[0]),cols:e(a,this._itemSize[1])},r={rows:i.rows+this.numItemsInViewport.rows,cols:i.cols+this.numItemsInViewport.cols};else{let o=this.horizontal?a:s;i=e(o,this._itemSize),r=i+this.numItemsInViewport}}return{first:this.first,last:this.last,viewport:{first:i,last:r}}}calculateNumItems(){let e=this.getContentPosition(),i=(this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0)||0,r=(this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0)||0,s=(u,p)=>p||u?Math.ceil(u/(p||u)):0,a=u=>Math.ceil(u/2),o=this.both?{rows:s(r,this._itemSize[0]),cols:s(i,this._itemSize[1])}:s(this.horizontal?i:r,this._itemSize),l=this.d_numToleratedItems||(this.both?[a(o.rows),a(o.cols)]:a(o));return{numItemsInViewport:o,numToleratedItems:l}}calculateOptions(){let{numItemsInViewport:e,numToleratedItems:i}=this.calculateNumItems(),r=(o,l,u,p=!1)=>this.getLast(o+l+(o<u?2:3)*u,p),s=this.first,a=this.both?{rows:r(this.first.rows,e.rows,i[0]),cols:r(this.first.cols,e.cols,i[1],!0)}:r(this.first,e,i);this.last=a,this.numItemsInViewport=e,this.d_numToleratedItems=i,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:s.cols}:0:s,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto",this.contentEl.style.position="relative",this.elementViewChild.nativeElement.style.contain="none";let[e,i]=[C.getWidth(this.contentEl),C.getHeight(this.contentEl)];e!==this.defaultContentWidth&&(this.elementViewChild.nativeElement.style.width=""),i!==this.defaultContentHeight&&(this.elementViewChild.nativeElement.style.height="");let[r,s]=[C.getWidth(this.elementViewChild.nativeElement),C.getHeight(this.elementViewChild.nativeElement)];(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=r<this.defaultWidth?r+"px":this._scrollWidth||this.defaultWidth+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=s<this.defaultHeight?s+"px":this._scrollHeight||this.defaultHeight+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth="",this.contentEl.style.position="",this.elementViewChild.nativeElement.style.contain=""}})}getLast(e=0,i=!1){return this._items?Math.min(i?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){let e=getComputedStyle(this.contentEl),i=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),r=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),s=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),a=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:i,right:r,top:s,bottom:a,x:i+r,y:s+a}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){let e=this.elementViewChild.nativeElement.parentElement.parentElement,i=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,s=(a,o)=>this.elementViewChild.nativeElement.style[a]=o;this.both||this.horizontal?(s("height",r),s("width",i)):s("height",r)}}setSpacerSize(){if(this._items){let e=this.getContentPosition(),i=(r,s,a,o=0)=>this.spacerStyle=v(c({},this.spacerStyle),{[`${r}`]:(s||[]).length*a+o+"px"});this.both?(i("height",this._items,this._itemSize[0],e.y),i("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?i("width",this._columns||this._items,this._itemSize,e.x):i("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl&&!this._appendOnly){let i=e?e.first:this.first,r=(a,o)=>a*o,s=(a=0,o=0)=>this.contentStyle=v(c({},this.contentStyle),{transform:`translate3d(${a}px, ${o}px, 0)`});if(this.both)s(r(i.cols,this._itemSize[1]),r(i.rows,this._itemSize[0]));else{let a=r(i,this._itemSize);this.horizontal?s(a,0):s(0,a)}}}onScrollPositionChange(e){let i=e.target,r=this.getContentPosition(),s=(S,T)=>S?S>T?S-T:S:0,a=(S,T)=>T||S?Math.floor(S/(T||S)):0,o=(S,T,F,q,X,K)=>S<=X?X:K?F-q-X:T+X-1,l=(S,T,F,q,X,K,J)=>S<=K?0:Math.max(0,J?S<T?F:S-K:S>T?F:S-2*K),u=(S,T,F,q,X,K=!1)=>{let J=T+q+2*X;return S>=X&&(J+=X+1),this.getLast(J,K)},p=s(i.scrollTop,r.top),g=s(i.scrollLeft,r.left),b=this.both?{rows:0,cols:0}:0,x=this.last,I=!1,P=this.lastScrollPos;if(this.both){let S=this.lastScrollPos.top<=p,T=this.lastScrollPos.left<=g;if(!this._appendOnly||this._appendOnly&&(S||T)){let F={rows:a(p,this._itemSize[0]),cols:a(g,this._itemSize[1])},q={rows:o(F.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],S),cols:o(F.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],T)};b={rows:l(F.rows,q.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],S),cols:l(F.cols,q.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],T)},x={rows:u(F.rows,b.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:u(F.cols,b.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},I=b.rows!==this.first.rows||x.rows!==this.last.rows||b.cols!==this.first.cols||x.cols!==this.last.cols||this.isRangeChanged,P={top:p,left:g}}}else{let S=this.horizontal?g:p,T=this.lastScrollPos<=S;if(!this._appendOnly||this._appendOnly&&T){let F=a(S,this._itemSize),q=o(F,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,T);b=l(F,q,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,T),x=u(F,b,this.last,this.numItemsInViewport,this.d_numToleratedItems),I=b!==this.first||x!==this.last||this.isRangeChanged,P=S}}return{first:b,last:x,isRangeChanged:I,scrollPos:P}}onScrollChange(e){let{first:i,last:r,isRangeChanged:s,scrollPos:a}=this.onScrollPositionChange(e);if(s){let o={first:i,last:r};if(this.setContentPosition(o),this.first=i,this.last=r,this.lastScrollPos=a,this.handleEvents("onScrollIndexChange",o),this._lazy&&this.isPageChanged(i)){let l={first:this._step?Math.min(this.getPageByFirst(i)*this._step,this.items.length-this._step):i,last:Math.min(this._step?(this.getPageByFirst(i)+1)*this._step:r,this.items.length)};(this.lazyLoadState.first!==l.first||this.lazyLoadState.last!==l.last)&&this.handleEvents("onLazyLoad",l),this.lazyLoadState=l}}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay&&this.isPageChanged()){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){let{isRangeChanged:i}=this.onScrollPositionChange(e);(i||(this._step?this.isPageChanged():!1))&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||this._loading===void 0)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(e)}bindResizeListener(){ft(this.platformId)&&(this.windowResizeListener||this.zone.runOutsideAngular(()=>{let e=this.document.defaultView,i=C.isTouchDevice()?"orientationchange":"resize";this.windowResizeListener=this.renderer.listen(e,i,this.onWindowResize.bind(this))}))}unbindResizeListener(){this.windowResizeListener&&(this.windowResizeListener(),this.windowResizeListener=null)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(C.isVisible(this.elementViewChild?.nativeElement)){let[e,i]=[C.getWidth(this.elementViewChild?.nativeElement),C.getHeight(this.elementViewChild?.nativeElement)],[r,s]=[e!==this.defaultWidth,i!==this.defaultHeight];(this.both?r||s:this.horizontal?r:this.vertical?s:!1)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=i,this.defaultContentWidth=C.getWidth(this.contentEl),this.defaultContentHeight=C.getHeight(this.contentEl),this.init()})}},this._resizeDelay)}handleEvents(e,i){return this.options&&this.options[e]?this.options[e](i):this[e].emit(i)}getContentOptions(){return{contentStyleClass:`p-scroller-content ${this.d_loading?"p-scroller-loading":""}`,items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,i)=>this.getLoaderOptions(e,i),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){let i=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:i,first:r===0,last:r===i-1,even:r%2===0,odd:r%2!==0}}getLoaderOptions(e,i){let r=this.loaderArr.length;return c({index:e,count:r,first:e===0,last:e===r-1,even:e%2===0,odd:e%2!==0},i)}static \u0275fac=function(i){return new(i||n)(D(Kt),D(Et),D(Ot),D(Xe),D(Bt))};static \u0275cmp=Z({type:n,selectors:[["p-scroller"]],contentQueries:function(i,r,s){if(i&1&&Me(s,Le,4),i&2){let a;W(a=Q())&&(r.templates=a)}},viewQuery:function(i,r){if(i&1&&(me(Fy,5),me(Ly,5)),i&2){let s;W(s=Q())&&(r.elementViewChild=s.first),W(s=Q())&&(r.contentViewChild=s.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[As],ngContentSelectors:jy,decls:3,vars:2,consts:[["disabledContainer",""],["element",""],["buildInContent",""],["content",""],["buildInLoader",""],["buildInLoaderIcon",""],[4,"ngIf","ngIfElse"],[3,"scroll","ngStyle","ngClass"],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],[4,"ngFor","ngForOf"],[3,"styleClass"],[4,"ngIf"]],template:function(i,r){if(i&1&&(Ht(),w(0,sb,8,16,"ng-container",6)(1,lb,2,1,"ng-template",null,0,ut)),i&2){let s=et(2);d("ngIf",!r._disabled)("ngIfElse",s)}},dependencies:()=>[He,vt,Be,Ke,Ze,pu],styles:[`@layer primeng{p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{scale:2}.p-scroller-inline .p-scroller-content{position:static}}
`],encapsulation:2})}return n})(),Us=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,Ue,pu,Ue]})}return n})();var Xn=(()=>{class n{platformId;el;zone;config;renderer;viewContainer;tooltipPosition;tooltipEvent="hover";appendTo;positionStyle;tooltipStyleClass;tooltipZIndex;escape=!0;showDelay;hideDelay;life;positionTop;positionLeft;autoHide=!0;fitContent=!0;hideOnEscape=!0;content;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}tooltipOptions;_tooltipOptions={tooltipLabel:null,tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",positionStyle:null,tooltipStyleClass:null,tooltipZIndex:"auto",escape:!0,disabled:null,showDelay:null,hideDelay:null,positionTop:null,positionLeft:null,life:null,autoHide:!0,hideOnEscape:!0,id:dt()+"_tooltip"};_disabled;container;styleClass;tooltipText;showTimeout;hideTimeout;active;mouseEnterListener;mouseLeaveListener;containerMouseleaveListener;clickListener;focusListener;blurListener;scrollHandler;resizeListener;constructor(e,i,r,s,a,o){this.platformId=e,this.el=i,this.zone=r,this.config=s,this.renderer=a,this.viewContainer=o}ngAfterViewInit(){ft(this.platformId)&&this.zone.runOutsideAngular(()=>{if(this.getOption("tooltipEvent")==="hover")this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener);else if(this.getOption("tooltipEvent")==="focus"){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.content&&(this.setOption({tooltipLabel:e.content.currentValue}),this.active&&(e.content.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.autoHide&&this.setOption({autoHide:e.autoHide.currentValue}),e.id&&this.setOption({id:e.id.currentValue}),e.tooltipOptions&&(this._tooltipOptions=c(c({},this._tooltipOptions),e.tooltipOptions.currentValue),this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.isAutoHide()?this.deactivate():!(C.hasClass(e.relatedTarget,"p-tooltip")||C.hasClass(e.relatedTarget,"p-tooltip-text")||C.hasClass(e.relatedTarget,"p-tooltip-arrow"))&&this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onInputClick(e){this.deactivate()}onPressEscape(){this.hideOnEscape&&this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div"),this.container.setAttribute("id",this.getOption("id")),this.container.setAttribute("role","tooltip");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),this.getOption("appendTo")==="body"?document.body.appendChild(this.container):this.getOption("appendTo")==="target"?C.appendChild(this.container,this.el.nativeElement):C.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()?this.container.style.pointerEvents="none":(this.container.style.pointerEvents="unset",this.bindContainerMouseleaveListener())}bindContainerMouseleaveListener(){if(!this.containerMouseleaveListener){let e=this.container??this.container.nativeElement;this.containerMouseleaveListener=this.renderer.listen(e,"mouseleave",i=>{this.deactivate()})}}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),C.fadeIn(this.container,250),this.getOption("tooltipZIndex")==="auto"?Ni.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){this.getOption("tooltipZIndex")==="auto"&&Ni.clear(this.container),this.remove()}updateText(){let e=this.getOption("tooltipLabel");if(e instanceof gh){let i=this.viewContainer.createEmbeddedView(e);i.detectChanges(),i.rootNodes.forEach(r=>this.tooltipText.appendChild(r))}else this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(e))):this.tooltipText.innerHTML=e}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break}}getHostOffset(){if(this.getOption("appendTo")==="body"||this.getOption("appendTo")==="target"){let e=this.el.nativeElement.getBoundingClientRect(),i=e.left+C.getWindowScrollLeft(),r=e.top+C.getWindowScrollTop();return{left:i,top:r}}else return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),i=e.left+C.getOuterWidth(this.el.nativeElement),r=e.top+(C.getOuterHeight(this.el.nativeElement)-C.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),i=e.left-C.getOuterWidth(this.container),r=e.top+(C.getOuterHeight(this.el.nativeElement)-C.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),i=e.left+(C.getOuterWidth(this.el.nativeElement)-C.getOuterWidth(this.container))/2,r=e.top-C.getOuterHeight(this.container);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),i=e.left+(C.getOuterWidth(this.el.nativeElement)-C.getOuterWidth(this.container))/2,r=e.top+C.getOuterHeight(this.el.nativeElement);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions=c(c({},this._tooltipOptions),e)}getOption(e){return this._tooltipOptions[e]}getTarget(e){return C.hasClass(e,"p-inputwrapper")?C.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let i="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?i+" "+this.getOption("tooltipStyleClass"):i}isOutOfBounds(){let e=this.container.getBoundingClientRect(),i=e.top,r=e.left,s=C.getOuterWidth(this.container),a=C.getOuterHeight(this.container),o=C.getViewport();return r+s>o.width||r<0||i<0||i+a>o.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Go(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if(this.getOption("tooltipEvent")==="hover")this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if(this.getOption("tooltipEvent")==="focus"){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&(this.getOption("appendTo")==="body"?document.body.removeChild(this.container):this.getOption("appendTo")==="target"?this.el.nativeElement.removeChild(this.container):C.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Ni.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}static \u0275fac=function(i){return new(i||n)(D(Et),D(We),D(Bt),D(Tt),D(Ot),D(jo))};static \u0275dir=Aa({type:n,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],hostBindings:function(i,r){i&1&&L("keydown.escape",function(a){return r.onPressEscape(a)},!1,fh)},inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:[M.HasDecoratorInputTransform,"escape","escape",j],showDelay:[M.HasDecoratorInputTransform,"showDelay","showDelay",we],hideDelay:[M.HasDecoratorInputTransform,"hideDelay","hideDelay",we],life:[M.HasDecoratorInputTransform,"life","life",we],positionTop:[M.HasDecoratorInputTransform,"positionTop","positionTop",we],positionLeft:[M.HasDecoratorInputTransform,"positionLeft","positionLeft",we],autoHide:[M.HasDecoratorInputTransform,"autoHide","autoHide",j],fitContent:[M.HasDecoratorInputTransform,"fitContent","fitContent",j],hideOnEscape:[M.HasDecoratorInputTransform,"hideOnEscape","hideOnEscape",j],content:[M.None,"pTooltip","content"],disabled:[M.None,"tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[Ge,As]})}return n})(),In=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue]})}return n})();var bu=(()=>{class n extends at{static \u0275fac=(()=>{let e;return function(r){return(e||(e=rt(n)))(r||n)}})();static \u0275cmp=Z({type:n,selectors:[["BlankIcon"]],standalone:!0,features:[st,xe],decls:2,vars:0,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg","v-bind","pti()"],["width","1","height","1","fill","currentColor","fill-opacity","0"]],template:function(i,r){i&1&&(nt(),_(0,"svg",0),A(1,"rect",1),y())},encapsulation:2})}return n})();var Hs=(()=>{class n extends at{static \u0275fac=(()=>{let e;return function(r){return(e||(e=rt(n)))(r||n)}})();static \u0275cmp=Z({type:n,selectors:[["ChevronDownIcon"]],standalone:!0,features:[st,xe],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z","fill","currentColor"]],template:function(i,r){i&1&&(nt(),_(0,"svg",0),A(1,"path",1),y()),i&2&&(ee(r.getClassNames()),k("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();var qs=(()=>{class n extends at{pathId;ngOnInit(){this.pathId="url(#"+dt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=rt(n)))(r||n)}})();static \u0275cmp=Z({type:n,selectors:[["SearchIcon"]],standalone:!0,features:[st,xe],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M2.67602 11.0265C3.6661 11.688 4.83011 12.0411 6.02086 12.0411C6.81149 12.0411 7.59438 11.8854 8.32483 11.5828C8.87005 11.357 9.37808 11.0526 9.83317 10.6803L12.9769 13.8241C13.0323 13.8801 13.0983 13.9245 13.171 13.9548C13.2438 13.985 13.3219 14.0003 13.4007 14C13.4795 14.0003 13.5575 13.985 13.6303 13.9548C13.7031 13.9245 13.7691 13.8801 13.8244 13.8241C13.9367 13.7116 13.9998 13.5592 13.9998 13.4003C13.9998 13.2414 13.9367 13.089 13.8244 12.9765L10.6807 9.8328C11.053 9.37773 11.3573 8.86972 11.5831 8.32452C11.8857 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0268 2.67572C10.3652 1.68564 9.42494 0.913972 8.32483 0.45829C7.22472 0.00260857 6.01418 -0.116618 4.84631 0.115686C3.67844 0.34799 2.60568 0.921393 1.76369 1.76338C0.921698 2.60537 0.348296 3.67813 0.115991 4.84601C-0.116313 6.01388 0.00291375 7.22441 0.458595 8.32452C0.914277 9.42464 1.68595 10.3649 2.67602 11.0265ZM3.35565 2.0158C4.14456 1.48867 5.07206 1.20731 6.02086 1.20731C7.29317 1.20731 8.51338 1.71274 9.41304 2.6124C10.3127 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5368 7.88088 10.0096 8.66978C9.48251 9.45868 8.73328 10.0736 7.85669 10.4367C6.98011 10.7997 6.01554 10.8947 5.08496 10.7096C4.15439 10.5245 3.2996 10.0676 2.62869 9.39674C1.95778 8.72583 1.50089 7.87104 1.31579 6.94046C1.13068 6.00989 1.22568 5.04532 1.58878 4.16874C1.95187 3.29215 2.56675 2.54292 3.35565 2.0158Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(nt(),_(0,"svg",0)(1,"g"),A(2,"path",1),y(),_(3,"defs")(4,"clipPath",2),A(5,"rect",3),y()()()),i&2&&(ee(r.getClassNames()),k("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),m(),k("clip-path",r.pathId),m(3),d("id",r.pathId))},encapsulation:2})}return n})();var Ma=n=>({height:n}),cb=(n,t,e)=>({"p-dropdown-item":!0,"p-highlight":n,"p-disabled":t,"p-focus":e}),wu=n=>({$implicit:n});function ub(n,t){n&1&&A(0,"CheckIcon",4),n&2&&d("styleClass","p-dropdown-check-icon")}function db(n,t){n&1&&A(0,"BlankIcon",4),n&2&&d("styleClass","p-dropdown-blank-icon")}function pb(n,t){if(n&1&&(B(0),w(1,ub,1,1,"CheckIcon",3)(2,db,1,1,"BlankIcon",3),U()),n&2){let e=f();m(),d("ngIf",e.selected),m(),d("ngIf",!e.selected)}}function hb(n,t){if(n&1&&(_(0,"span"),N(1),y()),n&2){let e,i=f();m(),ye((e=i.label)!==null&&e!==void 0?e:"empty")}}function mb(n,t){n&1&&re(0)}var fb=["container"],gb=["filter"],_b=["focusInput"],yb=["editableInput"],bb=["items"],vb=["scroller"],wb=["overlay"],xb=["firstHiddenFocusableEl"],Ib=["lastHiddenFocusableEl"],qh=n=>({options:n}),Cb=n=>({"p-variant-filled":n}),Kh=(n,t)=>({$implicit:n,options:t}),Tb=()=>({});function Sb(n,t){if(n&1&&(B(0),N(1),U()),n&2){let e=f(2);m(),ye(e.label()==="p-emptylabel"?"\xA0":e.label())}}function Eb(n,t){if(n&1&&re(0,25),n&2){let e=f(2);d("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",le(2,wu,e.selectedOption))}}function Ob(n,t){if(n&1&&(_(0,"span"),N(1),y()),n&2){let e=f(3);m(),ye(e.label()==="p-emptylabel"?"\xA0":e.placeholder())}}function Ab(n,t){if(n&1&&w(0,Ob,2,1,"span",18),n&2){let e=f(2);d("ngIf",e.displayPlaceholder())}}function kb(n,t){if(n&1){let e=H();_(0,"span",23,3),L("focus",function(r){E(e);let s=f();return O(s.onInputFocus(r))})("blur",function(r){E(e);let s=f();return O(s.onInputBlur(r))})("keydown",function(r){E(e);let s=f();return O(s.onKeyDown(r))}),w(2,Sb,2,1,"ng-container",20)(3,Eb,1,4,"ng-container",24)(4,Ab,1,1,"ng-template",null,4,ut),y()}if(n&2){let e,i=et(5),r=f();d("ngClass",r.inputClass)("pTooltip",r.tooltip)("tooltipPosition",r.tooltipPosition)("positionStyle",r.tooltipPositionStyle)("tooltipStyleClass",r.tooltipStyleClass)("autofocus",r.autofocus),k("aria-disabled",r.disabled)("id",r.inputId)("aria-label",r.ariaLabel||(r.label()==="p-emptylabel"?void 0:r.label()))("aria-labelledby",r.ariaLabelledBy)("aria-haspopup","listbox")("aria-expanded",(e=r.overlayVisible)!==null&&e!==void 0?e:!1)("aria-controls",r.overlayVisible?r.id+"_list":null)("tabindex",r.disabled?-1:r.tabindex)("aria-activedescendant",r.focused?r.focusedOptionId:void 0)("aria-required",r.required)("required",r.required),m(2),d("ngIf",!r.selectedItemTemplate)("ngIfElse",i),m(),d("ngIf",r.selectedItemTemplate&&r.selectedOption)}}function Pb(n,t){if(n&1){let e=H();_(0,"input",26,5),L("input",function(r){E(e);let s=f();return O(s.onEditableInput(r))})("keydown",function(r){E(e);let s=f();return O(s.onKeyDown(r))})("focus",function(r){E(e);let s=f();return O(s.onInputFocus(r))})("blur",function(r){E(e);let s=f();return O(s.onInputBlur(r))}),y()}if(n&2){let e=f();d("ngClass",e.inputClass)("disabled",e.disabled)("autofocus",e.autofocus),k("maxlength",e.maxlength)("placeholder",e.modelValue()===void 0||e.modelValue()===null?e.placeholder():void 0)("aria-label",e.ariaLabel||(e.label()==="p-emptylabel"?void 0:e.label()))("aria-activedescendant",e.focused?e.focusedOptionId:void 0)}}function Mb(n,t){if(n&1){let e=H();_(0,"TimesIcon",29),L("click",function(r){E(e);let s=f(2);return O(s.clear(r))}),y()}n&2&&(d("styleClass","p-dropdown-clear-icon"),k("data-pc-section","clearicon"))}function Rb(n,t){}function Db(n,t){n&1&&w(0,Rb,0,0,"ng-template")}function Nb(n,t){if(n&1){let e=H();_(0,"span",30),L("click",function(r){E(e);let s=f(2);return O(s.clear(r))}),w(1,Db,1,0,null,31),y()}if(n&2){let e=f(2);k("data-pc-section","clearicon"),m(),d("ngTemplateOutlet",e.clearIconTemplate)}}function Fb(n,t){if(n&1&&(B(0),w(1,Mb,1,2,"TimesIcon",27)(2,Nb,2,2,"span",28),U()),n&2){let e=f();m(),d("ngIf",!e.clearIconTemplate),m(),d("ngIf",e.clearIconTemplate)}}function Lb(n,t){n&1&&re(0)}function jb(n,t){if(n&1&&(B(0),w(1,Lb,1,0,"ng-container",31),U()),n&2){let e=f(2);m(),d("ngTemplateOutlet",e.loadingIconTemplate)}}function Vb(n,t){if(n&1&&A(0,"span",34),n&2){let e=f(3);d("ngClass","p-dropdown-trigger-icon pi-spin "+e.loadingIcon)}}function zb(n,t){n&1&&A(0,"span",35),n&2&&ee("p-dropdown-trigger-icon pi pi-spinner pi-spin")}function $b(n,t){if(n&1&&(B(0),w(1,Vb,1,1,"span",32)(2,zb,1,2,"span",33),U()),n&2){let e=f(2);m(),d("ngIf",e.loadingIcon),m(),d("ngIf",!e.loadingIcon)}}function Bb(n,t){if(n&1&&(B(0),w(1,jb,2,1,"ng-container",18)(2,$b,3,2,"ng-container",18),U()),n&2){let e=f();m(),d("ngIf",e.loadingIconTemplate),m(),d("ngIf",!e.loadingIconTemplate)}}function Ub(n,t){if(n&1&&A(0,"span",39),n&2){let e=f(3);d("ngClass",e.dropdownIcon)}}function Hb(n,t){n&1&&A(0,"ChevronDownIcon",40),n&2&&d("styleClass","p-dropdown-trigger-icon")}function qb(n,t){if(n&1&&(B(0),w(1,Ub,1,1,"span",37)(2,Hb,1,1,"ChevronDownIcon",38),U()),n&2){let e=f(2);m(),d("ngIf",e.dropdownIcon),m(),d("ngIf",!e.dropdownIcon)}}function Kb(n,t){}function Gb(n,t){n&1&&w(0,Kb,0,0,"ng-template")}function Zb(n,t){if(n&1&&(_(0,"span",41),w(1,Gb,1,0,null,31),y()),n&2){let e=f(2);m(),d("ngTemplateOutlet",e.dropdownIconTemplate)}}function Wb(n,t){if(n&1&&w(0,qb,3,2,"ng-container",18)(1,Zb,2,1,"span",36),n&2){let e=f();d("ngIf",!e.dropdownIconTemplate),m(),d("ngIf",e.dropdownIconTemplate)}}function Qb(n,t){n&1&&re(0)}function Jb(n,t){n&1&&re(0)}function Yb(n,t){if(n&1&&(B(0),w(1,Jb,1,0,"ng-container",48),U()),n&2){let e=f(3);m(),d("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",le(2,qh,e.filterOptions))}}function Xb(n,t){n&1&&A(0,"SearchIcon",40),n&2&&d("styleClass","p-dropdown-filter-icon")}function ev(n,t){}function tv(n,t){n&1&&w(0,ev,0,0,"ng-template")}function iv(n,t){if(n&1&&(_(0,"span",52),w(1,tv,1,0,null,31),y()),n&2){let e=f(4);m(),d("ngTemplateOutlet",e.filterIconTemplate)}}function nv(n,t){if(n&1){let e=H();_(0,"div",49)(1,"input",50,10),L("input",function(r){E(e);let s=f(3);return O(s.onFilterInputChange(r))})("keydown",function(r){E(e);let s=f(3);return O(s.onFilterKeyDown(r))})("blur",function(r){E(e);let s=f(3);return O(s.onFilterBlur(r))}),y(),w(3,Xb,1,1,"SearchIcon",38)(4,iv,2,1,"span",51),y()}if(n&2){let e=f(3);m(),d("value",e._filterValue()||"")("ngClass",le(8,Cb,e.variant==="filled"||e.config.inputStyle()==="filled")),k("placeholder",e.filterPlaceholder)("aria-owns",e.id+"_list")("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.focusedOptionId),m(2),d("ngIf",!e.filterIconTemplate),m(),d("ngIf",e.filterIconTemplate)}}function rv(n,t){if(n&1){let e=H();_(0,"div",47),L("click",function(r){return E(e),O(r.stopPropagation())}),w(1,Yb,2,4,"ng-container",20)(2,nv,5,10,"ng-template",null,9,ut),y()}if(n&2){let e=et(3),i=f(2);m(),d("ngIf",i.filterTemplate)("ngIfElse",e)}}function sv(n,t){n&1&&re(0)}function av(n,t){if(n&1&&w(0,sv,1,0,"ng-container",48),n&2){let e=t.$implicit,i=t.options;f(2);let r=et(9);d("ngTemplateOutlet",r)("ngTemplateOutletContext",qe(2,Kh,e,i))}}function ov(n,t){n&1&&re(0)}function lv(n,t){if(n&1&&w(0,ov,1,0,"ng-container",48),n&2){let e=t.options,i=f(4);d("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",le(2,qh,e))}}function cv(n,t){n&1&&(B(0),w(1,lv,1,4,"ng-template",54),U())}function uv(n,t){if(n&1){let e=H();_(0,"p-scroller",53,11),L("onLazyLoad",function(r){E(e);let s=f(2);return O(s.onLazyLoad.emit(r))}),w(2,av,1,5,"ng-template",22)(3,cv,2,0,"ng-container",18),y()}if(n&2){let e=f(2);Qe(le(8,Ma,e.scrollHeight)),d("items",e.visibleOptions())("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),m(3),d("ngIf",e.loaderTemplate)}}function dv(n,t){n&1&&re(0)}function pv(n,t){if(n&1&&(B(0),w(1,dv,1,0,"ng-container",48),U()),n&2){f();let e=et(9),i=f();m(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",qe(3,Kh,i.visibleOptions(),Fe(2,Tb)))}}function hv(n,t){if(n&1&&(_(0,"span"),N(1),y()),n&2){let e=f(2).$implicit,i=f(3);m(),ye(i.getOptionGroupLabel(e.optionGroup))}}function mv(n,t){n&1&&re(0)}function fv(n,t){if(n&1&&(B(0),_(1,"li",58),w(2,hv,2,1,"span",18)(3,mv,1,0,"ng-container",48),y(),U()),n&2){let e=f(),i=e.$implicit,r=e.index,s=f().options,a=f(2);m(),d("ngStyle",le(5,Ma,s.itemSize+"px")),k("id",a.id+"_"+a.getOptionIndex(r,s)),m(),d("ngIf",!a.groupTemplate),m(),d("ngTemplateOutlet",a.groupTemplate)("ngTemplateOutletContext",le(7,wu,i.optionGroup))}}function gv(n,t){if(n&1){let e=H();B(0),_(1,"p-dropdownItem",59),L("onClick",function(r){E(e);let s=f().$implicit,a=f(3);return O(a.onOptionSelect(r,s))})("onMouseEnter",function(r){E(e);let s=f().index,a=f().options,o=f(2);return O(o.onOptionMouseEnter(r,o.getOptionIndex(s,a)))}),y(),U()}if(n&2){let e=f(),i=e.$implicit,r=e.index,s=f().options,a=f(2);m(),d("id",a.id+"_"+a.getOptionIndex(r,s))("option",i)("checkmark",a.checkmark)("selected",a.isSelected(i))("label",a.getOptionLabel(i))("disabled",a.isOptionDisabled(i))("template",a.itemTemplate)("focused",a.focusedOptionIndex()===a.getOptionIndex(r,s))("ariaPosInset",a.getAriaPosInset(a.getOptionIndex(r,s)))("ariaSetSize",a.ariaSetSize)}}function _v(n,t){if(n&1&&w(0,fv,4,9,"ng-container",18)(1,gv,2,10,"ng-container",18),n&2){let e=t.$implicit,i=f(3);d("ngIf",i.isOptionGroup(e)),m(),d("ngIf",!i.isOptionGroup(e))}}function yv(n,t){if(n&1&&(B(0),N(1),U()),n&2){let e=f(4);m(),Je(" ",e.emptyFilterMessageLabel," ")}}function bv(n,t){n&1&&re(0,null,13)}function vv(n,t){if(n&1&&(_(0,"li",60),w(1,yv,2,1,"ng-container",20)(2,bv,2,0,"ng-container",31),y()),n&2){let e=f().options,i=f(2);d("ngStyle",le(4,Ma,e.itemSize+"px")),m(),d("ngIf",!i.emptyFilterTemplate&&!i.emptyTemplate)("ngIfElse",i.emptyFilter),m(),d("ngTemplateOutlet",i.emptyFilterTemplate||i.emptyTemplate)}}function wv(n,t){if(n&1&&(B(0),N(1),U()),n&2){let e=f(4);m(),Je(" ",e.emptyMessageLabel," ")}}function xv(n,t){n&1&&re(0,null,14)}function Iv(n,t){if(n&1&&(_(0,"li",60),w(1,wv,2,1,"ng-container",20)(2,xv,2,0,"ng-container",31),y()),n&2){let e=f().options,i=f(2);d("ngStyle",le(4,Ma,e.itemSize+"px")),m(),d("ngIf",!i.emptyTemplate)("ngIfElse",i.empty),m(),d("ngTemplateOutlet",i.emptyTemplate)}}function Cv(n,t){if(n&1&&(_(0,"ul",55,12),w(2,_v,2,2,"ng-template",56)(3,vv,3,6,"li",57)(4,Iv,3,6,"li",57),y()),n&2){let e=t.$implicit,i=t.options,r=f(2);Qe(i.contentStyle),d("ngClass",i.contentStyleClass),k("id",r.id+"_list")("aria-label",r.listLabel),m(2),d("ngForOf",e),m(),d("ngIf",r.filterValue&&r.isEmpty()),m(),d("ngIf",!r.filterValue&&r.isEmpty())}}function Tv(n,t){n&1&&re(0)}function Sv(n,t){if(n&1){let e=H();_(0,"div",42)(1,"span",43,6),L("focus",function(r){E(e);let s=f();return O(s.onFirstHiddenFocus(r))}),y(),w(3,Qb,1,0,"ng-container",31)(4,rv,4,2,"div",44),_(5,"div",45),w(6,uv,4,10,"p-scroller",46)(7,pv,2,6,"ng-container",18)(8,Cv,5,8,"ng-template",null,7,ut),y(),w(10,Tv,1,0,"ng-container",31),_(11,"span",43,8),L("focus",function(r){E(e);let s=f();return O(s.onLastHiddenFocus(r))}),y()()}if(n&2){let e=f();ee(e.panelStyleClass),d("ngClass","p-dropdown-panel p-component")("ngStyle",e.panelStyle),m(),k("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0),m(2),d("ngTemplateOutlet",e.headerTemplate),m(),d("ngIf",e.filter),m(),Bn("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),m(),d("ngIf",e.virtualScroll),m(),d("ngIf",!e.virtualScroll),m(3),d("ngTemplateOutlet",e.footerTemplate),m(),k("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0)}}var Ev={provide:Ei,useExisting:oi(()=>xu),multi:!0},Ov=(()=>{class n{id;option;selected;focused;label;disabled;visible;itemSize;ariaPosInset;ariaSetSize;template;checkmark;onClick=new $;onMouseEnter=new $;ngOnInit(){}onOptionClick(e){this.onClick.emit(e)}onOptionMouseEnter(e){this.onMouseEnter.emit(e)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Z({type:n,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{id:"id",option:"option",selected:[M.HasDecoratorInputTransform,"selected","selected",j],focused:[M.HasDecoratorInputTransform,"focused","focused",j],label:"label",disabled:[M.HasDecoratorInputTransform,"disabled","disabled",j],visible:[M.HasDecoratorInputTransform,"visible","visible",j],itemSize:[M.HasDecoratorInputTransform,"itemSize","itemSize",we],ariaPosInset:"ariaPosInset",ariaSetSize:"ariaSetSize",template:"template",checkmark:[M.HasDecoratorInputTransform,"checkmark","checkmark",j]},outputs:{onClick:"onClick",onMouseEnter:"onMouseEnter"},features:[Ge],decls:4,vars:22,consts:[["role","option","pRipple","",3,"click","mouseenter","id","ngStyle","ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"styleClass",4,"ngIf"],[3,"styleClass"]],template:function(i,r){i&1&&(_(0,"li",0),L("click",function(a){return r.onOptionClick(a)})("mouseenter",function(a){return r.onOptionMouseEnter(a)}),w(1,pb,3,2,"ng-container",1)(2,hb,2,1,"span",1)(3,mb,1,0,"ng-container",2),y()),i&2&&(d("id",r.id)("ngStyle",le(14,Ma,r.itemSize+"px"))("ngClass",sn(16,cb,r.selected,r.disabled,r.focused)),k("aria-label",r.label)("aria-setsize",r.ariaSetSize)("aria-posinset",r.ariaPosInset)("aria-selected",r.selected)("data-p-focused",r.focused)("data-p-highlight",r.selected)("data-p-disabled",r.disabled),m(),d("ngIf",r.checkmark),m(),d("ngIf",!r.template),m(),d("ngTemplateOutlet",r.template)("ngTemplateOutletContext",le(20,wu,r.option)))},dependencies:()=>[He,Be,Ke,Ze,ei,bu,Fi],encapsulation:2})}return n})(),xu=(()=>{class n{el;renderer;cd;zone;filterService;config;id;scrollHeight="200px";filter;name;style;panelStyle;styleClass;panelStyleClass;readonly;required;editable;appendTo;tabindex=0;set placeholder(e){this._placeholder.set(e)}get placeholder(){return this._placeholder.asReadonly()}loadingIcon;filterPlaceholder;filterLocale;variant="outlined";inputId;dataKey;filterBy;filterFields;autofocus;resetFilterOnHide=!1;checkmark=!1;dropdownIcon;loading=!1;optionLabel;optionValue;optionDisabled;optionGroupLabel="label";optionGroupChildren="items";autoDisplayFirst=!0;group;showClear;emptyFilterMessage="";emptyMessage="";lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;overlayOptions;ariaFilterLabel;ariaLabel;ariaLabelledBy;filterMatchMode="contains";maxlength;tooltip="";tooltipPosition="right";tooltipPositionStyle="absolute";tooltipStyleClass;focusOnHover=!1;selectOnFocus=!1;autoOptionFocus=!0;autofocusFilter=!0;get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}_itemSize;get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}_autoZIndex;get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}_baseZIndex;get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}_showTransitionOptions;get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}_hideTransitionOptions;get filterValue(){return this._filterValue()}set filterValue(e){setTimeout(()=>{this._filterValue.set(e)})}get options(){return this._options()}set options(e){fe.deepEquals(e,this._options())||this._options.set(e)}onChange=new $;onFilter=new $;onFocus=new $;onBlur=new $;onClick=new $;onShow=new $;onHide=new $;onClear=new $;onLazyLoad=new $;containerViewChild;filterViewChild;focusInputViewChild;editableInputViewChild;itemsViewChild;scroller;overlayViewChild;firstHiddenFocusableElementOnOverlay;lastHiddenFocusableElementOnOverlay;templates;_disabled;itemsWrapper;itemTemplate;groupTemplate;loaderTemplate;selectedItemTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;dropdownIconTemplate;loadingIconTemplate;clearIconTemplate;filterIconTemplate;filterOptions;_options=Ut(null);_placeholder=Ut(void 0);modelValue=Ut(null);value;onModelChange=()=>{};onModelTouched=()=>{};hover;focused;overlayVisible;optionsChanged;panel;dimensionsUpdated;hoveredItem;selectedOptionUpdated;_filterValue=Ut(null);searchValue;searchIndex;searchTimeout;previousSearchChar;currentSearchChar;preventModelTouched;focusedOptionIndex=Ut(-1);labelId;listId;clicked=Ut(!1);get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(At.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(At.EMPTY_FILTER_MESSAGE)}get isVisibleClearIcon(){return this.modelValue()!=null&&this.hasSelectedOption()&&this.showClear&&!this.disabled}get listLabel(){return this.config.getTranslation(At.ARIA).listLabel}get containerClass(){return{"p-dropdown p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-dropdown-clearable":this.showClear&&!this.disabled,"p-focus":this.focused,"p-inputwrapper-filled":this.modelValue()!==void 0&&this.modelValue()!==null&&!this.modelValue().length,"p-inputwrapper-focus":this.focused||this.overlayVisible,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled"}}get inputClass(){let e=this.label();return{"p-dropdown-label p-inputtext":!0,"p-placeholder":this.placeholder()&&e===this.placeholder(),"p-dropdown-label-empty":!this.editable&&!this.selectedItemTemplate&&(e==null||e==="p-emptylabel"||e.length===0)}}get panelClass(){return{"p-dropdown-panel p-component":!0,"p-input-filled":this.config.inputStyle()==="filled","p-ripple-disabled":this.config.ripple===!1}}get focusedOptionId(){return this.focusedOptionIndex()!==-1?`${this.id}_${this.focusedOptionIndex()}`:null}visibleOptions=vn(()=>{let e=this.getAllVisibleAndNonVisibleOptions();if(this._filterValue()){let r=!(this.filterBy||this.optionLabel)&&!this.filterFields&&!this.optionValue?this.options.filter(s=>s.label?s.label.toString().toLowerCase().indexOf(this._filterValue().toLowerCase().trim())!==-1:s.toString().toLowerCase().indexOf(this._filterValue().toLowerCase().trim())!==-1):this.filterService.filter(e,this.searchFields(),this._filterValue().trim(),this.filterMatchMode,this.filterLocale);if(this.group){let s=this.options||[],a=[];return s.forEach(o=>{let u=this.getOptionGroupChildren(o).filter(p=>r.includes(p));u.length>0&&a.push(v(c({},o),{[typeof this.optionGroupChildren=="string"?this.optionGroupChildren:"items"]:[...u]}))}),this.flatOptions(a)}return r}return e});label=vn(()=>{let e=this.getAllVisibleAndNonVisibleOptions(),i=e.findIndex(r=>this.isOptionValueEqualsModelValue(r));return i!==-1?this.getOptionLabel(e[i]):this.placeholder()||"p-emptylabel"});filled=vn(()=>typeof this.modelValue()=="string"?!!this.modelValue():this.label()!=="p-emptylabel"&&this.modelValue()!==void 0&&this.modelValue()!==null);selectedOption;editableInputValue=vn(()=>this.getOptionLabel(this.selectedOption)||this.modelValue()||"");constructor(e,i,r,s,a,o){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.filterService=a,this.config=o,$o(()=>{let l=this.modelValue(),u=this.visibleOptions();if(u&&fe.isNotEmpty(u)){let p=this.findSelectedOptionIndex();(p!==-1||l===void 0||typeof l=="string"&&l.length===0||this.isModelValueNotSet()||this.editable)&&(this.selectedOption=u[p])}fe.isEmpty(u)&&(l===void 0||this.isModelValueNotSet())&&fe.isNotEmpty(this.selectedOption)&&(this.selectedOption=null),l!==void 0&&this.editable&&this.updateEditableLabel(),this.cd.markForCheck()})}isModelValueNotSet(){return this.modelValue()===null&&!this.isOptionValueEqualsModelValue(this.selectedOption)}displayPlaceholder(){return fe.isEmpty(this.selectedOption)&&this.label()===this.placeholder()}getAllVisibleAndNonVisibleOptions(){return this.group?this.flatOptions(this.options):this.options||[]}ngOnInit(){this.id=this.id||dt(),this.autoUpdateModel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){let e=C.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,"li.p-highlight");e&&C.scrollInView(this.itemsWrapper,e),this.selectedOptionUpdated=!1}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"dropdownicon":this.dropdownIconTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"filtericon":this.filterIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}flatOptions(e){return(e||[]).reduce((i,r,s)=>{i.push({optionGroup:r,group:!0,index:s});let a=this.getOptionGroupChildren(r);return a&&a.forEach(o=>i.push(o)),i},[])}autoUpdateModel(){if(this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()&&(this.focusedOptionIndex.set(this.findFirstFocusedOptionIndex()),this.onOptionSelect(null,this.visibleOptions()[this.focusedOptionIndex()],!1)),this.autoDisplayFirst&&(this.modelValue()===null||this.modelValue()===void 0)&&!this.placeholder()){let e=this.findFirstOptionIndex();this.onOptionSelect(null,this.visibleOptions()[e],!1,!0)}}onOptionSelect(e,i,r=!0,s=!1){if(!this.isSelected(i)){let a=this.getOptionValue(i);this.updateModel(a,e),this.focusedOptionIndex.set(this.findSelectedOptionIndex()),s===!1&&this.onChange.emit({originalEvent:e,value:a})}r&&this.hide(!0)}onOptionMouseEnter(e,i){this.focusOnHover&&this.changeFocusedOptionIndex(e,i)}updateModel(e,i){this.value=e,this.onModelChange(e),this.modelValue.set(e),this.selectedOptionUpdated=!0}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.allowModelChange()&&this.onModelChange(e),this.modelValue.set(this.value),this.updateEditableLabel(),this.cd.markForCheck()}allowModelChange(){return this.autoDisplayFirst&&!this.placeholder()&&(this.modelValue()===void 0||this.modelValue()===null)&&!this.editable&&this.options&&this.options.length}isSelected(e){return this.isValidOption(e)&&this.isOptionValueEqualsModelValue(e)}isOptionValueEqualsModelValue(e){return fe.equals(this.modelValue(),this.getOptionValue(e),this.equalityKey())}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}updateEditableLabel(){this.editableInputViewChild&&(this.editableInputViewChild.nativeElement.value=this.getOptionLabel(this.selectedOption)||this.modelValue()||"")}clearEditableLabel(){this.editableInputViewChild&&(this.editableInputViewChild.nativeElement.value="")}getOptionIndex(e,i){return this.virtualScrollerDisabled?e:i&&i.getItemOptions(e).index}getOptionLabel(e){return this.optionLabel!==void 0&&this.optionLabel!==null?fe.resolveFieldData(e,this.optionLabel):e&&e.label!==void 0?e.label:e}getOptionValue(e){return this.optionValue&&this.optionValue!==null?fe.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&e.value!==void 0?e.value:e}isOptionDisabled(e){return this.getOptionValue(this.modelValue())===this.getOptionValue(e)||this.getOptionLabel(this.modelValue()===this.getOptionLabel(e))&&e.disabled===!1?!1:this.optionDisabled?fe.resolveFieldData(e,this.optionDisabled):e&&e.disabled!==void 0?e.disabled:!1}getOptionGroupLabel(e){return this.optionGroupLabel!==void 0&&this.optionGroupLabel!==null?fe.resolveFieldData(e,this.optionGroupLabel):e&&e.label!==void 0?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren!==void 0&&this.optionGroupChildren!==null?fe.resolveFieldData(e,this.optionGroupChildren):e.items}getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions().slice(0,e).filter(i=>this.isOptionGroup(i)).length:e)+1}get ariaSetSize(){return this.visibleOptions().filter(e=>!this.isOptionGroup(e)).length}resetFilter(){this._filterValue.set(null),this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onContainerClick(e){this.disabled||this.readonly||this.loading||(this.focusInputViewChild?.nativeElement.focus({preventScroll:!0}),!(e.target.tagName==="INPUT"||e.target.getAttribute("data-pc-section")==="clearicon"||e.target.closest('[data-pc-section="clearicon"]'))&&((!this.overlayViewChild||!this.overlayViewChild.el.nativeElement.contains(e.target))&&(this.overlayVisible?this.hide(!0):this.show(!0)),this.onClick.emit(e),this.clicked.set(!0),this.cd.detectChanges()))}isEmpty(){return!this._options()||this.visibleOptions()&&this.visibleOptions().length===0}onEditableInput(e){let i=e.target.value;this.searchValue="",!this.searchOptions(e,i)&&this.focusedOptionIndex.set(-1),this.onModelChange(i),this.updateModel(i,e),setTimeout(()=>{this.onChange.emit({originalEvent:e,value:i})},1),!this.overlayVisible&&fe.isNotEmpty(i)&&this.show()}show(e){this.overlayVisible=!0;let i=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.editable?-1:this.findSelectedOptionIndex();this.focusedOptionIndex.set(i),e&&C.focus(this.focusInputViewChild?.nativeElement),this.cd.markForCheck()}onOverlayAnimationStart(e){if(e.toState==="visible"){if(this.itemsWrapper=C.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this.options&&this.options.length)if(this.virtualScroll){let i=this.modelValue()?this.focusedOptionIndex():-1;i!==-1&&this.scroller?.scrollToIndex(i)}else{let i=C.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");i&&i.scrollIntoView({block:"nearest",inline:"nearest"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&!this.editable&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e)}e.toState==="void"&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(e))}hide(e){this.overlayVisible=!1,this.focusedOptionIndex.set(-1),this.clicked.set(!1),this.searchValue="",this.overlayOptions?.mode==="modal"&&C.unblockBodyScroll(),this.filter&&this.resetFilterOnHide&&this.resetFilter(),e&&(this.focusInputViewChild&&C.focus(this.focusInputViewChild?.nativeElement),this.editable&&this.editableInputViewChild&&C.focus(this.editableInputViewChild?.nativeElement)),this.cd.markForCheck()}onInputFocus(e){if(this.disabled)return;this.focused=!0;let i=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(i),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onKeyDown(e,i){if(!(this.disabled||this.readonly||this.loading)){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,this.editable);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,this.editable);break;case"Delete":this.onDeleteKey(e);break;case"Home":this.onHomeKey(e,this.editable);break;case"End":this.onEndKey(e,this.editable);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Space":this.onSpaceKey(e,i);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"Backspace":this.onBackspaceKey(e,this.editable);break;case"ShiftLeft":case"ShiftRight":break;default:!e.metaKey&&fe.isPrintableCharacter(e.key)&&(!this.overlayVisible&&this.show(),!this.editable&&this.searchOptions(e,e.key));break}this.clicked.set(!1)}}onFilterKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e,!0);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0);break;default:break}}onFilterBlur(e){this.focusedOptionIndex.set(-1)}onArrowDownKey(e){if(!this.overlayVisible)this.show(),this.editable&&this.changeFocusedOptionIndex(e,this.findSelectedOptionIndex());else{let i=this.focusedOptionIndex()!==-1?this.findNextOptionIndex(this.focusedOptionIndex()):this.clicked()?this.findFirstOptionIndex():this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(e,i)}e.preventDefault(),e.stopPropagation()}changeFocusedOptionIndex(e,i){if(this.focusedOptionIndex()!==i&&(this.focusedOptionIndex.set(i),this.scrollInView(),this.selectOnFocus)){let r=this.visibleOptions()[i];this.onOptionSelect(e,r,!1)}}get virtualScrollerDisabled(){return!this.virtualScroll}scrollInView(e=-1){let i=e!==-1?`${this.id}_${e}`:this.focusedOptionId;if(this.itemsViewChild&&this.itemsViewChild.nativeElement){let r=C.findSingle(this.itemsViewChild.nativeElement,`li[id="${i}"]`);r?r.scrollIntoView&&r.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(e!==-1?e:this.focusedOptionIndex())},0)}}hasSelectedOption(){return this.modelValue()!==void 0}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}equalityKey(){return this.optionValue?null:this.dataKey}findFirstFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}findNextOptionIndex(e){let i=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(r=>this.isValidOption(r)):-1;return i>-1?i+e+1:e}findPrevOptionIndex(e){let i=e>0?fe.findLastIndex(this.visibleOptions().slice(0,e),r=>this.isValidOption(r)):-1;return i>-1?i:e}findLastOptionIndex(){return fe.findLastIndex(this.visibleOptions(),e=>this.isValidOption(e))}findLastFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}isValidOption(e){return e!=null&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))}isOptionGroup(e){return this.optionGroupLabel!==void 0&&this.optionGroupLabel!==null&&e.optionGroup!==void 0&&e.optionGroup!==null&&e.group}onArrowUpKey(e,i=!1){if(e.altKey&&!i){if(this.focusedOptionIndex()!==-1){let r=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,r)}this.overlayVisible&&this.hide()}else{let r=this.focusedOptionIndex()!==-1?this.findPrevOptionIndex(this.focusedOptionIndex()):this.clicked()?this.findLastOptionIndex():this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(e,r),!this.overlayVisible&&this.show()}e.preventDefault(),e.stopPropagation()}onArrowLeftKey(e,i=!1){i&&this.focusedOptionIndex.set(-1)}onDeleteKey(e){this.showClear&&(this.clear(e),e.preventDefault())}onHomeKey(e,i=!1){if(i){let r=e.currentTarget;e.shiftKey?r.setSelectionRange(0,r.value.length):(r.setSelectionRange(0,0),this.focusedOptionIndex.set(-1))}else this.changeFocusedOptionIndex(e,this.findFirstOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()}onEndKey(e,i=!1){if(i){let r=e.currentTarget;if(e.shiftKey)r.setSelectionRange(0,r.value.length);else{let s=r.value.length;r.setSelectionRange(s,s),this.focusedOptionIndex.set(-1)}}else this.changeFocusedOptionIndex(e,this.findLastOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()}onPageDownKey(e){this.scrollInView(this.visibleOptions().length-1),e.preventDefault()}onPageUpKey(e){this.scrollInView(0),e.preventDefault()}onSpaceKey(e,i=!1){!this.editable&&!i&&this.onEnterKey(e)}onEnterKey(e,i=!1){if(!this.overlayVisible)this.focusedOptionIndex.set(-1),this.onArrowDownKey(e);else{if(this.focusedOptionIndex()!==-1){let r=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,r)}!i&&this.hide()}e.preventDefault()}onEscapeKey(e){this.overlayVisible&&this.hide(!0),e.preventDefault()}onTabKey(e,i=!1){if(!i)if(this.overlayVisible&&this.hasFocusableElements())C.focus(e.shiftKey?this.lastHiddenFocusableElementOnOverlay.nativeElement:this.firstHiddenFocusableElementOnOverlay.nativeElement),e.preventDefault();else{if(this.focusedOptionIndex()!==-1&&this.overlayVisible){let r=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,r)}this.overlayVisible&&this.hide(this.filter)}e.stopPropagation()}onFirstHiddenFocus(e){let i=e.relatedTarget===this.focusInputViewChild?.nativeElement?C.getFirstFocusableElement(this.overlayViewChild.el?.nativeElement,":not(.p-hidden-focusable)"):this.focusInputViewChild?.nativeElement;C.focus(i)}onLastHiddenFocus(e){let i=e.relatedTarget===this.focusInputViewChild?.nativeElement?C.getLastFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;C.focus(i)}hasFocusableElements(){return C.getFocusableElements(this.overlayViewChild.overlayViewChild.nativeElement,':not([data-p-hidden-focusable="true"])').length>0}onBackspaceKey(e,i=!1){i&&!this.overlayVisible&&this.show()}searchFields(){return this.filterBy?.split(",")||this.filterFields||[this.optionLabel]}searchOptions(e,i){this.searchValue=(this.searchValue||"")+i;let r=-1,s=!1;return this.focusedOptionIndex()!==-1?(r=this.visibleOptions().slice(this.focusedOptionIndex()).findIndex(a=>this.isOptionMatched(a)),r=r===-1?this.visibleOptions().slice(0,this.focusedOptionIndex()).findIndex(a=>this.isOptionMatched(a)):r+this.focusedOptionIndex()):r=this.visibleOptions().findIndex(a=>this.isOptionMatched(a)),r!==-1&&(s=!0),r===-1&&this.focusedOptionIndex()===-1&&(r=this.findFirstFocusedOptionIndex()),r!==-1&&this.changeFocusedOptionIndex(e,r),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),s}isOptionMatched(e){return this.isValidOption(e)&&this.getOptionLabel(e).toString().toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))}onFilterInputChange(e){let i=e.target.value;this._filterValue.set(i),this.focusedOptionIndex.set(-1),this.onFilter.emit({originalEvent:e,filter:this._filterValue()}),!this.virtualScrollerDisabled&&this.scroller.scrollToIndex(0),setTimeout(()=>{this.overlayViewChild.alignOverlay()}),this.cd.markForCheck()}applyFocus(){this.editable?C.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():C.focus(this.focusInputViewChild?.nativeElement)}focus(){this.applyFocus()}clear(e){this.updateModel(null,e),this.clearEditableLabel(),this.onModelTouched(),this.onChange.emit({originalEvent:e,value:this.value}),this.onClear.emit(e),this.resetFilter()}static \u0275fac=function(i){return new(i||n)(D(We),D(Ot),D(Xe),D(Bt),D(qo),D(Tt))};static \u0275cmp=Z({type:n,selectors:[["p-dropdown"]],contentQueries:function(i,r,s){if(i&1&&Me(s,Le,4),i&2){let a;W(a=Q())&&(r.templates=a)}},viewQuery:function(i,r){if(i&1&&(me(fb,5),me(gb,5),me(_b,5),me(yb,5),me(bb,5),me(vb,5),me(wb,5),me(xb,5),me(Ib,5)),i&2){let s;W(s=Q())&&(r.containerViewChild=s.first),W(s=Q())&&(r.filterViewChild=s.first),W(s=Q())&&(r.focusInputViewChild=s.first),W(s=Q())&&(r.editableInputViewChild=s.first),W(s=Q())&&(r.itemsViewChild=s.first),W(s=Q())&&(r.scroller=s.first),W(s=Q())&&(r.overlayViewChild=s.first),W(s=Q())&&(r.firstHiddenFocusableElementOnOverlay=s.first),W(s=Q())&&(r.lastHiddenFocusableElementOnOverlay=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(i,r){i&2&&bn("p-inputwrapper-filled",r.filled())("p-inputwrapper-focus",r.focused||r.overlayVisible)},inputs:{id:"id",scrollHeight:"scrollHeight",filter:[M.HasDecoratorInputTransform,"filter","filter",j],name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:[M.HasDecoratorInputTransform,"readonly","readonly",j],required:[M.HasDecoratorInputTransform,"required","required",j],editable:[M.HasDecoratorInputTransform,"editable","editable",j],appendTo:"appendTo",tabindex:[M.HasDecoratorInputTransform,"tabindex","tabindex",we],placeholder:"placeholder",loadingIcon:"loadingIcon",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",variant:"variant",inputId:"inputId",dataKey:"dataKey",filterBy:"filterBy",filterFields:"filterFields",autofocus:[M.HasDecoratorInputTransform,"autofocus","autofocus",j],resetFilterOnHide:[M.HasDecoratorInputTransform,"resetFilterOnHide","resetFilterOnHide",j],checkmark:[M.HasDecoratorInputTransform,"checkmark","checkmark",j],dropdownIcon:"dropdownIcon",loading:[M.HasDecoratorInputTransform,"loading","loading",j],optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:[M.HasDecoratorInputTransform,"autoDisplayFirst","autoDisplayFirst",j],group:[M.HasDecoratorInputTransform,"group","group",j],showClear:[M.HasDecoratorInputTransform,"showClear","showClear",j],emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:[M.HasDecoratorInputTransform,"lazy","lazy",j],virtualScroll:[M.HasDecoratorInputTransform,"virtualScroll","virtualScroll",j],virtualScrollItemSize:[M.HasDecoratorInputTransform,"virtualScrollItemSize","virtualScrollItemSize",we],virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:[M.HasDecoratorInputTransform,"maxlength","maxlength",we],tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",focusOnHover:[M.HasDecoratorInputTransform,"focusOnHover","focusOnHover",j],selectOnFocus:[M.HasDecoratorInputTransform,"selectOnFocus","selectOnFocus",j],autoOptionFocus:[M.HasDecoratorInputTransform,"autoOptionFocus","autoOptionFocus",j],autofocusFilter:[M.HasDecoratorInputTransform,"autofocusFilter","autofocusFilter",j],disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",filterValue:"filterValue",options:"options"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[qt([Ev]),Ge],decls:12,vars:20,consts:[["container",""],["elseBlock",""],["overlay",""],["focusInput",""],["defaultPlaceholder",""],["editableInput",""],["firstHiddenFocusableEl",""],["buildInItems",""],["lastHiddenFocusableEl",""],["builtInFilterElement",""],["filter",""],["scroller",""],["items",""],["emptyFilter",""],["empty",""],[3,"click","ngClass","ngStyle"],["role","combobox","pAutoFocus","",3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","autofocus","focus","blur","keydown",4,"ngIf"],["type","text","aria-haspopup","listbox","pAutoFocus","",3,"ngClass","disabled","autofocus","input","keydown","focus","blur",4,"ngIf"],[4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[4,"ngIf","ngIfElse"],[3,"visibleChange","onAnimationStart","onHide","visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions"],["pTemplate","content"],["role","combobox","pAutoFocus","",3,"focus","blur","keydown","ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","autofocus"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","text","aria-haspopup","listbox","pAutoFocus","",3,"input","keydown","focus","blur","ngClass","disabled","autofocus"],[3,"styleClass","click",4,"ngIf"],["class","p-dropdown-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-dropdown-clear-icon",3,"click"],[4,"ngTemplateOutlet"],["aria-hidden","true",3,"ngClass",4,"ngIf"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true",3,"ngClass"],["aria-hidden","true"],["class","p-dropdown-trigger-icon",4,"ngIf"],["class","p-dropdown-trigger-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"styleClass"],[1,"p-dropdown-trigger-icon"],[3,"ngClass","ngStyle"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus"],["class","p-dropdown-header",3,"click",4,"ngIf"],["role","section",1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],[1,"p-dropdown-header",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-dropdown-filter-container"],["type","text","role","searchbox","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"input","keydown","blur","value","ngClass"],["class","p-dropdown-filter-icon",4,"ngIf"],[1,"p-dropdown-filter-icon"],[3,"onLazyLoad","items","itemSize","autoSize","lazy","options"],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-dropdown-empty-message","role","option",3,"ngStyle",4,"ngIf"],["role","option",1,"p-dropdown-item-group",3,"ngStyle"],[3,"onClick","onMouseEnter","id","option","checkmark","selected","label","disabled","template","focused","ariaPosInset","ariaSetSize"],["role","option",1,"p-dropdown-empty-message",3,"ngStyle"]],template:function(i,r){if(i&1){let s=H();_(0,"div",15,0),L("click",function(o){return E(s),O(r.onContainerClick(o))}),w(2,kb,6,20,"span",16)(3,Pb,2,7,"input",17)(4,Fb,3,2,"ng-container",18),_(5,"div",19),w(6,Bb,3,2,"ng-container",20)(7,Wb,2,2,"ng-template",null,1,ut),y(),_(9,"p-overlay",21,2),Nt("visibleChange",function(o){return E(s),Dt(r.overlayVisible,o)||(r.overlayVisible=o),O(o)}),L("onAnimationStart",function(o){return E(s),O(r.onOverlayAnimationStart(o))})("onHide",function(){return E(s),O(r.hide())}),w(11,Sv,13,17,"ng-template",22),y()()}if(i&2){let s,a=et(8);ee(r.styleClass),d("ngClass",r.containerClass)("ngStyle",r.style),k("id",r.id),m(2),d("ngIf",!r.editable),m(),d("ngIf",r.editable),m(),d("ngIf",r.isVisibleClearIcon),m(),k("aria-expanded",(s=r.overlayVisible)!==null&&s!==void 0?s:!1)("data-pc-section","trigger"),m(),d("ngIf",r.loading)("ngIfElse",a),m(3),Rt("visible",r.overlayVisible),d("options",r.overlayOptions)("target","@parent")("appendTo",r.appendTo)("autoZIndex",r.autoZIndex)("baseZIndex",r.baseZIndex)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}},dependencies:()=>[He,vt,Be,Ke,Ze,Pa,Le,Xn,al,Gn,ot,Hs,qs,Ov],styles:[`@layer primeng{.p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;opacity:0}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-item-group{cursor:auto}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}}
`],encapsulation:2,changeDetection:0})}return n})(),Gh=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,Bs,Ue,In,li,Us,Zn,ot,Hs,qs,bu,Fi,Bs,Ue,Us]})}return n})();var Iu=(()=>{class n extends at{static \u0275fac=(()=>{let e;return function(r){return(e||(e=rt(n)))(r||n)}})();static \u0275cmp=Z({type:n,selectors:[["AngleDownIcon"]],standalone:!0,features:[st,xe],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z","fill","currentColor"]],template:function(i,r){i&1&&(nt(),_(0,"svg",0),A(1,"path",1),y()),i&2&&(ee(r.getClassNames()),k("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();var Cu=(()=>{class n extends at{static \u0275fac=(()=>{let e;return function(r){return(e||(e=rt(n)))(r||n)}})();static \u0275cmp=Z({type:n,selectors:[["AngleUpIcon"]],standalone:!0,features:[st,xe],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.4134 9.49931C10.3148 9.49977 10.2172 9.48055 10.1262 9.44278C10.0352 9.405 9.95263 9.34942 9.88338 9.27931L6.88338 6.27931L3.88338 9.27931C3.73811 9.34946 3.57409 9.3709 3.41567 9.34044C3.25724 9.30999 3.11286 9.22926 3.00395 9.11025C2.89504 8.99124 2.82741 8.84028 2.8111 8.67978C2.79478 8.51928 2.83065 8.35781 2.91338 8.21931L6.41338 4.71931C6.55401 4.57886 6.74463 4.49997 6.94338 4.49997C7.14213 4.49997 7.33276 4.57886 7.47338 4.71931L10.9734 8.21931C11.1138 8.35994 11.1927 8.55056 11.1927 8.74931C11.1927 8.94806 11.1138 9.13868 10.9734 9.27931C10.9007 9.35315 10.8132 9.41089 10.7168 9.44879C10.6203 9.48669 10.5169 9.5039 10.4134 9.49931Z","fill","currentColor"]],template:function(i,r){i&1&&(nt(),_(0,"svg",0),A(1,"path",1),y()),i&2&&(ee(r.getClassNames()),k("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();var kv=["input"],Pv=(n,t,e)=>({"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":n,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}),Zh=()=>({"p-inputnumber-button p-inputnumber-button-up":!0}),Wh=()=>({"p-inputnumber-button p-inputnumber-button-down":!0});function Mv(n,t){if(n&1){let e=H();_(0,"TimesIcon",8),L("click",function(){E(e);let r=f(2);return O(r.clear())}),y()}n&2&&(d("ngClass","p-inputnumber-clear-icon"),k("data-pc-section","clearIcon"))}function Rv(n,t){}function Dv(n,t){n&1&&w(0,Rv,0,0,"ng-template")}function Nv(n,t){if(n&1){let e=H();_(0,"span",9),L("click",function(){E(e);let r=f(2);return O(r.clear())}),w(1,Dv,1,0,null,10),y()}if(n&2){let e=f(2);k("data-pc-section","clearIcon"),m(),d("ngTemplateOutlet",e.clearIconTemplate)}}function Fv(n,t){if(n&1&&(B(0),w(1,Mv,1,2,"TimesIcon",6)(2,Nv,2,2,"span",7),U()),n&2){let e=f();m(),d("ngIf",!e.clearIconTemplate),m(),d("ngIf",e.clearIconTemplate)}}function Lv(n,t){if(n&1&&A(0,"span",14),n&2){let e=f(2);d("ngClass",e.incrementButtonIcon),k("data-pc-section","incrementbuttonicon")}}function jv(n,t){n&1&&A(0,"AngleUpIcon"),n&2&&k("data-pc-section","incrementbuttonicon")}function Vv(n,t){}function zv(n,t){n&1&&w(0,Vv,0,0,"ng-template")}function $v(n,t){if(n&1&&(B(0),w(1,jv,1,1,"AngleUpIcon",3)(2,zv,1,0,null,10),U()),n&2){let e=f(2);m(),d("ngIf",!e.incrementButtonIconTemplate),m(),d("ngTemplateOutlet",e.incrementButtonIconTemplate)}}function Bv(n,t){if(n&1&&A(0,"span",14),n&2){let e=f(2);d("ngClass",e.decrementButtonIcon),k("data-pc-section","decrementbuttonicon")}}function Uv(n,t){n&1&&A(0,"AngleDownIcon"),n&2&&k("data-pc-section","decrementbuttonicon")}function Hv(n,t){}function qv(n,t){n&1&&w(0,Hv,0,0,"ng-template")}function Kv(n,t){if(n&1&&(B(0),w(1,Uv,1,1,"AngleDownIcon",3)(2,qv,1,0,null,10),U()),n&2){let e=f(2);m(),d("ngIf",!e.decrementButtonIconTemplate),m(),d("ngTemplateOutlet",e.decrementButtonIconTemplate)}}function Gv(n,t){if(n&1){let e=H();_(0,"span",11)(1,"button",12),L("mousedown",function(r){E(e);let s=f();return O(s.onUpButtonMouseDown(r))})("mouseup",function(){E(e);let r=f();return O(r.onUpButtonMouseUp())})("mouseleave",function(){E(e);let r=f();return O(r.onUpButtonMouseLeave())})("keydown",function(r){E(e);let s=f();return O(s.onUpButtonKeyDown(r))})("keyup",function(){E(e);let r=f();return O(r.onUpButtonKeyUp())}),w(2,Lv,1,2,"span",13)(3,$v,3,2,"ng-container",3),y(),_(4,"button",12),L("mousedown",function(r){E(e);let s=f();return O(s.onDownButtonMouseDown(r))})("mouseup",function(){E(e);let r=f();return O(r.onDownButtonMouseUp())})("mouseleave",function(){E(e);let r=f();return O(r.onDownButtonMouseLeave())})("keydown",function(r){E(e);let s=f();return O(s.onDownButtonKeyDown(r))})("keyup",function(){E(e);let r=f();return O(r.onDownButtonKeyUp())}),w(5,Bv,1,2,"span",13)(6,Kv,3,2,"ng-container",3),y()()}if(n&2){let e=f();k("data-pc-section","buttonGroup"),m(),ee(e.incrementButtonClass),d("ngClass",Fe(17,Zh))("disabled",e.disabled),k("aria-hidden",!0)("data-pc-section","incrementbutton"),m(),d("ngIf",e.incrementButtonIcon),m(),d("ngIf",!e.incrementButtonIcon),m(),ee(e.decrementButtonClass),d("ngClass",Fe(18,Wh))("disabled",e.disabled),k("aria-hidden",!0)("data-pc-section",e.decrementbutton),m(),d("ngIf",e.decrementButtonIcon),m(),d("ngIf",!e.decrementButtonIcon)}}function Zv(n,t){if(n&1&&A(0,"span",14),n&2){let e=f(2);d("ngClass",e.incrementButtonIcon),k("data-pc-section","incrementbuttonicon")}}function Wv(n,t){n&1&&A(0,"AngleUpIcon"),n&2&&k("data-pc-section","incrementbuttonicon")}function Qv(n,t){}function Jv(n,t){n&1&&w(0,Qv,0,0,"ng-template")}function Yv(n,t){if(n&1&&(B(0),w(1,Wv,1,1,"AngleUpIcon",3)(2,Jv,1,0,null,10),U()),n&2){let e=f(2);m(),d("ngIf",!e.incrementButtonIconTemplate),m(),d("ngTemplateOutlet",e.incrementButtonIconTemplate)}}function Xv(n,t){if(n&1){let e=H();_(0,"button",12),L("mousedown",function(r){E(e);let s=f();return O(s.onUpButtonMouseDown(r))})("mouseup",function(){E(e);let r=f();return O(r.onUpButtonMouseUp())})("mouseleave",function(){E(e);let r=f();return O(r.onUpButtonMouseLeave())})("keydown",function(r){E(e);let s=f();return O(s.onUpButtonKeyDown(r))})("keyup",function(){E(e);let r=f();return O(r.onUpButtonKeyUp())}),w(1,Zv,1,2,"span",13)(2,Yv,3,2,"ng-container",3),y()}if(n&2){let e=f();ee(e.incrementButtonClass),d("ngClass",Fe(8,Zh))("disabled",e.disabled),k("aria-hidden",!0)("data-pc-section","incrementbutton"),m(),d("ngIf",e.incrementButtonIcon),m(),d("ngIf",!e.incrementButtonIcon)}}function ew(n,t){if(n&1&&A(0,"span",14),n&2){let e=f(2);d("ngClass",e.decrementButtonIcon),k("data-pc-section","decrementbuttonicon")}}function tw(n,t){n&1&&A(0,"AngleDownIcon"),n&2&&k("data-pc-section","decrementbuttonicon")}function iw(n,t){}function nw(n,t){n&1&&w(0,iw,0,0,"ng-template")}function rw(n,t){if(n&1&&(B(0),w(1,tw,1,1,"AngleDownIcon",3)(2,nw,1,0,null,10),U()),n&2){let e=f(2);m(),d("ngIf",!e.decrementButtonIconTemplate),m(),d("ngTemplateOutlet",e.decrementButtonIconTemplate)}}function sw(n,t){if(n&1){let e=H();_(0,"button",12),L("mousedown",function(r){E(e);let s=f();return O(s.onDownButtonMouseDown(r))})("mouseup",function(){E(e);let r=f();return O(r.onDownButtonMouseUp())})("mouseleave",function(){E(e);let r=f();return O(r.onDownButtonMouseLeave())})("keydown",function(r){E(e);let s=f();return O(s.onDownButtonKeyDown(r))})("keyup",function(){E(e);let r=f();return O(r.onDownButtonKeyUp())}),w(1,ew,1,2,"span",13)(2,rw,3,2,"ng-container",3),y()}if(n&2){let e=f();ee(e.decrementButtonClass),d("ngClass",Fe(8,Wh))("disabled",e.disabled),k("aria-hidden",!0)("data-pc-section","decrementbutton"),m(),d("ngIf",e.decrementButtonIcon),m(),d("ngIf",!e.decrementButtonIcon)}}var aw={provide:Ei,useExisting:oi(()=>Ra),multi:!0},Ra=(()=>{class n{document;el;cd;injector;showButtons=!1;format=!0;buttonLayout="stacked";inputId;styleClass;style;placeholder;size;maxlength;tabindex;title;ariaLabelledBy;ariaLabel;ariaRequired;name;required;autocomplete;min;max;incrementButtonClass;decrementButtonClass;incrementButtonIcon;decrementButtonIcon;readonly=!1;step=1;allowEmpty=!0;locale;localeMatcher;mode="decimal";currency;currencyDisplay;useGrouping=!0;variant="outlined";minFractionDigits;maxFractionDigits;prefix;suffix;inputStyle;inputStyleClass;showClear=!1;autofocus;get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}onInput=new $;onFocus=new $;onBlur=new $;onKeyDown=new $;onClear=new $;input;templates;clearIconTemplate;incrementButtonIconTemplate;decrementButtonIconTemplate;value;onModelChange=()=>{};onModelTouched=()=>{};focused;initialized;groupChar="";prefixChar="";suffixChar="";isSpecialChar;timer;lastValue;_numeral;numberFormat;_decimal;_decimalChar;_group;_minusSign;_currency;_prefix;_suffix;_index;_disabled;ngControl=null;constructor(e,i,r,s){this.document=e,this.el=i,this.cd=r,this.injector=s}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!e[r])&&this.updateConstructParser()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"clearicon":this.clearIconTemplate=e.template;break;case"incrementbuttonicon":this.incrementButtonIconTemplate=e.template;break;case"decrementbuttonicon":this.decrementButtonIconTemplate=e.template;break}})}ngOnInit(){this.ngControl=this.injector.get(Rh,null,{optional:!0}),this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());let e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),i=new Map(e.map((r,s)=>[r,s]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._decimalChar=this.getDecimalChar(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>i.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){let e=this.getDecimalChar();return new RegExp(`[${e}]`,"g")}getDecimalChar(){return new Intl.NumberFormat(this.locale,v(c({},this.getOptions()),{useGrouping:!1})).format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}getGroupingExpression(){let e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){let e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){let e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{let e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{let e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(e!=null){if(e==="-")return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r=r+this.suffix),r}return e.toString()}return""}parseValue(e){let i=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(i){if(i==="-")return i;let r=+i;return isNaN(r)?null:r}return null}repeat(e,i,r){if(this.readonly)return;let s=i||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},s),this.spin(e,r)}spin(e,i){let r=this.step*i,s=this.parseValue(this.input?.nativeElement.value)||0,a=this.validateValue(s+r);this.maxlength&&this.maxlength<this.formatValue(a).length||(this.updateInput(a,null,"spin",null),this.updateModel(e,a),this.handleOnInput(e,s,a))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){if(e.button===2){this.clearTimer();return}this.disabled||(this.input?.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault())}onUpButtonMouseUp(){this.disabled||this.clearTimer()}onUpButtonMouseLeave(){this.disabled||this.clearTimer()}onUpButtonKeyDown(e){(e.keyCode===32||e.keyCode===13)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.disabled||this.clearTimer()}onDownButtonMouseDown(e){if(e.button===2){this.clearTimer();return}this.disabled||(this.input?.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault())}onDownButtonMouseUp(){this.disabled||this.clearTimer()}onDownButtonMouseLeave(){this.disabled||this.clearTimer()}onDownButtonKeyUp(){this.disabled||this.clearTimer()}onDownButtonKeyDown(e){(e.keyCode===32||e.keyCode===13)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey){this.isSpecialChar=!0;return}let i=e.target.selectionStart,r=e.target.selectionEnd,s=e.target.value,a=null;switch(e.altKey&&e.preventDefault(),e.key){case"ArrowUp":this.spin(e,1),e.preventDefault();break;case"ArrowDown":this.spin(e,-1),e.preventDefault();break;case"ArrowLeft":for(let o=i;o<=s.length;o++){let l=o===0?0:o-1;if(this.isNumeralChar(s.charAt(l))){this.input.nativeElement.setSelectionRange(o,o);break}}break;case"ArrowRight":for(let o=r;o>=0;o--)if(this.isNumeralChar(s.charAt(o))){this.input.nativeElement.setSelectionRange(o,o);break}break;case"Tab":case"Enter":a=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(a),this.input.nativeElement.setAttribute("aria-valuenow",a),this.updateModel(e,a);break;case"Backspace":{if(e.preventDefault(),i===r){let o=s.charAt(i-1),{decimalCharIndex:l,decimalCharIndexWithoutPrefix:u}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(o)){let p=this.getDecimalLength(s);if(this._group.test(o))this._group.lastIndex=0,a=s.slice(0,i-2)+s.slice(i-1);else if(this._decimal.test(o))this._decimal.lastIndex=0,p?this.input?.nativeElement.setSelectionRange(i-1,i-1):a=s.slice(0,i-1)+s.slice(i);else if(l>0&&i>l){let g=this.isDecimalMode()&&(this.minFractionDigits||0)<p?"":"0";a=s.slice(0,i-1)+g+s.slice(i)}else u===1?(a=s.slice(0,i-1)+"0"+s.slice(i),a=this.parseValue(a)>0?a:""):a=s.slice(0,i-1)+s.slice(i)}else this.mode==="currency"&&o.search(this._currency)!=-1&&(a=s.slice(1));this.updateValue(e,a,null,"delete-single")}else a=this.deleteRange(s,i,r),this.updateValue(e,a,null,"delete-range");break}case"Delete":if(e.preventDefault(),i===r){let o=s.charAt(i),{decimalCharIndex:l,decimalCharIndexWithoutPrefix:u}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(o)){let p=this.getDecimalLength(s);if(this._group.test(o))this._group.lastIndex=0,a=s.slice(0,i)+s.slice(i+2);else if(this._decimal.test(o))this._decimal.lastIndex=0,p?this.input?.nativeElement.setSelectionRange(i+1,i+1):a=s.slice(0,i)+s.slice(i+1);else if(l>0&&i>l){let g=this.isDecimalMode()&&(this.minFractionDigits||0)<p?"":"0";a=s.slice(0,i)+g+s.slice(i+1)}else u===1?(a=s.slice(0,i)+"0"+s.slice(i+1),a=this.parseValue(a)>0?a:""):a=s.slice(0,i)+s.slice(i+1)}this.updateValue(e,a,null,"delete-back-single")}else a=this.deleteRange(s,i,r),this.updateValue(e,a,null,"delete-range");break;case"Home":this.min&&(this.updateModel(e,this.min),e.preventDefault());break;case"End":this.max&&(this.updateModel(e,this.max),e.preventDefault());break;default:break}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;let i=e.which||e.keyCode,r=String.fromCharCode(i),s=this.isDecimalSign(r),a=this.isMinusSign(r);i!=13&&e.preventDefault(),!s&&e.code==="NumpadDecimal"&&(s=!0,r=this._decimalChar,i=r.charCodeAt(0));let o=this.parseValue(this.input.nativeElement.value+r),l=o!=null?o.toString():"";if(this.maxlength&&this.getSelectedText()?.length==this.maxlength){this.insert(e,r,{isDecimalSign:s,isMinusSign:a});return}this.maxlength&&l.length>this.maxlength||(48<=i&&i<=57||a||s)&&this.insert(e,r,{isDecimalSign:s,isMinusSign:a})}getSelectedText(){return window?.getSelection()?.toString().replaceAll(/[^0-9']/g,"")||""}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let i=(e.clipboardData||this.document.defaultView.clipboardData).getData("Text");if(i){this.maxlength&&(i=i.toString().substring(0,this.maxlength));let r=this.parseValue(i);r!=null&&this.insert(e,r.toString())}}}allowMinusSign(){return this.min==null||this.min<0}isMinusSign(e){return this._minusSign.test(e)||e==="-"?(this._minusSign.lastIndex=0,!0):!1}isDecimalSign(e){return this._decimal.test(e)?(this._decimal.lastIndex=0,!0):!1}isDecimalMode(){return this.mode==="decimal"}getDecimalCharIndexes(e){let i=e.search(this._decimal);this._decimal.lastIndex=0;let s=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:i,decimalCharIndexWithoutPrefix:s}}getCharIndexes(e){let i=e.search(this._decimal);this._decimal.lastIndex=0;let r=e.search(this._minusSign);this._minusSign.lastIndex=0;let s=e.search(this._suffix);this._suffix.lastIndex=0;let a=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:i,minusCharIndex:r,suffixCharIndex:s,currencyCharIndex:a}}insert(e,i,r={isDecimalSign:!1,isMinusSign:!1}){let s=i.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&s!==-1)return;let a=this.input?.nativeElement.selectionStart,o=this.input?.nativeElement.selectionEnd,l=this.input?.nativeElement.value.trim(),{decimalCharIndex:u,minusCharIndex:p,suffixCharIndex:g,currencyCharIndex:b}=this.getCharIndexes(l),x;if(r.isMinusSign)a===0&&(x=l,(p===-1||o!==0)&&(x=this.insertText(l,i,0,o)),this.updateValue(e,x,i,"insert"));else if(r.isDecimalSign)u>0&&a===u?this.updateValue(e,l,i,"insert"):u>a&&u<o?(x=this.insertText(l,i,a,o),this.updateValue(e,x,i,"insert")):u===-1&&this.maxFractionDigits&&(x=this.insertText(l,i,a,o),this.updateValue(e,x,i,"insert"));else{let I=this.numberFormat.resolvedOptions().maximumFractionDigits,P=a!==o?"range-insert":"insert";if(u>0&&a>u){if(a+i.length-(u+1)<=I){let S=b>=a?b-1:g>=a?g:l.length;x=l.slice(0,a)+i+l.slice(a+i.length,S)+l.slice(S),this.updateValue(e,x,i,P)}}else x=this.insertText(l,i,a,o),this.updateValue(e,x,i,P)}}insertText(e,i,r,s){if((i==="."?i:i.split(".")).length===2){let o=e.slice(r,s).search(this._decimal);return this._decimal.lastIndex=0,o>0?e.slice(0,r)+this.formatValue(i)+e.slice(s):e||this.formatValue(i)}else return s-r===e.length?this.formatValue(i):r===0?i+e.slice(s):s===e.length?e.slice(0,r)+i:e.slice(0,r)+i+e.slice(s)}deleteRange(e,i,r){let s;return r-i===e.length?s="":i===0?s=e.slice(r):r===e.length?s=e.slice(0,i):s=e.slice(0,i)+e.slice(r),s}initCursor(){let e=this.input?.nativeElement.selectionStart,i=this.input?.nativeElement.value,r=i.length,s=null,a=(this.prefixChar||"").length;i=i.replace(this._prefix,""),e=e-a;let o=i.charAt(e);if(this.isNumeralChar(o))return e+a;let l=e-1;for(;l>=0;)if(o=i.charAt(l),this.isNumeralChar(o)){s=l+a;break}else l--;if(s!==null)this.input?.nativeElement.setSelectionRange(s+1,s+1);else{for(l=e;l<r;)if(o=i.charAt(l),this.isNumeralChar(o)){s=l+a;break}else l++;s!==null&&this.input?.nativeElement.setSelectionRange(s,s)}return s||0}onInputClick(){let e=this.input?.nativeElement.value;!this.readonly&&e!==C.getSelection()&&this.initCursor()}isNumeralChar(e){return e.length===1&&(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))?(this.resetRegex(),!0):!1}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,i,r,s){let a=this.input?.nativeElement.value,o=null;i!=null&&(o=this.parseValue(i),o=!o&&!this.allowEmpty?0:o,this.updateInput(o,r,s,i),this.handleOnInput(e,a,o))}handleOnInput(e,i,r){this.isValueChanged(i,r)&&(this.input.nativeElement.value=this.formatValue(r),this.input?.nativeElement.setAttribute("aria-valuenow",r),this.updateModel(e,r),this.onInput.emit({originalEvent:e,value:r,formattedValue:i}))}isValueChanged(e,i){if(i===null&&e!==null)return!0;if(i!=null){let r=typeof e=="string"?this.parseValue(e):e;return i!==r}return!1}validateValue(e){return e==="-"||e==null?null:this.min!=null&&e<this.min?this.min:this.max!=null&&e>this.max?this.max:e}updateInput(e,i,r,s){i=i||"";let a=this.input?.nativeElement.value,o=this.formatValue(e),l=a.length;if(o!==s&&(o=this.concatValues(o,s)),l===0){this.input.nativeElement.value=o,this.input.nativeElement.setSelectionRange(0,0);let p=this.initCursor()+i.length;this.input.nativeElement.setSelectionRange(p,p)}else{let u=this.input.nativeElement.selectionStart,p=this.input.nativeElement.selectionEnd;if(this.maxlength&&o.length>this.maxlength&&(o=o.slice(0,this.maxlength),u=Math.min(u,this.maxlength),p=Math.min(p,this.maxlength)),this.maxlength&&this.maxlength<o.length)return;this.input.nativeElement.value=o;let g=o.length;if(r==="range-insert"){let b=this.parseValue((a||"").slice(0,u)),I=(b!==null?b.toString():"").split("").join(`(${this.groupChar})?`),P=new RegExp(I,"g");P.test(o);let S=i.split("").join(`(${this.groupChar})?`),T=new RegExp(S,"g");T.test(o.slice(P.lastIndex)),p=P.lastIndex+T.lastIndex,this.input.nativeElement.setSelectionRange(p,p)}else if(g===l)r==="insert"||r==="delete-back-single"?this.input.nativeElement.setSelectionRange(p+1,p+1):r==="delete-single"?this.input.nativeElement.setSelectionRange(p-1,p-1):(r==="delete-range"||r==="spin")&&this.input.nativeElement.setSelectionRange(p,p);else if(r==="delete-back-single"){let b=a.charAt(p-1),x=a.charAt(p),I=l-g,P=this._group.test(x);P&&I===1?p+=1:!P&&this.isNumeralChar(b)&&(p+=-1*I+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(p,p)}else if(a==="-"&&r==="insert"){this.input.nativeElement.setSelectionRange(0,0);let x=this.initCursor()+i.length+1;this.input.nativeElement.setSelectionRange(x,x)}else p=p+(g-l),this.input.nativeElement.setSelectionRange(p,p)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,i){if(e&&i){let r=i.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?r!==-1?e:e.replace(this.suffixChar,"").split(this._decimal)[0]+i.replace(this.suffixChar,"").slice(r)+this.suffixChar:r!==-1?e.split(this._decimal)[0]+i.slice(r):e}return e}getDecimalLength(e){if(e){let i=e.split(this._decimal);if(i.length===2)return i[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let i=this.validateValue(this.parseValue(this.input.nativeElement.value)),r=i?.toString();this.input.nativeElement.value=this.formatValue(r),this.input.nativeElement.setAttribute("aria-valuenow",r),this.updateModel(e,i),this.onBlur.emit(e)}formattedValue(){let e=!this.value&&!this.allowEmpty?0:this.value;return this.formatValue(e)}updateModel(e,i){let r=this.ngControl?.control?.updateOn==="blur";this.value!==i?(this.value=i,r&&this.focused||this.onModelChange(i)):r&&this.onModelChange(i),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return this.value!=null&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}static \u0275fac=function(i){return new(i||n)(D(Kt),D(We),D(Xe),D(mh))};static \u0275cmp=Z({type:n,selectors:[["p-inputNumber"]],contentQueries:function(i,r,s){if(i&1&&Me(s,Le,4),i&2){let a;W(a=Q())&&(r.templates=a)}},viewQuery:function(i,r){if(i&1&&me(kv,5),i&2){let s;W(s=Q())&&(r.input=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(i,r){i&2&&bn("p-inputwrapper-filled",r.filled)("p-inputwrapper-focus",r.focused)("p-inputnumber-clearable",r.showClear&&r.buttonLayout!="vertical")},inputs:{showButtons:[M.HasDecoratorInputTransform,"showButtons","showButtons",j],format:[M.HasDecoratorInputTransform,"format","format",j],buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:[M.HasDecoratorInputTransform,"size","size",we],maxlength:[M.HasDecoratorInputTransform,"maxlength","maxlength",we],tabindex:[M.HasDecoratorInputTransform,"tabindex","tabindex",we],title:"title",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",ariaRequired:[M.HasDecoratorInputTransform,"ariaRequired","ariaRequired",j],name:"name",required:[M.HasDecoratorInputTransform,"required","required",j],autocomplete:"autocomplete",min:[M.HasDecoratorInputTransform,"min","min",we],max:[M.HasDecoratorInputTransform,"max","max",we],incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:[M.HasDecoratorInputTransform,"readonly","readonly",j],step:[M.HasDecoratorInputTransform,"step","step",we],allowEmpty:[M.HasDecoratorInputTransform,"allowEmpty","allowEmpty",j],locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:[M.HasDecoratorInputTransform,"useGrouping","useGrouping",j],variant:"variant",minFractionDigits:[M.HasDecoratorInputTransform,"minFractionDigits","minFractionDigits",e=>we(e,null)],maxFractionDigits:[M.HasDecoratorInputTransform,"maxFractionDigits","maxFractionDigits",e=>we(e,null)],prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:[M.HasDecoratorInputTransform,"showClear","showClear",j],autofocus:[M.HasDecoratorInputTransform,"autofocus","autofocus",j],disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[qt([aw]),Ge,As],decls:7,vars:41,consts:[["input",""],[3,"ngClass","ngStyle"],["pInputText","","role","spinbutton","inputmode","decimal","pAutoFocus","",3,"input","keydown","keypress","paste","click","focus","blur","ngClass","ngStyle","value","variant","disabled","readonly","autofocus"],[4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","","class","p-button-icon-only","tabindex","-1",3,"ngClass","class","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["class","p-inputnumber-clear-icon",3,"click",4,"ngIf"],[3,"click","ngClass"],[1,"p-inputnumber-clear-icon",3,"click"],[4,"ngTemplateOutlet"],[1,"p-inputnumber-button-group"],["type","button","pButton","","tabindex","-1",1,"p-button-icon-only",3,"mousedown","mouseup","mouseleave","keydown","keyup","ngClass","disabled"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(i,r){if(i&1){let s=H();_(0,"span",1)(1,"input",2,0),L("input",function(o){return E(s),O(r.onUserInput(o))})("keydown",function(o){return E(s),O(r.onInputKeyDown(o))})("keypress",function(o){return E(s),O(r.onInputKeyPress(o))})("paste",function(o){return E(s),O(r.onPaste(o))})("click",function(){return E(s),O(r.onInputClick())})("focus",function(o){return E(s),O(r.onInputFocus(o))})("blur",function(o){return E(s),O(r.onInputBlur(o))}),y(),w(3,Fv,3,2,"ng-container",3)(4,Gv,7,19,"span",4)(5,Xv,3,9,"button",5)(6,sw,3,9,"button",5),y()}i&2&&(ee(r.styleClass),d("ngClass",sn(37,Pv,r.showButtons&&r.buttonLayout==="stacked",r.showButtons&&r.buttonLayout==="horizontal",r.showButtons&&r.buttonLayout==="vertical"))("ngStyle",r.style),k("data-pc-name","inputnumber")("data-pc-section","root"),m(),ee(r.inputStyleClass),d("ngClass","p-inputnumber-input")("ngStyle",r.inputStyle)("value",r.formattedValue())("variant",r.variant)("disabled",r.disabled)("readonly",r.readonly)("autofocus",r.autofocus),k("id",r.inputId)("aria-valuemin",r.min)("aria-valuemax",r.max)("aria-valuenow",r.value)("placeholder",r.placeholder)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledBy)("title",r.title)("size",r.size)("name",r.name)("autocomplete",r.autocomplete)("maxlength",r.maxlength)("tabindex",r.tabindex)("aria-required",r.ariaRequired)("required",r.required)("min",r.min)("max",r.max)("data-pc-section","input"),m(2),d("ngIf",r.buttonLayout!="vertical"&&r.showClear&&r.value),m(),d("ngIf",r.showButtons&&r.buttonLayout==="stacked"),m(),d("ngIf",r.showButtons&&r.buttonLayout!=="stacked"),m(),d("ngIf",r.showButtons&&r.buttonLayout!=="stacked"))},dependencies:()=>[He,Be,Ke,Ze,Jn,Wn,Gn,ot,Cu,Iu],styles:[`@layer primeng{p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}}
`],encapsulation:2,changeDetection:0})}return n})(),ll=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,Yn,gt,Zn,ot,Cu,Iu,Ue]})}return n})();var Jh=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue]})}return n})();var Yh=(()=>{class n extends at{static \u0275fac=(()=>{let e;return function(r){return(e||(e=rt(n)))(r||n)}})();static \u0275cmp=Z({type:n,selectors:[["MinusIcon"]],standalone:!0,features:[st,xe],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z","fill","currentColor"]],template:function(i,r){i&1&&(nt(),_(0,"svg",0),A(1,"path",1),y()),i&2&&(ee(r.getClassNames()),k("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},dependencies:[ue],encapsulation:2})}return n})();var Da=n=>({height:n}),ow=(n,t)=>({"p-multiselect-item":!0,"p-disabled":n,"p-focus":t}),lw=n=>({"p-variant-filled":n}),cw=n=>({"p-highlight":n}),cl=n=>({$implicit:n});function uw(n,t){n&1&&A(0,"CheckIcon",7),n&2&&(d("styleClass","p-checkbox-icon"),k("aria-hidden",!0))}function dw(n,t){}function pw(n,t){n&1&&w(0,dw,0,0,"ng-template")}function hw(n,t){}function mw(n,t){n&1&&w(0,hw,0,0,"ng-template")}function fw(n,t){if(n&1&&(_(0,"span",8),w(1,pw,1,0,null,9)(2,mw,1,0,null,4),y()),n&2){let e=f(2);k("aria-hidden",!0),m(),d("ngTemplateOutlet",e.checkIconTemplate&&!e.itemCheckboxIconTemplate),m(),d("ngTemplateOutlet",e.itemCheckboxIconTemplate)("ngTemplateOutletContext",le(4,cl,e.selected))}}function gw(n,t){if(n&1&&(B(0),w(1,uw,1,2,"CheckIcon",5)(2,fw,3,6,"span",6),U()),n&2){let e=f();m(),d("ngIf",!e.checkIconTemplate||!e.itemCheckboxIconTemplate),m(),d("ngIf",e.checkIconTemplate)}}function _w(n,t){if(n&1&&(_(0,"span"),N(1),y()),n&2){let e,i=f();m(),ye((e=i.label)!==null&&e!==void 0?e:"empty")}}function yw(n,t){n&1&&re(0)}var bw=["container"],vw=["overlay"],ww=["filterInput"],xw=["focusInput"],Iw=["items"],Cw=["scroller"],Tw=["lastHiddenFocusableEl"],Sw=["firstHiddenFocusableEl"],Ew=["headerCheckbox"],Ow=[[["p-header"]],[["p-footer"]]],Aw=["p-header","p-footer"],kw=(n,t)=>({$implicit:n,removeChip:t}),Xh=n=>({options:n}),Pw=(n,t)=>({"p-variant-filled":n,"p-checkbox-disabled":t}),Mw=(n,t,e)=>({"p-highlight":n,"p-focus":t,"p-disabled":e}),Rw=(n,t)=>({$implicit:n,partialSelected:t}),em=(n,t)=>({$implicit:n,options:t}),Dw=()=>({});function Nw(n,t){if(n&1&&(B(0),N(1),U()),n&2){let e=f(2);m(),ye(e.label()||"empty")}}function Fw(n,t){if(n&1){let e=H();_(0,"TimesCircleIcon",31),L("click",function(){E(e);let r=f(2).$implicit,s=f(3);return O(s.removeOption(r,s.event))}),y()}n&2&&(d("styleClass","p-multiselect-token-icon"),k("data-pc-section","clearicon")("aria-hidden",!0))}function Lw(n,t){n&1&&re(0)}function jw(n,t){if(n&1){let e=H();_(0,"span",32),L("click",function(){E(e);let r=f(2).$implicit,s=f(3);return O(s.removeOption(r,s.event))}),w(1,Lw,1,0,"ng-container",33),y()}if(n&2){let e=f(5);k("data-pc-section","clearicon")("aria-hidden",!0),m(),d("ngTemplateOutlet",e.removeTokenIconTemplate)}}function Vw(n,t){if(n&1&&(B(0),w(1,Fw,1,3,"TimesCircleIcon",29)(2,jw,2,3,"span",30),U()),n&2){let e=f(4);m(),d("ngIf",!e.removeTokenIconTemplate),m(),d("ngIf",e.removeTokenIconTemplate)}}function zw(n,t){if(n&1&&(_(0,"div",27,4)(2,"span",28),N(3),y(),w(4,Vw,3,2,"ng-container",20),y()),n&2){let e=t.$implicit,i=f(3);m(3),ye(i.getLabelByValue(e)),m(),d("ngIf",!i.disabled)}}function $w(n,t){if(n&1&&(B(0),N(1),U()),n&2){let e=f(3);m(),ye(e.placeholder()||e.defaultLabel||"empty")}}function Bw(n,t){if(n&1&&(B(0),w(1,zw,5,2,"div",26)(2,$w,2,1,"ng-container",20),U()),n&2){let e=f(2);m(),d("ngForOf",e.chipSelectedItems()),m(),d("ngIf",!e.modelValue()||e.modelValue().length===0)}}function Uw(n,t){if(n&1&&(B(0),w(1,Nw,2,1,"ng-container",20)(2,Bw,3,2,"ng-container",20),U()),n&2){let e=f();m(),d("ngIf",e.display==="comma"),m(),d("ngIf",e.display==="chip")}}function Hw(n,t){n&1&&re(0)}function qw(n,t){if(n&1){let e=H();_(0,"TimesIcon",31),L("click",function(r){E(e);let s=f(2);return O(s.clear(r))}),y()}n&2&&(d("styleClass","p-multiselect-clear-icon"),k("data-pc-section","clearicon")("aria-hidden",!0))}function Kw(n,t){}function Gw(n,t){n&1&&w(0,Kw,0,0,"ng-template")}function Zw(n,t){if(n&1){let e=H();_(0,"span",35),L("click",function(r){E(e);let s=f(2);return O(s.clear(r))}),w(1,Gw,1,0,null,33),y()}if(n&2){let e=f(2);k("data-pc-section","clearicon")("aria-hidden",!0),m(),d("ngTemplateOutlet",e.clearIconTemplate)}}function Ww(n,t){if(n&1&&(B(0),w(1,qw,1,3,"TimesIcon",29)(2,Zw,2,3,"span",34),U()),n&2){let e=f();m(),d("ngIf",!e.clearIconTemplate),m(),d("ngIf",e.clearIconTemplate)}}function Qw(n,t){n&1&&re(0)}function Jw(n,t){if(n&1&&(B(0),w(1,Qw,1,0,"ng-container",33),U()),n&2){let e=f(2);m(),d("ngTemplateOutlet",e.loadingIconTemplate)}}function Yw(n,t){if(n&1&&A(0,"span",38),n&2){let e=f(3);d("ngClass","p-multiselect-trigger-icon pi-spin "+e.loadingIcon)}}function Xw(n,t){n&1&&A(0,"span",39),n&2&&ee("p-multiselect-trigger-icon pi pi-spinner pi-spin")}function e1(n,t){if(n&1&&(B(0),w(1,Yw,1,1,"span",36)(2,Xw,1,2,"span",37),U()),n&2){let e=f(2);m(),d("ngIf",e.loadingIcon),m(),d("ngIf",!e.loadingIcon)}}function t1(n,t){if(n&1&&(B(0),w(1,Jw,2,1,"ng-container",20)(2,e1,3,2,"ng-container",20),U()),n&2){let e=f();m(),d("ngIf",e.loadingIconTemplate),m(),d("ngIf",!e.loadingIconTemplate)}}function i1(n,t){if(n&1&&A(0,"span",43),n&2){let e=f(3);d("ngClass",e.dropdownIcon),k("data-pc-section","triggericon")("aria-hidden",!0)}}function n1(n,t){n&1&&A(0,"ChevronDownIcon",44),n&2&&(d("styleClass","p-multiselect-trigger-icon"),k("data-pc-section","triggericon")("aria-hidden",!0))}function r1(n,t){if(n&1&&(B(0),w(1,i1,1,3,"span",41)(2,n1,1,3,"ChevronDownIcon",42),U()),n&2){let e=f(2);m(),d("ngIf",e.dropdownIcon),m(),d("ngIf",!e.dropdownIcon)}}function s1(n,t){}function a1(n,t){n&1&&w(0,s1,0,0,"ng-template")}function o1(n,t){if(n&1&&(_(0,"span",45),w(1,a1,1,0,null,33),y()),n&2){let e=f(2);k("data-pc-section","triggericon")("aria-hidden",!0),m(),d("ngTemplateOutlet",e.dropdownIconTemplate)}}function l1(n,t){if(n&1&&w(0,r1,3,2,"ng-container",20)(1,o1,2,3,"span",40),n&2){let e=f();d("ngIf",!e.dropdownIconTemplate),m(),d("ngIf",e.dropdownIconTemplate)}}function c1(n,t){n&1&&re(0)}function u1(n,t){n&1&&re(0)}function d1(n,t){if(n&1&&(B(0),w(1,u1,1,0,"ng-container",21),U()),n&2){let e=f(3);m(),d("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",le(2,Xh,e.filterOptions))}}function p1(n,t){n&1&&A(0,"CheckIcon",44),n&2&&(d("styleClass","p-checkbox-icon"),k("aria-hidden",!0))}function h1(n,t){if(n&1&&(B(0),w(1,p1,1,2,"CheckIcon",42),U()),n&2){let e=f(6);m(),d("ngIf",e.allSelected())}}function m1(n,t){}function f1(n,t){n&1&&w(0,m1,0,0,"ng-template")}function g1(n,t){if(n&1&&(_(0,"span",61),w(1,f1,1,0,null,21),y()),n&2){let e=f(6);k("aria-hidden",!0),m(),d("ngTemplateOutlet",e.checkIconTemplate)("ngTemplateOutletContext",le(3,cl,e.allSelected()))}}function _1(n,t){}function y1(n,t){n&1&&w(0,_1,0,0,"ng-template")}function b1(n,t){if(n&1&&(_(0,"span",61),w(1,y1,1,0,null,21),y()),n&2){let e=f(6);k("aria-hidden",!0),m(),d("ngTemplateOutlet",e.headerCheckboxIconTemplate)("ngTemplateOutletContext",qe(3,Rw,e.allSelected(),e.partialSelected()))}}function v1(n,t){if(n&1&&(B(0),w(1,h1,2,1,"ng-container",20)(2,g1,2,5,"span",60)(3,b1,2,6,"span",60),U()),n&2){let e=f(5);m(),d("ngIf",!e.checkIconTemplate&&!e.headerCheckboxIconTemplate),m(),d("ngIf",e.checkIconTemplate),m(),d("ngIf",e.headerCheckboxIconTemplate)}}function w1(n,t){if(n&1){let e=H();_(0,"div",57),L("click",function(r){E(e);let s=f(4);return O(s.onToggleAll(r))})("keydown",function(r){E(e);let s=f(4);return O(s.onHeaderCheckboxKeyDown(r))}),_(1,"div",16)(2,"input",58,9),L("focus",function(){E(e);let r=f(4);return O(r.onHeaderCheckboxFocus())})("blur",function(){E(e);let r=f(4);return O(r.onHeaderCheckboxBlur())}),y()(),_(4,"div",59),w(5,v1,4,3,"ng-container",20),y()()}if(n&2){let e=f(4);d("ngClass",qe(10,Pw,e.variant==="filled"||e.config.inputStyle()==="filled",e.disabled||e.toggleAllDisabled)),m(),k("data-p-hidden-accessible",!0),m(),d("readonly",e.readonly)("disabled",e.disabled||e.toggleAllDisabled),k("checked",e.allSelected())("aria-label",e.toggleAllAriaLabel),m(2),d("ngClass",sn(13,Mw,e.allSelected(),e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),k("aria-label",e.toggleAllAriaLabel)("aria-checked",e.allSelected()),m(),d("ngIf",e.allSelected()||e.partialSelected())}}function x1(n,t){n&1&&A(0,"SearchIcon",44),n&2&&d("styleClass","p-multiselect-filter-icon")}function I1(n,t){}function C1(n,t){n&1&&w(0,I1,0,0,"ng-template")}function T1(n,t){if(n&1&&(_(0,"span",65),w(1,C1,1,0,null,33),y()),n&2){let e=f(5);m(),d("ngTemplateOutlet",e.filterIconTemplate)}}function S1(n,t){if(n&1){let e=H();_(0,"div",62)(1,"input",63,10),L("input",function(r){E(e);let s=f(4);return O(s.onFilterInputChange(r))})("keydown",function(r){E(e);let s=f(4);return O(s.onFilterKeyDown(r))})("click",function(r){E(e);let s=f(4);return O(s.onInputClick(r))})("blur",function(r){E(e);let s=f(4);return O(s.onFilterBlur(r))}),y(),w(3,x1,1,1,"SearchIcon",42)(4,T1,2,1,"span",64),y()}if(n&2){let e=f(4);m(),d("value",e._filterValue()||"")("disabled",e.disabled),k("autocomplete",e.autocomplete)("placeholder",e.filterPlaceHolder)("aria-owns",e.id+"_list")("aria-activedescendant",e.focusedOptionId)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel),m(2),d("ngIf",!e.filterIconTemplate),m(),d("ngIf",e.filterIconTemplate)}}function E1(n,t){n&1&&A(0,"TimesIcon",44),n&2&&d("styleClass","p-multiselect-close-icon")}function O1(n,t){}function A1(n,t){n&1&&w(0,O1,0,0,"ng-template")}function k1(n,t){if(n&1&&(_(0,"span",66),w(1,A1,1,0,null,33),y()),n&2){let e=f(4);m(),d("ngTemplateOutlet",e.closeIconTemplate)}}function P1(n,t){if(n&1){let e=H();w(0,w1,6,17,"div",53)(1,S1,5,10,"div",54),_(2,"button",55),L("click",function(r){E(e);let s=f(3);return O(s.close(r))}),w(3,E1,1,1,"TimesIcon",42)(4,k1,2,1,"span",56),y()}if(n&2){let e=f(3);d("ngIf",e.showToggleAll&&!e.selectionLimit),m(),d("ngIf",e.filter),m(),k("aria-label",e.closeAriaLabel),m(),d("ngIf",!e.closeIconTemplate),m(),d("ngIf",e.closeIconTemplate)}}function M1(n,t){if(n&1&&(_(0,"div",52),Ct(1),w(2,c1,1,0,"ng-container",33)(3,d1,2,4,"ng-container",23)(4,P1,5,5,"ng-template",null,8,ut),y()),n&2){let e=et(5),i=f(2);m(2),d("ngTemplateOutlet",i.headerTemplate),m(),d("ngIf",i.filterTemplate)("ngIfElse",e)}}function R1(n,t){n&1&&re(0)}function D1(n,t){if(n&1&&w(0,R1,1,0,"ng-container",21),n&2){let e=t.$implicit,i=t.options;f(2);let r=et(8);d("ngTemplateOutlet",r)("ngTemplateOutletContext",qe(2,em,e,i))}}function N1(n,t){n&1&&re(0)}function F1(n,t){if(n&1&&w(0,N1,1,0,"ng-container",21),n&2){let e=t.options,i=f(4);d("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",le(2,Xh,e))}}function L1(n,t){n&1&&(B(0),w(1,F1,1,4,"ng-template",68),U())}function j1(n,t){if(n&1){let e=H();_(0,"p-scroller",67,11),L("onLazyLoad",function(r){E(e);let s=f(2);return O(s.onLazyLoad.emit(r))}),w(2,D1,1,5,"ng-template",25)(3,L1,2,0,"ng-container",20),y()}if(n&2){let e=f(2);Qe(le(9,Da,e.scrollHeight)),d("items",e.visibleOptions())("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("tabindex",-1)("lazy",e.lazy)("options",e.virtualScrollOptions),m(3),d("ngIf",e.loaderTemplate)}}function V1(n,t){n&1&&re(0)}function z1(n,t){if(n&1&&(B(0),w(1,V1,1,0,"ng-container",21),U()),n&2){f();let e=et(8),i=f();m(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",qe(3,em,i.visibleOptions(),Fe(2,Dw)))}}function $1(n,t){if(n&1&&(_(0,"span"),N(1),y()),n&2){let e=f(2).$implicit,i=f(3);m(),ye(i.getOptionGroupLabel(e.optionGroup))}}function B1(n,t){n&1&&re(0)}function U1(n,t){if(n&1&&(B(0),_(1,"li",72),w(2,$1,2,1,"span",20)(3,B1,1,0,"ng-container",21),y(),U()),n&2){let e=f(),i=e.$implicit,r=e.index,s=f().options,a=f(2);m(),d("ngStyle",le(5,Da,s.itemSize+"px")),k("id",a.id+"_"+a.getOptionIndex(r,s)),m(),d("ngIf",!a.groupTemplate),m(),d("ngTemplateOutlet",a.groupTemplate)("ngTemplateOutletContext",le(7,cl,i.optionGroup))}}function H1(n,t){if(n&1){let e=H();B(0),_(1,"p-multiSelectItem",73),L("onClick",function(r){E(e);let s=f().index,a=f().options,o=f(2);return O(o.onOptionSelect(r,!1,o.getOptionIndex(s,a)))})("onMouseEnter",function(r){E(e);let s=f().index,a=f().options,o=f(2);return O(o.onOptionMouseEnter(r,o.getOptionIndex(s,a)))}),y(),U()}if(n&2){let e=f(),i=e.$implicit,r=e.index,s=f().options,a=f(2);m(),d("id",a.id+"_"+a.getOptionIndex(r,s))("option",i)("selected",a.isSelected(i))("label",a.getOptionLabel(i))("disabled",a.isOptionDisabled(i))("template",a.itemTemplate)("checkIconTemplate",a.checkIconTemplate)("itemCheckboxIconTemplate",a.itemCheckboxIconTemplate)("itemSize",s.itemSize)("focused",a.focusedOptionIndex()===a.getOptionIndex(r,s))("ariaPosInset",a.getAriaPosInset(a.getOptionIndex(r,s)))("ariaSetSize",a.ariaSetSize)}}function q1(n,t){if(n&1&&w(0,U1,4,9,"ng-container",20)(1,H1,2,12,"ng-container",20),n&2){let e=t.$implicit,i=f(3);d("ngIf",i.isOptionGroup(e)),m(),d("ngIf",!i.isOptionGroup(e))}}function K1(n,t){if(n&1&&(B(0),N(1),U()),n&2){let e=f(4);m(),Je(" ",e.emptyFilterMessageLabel," ")}}function G1(n,t){n&1&&re(0,null,13)}function Z1(n,t){if(n&1&&(_(0,"li",74),w(1,K1,2,1,"ng-container",23)(2,G1,2,0,"ng-container",33),y()),n&2){let e=f().options,i=f(2);d("ngStyle",le(4,Da,e.itemSize+"px")),m(),d("ngIf",!i.emptyFilterTemplate&&!i.emptyTemplate)("ngIfElse",i.emptyFilter),m(),d("ngTemplateOutlet",i.emptyFilterTemplate||i.emptyTemplate)}}function W1(n,t){if(n&1&&(B(0),N(1),U()),n&2){let e=f(4);m(),Je(" ",e.emptyMessageLabel," ")}}function Q1(n,t){n&1&&re(0,null,14)}function J1(n,t){if(n&1&&(_(0,"li",74),w(1,W1,2,1,"ng-container",23)(2,Q1,2,0,"ng-container",33),y()),n&2){let e=f().options,i=f(2);d("ngStyle",le(4,Da,e.itemSize+"px")),m(),d("ngIf",!i.emptyTemplate)("ngIfElse",i.empty),m(),d("ngTemplateOutlet",i.emptyTemplate)}}function Y1(n,t){if(n&1&&(_(0,"ul",69,12),w(2,q1,2,2,"ng-template",70)(3,Z1,3,6,"li",71)(4,J1,3,6,"li",71),y()),n&2){let e=t.$implicit,i=t.options,r=f(2);Qe(i.contentStyle),d("ngClass",i.contentStyleClass),k("aria-label",r.listLabel),m(2),d("ngForOf",e),m(),d("ngIf",r.hasFilter()&&r.isEmpty()),m(),d("ngIf",!r.hasFilter()&&r.isEmpty())}}function X1(n,t){n&1&&re(0)}function ex(n,t){if(n&1&&(_(0,"div",75),Ct(1,1),w(2,X1,1,0,"ng-container",33),y()),n&2){let e=f(2);m(2),d("ngTemplateOutlet",e.footerTemplate)}}function tx(n,t){if(n&1){let e=H();_(0,"div",46)(1,"span",47,5),L("focus",function(r){E(e);let s=f();return O(s.onFirstHiddenFocus(r))}),y(),w(3,M1,6,3,"div",48),_(4,"div",49),w(5,j1,4,11,"p-scroller",50)(6,z1,2,6,"ng-container",20)(7,Y1,5,7,"ng-template",null,6,ut),y(),w(9,ex,3,1,"div",51),_(10,"span",47,7),L("focus",function(r){E(e);let s=f();return O(s.onLastHiddenFocus(r))}),y()()}if(n&2){let e=f();ee(e.panelStyleClass),d("ngClass","p-multiselect-panel p-component")("ngStyle",e.panelStyle),k("id",e.id+"_list"),m(),k("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0),m(2),d("ngIf",e.showHeader),m(),Bn("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),m(),d("ngIf",e.virtualScroll),m(),d("ngIf",!e.virtualScroll),m(3),d("ngIf",e.footerFacet||e.footerTemplate),m(),k("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0)}}var ix={provide:Ei,useExisting:oi(()=>Su),multi:!0},nx=(()=>{class n{config;id;option;selected;label;disabled;itemSize;focused;ariaPosInset;ariaSetSize;template;checkIconTemplate;itemCheckboxIconTemplate;onClick=new $;onMouseEnter=new $;constructor(e){this.config=e}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option,selected:this.selected}),e.stopPropagation()}onOptionMouseEnter(e){this.onMouseEnter.emit({originalEvent:e,option:this.option,selected:this.selected})}static \u0275fac=function(i){return new(i||n)(D(Tt))};static \u0275cmp=Z({type:n,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{id:"id",option:"option",selected:[M.HasDecoratorInputTransform,"selected","selected",j],label:"label",disabled:[M.HasDecoratorInputTransform,"disabled","disabled",j],itemSize:[M.HasDecoratorInputTransform,"itemSize","itemSize",we],focused:[M.HasDecoratorInputTransform,"focused","focused",j],ariaPosInset:"ariaPosInset",ariaSetSize:"ariaSetSize",template:"template",checkIconTemplate:"checkIconTemplate",itemCheckboxIconTemplate:"itemCheckboxIconTemplate"},outputs:{onClick:"onClick",onMouseEnter:"onMouseEnter"},features:[Ge],decls:6,vars:28,consts:[["pRipple","","role","option",1,"p-multiselect-item",3,"click","mouseenter","ngStyle","ngClass","id"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"]],template:function(i,r){i&1&&(_(0,"li",0),L("click",function(a){return r.onOptionClick(a)})("mouseenter",function(a){return r.onOptionMouseEnter(a)}),_(1,"div",1)(2,"div",2),w(3,gw,3,2,"ng-container",3),y()(),w(4,_w,2,1,"span",3)(5,yw,1,0,"ng-container",4),y()),i&2&&(d("ngStyle",le(17,Da,r.itemSize+"px"))("ngClass",qe(19,ow,r.disabled,r.focused))("id",r.id),k("aria-label",r.label)("aria-setsize",r.ariaSetSize)("aria-posinset",r.ariaPosInset)("aria-selected",r.selected)("data-p-focused",r.focused)("data-p-highlight",r.selected)("data-p-disabled",r.disabled)("aria-checked",r.selected),m(),d("ngClass",le(22,lw,r.config.inputStyle()==="filled")),m(),d("ngClass",le(24,cw,r.selected)),m(),d("ngIf",r.selected),m(),d("ngIf",!r.template),m(),d("ngTemplateOutlet",r.template)("ngTemplateOutletContext",le(26,cl,r.option)))},dependencies:()=>[He,Be,Ke,Ze,ei,Fi],encapsulation:2})}return n})(),Su=(()=>{class n{el;renderer;cd;zone;filterService;config;overlayService;id;ariaLabel;style;styleClass;panelStyle;panelStyleClass;inputId;disabled;readonly;group;filter=!0;filterPlaceHolder;filterLocale;overlayVisible;tabindex=0;variant="outlined";appendTo;dataKey;name;ariaLabelledBy;set displaySelectedLabel(e){this._displaySelectedLabel=e}get displaySelectedLabel(){return this._displaySelectedLabel}set maxSelectedLabels(e){this._maxSelectedLabels=e}get maxSelectedLabels(){return this._maxSelectedLabels}selectionLimit;selectedItemsLabel;showToggleAll=!0;emptyFilterMessage="";emptyMessage="";resetFilterOnHide=!1;dropdownIcon;optionLabel;optionValue;optionDisabled;optionGroupLabel="label";optionGroupChildren="items";showHeader=!0;filterBy;scrollHeight="200px";lazy=!1;virtualScroll;loading=!1;virtualScrollItemSize;loadingIcon;virtualScrollOptions;overlayOptions;ariaFilterLabel;filterMatchMode="contains";tooltip="";tooltipPosition="right";tooltipPositionStyle="absolute";tooltipStyleClass;autofocusFilter=!0;display="comma";autocomplete="off";showClear=!1;autofocus;get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}set defaultLabel(e){this._defaultLabel=e,console.warn("defaultLabel property is deprecated since 16.6.0, use placeholder instead")}get defaultLabel(){return this._defaultLabel}set placeholder(e){this._placeholder.set(e)}get placeholder(){return this._placeholder.asReadonly()}get options(){return this._options()}set options(e){fe.deepEquals(this._options(),e)||this._options.set(e)}get filterValue(){return this._filterValue()}set filterValue(e){this._filterValue.set(e)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get selectAll(){return this._selectAll}set selectAll(e){this._selectAll=e}focusOnHover=!1;filterFields;selectOnFocus=!1;autoOptionFocus=!0;onChange=new $;onFilter=new $;onFocus=new $;onBlur=new $;onClick=new $;onClear=new $;onPanelShow=new $;onPanelHide=new $;onLazyLoad=new $;onRemove=new $;onSelectAllChange=new $;containerViewChild;overlayViewChild;filterInputChild;focusInputViewChild;itemsViewChild;scroller;lastHiddenFocusableElementOnOverlay;firstHiddenFocusableElementOnOverlay;headerCheckboxViewChild;footerFacet;headerFacet;templates;searchValue;searchTimeout;_selectAll=null;_autoZIndex;_baseZIndex;_showTransitionOptions;_hideTransitionOptions;_defaultLabel;_placeholder=Ut(void 0);_itemSize;_selectionLimit;_disableTooltip=!1;value;_filteredOptions;onModelChange=()=>{};onModelTouched=()=>{};valuesAsString;focus;filtered;itemTemplate;groupTemplate;loaderTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;selectedItemsTemplate;checkIconTemplate;loadingIconTemplate;filterIconTemplate;removeTokenIconTemplate;closeIconTemplate;clearIconTemplate;dropdownIconTemplate;itemCheckboxIconTemplate;headerCheckboxIconTemplate;headerCheckboxFocus;filterOptions;preventModelTouched;preventDocumentDefault;focused=!1;itemsWrapper;_displaySelectedLabel=!0;_maxSelectedLabels=3;modelValue=Ut(null);_filterValue=Ut(null);_options=Ut(null);startRangeIndex=Ut(-1);focusedOptionIndex=Ut(-1);selectedOptions;clickInProgress=!1;get containerClass(){return{"p-multiselect p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-multiselect-clearable":this.showClear&&!this.disabled,"p-multiselect-chip":this.display==="chip","p-focus":this.focused,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled"}}get inputClass(){return{"p-multiselect-label p-inputtext":!0,"p-placeholder":(this.placeholder()||this.defaultLabel)&&(this.label()===this.placeholder()||this.label()===this.defaultLabel),"p-multiselect-label-empty":!this.selectedItemsTemplate&&(this.label()==="p-emptylabel"||this.label().length===0)}}get panelClass(){return{"p-multiselect-panel p-component":!0,"p-input-filled":this.config.inputStyle()==="filled","p-ripple-disabled":this.config.ripple===!1}}get labelClass(){return{"p-multiselect-label":!0,"p-placeholder":this.label()===this.placeholder()||this.label()===this.defaultLabel,"p-multiselect-label-empty":!this.placeholder()&&!this.defaultLabel&&(!this.modelValue()||this.modelValue().length===0)}}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(At.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(At.EMPTY_FILTER_MESSAGE)}get filled(){return typeof this.modelValue()=="string"?!!this.modelValue():fe.isNotEmpty(this.modelValue())}get isVisibleClearIcon(){return this.modelValue()!=null&&this.modelValue()!==""&&fe.isNotEmpty(this.modelValue())&&this.showClear&&!this.disabled&&this.filled}get toggleAllAriaLabel(){return this.config.translation.aria?this.config.translation.aria[this.allSelected()?"selectAll":"unselectAll"]:void 0}get closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}get listLabel(){return this.config.getTranslation(At.ARIA).listLabel}getAllVisibleAndNonVisibleOptions(){return this.group?this.flatOptions(this.options):this.options||[]}visibleOptions=vn(()=>{let e=this.getAllVisibleAndNonVisibleOptions(),i=fe.isArray(e)&&fe.isObject(e[0]);if(this._filterValue()){let r;if(i?r=this.filterService.filter(e,this.searchFields(),this._filterValue(),this.filterMatchMode,this.filterLocale):r=e.filter(s=>s.toString().toLocaleLowerCase().includes(this._filterValue().toLocaleLowerCase())),this.group){let s=this.options||[],a=[];return s.forEach(o=>{let u=this.getOptionGroupChildren(o).filter(p=>r.includes(p));u.length>0&&a.push(v(c({},o),{[typeof this.optionGroupChildren=="string"?this.optionGroupChildren:"items"]:[...u]}))}),this.flatOptions(a)}return r}return e});label=vn(()=>{let e,i=this.modelValue();if(i&&i.length&&this.displaySelectedLabel){if(fe.isNotEmpty(this.maxSelectedLabels)&&i.length>this.maxSelectedLabels)return this.getSelectedItemsLabel();e="";for(let r=0;r<i.length;r++)r!==0&&(e+=", "),e+=this.getLabelByValue(i[r])}else e=this.placeholder()||this.defaultLabel||"";return e});chipSelectedItems=vn(()=>fe.isNotEmpty(this.maxSelectedLabels)&&this.modelValue()&&this.modelValue().length>this.maxSelectedLabels?this.modelValue().slice(0,this.maxSelectedLabels):this.modelValue());constructor(e,i,r,s,a,o,l){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.filterService=a,this.config=o,this.overlayService=l,$o(()=>{let u=this.modelValue(),p=this.visibleOptions();p&&fe.isNotEmpty(p)&&(this.optionValue&&this.optionLabel&&u?this.selectedOptions=p.filter(g=>u.includes(g[this.optionLabel])||u.includes(g[this.optionValue])):this.selectedOptions=u,this.cd.markForCheck())})}ngOnInit(){this.id=this.id||dt(),this.autoUpdateModel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}maxSelectionLimitReached(){return this.selectionLimit&&this.modelValue()&&this.modelValue().length===this.selectionLimit}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItems":this.selectedItemsTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"checkicon":this.checkIconTemplate=e.template,console.warn("checkicon is deprecated and will removed in v18. Use itemcheckboxicon or headercheckboxicon templates instead.");break;case"headercheckboxicon":this.headerCheckboxIconTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;case"filtericon":this.filterIconTemplate=e.template;break;case"removetokenicon":this.removeTokenIconTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"dropdownicon":this.dropdownIconTemplate=e.template;break;case"itemcheckboxicon":this.itemCheckboxIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild?.alignOverlay()},1)}),this.filtered=!1)}flatOptions(e){return(e||[]).reduce((i,r,s)=>{i.push({optionGroup:r,group:!0,index:s});let a=this.getOptionGroupChildren(r);return a&&a.forEach(o=>i.push(o)),i},[])}autoUpdateModel(){if(this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()){this.focusedOptionIndex.set(this.findFirstFocusedOptionIndex());let e=this.getOptionValue(this.visibleOptions()[this.focusedOptionIndex()]);this.onOptionSelect({originalEvent:null,option:[e]})}}updateModel(e,i){this.value=e,this.onModelChange(e),this.modelValue.set(e)}onInputClick(e){e.stopPropagation(),e.preventDefault(),this.focusedOptionIndex.set(-1)}onOptionSelect(e,i=!1,r=-1){let{originalEvent:s,option:a}=e;if(this.disabled||this.isOptionDisabled(a))return;let o=this.isSelected(a),l=null;o?l=this.modelValue().filter(u=>!fe.equals(u,this.getOptionValue(a),this.equalityKey())):l=[...this.modelValue()||[],this.getOptionValue(a)],this.updateModel(l,s),r!==-1&&this.focusedOptionIndex.set(r),i&&C.focus(this.focusInputViewChild?.nativeElement),this.onChange.emit({originalEvent:e,value:l,itemValue:a})}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}onOptionSelectRange(e,i=-1,r=-1){if(i===-1&&(i=this.findNearestSelectedOptionIndex(r,!0)),r===-1&&(r=this.findNearestSelectedOptionIndex(i)),i!==-1&&r!==-1){let s=Math.min(i,r),a=Math.max(i,r),o=this.visibleOptions().slice(s,a+1).filter(l=>this.isValidOption(l)).map(l=>this.getOptionValue(l));this.updateModel(o,e)}}searchFields(){return(this.filterBy||this.optionLabel||"label").split(",")}findNearestSelectedOptionIndex(e,i=!1){let r=-1;return this.hasSelectedOption()&&(i?(r=this.findPrevSelectedOptionIndex(e),r=r===-1?this.findNextSelectedOptionIndex(e):r):(r=this.findNextSelectedOptionIndex(e),r=r===-1?this.findPrevSelectedOptionIndex(e):r)),r>-1?r:e}findPrevSelectedOptionIndex(e){let i=this.hasSelectedOption()&&e>0?fe.findLastIndex(this.visibleOptions().slice(0,e),r=>this.isValidSelectedOption(r)):-1;return i>-1?i:-1}findFirstFocusedOptionIndex(){let e=this.findFirstSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findFirstSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}findNextSelectedOptionIndex(e){let i=this.hasSelectedOption()&&e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(r=>this.isValidSelectedOption(r)):-1;return i>-1?i+e+1:-1}equalityKey(){return this.optionValue?null:this.dataKey}hasSelectedOption(){return fe.isNotEmpty(this.modelValue())}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}isOptionGroup(e){return(this.group||this.optionGroupLabel)&&e.optionGroup&&e.group}isValidOption(e){return e&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))}isOptionDisabled(e){return this.maxSelectionLimitReached()&&!this.isSelected(e)?!0:this.optionDisabled?fe.resolveFieldData(e,this.optionDisabled):e&&e.disabled!==void 0?e.disabled:!1}isSelected(e){let i=this.getOptionValue(e);return(this.modelValue()||[]).some(r=>fe.equals(r,i,this.equalityKey()))}isOptionMatched(e){return this.isValidOption(e)&&this.getOptionLabel(e).toString().toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))}isEmpty(){return!this._options()||this.visibleOptions()&&this.visibleOptions().length===0}getOptionIndex(e,i){return this.virtualScrollerDisabled?e:i&&i.getItemOptions(e).index}getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions().slice(0,e).filter(i=>this.isOptionGroup(i)).length:e)+1}get ariaSetSize(){return this.visibleOptions().filter(e=>!this.isOptionGroup(e)).length}getLabelByValue(e){let r=(this.group?this.flatOptions(this._options()):this._options()||[]).find(s=>!this.isOptionGroup(s)&&fe.equals(this.getOptionValue(s),e,this.equalityKey()));return r?this.getOptionLabel(r):null}getSelectedItemsLabel(){let e=/{(.*?)}/,i=this.selectedItemsLabel?this.selectedItemsLabel:this.config.getTranslation(At.SELECTION_MESSAGE);return e.test(i)?i.replace(i.match(e)[0],this.modelValue().length+""):i}getOptionLabel(e){return this.optionLabel?fe.resolveFieldData(e,this.optionLabel):e&&e.label!=null?e.label:e}getOptionValue(e){return this.optionValue?fe.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&e.value!==void 0?e.value:e}getOptionGroupLabel(e){return this.optionGroupLabel?fe.resolveFieldData(e,this.optionGroupLabel):e&&e.label!=null?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?fe.resolveFieldData(e,this.optionGroupChildren):e.items}onKeyDown(e){if(this.disabled){e.preventDefault();return}let i=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"Space":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey();break;default:if(e.code==="KeyA"&&i){let r=this.visibleOptions().filter(s=>this.isValidOption(s)).map(s=>this.getOptionValue(s));this.updateModel(r,e),e.preventDefault();break}!i&&fe.isPrintableCharacter(e.key)&&(!this.overlayVisible&&this.show(),this.searchOptions(e,e.key),e.preventDefault());break}}onFilterKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0);break;default:break}}onArrowLeftKey(e,i=!1){i&&this.focusedOptionIndex.set(-1)}onArrowDownKey(e){let i=this.focusedOptionIndex()!==-1?this.findNextOptionIndex(this.focusedOptionIndex()):this.findFirstFocusedOptionIndex();e.shiftKey&&this.onOptionSelectRange(e,this.startRangeIndex(),i),this.changeFocusedOptionIndex(e,i),!this.overlayVisible&&this.show(),e.preventDefault(),e.stopPropagation()}onArrowUpKey(e,i=!1){if(e.altKey&&!i)this.focusedOptionIndex()!==-1&&this.onOptionSelect(e,this.visibleOptions()[this.focusedOptionIndex()]),this.overlayVisible&&this.hide(),e.preventDefault();else{let r=this.focusedOptionIndex()!==-1?this.findPrevOptionIndex(this.focusedOptionIndex()):this.findLastFocusedOptionIndex();e.shiftKey&&this.onOptionSelectRange(e,r,this.startRangeIndex()),this.changeFocusedOptionIndex(e,r),!this.overlayVisible&&this.show(),e.preventDefault()}e.stopPropagation()}onHomeKey(e,i=!1){let{currentTarget:r}=e;if(i){let s=r.value.length;r.setSelectionRange(0,e.shiftKey?s:0),this.focusedOptionIndex.set(-1)}else{let s=e.metaKey||e.ctrlKey,a=this.findFirstOptionIndex();e.shiftKey&&s&&this.onOptionSelectRange(e,a,this.startRangeIndex()),this.changeFocusedOptionIndex(e,a),!this.overlayVisible&&this.show()}e.preventDefault()}onEndKey(e,i=!1){let{currentTarget:r}=e;if(i){let s=r.value.length;r.setSelectionRange(e.shiftKey?0:s,s),this.focusedOptionIndex.set(-1)}else{let s=e.metaKey||e.ctrlKey,a=this.findLastFocusedOptionIndex();e.shiftKey&&s&&this.onOptionSelectRange(e,this.startRangeIndex(),a),this.changeFocusedOptionIndex(e,a),!this.overlayVisible&&this.show()}e.preventDefault()}onPageDownKey(e){this.scrollInView(this.visibleOptions().length-1),e.preventDefault()}onPageUpKey(e){this.scrollInView(0),e.preventDefault()}onEnterKey(e){this.overlayVisible?this.focusedOptionIndex()!==-1&&(e.shiftKey?this.onOptionSelectRange(e,this.focusedOptionIndex()):this.onOptionSelect({originalEvent:e,option:this.visibleOptions()[this.focusedOptionIndex()]})):this.onArrowDownKey(e),e.preventDefault()}onEscapeKey(e){this.overlayVisible&&this.hide(!0),e.preventDefault()}onDeleteKey(e){this.showClear&&(this.clear(e),e.preventDefault())}onTabKey(e,i=!1){i||(this.overlayVisible&&this.hasFocusableElements()?(C.focus(e.shiftKey?this.lastHiddenFocusableElementOnOverlay.nativeElement:this.firstHiddenFocusableElementOnOverlay.nativeElement),e.preventDefault()):(this.focusedOptionIndex()!==-1&&this.onOptionSelect({originalEvent:e,option:this.visibleOptions()[this.focusedOptionIndex()]}),this.overlayVisible&&this.hide(this.filter)))}onShiftKey(){this.startRangeIndex.set(this.focusedOptionIndex())}onContainerClick(e){if(!(this.disabled||this.loading||this.readonly||e.target.isSameNode(this.focusInputViewChild?.nativeElement))){if(e.target.tagName==="INPUT"||e.target.getAttribute("data-pc-section")==="clearicon"||e.target.closest('[data-pc-section="clearicon"]')){e.preventDefault();return}else if(!this.overlayViewChild||!this.overlayViewChild.el.nativeElement.contains(e.target)){if(this.clickInProgress)return;this.clickInProgress=!0,setTimeout(()=>{this.clickInProgress=!1},150),this.overlayVisible?this.hide(!0):this.show(!0)}this.focusInputViewChild?.nativeElement.focus({preventScroll:!0}),this.onClick.emit(e),this.cd.detectChanges()}}onFirstHiddenFocus(e){let i=e.relatedTarget===this.focusInputViewChild?.nativeElement?C.getFirstFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;C.focus(i)}onInputFocus(e){this.focused=!0;let i=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(i),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit({originalEvent:e})}onInputBlur(e){this.focused=!1,this.onBlur.emit({originalEvent:e}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onFilterInputChange(e){let i=e.target.value;this._filterValue.set(i),this.focusedOptionIndex.set(-1),this.onFilter.emit({originalEvent:e,filter:this._filterValue()}),!this.virtualScrollerDisabled&&this.scroller.scrollToIndex(0),setTimeout(()=>{this.overlayViewChild.alignOverlay()})}onLastHiddenFocus(e){let i=e.relatedTarget===this.focusInputViewChild?.nativeElement?C.getLastFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;C.focus(i)}onOptionMouseEnter(e,i){this.focusOnHover&&this.changeFocusedOptionIndex(e,i)}onHeaderCheckboxKeyDown(e){if(this.disabled){e.preventDefault();return}switch(e.code){case"Space":this.onToggleAll(e);break;case"Enter":this.onToggleAll(e);break;default:break}}onFilterBlur(e){this.focusedOptionIndex.set(-1)}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}onToggleAll(e){if(!(this.disabled||this.readonly)){if(this.selectAll!=null)this.onSelectAllChange.emit({originalEvent:e,checked:!this.allSelected()});else{let i=this.getAllVisibleAndNonVisibleOptions().filter(o=>this.isSelected(o)&&(this.optionDisabled?fe.resolveFieldData(o,this.optionDisabled):o&&o.disabled!==void 0?o.disabled:!1)),r=this.allSelected()?this.visibleOptions().filter(o=>!this.isValidOption(o)&&this.isSelected(o)):this.visibleOptions().filter(o=>this.isSelected(o)||this.isValidOption(o)),s=[...i,...r].map(o=>this.getOptionValue(o)),a=[...new Set(s)];this.updateModel(a,e),(!a.length||a.length===this.getAllVisibleAndNonVisibleOptions().length)&&this.onSelectAllChange.emit({originalEvent:e,checked:!!a.length})}this.partialSelected()&&(this.selectedOptions=null,this.cd.markForCheck()),this.onChange.emit({originalEvent:e,value:this.value}),C.focus(this.headerCheckboxViewChild?.nativeElement),this.headerCheckboxFocus=!0,e.preventDefault(),e.stopPropagation()}}changeFocusedOptionIndex(e,i){this.focusedOptionIndex()!==i&&(this.focusedOptionIndex.set(i),this.scrollInView())}get virtualScrollerDisabled(){return!this.virtualScroll}scrollInView(e=-1){let i=e!==-1?`${this.id}_${e}`:this.focusedOptionId;if(this.itemsViewChild&&this.itemsViewChild.nativeElement){let r=C.findSingle(this.itemsViewChild.nativeElement,`li[id="${i}"]`);r?r.scrollIntoView&&r.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(e!==-1?e:this.focusedOptionIndex())},0)}}get focusedOptionId(){return this.focusedOptionIndex()!==-1?`${this.id}_${this.focusedOptionIndex()}`:null}writeValue(e){this.value=e,this.modelValue.set(this.value),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}allSelected(){return this.selectAll!==null?this.selectAll:fe.isNotEmpty(this.visibleOptions())&&this.visibleOptions().every(e=>this.isOptionGroup(e)||this.isOptionDisabled(e)||this.isSelected(e))}partialSelected(){return this.selectedOptions&&this.selectedOptions.length>0&&this.selectedOptions.length<this.options.length}show(e){this.overlayVisible=!0;let i=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(i),e&&C.focus(this.focusInputViewChild?.nativeElement),this.cd.markForCheck()}hide(e){this.overlayVisible=!1,this.focusedOptionIndex.set(-1),this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.overlayOptions?.mode==="modal"&&C.unblockBodyScroll(),e&&C.focus(this.focusInputViewChild?.nativeElement),this.onPanelHide.emit(),this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.itemsWrapper=C.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-multiselect-items-wrapper"),this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this._options()&&this._options().length)if(this.virtualScroll){let i=fe.isNotEmpty(this.modelValue())?this.focusedOptionIndex():-1;i!==-1&&this.scroller?.scrollToIndex(i)}else{let i=C.findSingle(this.itemsWrapper,'[data-p-highlight="true"]');i&&i.scrollIntoView({block:"nearest",inline:"nearest"})}this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();case"void":this.itemsWrapper=null,this.onModelTouched();break}}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue.set(null),this._filteredOptions=null}close(e){this.hide(),e.preventDefault(),e.stopPropagation()}clear(e){this.value=null,this.updateModel(null,e),this.selectedOptions=null,this.onClear.emit(),this._disableTooltip=!0,e.stopPropagation()}labelContainerMouseLeave(){this._disableTooltip&&(this._disableTooltip=!1)}removeOption(e,i){let r=this.modelValue().filter(s=>!fe.equals(s,e,this.equalityKey()));this.updateModel(r,i),this.onChange.emit({originalEvent:i,value:r,itemValue:e}),i&&i.stopPropagation()}findNextItem(e){let i=e.nextElementSibling;return i?C.hasClass(i.children[0],"p-disabled")||C.isHidden(i.children[0])||C.hasClass(i,"p-multiselect-item-group")?this.findNextItem(i):i.children[0]:null}findPrevItem(e){let i=e.previousElementSibling;return i?C.hasClass(i.children[0],"p-disabled")||C.isHidden(i.children[0])||C.hasClass(i,"p-multiselect-item-group")?this.findPrevItem(i):i.children[0]:null}findNextOptionIndex(e){let i=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(r=>this.isValidOption(r)):-1;return i>-1?i+e+1:e}findPrevOptionIndex(e){let i=e>0?fe.findLastIndex(this.visibleOptions().slice(0,e),r=>this.isValidOption(r)):-1;return i>-1?i:e}findLastSelectedOptionIndex(){return this.hasSelectedOption()?fe.findLastIndex(this.visibleOptions(),e=>this.isValidSelectedOption(e)):-1}findLastFocusedOptionIndex(){let e=this.findLastSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}findLastOptionIndex(){return fe.findLastIndex(this.visibleOptions(),e=>this.isValidOption(e))}searchOptions(e,i){this.searchValue=(this.searchValue||"")+i;let r=-1,s=!1;return this.focusedOptionIndex()!==-1?(r=this.visibleOptions().slice(this.focusedOptionIndex()).findIndex(a=>this.isOptionMatched(a)),r=r===-1?this.visibleOptions().slice(0,this.focusedOptionIndex()).findIndex(a=>this.isOptionMatched(a)):r+this.focusedOptionIndex()):r=this.visibleOptions().findIndex(a=>this.isOptionMatched(a)),r!==-1&&(s=!0),r===-1&&this.focusedOptionIndex()===-1&&(r=this.findFirstFocusedOptionIndex()),r!==-1&&this.changeFocusedOptionIndex(e,r),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),s}activateFilter(){if(this.hasFilter()&&this._options)if(this.group){let e=[];for(let i of this.options){let r=this.filterService.filter(this.getOptionGroupChildren(i),this.searchFields(),this.filterValue,this.filterMatchMode,this.filterLocale);r&&r.length&&e.push(v(c({},i),{[this.optionGroupChildren]:r}))}this._filteredOptions=e}else this._filteredOptions=this.filterService.filter(this.options,this.searchFields(),this.filterValue,this.filterMatchMode,this.filterLocale);else this._filteredOptions=null}hasFocusableElements(){return C.getFocusableElements(this.overlayViewChild.overlayViewChild.nativeElement,':not([data-p-hidden-focusable="true"])').length>0}hasFilter(){return this._filterValue()&&this._filterValue().trim().length>0}static \u0275fac=function(i){return new(i||n)(D(We),D(Ot),D(Xe),D(Bt),D(qo),D(Tt),D(Ko))};static \u0275cmp=Z({type:n,selectors:[["p-multiSelect"]],contentQueries:function(i,r,s){if(i&1&&(Me(s,ka,5),Me(s,Mr,5),Me(s,Le,4)),i&2){let a;W(a=Q())&&(r.footerFacet=a.first),W(a=Q())&&(r.headerFacet=a.first),W(a=Q())&&(r.templates=a)}},viewQuery:function(i,r){if(i&1&&(me(bw,5),me(vw,5),me(ww,5),me(xw,5),me(Iw,5),me(Cw,5),me(Tw,5),me(Sw,5),me(Ew,5)),i&2){let s;W(s=Q())&&(r.containerViewChild=s.first),W(s=Q())&&(r.overlayViewChild=s.first),W(s=Q())&&(r.filterInputChild=s.first),W(s=Q())&&(r.focusInputViewChild=s.first),W(s=Q())&&(r.itemsViewChild=s.first),W(s=Q())&&(r.scroller=s.first),W(s=Q())&&(r.lastHiddenFocusableElementOnOverlay=s.first),W(s=Q())&&(r.firstHiddenFocusableElementOnOverlay=s.first),W(s=Q())&&(r.headerCheckboxViewChild=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(i,r){i&2&&bn("p-inputwrapper-focus",r.focused||r.overlayVisible)("p-inputwrapper-filled",r.filled)},inputs:{id:"id",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:[M.HasDecoratorInputTransform,"disabled","disabled",j],readonly:[M.HasDecoratorInputTransform,"readonly","readonly",j],group:[M.HasDecoratorInputTransform,"group","group",j],filter:[M.HasDecoratorInputTransform,"filter","filter",j],filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:[M.HasDecoratorInputTransform,"overlayVisible","overlayVisible",j],tabindex:[M.HasDecoratorInputTransform,"tabindex","tabindex",we],variant:"variant",appendTo:"appendTo",dataKey:"dataKey",name:"name",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:[M.HasDecoratorInputTransform,"selectionLimit","selectionLimit",we],selectedItemsLabel:"selectedItemsLabel",showToggleAll:[M.HasDecoratorInputTransform,"showToggleAll","showToggleAll",j],emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:[M.HasDecoratorInputTransform,"resetFilterOnHide","resetFilterOnHide",j],dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:[M.HasDecoratorInputTransform,"showHeader","showHeader",j],filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:[M.HasDecoratorInputTransform,"lazy","lazy",j],virtualScroll:[M.HasDecoratorInputTransform,"virtualScroll","virtualScroll",j],loading:[M.HasDecoratorInputTransform,"loading","loading",j],virtualScrollItemSize:[M.HasDecoratorInputTransform,"virtualScrollItemSize","virtualScrollItemSize",we],loadingIcon:"loadingIcon",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:[M.HasDecoratorInputTransform,"autofocusFilter","autofocusFilter",j],display:"display",autocomplete:"autocomplete",showClear:[M.HasDecoratorInputTransform,"showClear","showClear",j],autofocus:[M.HasDecoratorInputTransform,"autofocus","autofocus",j],autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize",selectAll:"selectAll",focusOnHover:[M.HasDecoratorInputTransform,"focusOnHover","focusOnHover",j],filterFields:"filterFields",selectOnFocus:[M.HasDecoratorInputTransform,"selectOnFocus","selectOnFocus",j],autoOptionFocus:[M.HasDecoratorInputTransform,"autoOptionFocus","autoOptionFocus",j]},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad",onRemove:"onRemove",onSelectAllChange:"onSelectAllChange"},features:[qt([ix]),Ge],ngContentSelectors:Aw,decls:17,vars:43,consts:[["container",""],["focusInput",""],["elseBlock",""],["overlay",""],["token",""],["firstHiddenFocusableEl",""],["buildInItems",""],["lastHiddenFocusableEl",""],["builtInFilterElement",""],["headerCheckbox",""],["filterInput",""],["scroller",""],["items",""],["emptyFilter",""],["empty",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["role","combobox","pAutoFocus","",3,"focus","blur","keydown","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","autofocus"],[1,"p-multiselect-label-container",3,"mouseleave","pTooltip","tooltipDisabled","tooltipPosition","positionStyle","tooltipStyleClass"],[3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-multiselect-trigger"],[4,"ngIf","ngIfElse"],[3,"visibleChange","onAnimationStart","onHide","visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions"],["pTemplate","content"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],[1,"p-multiselect-token-label"],[3,"styleClass","click",4,"ngIf"],["class","p-multiselect-token-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-multiselect-token-icon",3,"click"],[4,"ngTemplateOutlet"],["class","p-multiselect-clear-icon",3,"click",4,"ngIf"],[1,"p-multiselect-clear-icon",3,"click"],["aria-hidden","true",3,"ngClass",4,"ngIf"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true",3,"ngClass"],["aria-hidden","true"],["class","p-multiselect-trigger-icon",4,"ngIf"],["class","p-multiselect-trigger-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"styleClass"],[1,"p-multiselect-trigger-icon"],[3,"ngClass","ngStyle"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],["class","p-checkbox p-component",3,"ngClass","click","keydown",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link","p-button-icon-only",3,"click"],["class","p-multiselect-close-icon",4,"ngIf"],[1,"p-checkbox","p-component",3,"click","keydown","ngClass"],["type","checkbox",3,"focus","blur","readonly","disabled"],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],["class","p-checkbox-icon",4,"ngIf"],[1,"p-checkbox-icon"],[1,"p-multiselect-filter-container"],["type","text","role","searchbox","role","searchbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"input","keydown","click","blur","value","disabled"],["class","p-multiselect-filter-icon",4,"ngIf"],[1,"p-multiselect-filter-icon"],[1,"p-multiselect-close-icon"],[3,"onLazyLoad","items","itemSize","autoSize","tabindex","lazy","options"],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-multiselect-empty-message","role","option",3,"ngStyle",4,"ngIf"],["role","option",1,"p-multiselect-item-group",3,"ngStyle"],[3,"onClick","onMouseEnter","id","option","selected","label","disabled","template","checkIconTemplate","itemCheckboxIconTemplate","itemSize","focused","ariaPosInset","ariaSetSize"],["role","option",1,"p-multiselect-empty-message",3,"ngStyle"],[1,"p-multiselect-footer"]],template:function(i,r){if(i&1){let s=H();Ht(Ow),_(0,"div",15,0),L("click",function(o){return E(s),O(r.onContainerClick(o))}),_(2,"div",16)(3,"input",17,1),L("focus",function(o){return E(s),O(r.onInputFocus(o))})("blur",function(o){return E(s),O(r.onInputBlur(o))})("keydown",function(o){return E(s),O(r.onKeyDown(o))}),y()(),_(5,"div",18),L("mouseleave",function(){return E(s),O(r.labelContainerMouseLeave())}),_(6,"div",19),w(7,Uw,3,2,"ng-container",20)(8,Hw,1,0,"ng-container",21),y(),w(9,Ww,3,2,"ng-container",20),y(),_(10,"div",22),w(11,t1,3,2,"ng-container",23)(12,l1,2,2,"ng-template",null,2,ut),y(),_(14,"p-overlay",24,3),Nt("visibleChange",function(o){return E(s),Dt(r.overlayVisible,o)||(r.overlayVisible=o),O(o)}),L("onAnimationStart",function(o){return E(s),O(r.onOverlayAnimationStart(o))})("onHide",function(){return E(s),O(r.hide())}),w(16,tx,12,17,"ng-template",25),y()()}if(i&2){let s,a=et(13);ee(r.styleClass),d("ngClass",r.containerClass)("ngStyle",r.style),k("id",r.id),m(2),k("data-p-hidden-accessible",!0),m(),d("pTooltip",r.tooltip)("tooltipPosition",r.tooltipPosition)("positionStyle",r.tooltipPositionStyle)("tooltipStyleClass",r.tooltipStyleClass)("autofocus",r.autofocus),k("aria-disabled",r.disabled)("id",r.inputId)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledBy)("aria-haspopup","listbox")("aria-expanded",(s=r.overlayVisible)!==null&&s!==void 0?s:!1)("aria-controls",r.overlayVisible?r.id+"_list":null)("tabindex",r.disabled?-1:r.tabindex)("aria-activedescendant",r.focused?r.focusedOptionId:void 0),m(2),d("pTooltip",r.tooltip)("tooltipDisabled",r._disableTooltip)("tooltipPosition",r.tooltipPosition)("positionStyle",r.tooltipPositionStyle)("tooltipStyleClass",r.tooltipStyleClass),m(),d("ngClass",r.labelClass),m(),d("ngIf",!r.selectedItemsTemplate),m(),d("ngTemplateOutlet",r.selectedItemsTemplate)("ngTemplateOutletContext",qe(40,kw,r.selectedOptions,r.removeOption.bind(r))),m(),d("ngIf",r.isVisibleClearIcon),m(2),d("ngIf",r.loading)("ngIfElse",a),m(3),Rt("visible",r.overlayVisible),d("options",r.overlayOptions)("target","@parent")("appendTo",r.appendTo)("autoZIndex",r.autoZIndex)("baseZIndex",r.baseZIndex)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}},dependencies:()=>[He,vt,Be,Ke,Ze,Pa,Le,Xn,ei,al,Gn,Fi,qs,Fs,ot,Hs,nx],styles:[`@layer primeng{.p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer;display:flex}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect-token-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100px}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}}
`],encapsulation:2,changeDetection:0})}return n})(),tm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,Bs,Ue,In,li,Us,Zn,Fi,qs,Fs,ot,Hs,Fi,Yh,Bs,Ue,Us]})}return n})();var Ks=(()=>{class n extends at{pathId;ngOnInit(){this.pathId="url(#"+dt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=rt(n)))(r||n)}})();static \u0275cmp=Z({type:n,selectors:[["PlusIcon"]],standalone:!0,features:[st,xe],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(nt(),_(0,"svg",0)(1,"g"),A(2,"path",1),y(),_(3,"defs")(4,"clipPath",2),A(5,"rect",3),y()()()),i&2&&(ee(r.getClassNames()),k("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),m(),k("clip-path",r.pathId),m(3),d("id",r.pathId))},encapsulation:2})}return n})();var Eu=(()=>{class n extends at{pathId;ngOnInit(){this.pathId="url(#"+dt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=rt(n)))(r||n)}})();static \u0275cmp=Z({type:n,selectors:[["UploadIcon"]],standalone:!0,features:[st,xe],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.58942 9.82197C6.70165 9.93405 6.85328 9.99793 7.012 10C7.17071 9.99793 7.32234 9.93405 7.43458 9.82197C7.54681 9.7099 7.61079 9.55849 7.61286 9.4V2.04798L9.79204 4.22402C9.84752 4.28011 9.91365 4.32457 9.98657 4.35479C10.0595 4.38502 10.1377 4.40039 10.2167 4.40002C10.2956 4.40039 10.3738 4.38502 10.4467 4.35479C10.5197 4.32457 10.5858 4.28011 10.6413 4.22402C10.7538 4.11152 10.817 3.95902 10.817 3.80002C10.817 3.64102 10.7538 3.48852 10.6413 3.37602L7.45127 0.190618C7.44656 0.185584 7.44176 0.180622 7.43687 0.175736C7.32419 0.063214 7.17136 0 7.012 0C6.85264 0 6.69981 0.063214 6.58712 0.175736C6.58181 0.181045 6.5766 0.186443 6.5715 0.191927L3.38282 3.37602C3.27669 3.48976 3.2189 3.6402 3.22165 3.79564C3.2244 3.95108 3.28746 4.09939 3.39755 4.20932C3.50764 4.31925 3.65616 4.38222 3.81182 4.38496C3.96749 4.3877 4.11814 4.33001 4.23204 4.22402L6.41113 2.04807V9.4C6.41321 9.55849 6.47718 9.7099 6.58942 9.82197ZM11.9952 14H2.02883C1.751 13.9887 1.47813 13.9228 1.22584 13.8061C0.973545 13.6894 0.746779 13.5241 0.558517 13.3197C0.370254 13.1154 0.22419 12.876 0.128681 12.6152C0.0331723 12.3545 -0.00990605 12.0775 0.0019109 11.8V9.40005C0.0019109 9.24092 0.065216 9.08831 0.1779 8.97579C0.290584 8.86326 0.443416 8.80005 0.602775 8.80005C0.762134 8.80005 0.914966 8.86326 1.02765 8.97579C1.14033 9.08831 1.20364 9.24092 1.20364 9.40005V11.8C1.18295 12.0376 1.25463 12.274 1.40379 12.4602C1.55296 12.6463 1.76817 12.7681 2.00479 12.8H11.9952C12.2318 12.7681 12.447 12.6463 12.5962 12.4602C12.7453 12.274 12.817 12.0376 12.7963 11.8V9.40005C12.7963 9.24092 12.8596 9.08831 12.9723 8.97579C13.085 8.86326 13.2378 8.80005 13.3972 8.80005C13.5565 8.80005 13.7094 8.86326 13.8221 8.97579C13.9347 9.08831 13.998 9.24092 13.998 9.40005V11.8C14.022 12.3563 13.8251 12.8996 13.45 13.3116C13.0749 13.7236 12.552 13.971 11.9952 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(nt(),_(0,"svg",0)(1,"g"),A(2,"path",1),y(),_(3,"defs")(4,"clipPath",2),A(5,"rect",3),y()()()),i&2&&(ee(r.getClassNames()),k("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),m(),k("clip-path",r.pathId),m(3),d("id",r.pathId))},encapsulation:2})}return n})();var sx=(n,t)=>({showTransitionParams:n,hideTransitionParams:t}),ax=n=>({value:"visible",params:n});function ox(n,t){if(n&1&&A(0,"span"),n&2){let e=f().$implicit;ee("p-message-icon pi "+e.icon),k("data-pc-section","icon")}}function lx(n,t){n&1&&A(0,"CheckIcon"),n&2&&k("data-pc-section","icon")}function cx(n,t){n&1&&A(0,"InfoCircleIcon"),n&2&&k("data-pc-section","icon")}function ux(n,t){n&1&&A(0,"TimesCircleIcon"),n&2&&k("data-pc-section","icon")}function dx(n,t){n&1&&A(0,"ExclamationTriangleIcon"),n&2&&k("data-pc-section","icon")}function px(n,t){if(n&1&&(_(0,"span",10),B(1),w(2,lx,1,1,"CheckIcon",11)(3,cx,1,1,"InfoCircleIcon",11)(4,ux,1,1,"TimesCircleIcon",11)(5,dx,1,1,"ExclamationTriangleIcon",11),U(),y()),n&2){let e=f().$implicit;m(2),d("ngIf",e.severity==="success"),m(),d("ngIf",e.severity==="info"),m(),d("ngIf",e.severity==="error"),m(),d("ngIf",e.severity==="warn")}}function hx(n,t){if(n&1&&A(0,"span",14),n&2){let e=f(2).$implicit;d("innerHTML",e.summary,ks),k("data-pc-section","summary")}}function mx(n,t){if(n&1&&A(0,"span",15),n&2){let e=f(2).$implicit;d("innerHTML",e.detail,ks),k("data-pc-section","detail")}}function fx(n,t){if(n&1&&(B(0),w(1,hx,1,2,"span",12)(2,mx,1,2,"span",13),U()),n&2){let e=f().$implicit;m(),d("ngIf",e.summary),m(),d("ngIf",e.detail)}}function gx(n,t){if(n&1&&(_(0,"span",18),N(1),y()),n&2){let e=f(2).$implicit;k("data-pc-section","summary"),m(),ye(e.summary)}}function _x(n,t){if(n&1&&(_(0,"span",19),N(1),y()),n&2){let e=f(2).$implicit;k("data-pc-section","detail"),m(),ye(e.detail)}}function yx(n,t){if(n&1&&w(0,gx,2,2,"span",16)(1,_x,2,2,"span",17),n&2){let e=f().$implicit;d("ngIf",e.summary),m(),d("ngIf",e.detail)}}function bx(n,t){if(n&1){let e=H();_(0,"button",20),L("click",function(){E(e);let r=f().index,s=f(2);return O(s.removeMessage(r))}),A(1,"TimesIcon",21),y()}if(n&2){let e=f(3);k("aria-label",e.closeAriaLabel)("data-pc-section","closebutton"),m(),d("styleClass","p-message-close-icon"),k("data-pc-section","closeicon")}}function vx(n,t){if(n&1&&(_(0,"div",5)(1,"div",6),w(2,ox,1,3,"span",7)(3,px,6,4,"span",8)(4,fx,3,2,"ng-container",3)(5,yx,2,2,"ng-template",null,1,ut)(7,bx,2,4,"button",9),y()()),n&2){let e,i=t.$implicit,r=et(6),s=f(2);ee("p-message p-message-"+i.severity),d("@messageAnimation",le(13,ax,qe(10,sx,s.showTransitionOptions,s.hideTransitionOptions))),m(),k("data-pc-section","wrapper")("id",i.id||null),m(),d("ngIf",i.icon),m(),d("ngIf",!i.icon),m(),d("ngIf",!s.escape)("ngIfElse",r),m(3),d("ngIf",s.closable&&((e=i.closable)!==null&&e!==void 0?e:!0))}}function wx(n,t){if(n&1&&(B(0),w(1,vx,8,15,"div",4),U()),n&2){let e=f();m(),d("ngForOf",e.messages)}}function xx(n,t){n&1&&re(0)}function Ix(n,t){if(n&1&&(_(0,"div",22)(1,"div",6),w(2,xx,1,0,"ng-container",23),y()()),n&2){let e=f();d("ngClass","p-message p-message-"+e.severity),m(2),d("ngTemplateOutlet",e.contentTemplate)}}var im=(()=>{class n{messageService;el;cd;config;set value(e){this.messages=e,this.startMessageLifes(this.messages)}closable=!0;style;styleClass;enableService=!0;key;escape=!0;severity;showTransitionOptions="300ms ease-out";hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)";valueChange=new $;onClose=new $;templates;messages;messageSubscription;clearSubscription;timerSubscriptions=[];contentTemplate;constructor(e,i,r,s){this.messageService=e,this.el=i,this.cd=r,this.config=s}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;default:this.contentTemplate=e.template;break}}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){Array.isArray(e)||(e=[e]);let i=e.filter(r=>this.key===r.key);this.messages=this.messages?[...this.messages,...i]:[...i],this.startMessageLifes(i),this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return e&&e.offsetParent?this.contentTemplate!=null||this.messages&&this.messages.length>0:!1}clear(){this.messages=[],this.valueChange.emit(this.messages)}removeMessage(e){let i=this.messages[e];this.messages=this.messages?.filter((r,s)=>s!==e),i&&this.onClose.emit(i),this.valueChange.emit(this.messages)}get icon(){let e=this.severity||(this.hasMessages()?this.messages[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle";default:return"pi-info-circle"}return null}get closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.timerSubscriptions?.forEach(e=>e.unsubscribe())}startMessageLifes(e){e?.forEach(i=>i.life&&this.startMessageLife(i))}startMessageLife(e){let i=hh(e.life).subscribe(()=>{this.messages=this.messages?.filter(r=>r!==e),this.timerSubscriptions=this.timerSubscriptions?.filter(r=>r!==i),this.valueChange.emit(this.messages),this.cd.markForCheck()});this.timerSubscriptions.push(i)}static \u0275fac=function(i){return new(i||n)(D(an,8),D(We),D(Xe),D(Tt))};static \u0275cmp=Z({type:n,selectors:[["p-messages"]],contentQueries:function(i,r,s){if(i&1&&Me(s,Le,4),i&2){let a;W(a=Q())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:[M.HasDecoratorInputTransform,"closable","closable",j],style:"style",styleClass:"styleClass",enableService:[M.HasDecoratorInputTransform,"enableService","enableService",j],key:"key",escape:[M.HasDecoratorInputTransform,"escape","escape",j],severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange",onClose:"onClose"},features:[Ge],decls:4,vars:8,consts:[["staticMessage",""],["escapeOut",""],["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"class",4,"ngIf"],["class","p-message-icon",4,"ngIf"],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-message-icon"],[4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[3,"styleClass"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(i,r){if(i&1&&(_(0,"div",2),w(1,wx,2,1,"ng-container",3)(2,Ix,3,2,"ng-template",null,0,ut),y()),i&2){let s=et(3);ee(r.styleClass),d("ngStyle",r.style),k("aria-atomic",!0)("aria-live","assertive")("data-pc-name","message"),m(),d("ngIf",!r.contentTemplate)("ngIfElse",s)}},dependencies:()=>[He,vt,Be,Ke,Ze,ei,Fi,fu,Fs,mu,ot],styles:[`@layer primeng{.p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center;flex:none}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}}
`],encapsulation:2,data:{animation:[Ps("messageAnimation",[xn(":enter",[Si({opacity:0,transform:"translateY(-25%)"}),wn("{{showTransitionParams}}")]),xn(":leave",[wn("{{hideTransitionParams}}",Si({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0})}return n})(),Ou=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,li,Fi,fu,Fs,mu,ot]})}return n})();var Tx=(n,t)=>({"p-progressbar p-component":!0,"p-progressbar-determinate":n,"p-progressbar-indeterminate":t}),Sx=n=>({$implicit:n});function Ex(n,t){if(n&1&&(_(0,"div"),N(1),y()),n&2){let e=f(2);Bn("display",e.value!=null&&e.value!==0?"flex":"none"),k("data-pc-section","label"),m(),Ih("",e.value,"",e.unit,"")}}function Ox(n,t){n&1&&re(0)}function Ax(n,t){if(n&1&&(_(0,"div",3)(1,"div",4),w(2,Ex,2,5,"div",5)(3,Ox,1,0,"ng-container",6),y()()),n&2){let e=f();Bn("width",e.value+"%")("background",e.color),k("data-pc-section","value"),m(2),d("ngIf",e.showValue&&!e.contentTemplate),m(),d("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",le(8,Sx,e.value))}}function kx(n,t){if(n&1&&(_(0,"div",7),A(1,"div",8),y()),n&2){let e=f();k("data-pc-section","container"),m(),Bn("background",e.color),k("data-pc-section","value")}}var cn=(()=>{class n{value;showValue=!0;styleClass;style;unit="%";mode="determinate";color;templates;contentTemplate;ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;default:this.contentTemplate=e.template}})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Z({type:n,selectors:[["p-progressBar"]],contentQueries:function(i,r,s){if(i&1&&Me(s,Le,4),i&2){let a;W(a=Q())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{value:[M.HasDecoratorInputTransform,"value","value",we],showValue:[M.HasDecoratorInputTransform,"showValue","showValue",j],styleClass:"styleClass",style:"style",unit:"unit",mode:"mode",color:"color"},features:[Ge],decls:3,vars:14,consts:[["role","progressbar",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width","background",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],[1,"p-progressbar-label"],[3,"display",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(i,r){i&1&&(_(0,"div",0),w(1,Ax,4,10,"div",1)(2,kx,2,4,"div",2),y()),i&2&&(ee(r.styleClass),d("ngStyle",r.style)("ngClass",qe(11,Tx,r.mode==="determinate",r.mode==="indeterminate")),k("aria-valuemin",0)("aria-valuenow",r.value)("aria-valuemax",100)("data-pc-name","progressbar")("data-pc-section","root"),m(),d("ngIf",r.mode==="determinate"),m(),d("ngIf",r.mode==="indeterminate"))},dependencies:[He,Be,Ke,Ze],styles:[`@layer primeng{.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;-webkit-animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;-webkit-animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;-webkit-animation-delay:1.15s;animation-delay:1.15s}}@-webkit-keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@-webkit-keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}
`],encapsulation:2,changeDetection:0})}return n})(),Cn=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue]})}return n})();var Mx=["advancedfileinput"],Rx=["basicfileinput"],Dx=["content"],Nx=n=>({$implicit:n}),Fx=(n,t)=>({"p-focus":n,"p-disabled":t}),Lx=(n,t,e,i)=>({"p-button p-component p-fileupload-choose":!0,"p-button-icon-only":n,"p-fileupload-choose-selected":t,"p-focus":e,"p-disabled":i});function jx(n,t){if(n&1&&A(0,"span",21),n&2){let e=f(3);ee(e.chooseIcon),d("ngClass","p-button-icon p-button-icon-left"),k("aria-label",!0)("data-pc-section","chooseicon")}}function Vx(n,t){n&1&&A(0,"PlusIcon",24),n&2&&(d("styleClass","p-button-icon p-button-icon-left"),k("aria-label",!0)("data-pc-section","chooseicon"))}function zx(n,t){}function $x(n,t){n&1&&w(0,zx,0,0,"ng-template")}function Bx(n,t){if(n&1&&(_(0,"span",25),w(1,$x,1,0,null,9),y()),n&2){let e=f(4);k("aria-label",!0)("data-pc-section","chooseicon"),m(),d("ngTemplateOutlet",e.chooseIconTemplate)}}function Ux(n,t){if(n&1&&(B(0),w(1,Vx,1,3,"PlusIcon",22)(2,Bx,2,3,"span",23),U()),n&2){let e=f(3);m(),d("ngIf",!e.chooseIconTemplate),m(),d("ngIf",e.chooseIconTemplate)}}function Hx(n,t){if(n&1&&A(0,"span",28),n&2){let e=f(4);d("ngClass",e.uploadIcon),k("aria-hidden",!0)}}function qx(n,t){n&1&&A(0,"UploadIcon",24),n&2&&d("styleClass","p-button-icon p-button-icon-left")}function Kx(n,t){}function Gx(n,t){n&1&&w(0,Kx,0,0,"ng-template")}function Zx(n,t){if(n&1&&(_(0,"span",25),w(1,Gx,1,0,null,9),y()),n&2){let e=f(5);k("aria-hidden",!0),m(),d("ngTemplateOutlet",e.uploadIconTemplate)}}function Wx(n,t){if(n&1&&(B(0),w(1,qx,1,1,"UploadIcon",22)(2,Zx,2,2,"span",23),U()),n&2){let e=f(4);m(),d("ngIf",!e.uploadIconTemplate),m(),d("ngIf",e.uploadIconTemplate)}}function Qx(n,t){if(n&1){let e=H();_(0,"p-button",26),L("onClick",function(){E(e);let r=f(3);return O(r.upload())}),w(1,Hx,1,2,"span",27)(2,Wx,3,2,"ng-container",8),y()}if(n&2){let e=f(3);d("label",e.uploadButtonLabel)("disabled",!e.hasFiles()||e.isFileLimitExceeded())("styleClass",e.uploadStyleClass),m(),d("ngIf",e.uploadIcon),m(),d("ngIf",!e.uploadIcon)}}function Jx(n,t){if(n&1&&A(0,"span",28),n&2){let e=f(4);d("ngClass",e.cancelIcon)}}function Yx(n,t){n&1&&A(0,"TimesIcon",24),n&2&&(d("styleClass","p-button-icon p-button-icon-left"),k("aria-hidden",!0))}function Xx(n,t){}function eI(n,t){n&1&&w(0,Xx,0,0,"ng-template")}function tI(n,t){if(n&1&&(_(0,"span",25),w(1,eI,1,0,null,9),y()),n&2){let e=f(5);k("aria-hidden",!0),m(),d("ngTemplateOutlet",e.cancelIconTemplate)}}function iI(n,t){if(n&1&&(B(0),w(1,Yx,1,2,"TimesIcon",22)(2,tI,2,2,"span",23),U()),n&2){let e=f(4);m(),d("ngIf",!e.cancelIconTemplate),m(),d("ngIf",e.cancelIconTemplate)}}function nI(n,t){if(n&1){let e=H();_(0,"p-button",26),L("onClick",function(){E(e);let r=f(3);return O(r.clear())}),w(1,Jx,1,1,"span",27)(2,iI,3,2,"ng-container",8),y()}if(n&2){let e=f(3);d("label",e.cancelButtonLabel)("disabled",!e.hasFiles()||e.uploading)("styleClass",e.cancelStyleClass),m(),d("ngIf",e.cancelIcon),m(),d("ngIf",!e.cancelIcon)}}function rI(n,t){if(n&1){let e=H();B(0),_(1,"span",16),L("focus",function(){E(e);let r=f(2);return O(r.onFocus())})("blur",function(){E(e);let r=f(2);return O(r.onBlur())})("click",function(){E(e);let r=f(2);return O(r.choose())})("keydown.enter",function(){E(e);let r=f(2);return O(r.choose())}),_(2,"input",17,1),L("change",function(r){E(e);let s=f(2);return O(s.onFileSelect(r))}),y(),w(4,jx,1,5,"span",18)(5,Ux,3,2,"ng-container",8),_(6,"span",19),N(7),y()(),w(8,Qx,3,5,"p-button",20)(9,nI,3,5,"p-button",20),U()}if(n&2){let e=f(2);m(),ee(e.chooseStyleClass),d("ngClass",qe(16,Fx,e.focus,e.disabled||e.isChooseDisabled())),k("data-pc-section","choosebutton"),m(),d("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),k("aria-label",e.browseFilesLabel)("title","")("data-pc-section","input"),m(2),d("ngIf",e.chooseIcon),m(),d("ngIf",!e.chooseIcon),m(),k("data-pc-section","choosebuttonlabel"),m(),ye(e.chooseButtonLabel),m(),d("ngIf",!e.auto&&e.showUploadButton),m(),d("ngIf",!e.auto&&e.showCancelButton)}}function sI(n,t){n&1&&re(0)}function aI(n,t){n&1&&re(0)}function oI(n,t){if(n&1&&A(0,"p-progressBar",29),n&2){let e=f(2);d("value",e.progress)("showValue",!1)}}function lI(n,t){if(n&1){let e=H();_(0,"img",36),L("error",function(r){E(e);let s=f(5);return O(s.imageError(r))}),y()}if(n&2){let e=f().$implicit,i=f(4);d("src",e.objectURL,fi)("width",i.previewWidth)}}function cI(n,t){n&1&&A(0,"TimesIcon")}function uI(n,t){}function dI(n,t){n&1&&w(0,uI,0,0,"ng-template")}function pI(n,t){if(n&1){let e=H();_(0,"div",32)(1,"div"),w(2,lI,1,2,"img",33),y(),_(3,"div",34),N(4),y(),_(5,"div"),N(6),y(),_(7,"div")(8,"button",35),L("click",function(r){let s=E(e).index,a=f(4);return O(a.remove(r,s))}),w(9,cI,1,0,"TimesIcon",8)(10,dI,1,0,null,9),y()()()}if(n&2){let e=t.$implicit,i=f(4);m(2),d("ngIf",i.isImage(e)),m(2),ye(e.name),m(2),ye(i.formatSize(e.size)),m(2),ee(i.removeStyleClass),d("disabled",i.uploading),m(),d("ngIf",!i.cancelIconTemplate),m(),d("ngTemplateOutlet",i.cancelIconTemplate)}}function hI(n,t){if(n&1&&(_(0,"div"),w(1,pI,11,8,"div",31),y()),n&2){let e=f(3);m(),d("ngForOf",e.files)}}function mI(n,t){}function fI(n,t){if(n&1&&(_(0,"div"),w(1,mI,0,0,"ng-template",37),y()),n&2){let e=f(3);m(),d("ngForOf",e.files)("ngForTemplate",e.fileTemplate)}}function gI(n,t){if(n&1&&(_(0,"div",30),w(1,hI,2,1,"div",8)(2,fI,2,2,"div",8),y()),n&2){let e=f(2);m(),d("ngIf",!e.fileTemplate),m(),d("ngIf",e.fileTemplate)}}function _I(n,t){n&1&&re(0)}function yI(n,t){n&1&&re(0)}function bI(n,t){if(n&1&&(_(0,"div",38),w(1,yI,1,0,"ng-container",9),y()),n&2){let e=f(2);m(),d("ngTemplateOutlet",e.emptyTemplate)}}function vI(n,t){if(n&1){let e=H();_(0,"div",6)(1,"div",7),w(2,rI,10,19,"ng-container",8)(3,sI,1,0,"ng-container",9)(4,aI,1,0,"ng-container",9),y(),_(5,"div",10,0),L("dragenter",function(r){E(e);let s=f();return O(s.onDragEnter(r))})("dragleave",function(r){E(e);let s=f();return O(s.onDragLeave(r))})("drop",function(r){E(e);let s=f();return O(s.onDrop(r))}),w(7,oI,1,2,"p-progressBar",11),A(8,"p-messages",12),w(9,gI,3,2,"div",13)(10,_I,1,0,"ng-container",14)(11,bI,2,1,"div",15),y()()}if(n&2){let e=f();ee(e.styleClass),d("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",e.style),k("data-pc-name","fileupload")("data-pc-section","root"),m(),k("data-pc-section","buttonbar"),m(),d("ngIf",!e.headerTemplate),m(),d("ngTemplateOutlet",e.headerTemplate),m(),d("ngTemplateOutlet",e.toolbarTemplate),m(),k("data-pc-section","content"),m(2),d("ngIf",e.hasFiles()),m(),d("value",e.msgs)("enableService",!1),m(),d("ngIf",e.hasFiles()),m(),d("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",le(18,Nx,e.files)),m(),d("ngIf",e.emptyTemplate&&!e.hasFiles()&&!e.uploadedFileCount)}}function wI(n,t){if(n&1&&A(0,"span",28),n&2){let e=f(3);d("ngClass",e.uploadIcon)}}function xI(n,t){n&1&&A(0,"UploadIcon",24),n&2&&d("styleClass","p-button-icon p-button-icon-left")}function II(n,t){}function CI(n,t){n&1&&w(0,II,0,0,"ng-template")}function TI(n,t){if(n&1&&(_(0,"span",25),w(1,CI,1,0,null,9),y()),n&2){let e=f(4);m(),d("ngTemplateOutlet",e.uploadIconTemplate)}}function SI(n,t){if(n&1&&(B(0),w(1,xI,1,1,"UploadIcon",22)(2,TI,2,1,"span",23),U()),n&2){let e=f(3);m(),d("ngIf",!e.uploadIconTemplate),m(),d("ngIf",e.uploadIconTemplate)}}function EI(n,t){if(n&1&&(B(0),w(1,wI,1,1,"span",27)(2,SI,3,2,"ng-container",8),U()),n&2){let e=f(2);m(),d("ngIf",e.uploadIcon),m(),d("ngIf",!e.uploadIcon)}}function OI(n,t){if(n&1&&A(0,"span",45),n&2){let e=f(3);d("ngClass",e.chooseIcon)}}function AI(n,t){n&1&&A(0,"PlusIcon",24),n&2&&(d("styleClass","p-button-icon p-button-icon-left pi"),k("aria-hidden",!0)("data-pc-section","uploadicon"))}function kI(n,t){}function PI(n,t){n&1&&w(0,kI,0,0,"ng-template")}function MI(n,t){if(n&1&&(_(0,"span",47),w(1,PI,1,0,null,9),y()),n&2){let e=f(4);k("aria-hidden",!0)("data-pc-section","uploadicon"),m(),d("ngTemplateOutlet",e.chooseIconTemplate)}}function RI(n,t){if(n&1&&(B(0),w(1,AI,1,3,"PlusIcon",22)(2,MI,2,3,"span",46),U()),n&2){let e=f(3);m(),d("ngIf",!e.chooseIconTemplate),m(),d("ngIf",e.chooseIconTemplate)}}function DI(n,t){if(n&1&&w(0,OI,1,1,"span",44)(1,RI,3,2,"ng-container",8),n&2){let e=f(2);d("ngIf",e.chooseIcon),m(),d("ngIf",!e.chooseIcon)}}function NI(n,t){if(n&1&&(_(0,"span",19),N(1),y()),n&2){let e=f(2);k("data-pc-section","label"),m(),ye(e.basicButtonLabel)}}function FI(n,t){if(n&1){let e=H();_(0,"input",48,3),L("change",function(r){E(e);let s=f(2);return O(s.onFileSelect(r))})("focus",function(){E(e);let r=f(2);return O(r.onFocus())})("blur",function(){E(e);let r=f(2);return O(r.onBlur())}),y()}if(n&2){let e=f(2);d("accept",e.accept)("multiple",e.multiple)("disabled",e.disabled),k("aria-label",e.browseFilesLabel)("data-pc-section","input")}}function LI(n,t){if(n&1){let e=H();_(0,"div",39),A(1,"p-messages",12),_(2,"span",40),L("click",function(){E(e);let r=f();return O(r.onBasicUploaderClick())})("keydown",function(r){E(e);let s=f();return O(s.onBasicKeydown(r))}),w(3,EI,3,2,"ng-container",41)(4,DI,2,2,"ng-template",null,2,ut)(6,NI,2,2,"span",42)(7,FI,2,5,"input",43),y()()}if(n&2){let e=et(5),i=f();k("data-pc-name","fileupload"),m(),d("value",i.msgs)("enableService",!1),m(),ee(i.styleClass),d("ngClass",Vo(12,Lx,!i.basicButtonLabel,i.hasFiles(),i.focus,i.disabled))("ngStyle",i.style),k("data-pc-section","choosebutton"),m(),d("ngIf",i.hasFiles()&&!i.auto)("ngIfElse",e),m(3),d("ngIf",i.basicButtonLabel),m(),d("ngIf",!i.hasFiles())}}var nm=(()=>{class n{document;platformId;renderer;el;sanitizer;zone;http;cd;config;name;url;method="post";multiple;accept;disabled;auto;withCredentials;maxFileSize;invalidFileSizeMessageSummary="{0}: Invalid file size, ";invalidFileSizeMessageDetail="maximum upload size is {0}.";invalidFileTypeMessageSummary="{0}: Invalid file type, ";invalidFileTypeMessageDetail="allowed file types: {0}.";invalidFileLimitMessageDetail="limit is {0} at most.";invalidFileLimitMessageSummary="Maximum number of files exceeded, ";style;styleClass;previewWidth=50;chooseLabel;uploadLabel;cancelLabel;chooseIcon;uploadIcon;cancelIcon;showUploadButton=!0;showCancelButton=!0;mode="advanced";headers;customUpload;fileLimit;uploadStyleClass;cancelStyleClass;removeStyleClass;chooseStyleClass;onBeforeUpload=new $;onSend=new $;onUpload=new $;onError=new $;onClear=new $;onRemove=new $;onSelect=new $;onProgress=new $;uploadHandler=new $;onImageError=new $;templates;advancedFileInput;basicFileInput;content;set files(e){this._files=[];for(let i=0;i<e.length;i++){let r=e[i];this.validate(r)&&(this.isImage(r)&&(r.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[i]))),this._files.push(e[i]))}}get files(){return this._files}get basicButtonLabel(){return this.auto||!this.hasFiles()?this.chooseLabel:this.uploadLabel??this.files[0].name}_files=[];progress=0;dragHighlight;msgs;fileTemplate;headerTemplate;contentTemplate;toolbarTemplate;chooseIconTemplate;uploadIconTemplate;cancelIconTemplate;emptyTemplate;uploadedFileCount=0;focus;uploading;duplicateIEEvent;translationSubscription;dragOverListener;constructor(e,i,r,s,a,o,l,u,p){this.document=e,this.platformId=i,this.renderer=r,this.el=s,this.sanitizer=a,this.zone=o,this.http=l,this.cd=u,this.config=p}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"file":this.fileTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"toolbar":this.toolbarTemplate=e.template;break;case"chooseicon":this.chooseIconTemplate=e.template;break;case"uploadicon":this.uploadIconTemplate=e.template;break;case"cancelicon":this.cancelIconTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;default:this.fileTemplate=e.template;break}})}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){ft(this.platformId)&&this.mode==="advanced"&&this.zone.runOutsideAngular(()=>{this.content&&(this.dragOverListener=this.renderer.listen(this.content.nativeElement,"dragover",this.onDragOver.bind(this)))})}getTranslation(e){return this.config.getTranslation(e)}choose(){this.advancedFileInput?.nativeElement.click()}onFileSelect(e){if(e.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.msgs=[],this.multiple||(this.files=[]);let i=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let r=0;r<i.length;r++){let s=i[r];this.isFileSelected(s)||this.validate(s)&&(this.isImage(s)&&(s.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(i[r]))),this.files.push(i[r]))}this.onSelect.emit({originalEvent:e,files:i,currentFiles:this.files}),this.checkFileLimit(i),this.hasFiles()&&this.auto&&(this.mode!=="advanced"||!this.isFileLimitExceeded())&&this.upload(),e.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(e){for(let i of this.files)if(i.name+i.type+i.size===e.name+e.type+e.size)return!0;return!1}isIE11(){if(ft(this.platformId))return!!this.document.defaultView.MSInputMethodContext&&!!this.document.documentMode}validate(e){return this.msgs=this.msgs||[],this.accept&&!this.isFileTypeValid(e)?(this.msgs.push({severity:"error",summary:this.invalidFileTypeMessageSummary.replace("{0}",e.name),detail:this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}),!1):this.maxFileSize&&e.size>this.maxFileSize?(this.msgs.push({severity:"error",summary:this.invalidFileSizeMessageSummary.replace("{0}",e.name),detail:this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}),!1):!0}isFileTypeValid(e){let i=this.accept?.split(",").map(r=>r.trim());for(let r of i)if(this.isWildcard(r)?this.getTypeClass(e.type)===this.getTypeClass(r):e.type==r||this.getFileExtension(e).toLowerCase()===r.toLowerCase())return!0;return!1}getTypeClass(e){return e.substring(0,e.indexOf("/"))}isWildcard(e){return e.indexOf("*")!==-1}getFileExtension(e){return"."+e.name.split(".").pop()}isImage(e){return/^image\//.test(e.type)}onImageLoad(e){window.URL.revokeObjectURL(e.src)}upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let e=new FormData;this.onBeforeUpload.emit({formData:e});for(let i=0;i<this.files.length;i++)e.append(this.name,this.files[i],this.files[i].name);this.http.request(this.method,this.url,{body:e,headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(i=>{switch(i.type){case Bo.Sent:this.onSend.emit({originalEvent:i,formData:e});break;case Bo.Response:this.uploading=!1,this.progress=0,i.status>=200&&i.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:i,files:this.files})):this.onError.emit({files:this.files}),this.clear();break;case Bo.UploadProgress:{i.loaded&&(this.progress=Math.round(i.loaded*100/i.total)),this.onProgress.emit({originalEvent:i,progress:this.progress});break}}this.cd.markForCheck()},i=>{this.uploading=!1,this.onError.emit({files:this.files,error:i})})}}clear(){this.files=[],this.uploadedFileCount=0,this.onClear.emit(),this.clearInputElement(),this.cd.markForCheck()}remove(e,i){this.clearInputElement(),this.onRemove.emit({originalEvent:e,file:this.files[i]}),this.files.splice(i,1),this.checkFileLimit(this.files)}isFileLimitExceeded(){let i=this.auto?this.files.length:this.files.length+this.uploadedFileCount;return this.fileLimit&&this.fileLimit<=i&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<i}isChooseDisabled(){return this.auto?this.fileLimit&&this.fileLimit<=this.files.length:this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(e){this.msgs??=[];let i=this.msgs.length>0&&this.fileLimit<e.length;(this.isFileLimitExceeded()||i)&&this.msgs.push({severity:"error",summary:this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString()),detail:this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())})}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())}onDragOver(e){this.disabled||(C.addClass(this.content?.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.disabled||C.removeClass(this.content?.nativeElement,"p-fileupload-highlight")}onDrop(e){if(!this.disabled){C.removeClass(this.content?.nativeElement,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();let i=e.dataTransfer?e.dataTransfer.files:e.target.files;(this.multiple||i&&i.length===1)&&this.onFileSelect(e)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(e){let s=this.getTranslation(At.FILE_SIZE_TYPES);if(e===0)return`0 ${s[0]}`;let a=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,a)).toFixed(3)} ${s[a]}`}onBasicUploaderClick(){this.hasFiles()?this.upload():this.basicFileInput?.nativeElement.click()}onBasicKeydown(e){switch(e.code){case"Space":case"Enter":this.onBasicUploaderClick(),e.preventDefault();break}}imageError(e){this.onImageError.emit(e)}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation(At.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation(At.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation(At.CANCEL)}get browseFilesLabel(){return this.config.getTranslation(At.ARIA)[At.BROWSE_FILES]}ngOnDestroy(){this.content&&this.content.nativeElement&&this.dragOverListener&&(this.dragOverListener(),this.dragOverListener=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(D(Kt),D(Et),D(Ot),D(We),D(Oh),D(Bt),D(Uo),D(Xe),D(Tt))};static \u0275cmp=Z({type:n,selectors:[["p-fileUpload"]],contentQueries:function(i,r,s){if(i&1&&Me(s,Le,4),i&2){let a;W(a=Q())&&(r.templates=a)}},viewQuery:function(i,r){if(i&1&&(me(Mx,5),me(Rx,5),me(Dx,5)),i&2){let s;W(s=Q())&&(r.advancedFileInput=s.first),W(s=Q())&&(r.basicFileInput=s.first),W(s=Q())&&(r.content=s.first)}},hostAttrs:[1,"p-element"],inputs:{name:"name",url:"url",method:"method",multiple:[M.HasDecoratorInputTransform,"multiple","multiple",j],accept:"accept",disabled:[M.HasDecoratorInputTransform,"disabled","disabled",j],auto:[M.HasDecoratorInputTransform,"auto","auto",j],withCredentials:[M.HasDecoratorInputTransform,"withCredentials","withCredentials",j],maxFileSize:[M.HasDecoratorInputTransform,"maxFileSize","maxFileSize",we],invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:[M.HasDecoratorInputTransform,"previewWidth","previewWidth",we],chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:[M.HasDecoratorInputTransform,"showUploadButton","showUploadButton",j],showCancelButton:[M.HasDecoratorInputTransform,"showCancelButton","showCancelButton",j],mode:"mode",headers:"headers",customUpload:[M.HasDecoratorInputTransform,"customUpload","customUpload",j],fileLimit:[M.HasDecoratorInputTransform,"fileLimit","fileLimit",e=>we(e,null)],uploadStyleClass:"uploadStyleClass",cancelStyleClass:"cancelStyleClass",removeStyleClass:"removeStyleClass",chooseStyleClass:"chooseStyleClass",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler",onImageError:"onImageError"},features:[Ge],decls:2,vars:2,consts:[["content",""],["advancedfileinput",""],["chooseSection",""],["basicfileinput",""],[3,"ngClass","ngStyle","class",4,"ngIf"],["class","p-fileupload p-fileupload-basic p-component",4,"ngIf"],[3,"ngClass","ngStyle"],[1,"p-fileupload-buttonbar"],[4,"ngIf"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],[3,"value","showValue",4,"ngIf"],[3,"value","enableService"],["class","p-fileupload-files",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-fileupload-empty",4,"ngIf"],["pRipple","","tabindex","0",1,"p-button","p-component","p-fileupload-choose",3,"focus","blur","click","keydown.enter","ngClass"],["type","file",3,"change","multiple","accept","disabled"],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],["type","button",3,"label","disabled","styleClass","onClick",4,"ngIf"],[3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-button-icon p-button-icon-left",4,"ngIf"],[3,"styleClass"],[1,"p-button-icon","p-button-icon-left"],["type","button",3,"onClick","label","disabled","styleClass"],["class","p-button-icon p-button-icon-left",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left",3,"ngClass"],[3,"value","showValue"],[1,"p-fileupload-files"],["class","p-fileupload-row",4,"ngFor","ngForOf"],[1,"p-fileupload-row"],[3,"src","width","error",4,"ngIf"],[1,"p-fileupload-filename"],["type","button","pButton","",1,"p-button-icon-only",3,"click","disabled"],[3,"error","src","width"],["ngFor","",3,"ngForOf","ngForTemplate"],[1,"p-fileupload-empty"],[1,"p-fileupload","p-fileupload-basic","p-component"],["tabindex","0","pRipple","",3,"click","keydown","ngClass","ngStyle"],[4,"ngIf","ngIfElse"],["class","p-button-label",4,"ngIf"],["type","file",3,"accept","multiple","disabled","change","focus","blur",4,"ngIf"],["class","p-button-icon p-button-icon-left pi",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],["class","p-button-icon p-button-icon-left pi",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi"],["type","file",3,"change","focus","blur","accept","multiple","disabled"]],template:function(i,r){i&1&&w(0,vI,12,20,"div",4)(1,LI,8,17,"div",5),i&2&&(d("ngIf",r.mode==="advanced"),m(),d("ngIf",r.mode==="basic"))},dependencies:()=>[He,vt,Be,Ke,Ze,Wn,Qn,cn,im,ei,Ks,Eu,ot],styles:[`@layer primeng{.p-fileupload-content{position:relative}.p-fileupload-row{display:flex;align-items:center}.p-fileupload-row>div{flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{width:100%;position:absolute;top:0;left:0}.p-button.p-fileupload-choose{position:relative;overflow:hidden}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}.p-fileupload-filename{word-break:break-all}}
`],encapsulation:2,changeDetection:0})}return n})(),rm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,Ue,gt,Cn,Ou,li,Ks,Eu,ot,Ue,gt,Cn,Ou]})}return n})();var VI=[[["p-header"]]],zI=["p-header"];function $I(n,t){n&1&&re(0)}function BI(n,t){if(n&1&&(_(0,"div",3),Ct(1),w(2,$I,1,0,"ng-container",4),y()),n&2){let e=f();m(2),d("ngTemplateOutlet",e.headerTemplate)}}function UI(n,t){n&1&&(_(0,"div",3)(1,"span",5)(2,"select",6)(3,"option",7),N(4,"Heading"),y(),_(5,"option",8),N(6,"Subheading"),y(),_(7,"option",9),N(8,"Normal"),y()(),_(9,"select",10)(10,"option",9),N(11,"Sans Serif"),y(),_(12,"option",11),N(13,"Serif"),y(),_(14,"option",12),N(15,"Monospace"),y()()(),_(16,"span",5),A(17,"button",13)(18,"button",14)(19,"button",15),y(),_(20,"span",5),A(21,"select",16)(22,"select",17),y(),_(23,"span",5),A(24,"button",18)(25,"button",19),_(26,"select",20),A(27,"option",9),_(28,"option",21),N(29,"center"),y(),_(30,"option",22),N(31,"right"),y(),_(32,"option",23),N(33,"justify"),y()()(),_(34,"span",5),A(35,"button",24)(36,"button",25)(37,"button",26),y(),_(38,"span",5),A(39,"button",27),y()())}var HI={provide:Ei,useExisting:oi(()=>Au),multi:!0},Au=(()=>{class n{el;platformId;style;styleClass;placeholder;formats;modules;bounds;scrollingContainer;debug;get readonly(){return this._readonly}set readonly(e){this._readonly=e,this.quill&&(this._readonly?this.quill.disable():this.quill.enable())}onInit=new $;onTextChange=new $;onSelectionChange=new $;templates;toolbar;value;delayedCommand=null;_readonly=!1;onModelChange=()=>{};onModelTouched=()=>{};quill;dynamicQuill;headerTemplate;get isAttachedQuillEditorToDOM(){return this.quillElements?.editorElement?.isConnected}quillElements;constructor(e,i){this.el=e,this.platformId=i,vh(()=>{this.initQuillElements(),this.initQuillEditor()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break}})}writeValue(e){if(this.value=e,this.quill)if(e){let i=()=>{this.quill.setContents(this.quill.clipboard.convert(this.value))};this.isAttachedQuillEditorToDOM?i():this.delayedCommand=i}else{let i=()=>{this.quill.setText("")};this.isAttachedQuillEditorToDOM?i():this.delayedCommand=i}}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}getQuill(){return this.quill}initQuillEditor(){Ch(this.platformId)||(this.dynamicQuill?this.createQuillEditor():import("./chunk-U7ITRW6M.js").then(e=>{this.dynamicQuill=e.default,this.createQuillEditor()}).catch(e=>console.error(e.message)))}createQuillEditor(){this.initQuillElements();let{toolbarElement:e,editorElement:i}=this.quillElements,r={toolbar:e},s=this.modules?c(c({},r),this.modules):r;this.quill=new this.dynamicQuill(i,{modules:s,placeholder:this.placeholder,readOnly:this.readonly,theme:"snow",formats:this.formats,bounds:this.bounds,debug:this.debug,scrollingContainer:this.scrollingContainer}),this.value&&this.quill.setContents(this.quill.clipboard.convert(this.value)),this.quill.on("text-change",(a,o,l)=>{if(l==="user"){let u=C.findSingle(i,".ql-editor").innerHTML,p=this.quill.getText().trim();u==="<p><br></p>"&&(u=null),this.onTextChange.emit({htmlValue:u,textValue:p,delta:a,source:l}),this.onModelChange(u),this.onModelTouched()}}),this.quill.on("selection-change",(a,o,l)=>{this.onSelectionChange.emit({range:a,oldRange:o,source:l})}),this.onInit.emit({editor:this.quill})}initQuillElements(){this.quillElements||(this.quillElements={editorElement:C.findSingle(this.el.nativeElement,"div.p-editor-content"),toolbarElement:C.findSingle(this.el.nativeElement,"div.p-editor-toolbar")})}static \u0275fac=function(i){return new(i||n)(D(We),D(Et))};static \u0275cmp=Z({type:n,selectors:[["p-editor"]],contentQueries:function(i,r,s){if(i&1&&(Me(s,Mr,5),Me(s,Le,4)),i&2){let a;W(a=Q())&&(r.toolbar=a.first),W(a=Q())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",placeholder:"placeholder",formats:"formats",modules:"modules",bounds:"bounds",scrollingContainer:"scrollingContainer",debug:"debug",readonly:"readonly"},outputs:{onInit:"onInit",onTextChange:"onTextChange",onSelectionChange:"onSelectionChange"},features:[qt([HI])],ngContentSelectors:zI,decls:4,vars:6,consts:[[3,"ngClass"],["class","p-editor-toolbar",4,"ngIf"],[1,"p-editor-content",3,"ngStyle"],[1,"p-editor-toolbar"],[4,"ngTemplateOutlet"],[1,"ql-formats"],[1,"ql-header"],["value","1"],["value","2"],["selected",""],[1,"ql-font"],["value","serif"],["value","monospace"],["aria-label","Bold","type","button",1,"ql-bold"],["aria-label","Italic","type","button",1,"ql-italic"],["aria-label","Underline","type","button",1,"ql-underline"],[1,"ql-color"],[1,"ql-background"],["value","ordered","aria-label","Ordered List","type","button",1,"ql-list"],["value","bullet","aria-label","Unordered List","type","button",1,"ql-list"],[1,"ql-align"],["value","center"],["value","right"],["value","justify"],["aria-label","Insert Link","type","button",1,"ql-link"],["aria-label","Insert Image","type","button",1,"ql-image"],["aria-label","Insert Code Block","type","button",1,"ql-code-block"],["aria-label","Remove Styles","type","button",1,"ql-clean"]],template:function(i,r){i&1&&(Ht(VI),_(0,"div",0),w(1,BI,3,1,"div",1)(2,UI,40,0,"div",1),A(3,"div",2),y()),i&2&&(ee(r.styleClass),d("ngClass","p-editor-container"),m(),d("ngIf",r.toolbar||r.headerTemplate),m(),d("ngIf",!r.toolbar&&!r.headerTemplate),m(),d("ngStyle",r.style))},dependencies:[He,Be,Ke,Ze],styles:[`.p-editor-container .p-editor-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options .ql-picker-item{width:auto;height:auto}
`],encapsulation:2,changeDetection:0})}return n})(),ul=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,Ue]})}return n})();var KI=["container"],GI=["list"],ZI=(n,t)=>({"p-hidden":n,"p-focus":t}),WI=(n,t)=>({$implicit:n,index:t}),sm=n=>({"p-disabled":n}),QI=()=>({exact:!1}),JI=n=>({"p-speeddial-mask":!0,"p-speeddial-mask-visible":n});function YI(n,t){n&1&&A(0,"PlusIcon")}function XI(n,t){n&1&&re(0)}function eC(n,t){if(n&1&&(B(0),w(1,XI,1,0,"ng-container",9),U()),n&2){let e=f();m(),d("ngTemplateOutlet",e.buttonTemplate)}}function tC(n,t){n&1&&re(0)}function iC(n,t){if(n&1&&(B(0),w(1,tC,1,0,"ng-container",11),U()),n&2){let e=f(),i=e.$implicit,r=e.index,s=f();m(),d("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",qe(2,WI,i,r))}}function nC(n,t){if(n&1&&A(0,"span",15),n&2){let e=f(3).$implicit;d("ngClass",e.icon)}}function rC(n,t){if(n&1){let e=H();_(0,"a",13),L("click",function(r){E(e);let s=f(2).$implicit,a=f();return O(a.onItemClick(r,s))})("keydown.enter",function(r){E(e);let s=f(2),a=s.$implicit,o=s.index,l=f();return O(l.onItemClick(r,a,o))}),w(1,nC,1,1,"span",14),y()}if(n&2){let e=f(2).$implicit,i=f();d("routerLink",e.routerLink)("queryParams",e.queryParams)("ngClass",le(15,sm,e.disabled))("routerLinkActiveOptions",e.routerLinkActiveOptions||Fe(17,QI))("fragment",e.fragment)("queryParamsHandling",e.queryParamsHandling)("preserveFragment",e.preserveFragment)("skipLocationChange",e.skipLocationChange)("replaceUrl",e.replaceUrl)("state",e.state),k("target",e.target)("tabindex",e.disabled||i.readonly||!i.visible?null:e.tabindex?e.tabindex:"0")("aria-label",e.label)("data-pc-section","action"),m(),d("ngIf",e.icon)}}function sC(n,t){if(n&1&&A(0,"span",15),n&2){let e=f(3).$implicit;d("ngClass",e.icon)}}function aC(n,t){if(n&1){let e=H();_(0,"a",16),L("click",function(r){E(e);let s=f(2).$implicit,a=f();return O(a.onItemClick(r,s))})("keydown.enter",function(r){E(e);let s=f(2),a=s.$implicit,o=s.index,l=f();return O(l.onItemClick(r,a,o))}),w(1,sC,1,1,"span",14),y()}if(n&2){let e=f(2),i=e.$implicit,r=e.index,s=f();d("ngClass",le(7,sm,i.disabled)),k("href",i.url||null,fi)("target",i.target)("data-pc-section","action")("aria-label",i.label)("tabindex",i.disabled||r!==s.activeIndex&&s.readonly||!s.visible?null:i.tabindex?i.tabindex:"0"),m(),d("ngIf",i.icon)}}function oC(n,t){if(n&1&&(B(0),w(1,rC,2,18,"a",12)(2,aC,2,9,"ng-template",null,2,ut),U()),n&2){let e=et(3),i=f().$implicit,r=f();m(),d("ngIf",r.isClickableRouterLink(i))("ngIfElse",e)}}function lC(n,t){if(n&1&&(_(0,"li",10),w(1,iC,2,5,"ng-container",5)(2,oC,4,2,"ng-container",5),y()),n&2){let e=t.$implicit,i=t.index,r=f();d("ngStyle",r.getItemStyle(i))("tooltipOptions",e.tooltipOptions)("ngClass",qe(8,ZI,e.visible===!1,r.focusedOptionId==r.id+"_"+i))("id",r.id+"_"+i),k("aria-controls",r.id+"_item")("data-pc-section","menuitem"),m(),d("ngIf",r.itemTemplate),m(),d("ngIf",!r.itemTemplate)}}function cC(n,t){if(n&1&&A(0,"div",3),n&2){let e=f();ee(e.maskClassName),d("ngClass",le(4,JI,e.visible))("ngStyle",e.maskStyle)}}var am=(()=>{class n{platformId;el;cd;document;renderer;id;model=null;get visible(){return this._visible}set visible(e){this._visible=e,this._visible?this.bindDocumentClickListener():this.unbindDocumentClickListener()}style;className;direction="up";transitionDelay=30;type="linear";radius=0;mask=!1;disabled=!1;hideOnClickOutside=!0;buttonStyle;buttonClassName;maskStyle;maskClassName;showIcon;hideIcon;rotateAnimation=!0;ariaLabel;ariaLabelledBy;onVisibleChange=new $;visibleChange=new $;onClick=new $;onShow=new $;onHide=new $;container;list;templates;buttonTemplate;itemTemplate;isItemClicked=!1;_visible=!1;documentClickListener;focusedOptionIndex=Ut(null);focused=!1;get focusedOptionId(){return this.focusedOptionIndex()!==-1?this.focusedOptionIndex():null}constructor(e,i,r,s,a){this.platformId=e,this.el=i,this.cd=r,this.document=s,this.renderer=a}ngOnInit(){this.id=this.id||dt()}ngAfterViewInit(){if(ft(this.platformId)&&this.type!=="linear"){let e=C.findSingle(this.container?.nativeElement,".p-speeddial-button"),i=C.findSingle(this.list?.nativeElement,".p-speeddial-item");if(e&&i){let r=Math.abs(e.offsetWidth-i.offsetWidth),s=Math.abs(e.offsetHeight-i.offsetHeight);this.list?.nativeElement.style.setProperty("--item-diff-x",`${r/2}px`),this.list?.nativeElement.style.setProperty("--item-diff-y",`${s/2}px`)}}}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"button":this.buttonTemplate=e.template;break;case"item":this.itemTemplate=e.template;break}})}show(){this.onVisibleChange.emit(!0),this.visibleChange.emit(!0),this._visible=!0,this.onShow.emit(),this.bindDocumentClickListener(),this.cd.markForCheck()}hide(){this.onVisibleChange.emit(!1),this.visibleChange.emit(!1),this._visible=!1,this.onHide.emit(),this.unbindDocumentClickListener(),this.cd.markForCheck()}onButtonClick(e){this.visible?this.hide():this.show(),this.onClick.emit(e),this.isItemClicked=!0}onItemClick(e,i){i.command&&i.command({originalEvent:e,item:i}),this.hide(),this.isItemClicked=!0}onKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDown(e);break;case"ArrowUp":this.onArrowUp(e);break;case"ArrowLeft":this.onArrowLeft(e);break;case"ArrowRight":this.onArrowRight(e);break;case"Enter":case"Space":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;default:break}}onFocus(e){this.focused=!0}onBlur(e){this.focused=!1,ph.schedule(()=>this.focusedOptionIndex.set(-1))}onArrowUp(e){this.direction==="up"?this.navigateNextItem(e):this.direction==="down"?this.navigatePrevItem(e):this.navigateNextItem(e)}onArrowDown(e){this.direction==="up"?this.navigatePrevItem(e):this.direction==="down"?this.navigateNextItem(e):this.navigatePrevItem(e)}onArrowLeft(e){let i=["left","up-right","down-left"],r=["right","up-left","down-right"];i.includes(this.direction)?this.navigateNextItem(e):r.includes(this.direction)?this.navigatePrevItem(e):this.navigatePrevItem(e)}onArrowRight(e){let i=["left","up-right","down-left"],r=["right","up-left","down-right"];i.includes(this.direction)?this.navigatePrevItem(e):r.includes(this.direction)?this.navigateNextItem(e):this.navigateNextItem(e)}onEndKey(e){e.preventDefault(),this.focusedOptionIndex.set(-1),this.navigatePrevItem(e)}onHomeKey(e){e.preventDefault(),this.focusedOptionIndex.set(-1),this.navigateNextItem(e)}onEnterKey(e){let r=[...C.find(this.container.nativeElement,'[data-pc-section="menuitem"]')].findIndex(a=>a.id===this.focusedOptionIndex());this.onItemClick(e,this.model[r]),this.onBlur(e);let s=C.findSingle(this.container.nativeElement,"button");s&&C.focus(s)}onEscapeKey(e){this.hide();let i=C.findSingle(this.container.nativeElement,"button");i&&C.focus(i)}onTogglerKeydown(e){switch(e.code){case"ArrowDown":case"ArrowLeft":this.onTogglerArrowDown(e);break;case"ArrowUp":case"ArrowRight":this.onTogglerArrowUp(e);break;case"Escape":this.onEscapeKey(e);break;default:break}}onTogglerArrowUp(e){this.focused=!0,C.focus(this.list.nativeElement),this.show(),this.navigatePrevItem(e),e.preventDefault()}onTogglerArrowDown(e){this.focused=!0,C.focus(this.list.nativeElement),this.show(),this.navigateNextItem(e),e.preventDefault()}navigateNextItem(e){let i=this.findNextOptionIndex(this.focusedOptionIndex());this.changeFocusedOptionIndex(i),e.preventDefault()}navigatePrevItem(e){let i=this.findPrevOptionIndex(this.focusedOptionIndex());this.changeFocusedOptionIndex(i),e.preventDefault()}findPrevOptionIndex(e){let r=[...C.find(this.container.nativeElement,'[data-pc-section="menuitem"]')].filter(o=>!C.hasClass(C.findSingle(o,"a"),"p-disabled")),s=e===-1?r[r.length-1].id:e,a=r.findIndex(o=>o.getAttribute("id")===s);return a=e===-1?r.length-1:a-1,a}findNextOptionIndex(e){let r=[...C.find(this.container.nativeElement,'[data-pc-section="menuitem"]')].filter(o=>!C.hasClass(C.findSingle(o,"a"),"p-disabled")),s=e===-1?r[0].id:e,a=r.findIndex(o=>o.getAttribute("id")===s);return a=e===-1?0:a+1,a}changeFocusedOptionIndex(e){let r=[...C.find(this.container.nativeElement,'[data-pc-section="menuitem"]')].filter(s=>!C.hasClass(C.findSingle(s,"a"),"p-disabled"));r[e]&&this.focusedOptionIndex.set(r[e].getAttribute("id"))}calculatePointStyle(e){let i=this.type;if(i!=="linear"){let r=this.model.length,s=this.radius||r*20;if(i==="circle"){let a=2*Math.PI/r;return{left:`calc(${s*Math.cos(a*e)}px + var(--item-diff-x, 0px))`,top:`calc(${s*Math.sin(a*e)}px + var(--item-diff-y, 0px))`}}else if(i==="semi-circle"){let a=this.direction,o=Math.PI/(r-1),l=`calc(${s*Math.cos(o*e)}px + var(--item-diff-x, 0px))`,u=`calc(${s*Math.sin(o*e)}px + var(--item-diff-y, 0px))`;if(a==="up")return{left:l,bottom:u};if(a==="down")return{left:l,top:u};if(a==="left")return{right:u,top:l};if(a==="right")return{left:u,top:l}}else if(i==="quarter-circle"){let a=this.direction,o=Math.PI/(2*(r-1)),l=`calc(${s*Math.cos(o*e)}px + var(--item-diff-x, 0px))`,u=`calc(${s*Math.sin(o*e)}px + var(--item-diff-y, 0px))`;if(a==="up-left")return{right:l,bottom:u};if(a==="up-right")return{left:l,bottom:u};if(a==="down-left")return{right:u,top:l};if(a==="down-right")return{left:u,top:l}}}return{}}calculateTransitionDelay(e){let i=this.model.length;return(this.visible?e:i-e-1)*this.transitionDelay}containerClass(){return{[`p-speeddial p-component p-speeddial-${this.type}`]:!0,[`p-speeddial-direction-${this.direction}`]:this.type!=="circle","p-speeddial-opened":this.visible,"p-disabled":this.disabled}}buttonClass(){return{"p-speeddial-button p-button-rounded":!0,"p-speeddial-rotate":this.rotateAnimation&&!this.hideIcon,[this.buttonClassName]:!0}}get buttonIconClass(){return!this.visible&&this.showIcon||!this.hideIcon?this.showIcon:this.hideIcon}getItemStyle(e){let i=this.calculateTransitionDelay(e),r=this.calculatePointStyle(e);return c({transitionDelay:`${i}ms`},r)}isClickableRouterLink(e){return e.routerLink&&!this.disabled&&!e.disabled}isOutsideClicked(e){return this.container&&!(this.container.nativeElement.isSameNode(e.target)||this.container.nativeElement.contains(e.target)||this.isItemClicked)}bindDocumentClickListener(){ft(this.platformId)&&!this.documentClickListener&&this.hideOnClickOutside&&(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{this.visible&&this.isOutsideClicked(e)&&this.hide(),this.isItemClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}ngOnDestroy(){this.unbindDocumentClickListener()}static \u0275fac=function(i){return new(i||n)(D(Et),D(We),D(Xe),D(Kt),D(Ot))};static \u0275cmp=Z({type:n,selectors:[["p-speedDial"]],contentQueries:function(i,r,s){if(i&1&&Me(s,Le,4),i&2){let a;W(a=Q())&&(r.templates=a)}},viewQuery:function(i,r){if(i&1&&(me(KI,5),me(GI,5)),i&2){let s;W(s=Q())&&(r.container=s.first),W(s=Q())&&(r.list=s.first)}},hostAttrs:[1,"p-element"],inputs:{id:"id",model:"model",visible:"visible",style:"style",className:"className",direction:"direction",transitionDelay:[M.HasDecoratorInputTransform,"transitionDelay","transitionDelay",we],type:"type",radius:[M.HasDecoratorInputTransform,"radius","radius",we],mask:[M.HasDecoratorInputTransform,"mask","mask",j],disabled:[M.HasDecoratorInputTransform,"disabled","disabled",j],hideOnClickOutside:[M.HasDecoratorInputTransform,"hideOnClickOutside","hideOnClickOutside",j],buttonStyle:"buttonStyle",buttonClassName:"buttonClassName",maskStyle:"maskStyle",maskClassName:"maskClassName",showIcon:"showIcon",hideIcon:"hideIcon",rotateAnimation:[M.HasDecoratorInputTransform,"rotateAnimation","rotateAnimation",j],ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy"},outputs:{onVisibleChange:"onVisibleChange",visibleChange:"visibleChange",onClick:"onClick",onShow:"onShow",onHide:"onHide"},features:[Ge],decls:9,vars:25,consts:[["container",""],["list",""],["elseBlock",""],[3,"ngClass","ngStyle"],["pRipple","","pButton","",1,"p-button-icon-only",3,"click","keydown","icon","ngClass","disabled"],[4,"ngIf"],["role","menu",1,"p-speeddial-list",3,"focus","focusout","keydown","id","tabindex"],["class","p-speeddial-item","pTooltip","","role","menuitem",3,"ngStyle","tooltipOptions","ngClass","id",4,"ngFor","ngForOf"],[3,"ngClass","class","ngStyle",4,"ngIf"],[4,"ngTemplateOutlet"],["pTooltip","","role","menuitem",1,"p-speeddial-item",3,"ngStyle","tooltipOptions","ngClass","id"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["pRipple","","class","p-speeddial-action","role","menuitem",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter",4,"ngIf","ngIfElse"],["pRipple","","role","menuitem",1,"p-speeddial-action",3,"click","keydown.enter","routerLink","queryParams","ngClass","routerLinkActiveOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state"],["class","p-speeddial-action-icon",3,"ngClass",4,"ngIf"],[1,"p-speeddial-action-icon",3,"ngClass"],["role","menuitem","pRipple","",1,"p-speeddial-action",3,"click","keydown.enter","ngClass"]],template:function(i,r){if(i&1){let s=H();_(0,"div",3,0)(2,"button",4),L("click",function(o){return E(s),O(r.onButtonClick(o))})("keydown",function(o){return E(s),O(r.onTogglerKeydown(o))}),w(3,YI,1,0,"PlusIcon",5)(4,eC,2,1,"ng-container",5),y(),_(5,"ul",6,1),L("focus",function(o){return E(s),O(r.onFocus(o))})("focusout",function(o){return E(s),O(r.onBlur(o))})("keydown",function(o){return E(s),O(r.onKeyDown(o))}),w(7,lC,3,11,"li",7),y()(),w(8,cC,1,6,"div",8)}i&2&&(ee(r.className),d("ngClass",r.containerClass())("ngStyle",r.style),k("data-pc-name","speeddial")("data-pc-section","root"),m(2),Qe(r.buttonStyle),d("icon",r.buttonIconClass)("ngClass",r.buttonClass())("disabled",r.disabled),k("aria-expanded",r.visible)("aria-haspopup",!0)("aria-controls",r.id+"_list")("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledBy)("data-pc-name","button"),m(),d("ngIf",!r.showIcon&&!r.buttonTemplate),m(),d("ngIf",r.buttonTemplate),m(),d("id",r.id+"_list")("tabindex",-1),k("aria-activedescendant",r.focused?r.focusedOptionId:void 0)("data-pc-section","menu"),m(2),d("ngForOf",r.model),m(),d("ngIf",r.mask&&r.visible))},dependencies:()=>[He,vt,Be,Ke,Ze,Wn,ei,Xn,kh,Ks],styles:[`@layer primeng{.p-speeddial{position:absolute;display:flex;z-index:1}.p-speeddial:not(.p-speeddial-opened){pointer-events:none}.p-speeddial:not(.p-speeddial-opened) .p-speeddial-button{pointer-events:auto}.p-speeddial-list{margin:0;padding:0;list-style:none;display:flex;align-items:center;justify-content:center;transition:top 0s linear .2s;pointer-events:none}.p-speeddial-item{transform:scale(0);opacity:0;transition:transform .2s cubic-bezier(.4,0,.2,1) 0ms,opacity .8s;will-change:transform}.p-speeddial-action{display:flex;align-items:center;justify-content:center;border-radius:50%;position:relative;overflow:hidden;cursor:pointer}.p-speeddial-circle .p-speeddial-item,.p-speeddial-semi-circle .p-speeddial-item,.p-speeddial-quarter-circle .p-speeddial-item{position:absolute}.p-speeddial-rotate{transition:transform .25s cubic-bezier(.4,0,.2,1) 0ms;will-change:transform}.p-speeddial-mask{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;transition:opacity .25s cubic-bezier(.25,.8,.25,1)}.p-speeddial-mask-visible{pointer-events:none;opacity:1;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.p-speeddial-opened .p-speeddial-list{pointer-events:auto}.p-speeddial-opened .p-speeddial-item{transform:scale(1);opacity:1}.p-speeddial-opened .p-speeddial-rotate{transform:rotate(45deg)}.p-speeddial-direction-up{align-items:center;flex-direction:column-reverse}.p-speeddial-direction-up .p-speeddial-list{flex-direction:column-reverse}.p-speeddial-direction-down{align-items:center;flex-direction:column}.p-speeddial-direction-down .p-speeddial-list{flex-direction:column}.p-speeddial-direction-left{justify-content:center;flex-direction:row-reverse}.p-speeddial-direction-left .p-speeddial-list{flex-direction:row-reverse}.p-speeddial-direction-right{justify-content:center;flex-direction:row}.p-speeddial-direction-right .p-speeddial-list{flex-direction:row}}
`],encapsulation:2,changeDetection:0})}return n})(),om=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,gt,li,In,gi,Ks,Ue,gt,In,gi]})}return n})();var lm=[{name:"Andr\xE9s Ib\xE1\xF1ez",code:"SC-01"},{name:"\xC1ngel Sand\xF3val",code:"SC-02"},{name:"Chiquitos",code:"SC-03"},{name:"Cordillera",code:"SC-04"},{name:"Florida",code:"SC-05"},{name:"Germ\xE1n Busch",code:"SC-06"},{name:"Guarayos",code:"SC-07"},{name:"Ichilo",code:"SC-08"},{name:"Manuel M. Caballero",code:"SC-09"},{name:"\xD1uflo de Ch\xE1vez",code:"SC-10"},{name:"Obispo Santiestevan",code:"SC-11"},{name:"Sara",code:"SC-12"},{name:"Vallegrande",code:"SC-13"},{name:"Velasco",code:"SC-14"},{name:"Warnes",code:"SC-15"}];var cm=[{name:"Carreteras, calles y v\xEDas",code:"INF001"},{name:"Puentes",code:"INF002"},{name:"Transporte p\xFAblico, aeropuertos y v\xEDas a\xE9reas",code:"INF003"},{name:"Abastecimiento de agua y recursos",code:"INF004"},{name:"Telecomunicaciones",code:"INF006"},{name:"Generaci\xF3n y transmisi\xF3n de energ\xEDa",code:"INF007"}];var um=[{name:"Riesgo Financiero",code:"R001"},{name:"Riesgo Regulatorio",code:"R002"},{name:"Riesgo Ambiental",code:"R003"},{name:"Riesgo Social",code:"R004"},{name:"Riesgo Tecnol\xF3gico",code:"R005"},{name:"Riesgo Operacional",code:"R006"},{name:"Riesgo Pol\xEDtico",code:"R007"},{name:"Riesgo de Mercado",code:"R008"},{name:"Riesgo de Salud y Seguridad",code:"R009"},{name:"Riesgo de Infraestructura",code:"R010"}];var er=(()=>{let t=class t{constructor(){if(be.supabaseUrl&&be.supabaseKey)this.supabaseClient=Gt(be.supabaseUrl,be.supabaseKey);else throw new Error("Supabase URL or key is undefined.")}createProject(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabaseClient.from("projects").insert([i]);if(s)throw console.error("Error creating project:",s),s;return r})}getProjects(){return h(this,null,function*(){let{data:i,error:r}=yield this.supabaseClient.from("projects").select("*");if(r)throw console.error("Error fetching projects:",r),r;return i})}getProjectById(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabaseClient.from("projects").select("*").eq("project_id",i).single();if(s)throw console.error("Error fetching project:",s),s;return r})}getProjectByUserId(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabaseClient.from("projects").select("*").eq("user_id",i);if(s)throw console.error("Error fetching project:",s),s;return r})}updateProject(i,r){return h(this,null,function*(){let{data:s,error:a}=yield this.supabaseClient.from("projects").update(r).eq("project_id",i);if(a)throw console.error("Error updating project:",a),a;return s})}deleteProject(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabaseClient.from("projects").delete().eq("project_id",i);if(s)throw console.error("Error deleting project:",s),s;return r})}uploadProjectImage(i){return h(this,null,function*(){let r=`${Date.now()}_${i.name}`,{error:s}=yield this.supabaseClient.storage.from("project-images").upload(r,i);if(s)throw console.error("Error uploading image:",s),s;let{data:a}=this.supabaseClient.storage.from("project-images").getPublicUrl(r);if(!a)throw console.error("Error getting public URL:"),new Error("Error getting public URL");return a.publicUrl})}uploadDocument(i){return h(this,null,function*(){let r=`${Date.now()}/${i.name}`,{error:s}=yield this.supabaseClient.storage.from("project-documents").upload(r,i);if(s)throw s;let{data:a}=this.supabaseClient.storage.from("project-documents").getPublicUrl(r);return a.publicUrl})}updateProjectDocumentUrl(i,r){return h(this,null,function*(){let{data:s,error:a}=yield this.supabaseClient.from("projects").update({project_documents:r}).eq("project_id",i);if(a)throw a;return s})}updateAmountRaised(i,r){return h(this,null,function*(){let{data:s,error:a}=yield this.supabaseClient.rpc("increment_amount_raised",{p_project_id:i,p_amount:r});if(a)throw console.error("Error updating amount raised:",a),a;return s})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Rr="4.52.0";var dm=!1,Dr,ku,dC,pC,hC,Pu,mC,pl,Mu,Ru,Du,hl,Nu;function pm(n,t={auto:!1}){if(dm)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(Dr)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${Dr}'\``);dm=t.auto,Dr=n.kind,ku=n.fetch,dC=n.Request,pC=n.Response,hC=n.Headers,Pu=n.FormData,mC=n.Blob,pl=n.File,Mu=n.ReadableStream,Ru=n.getMultipartRequestOptions,Du=n.getDefaultAgent,hl=n.fileFromPath,Nu=n.isFsReadStream}var ml=class{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}};function hm({manuallyImported:n}={}){let t=n?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n",e,i,r,s;try{e=fetch,i=Request,r=Response,s=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${t}`)}return{kind:"web",fetch:e,Request:i,Response:r,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:(a,o)=>h(this,null,function*(){return v(c({},o),{body:new ml(a)})}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}Dr||pm(hm(),{auto:!0});var Fu={};dh(Fu,{APIConnectionError:()=>Tn,APIConnectionTimeoutError:()=>Sn,APIError:()=>wt,APIUserAbortError:()=>_t,AuthenticationError:()=>Zs,BadRequestError:()=>Gs,ConflictError:()=>Js,InternalServerError:()=>ea,NotFoundError:()=>Qs,OpenAIError:()=>ve,PermissionDeniedError:()=>Ws,RateLimitError:()=>Xs,UnprocessableEntityError:()=>Ys});var ve=class extends Error{},wt=class n extends ve{constructor(t,e,i,r){super(`${n.makeMessage(t,e,i)}`),this.status=t,this.headers=r,this.request_id=r?.["x-request-id"];let s=e;this.error=s,this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(t,e,i){let r=e?.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):i;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,e,i,r){if(!t)return new Tn({cause:fl(e)});let s=e?.error;return t===400?new Gs(t,s,i,r):t===401?new Zs(t,s,i,r):t===403?new Ws(t,s,i,r):t===404?new Qs(t,s,i,r):t===409?new Js(t,s,i,r):t===422?new Ys(t,s,i,r):t===429?new Xs(t,s,i,r):t>=500?new ea(t,s,i,r):new n(t,s,i,r)}},_t=class extends wt{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}},Tn=class extends wt{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,e&&(this.cause=e)}},Sn=class extends Tn{constructor({message:t}={}){super({message:t??"Request timed out."})}},Gs=class extends wt{constructor(){super(...arguments),this.status=400}},Zs=class extends wt{constructor(){super(...arguments),this.status=401}},Ws=class extends wt{constructor(){super(...arguments),this.status=403}},Qs=class extends wt{constructor(){super(...arguments),this.status=404}},Js=class extends wt{constructor(){super(...arguments),this.status=409}},Ys=class extends wt{constructor(){super(...arguments),this.status=422}},Xs=class extends wt{constructor(){super(...arguments),this.status=429}},ea=class extends wt{};var un=class n{constructor(t,e){this.iterator=t,this.controller=e}static fromSSEResponse(t,e){let i=!1;function r(){return ne(this,null,function*(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let s=!1;try{try{for(var a=G(gC(t,e)),o,l,u;o=!(l=yield new R(a.next())).done;o=!1){let p=l.value;if(!s){if(p.data.startsWith("[DONE]")){s=!0;continue}if(p.event===null){let g;try{g=JSON.parse(p.data)}catch(b){throw console.error("Could not parse message into JSON:",p.data),console.error("From chunk:",p.raw),b}if(g&&g.error)throw new wt(void 0,g.error,void 0,void 0);yield g}else{let g;try{g=JSON.parse(p.data)}catch(b){throw console.error("Could not parse message into JSON:",p.data),console.error("From chunk:",p.raw),b}if(p.event=="error")throw new wt(void 0,g.error,g.message,void 0);yield{event:p.event,data:g}}}}}catch{u=[l]}finally{try{o&&(l=a.return)&&(yield new R(l.call(a)))}finally{if(u)throw u[0]}}s=!0}catch(p){if(p instanceof Error&&p.name==="AbortError")return;throw p}finally{s||e.abort()}})}return new n(r,e)}static fromReadableStream(t,e){let i=!1;function r(){return ne(this,null,function*(){let a=new ta,o=mm(t);try{for(var l=G(o),u,p,g;u=!(p=yield new R(l.next())).done;u=!1){let b=p.value;for(let x of a.decode(b))yield x}}catch{g=[p]}finally{try{u&&(p=l.return)&&(yield new R(p.call(l)))}finally{if(g)throw g[0]}}for(let b of a.flush())yield b})}function s(){return ne(this,null,function*(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{try{for(var o=G(r()),l,u,p;l=!(u=yield new R(o.next())).done;l=!1){let g=u.value;a||g&&(yield JSON.parse(g))}}catch{p=[u]}finally{try{l&&(u=o.return)&&(yield new R(u.call(o)))}finally{if(p)throw p[0]}}a=!0}catch(g){if(g instanceof Error&&g.name==="AbortError")return;throw g}finally{a||e.abort()}})}return new n(s,e)}[Symbol.asyncIterator](){return this.iterator()}tee(){let t=[],e=[],i=this.iterator(),r=s=>({next:()=>{if(s.length===0){let a=i.next();t.push(a),e.push(a)}return s.shift()}});return[new n(()=>r(t),this.controller),new n(()=>r(e),this.controller)]}toReadableStream(){let t=this,e,i=new TextEncoder;return new Mu({start(){return h(this,null,function*(){e=t[Symbol.asyncIterator]()})},pull(s){return h(this,null,function*(){try{let{value:a,done:o}=yield e.next();if(o)return s.close();let l=i.encode(JSON.stringify(a)+`
`);s.enqueue(l)}catch(a){s.error(a)}})},cancel(){return h(this,null,function*(){yield e.return?.()})}})}};function gC(n,t){return ne(this,null,function*(){if(!n.body)throw t.abort(),new ve("Attempted to iterate over a response with no body");let e=new Lu,i=new ta,r=mm(n.body);try{for(var s=G(_C(r)),a,o,l;a=!(o=yield new R(s.next())).done;a=!1){let u=o.value;for(let p of i.decode(u)){let g=e.decode(p);g&&(yield g)}}}catch{l=[o]}finally{try{a&&(o=s.return)&&(yield new R(o.call(s)))}finally{if(l)throw l[0]}}for(let u of i.flush()){let p=e.decode(u);p&&(yield p)}})}function _C(n){return ne(this,null,function*(){let t=new Uint8Array;try{for(var e=G(n),i,r,s;i=!(r=yield new R(e.next())).done;i=!1){let a=r.value;if(a==null)continue;let o=a instanceof ArrayBuffer?new Uint8Array(a):typeof a=="string"?new TextEncoder().encode(a):a,l=new Uint8Array(t.length+o.length);l.set(t),l.set(o,t.length),t=l;let u;for(;(u=yC(t))!==-1;)yield t.slice(0,u),t=t.slice(u)}}catch{s=[r]}finally{try{i&&(r=e.return)&&(yield new R(r.call(e)))}finally{if(s)throw s[0]}}t.length>0&&(yield t)})}function yC(n){for(let i=0;i<n.length-2;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}var Lu=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,i,r]=bC(t,":");return r.startsWith(" ")&&(r=r.substring(1)),e==="event"?this.event=r:e==="data"&&this.data.push(r),null}},ta=class n{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let e=this.decodeText(t);if(this.trailingCR&&(e="\r"+e,this.trailingCR=!1),e.endsWith("\r")&&(this.trailingCR=!0,e=e.slice(0,-1)),!e)return[];let i=n.NEWLINE_CHARS.has(e[e.length-1]||""),r=e.split(n.NEWLINE_REGEXP);return i&&r.pop(),r.length===1&&!i?(this.buffer.push(r[0]),[]):(this.buffer.length>0&&(r=[this.buffer.join("")+r[0],...r.slice(1)],this.buffer=[]),i||(this.buffer=[r.pop()||""]),r)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new ve(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new ve(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new ve("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];let t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}};ta.NEWLINE_CHARS=new Set([`
`,"\r"]);ta.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function bC(n,t){let e=n.indexOf(t);return e!==-1?[n.substring(0,e),t,n.substring(e+t.length)]:[n,"",""]}function mm(n){if(n[Symbol.asyncIterator])return n;let t=n.getReader();return{next(){return h(this,null,function*(){try{let i=yield t.read();return i?.done&&t.releaseLock(),i}catch(i){throw t.releaseLock(),i}})},return(){return h(this,null,function*(){let i=t.cancel();return t.releaseLock(),yield i,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}var fm=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",gm=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&gl(n),gl=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",vC=n=>gm(n)||fm(n)||Nu(n);function zu(n,t,e){return h(this,null,function*(){if(n=yield n,e??(e=gm(n)?{lastModified:n.lastModified,type:n.type}:{}),fm(n)){let r=yield n.blob();return t||(t=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new pl([r],t,e)}let i=yield wC(n);if(t||(t=IC(n)??"unknown_file"),!e.type){let r=i[0]?.type;typeof r=="string"&&(e=v(c({},e),{type:r}))}return new pl(i,t,e)})}function wC(n){return h(this,null,function*(){let t=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)t.push(n);else if(gl(n))t.push(yield n.arrayBuffer());else if(CC(n))try{for(var e=G(n),i,r,s;i=!(r=yield e.next()).done;i=!1){let a=r.value;t.push(a)}}catch{s=[r]}finally{try{i&&(r=e.return)&&(yield r.call(e))}finally{if(s)throw s[0]}}else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${n?.constructor?.name}; props: ${xC(n)}`);return t})}function xC(n){return`[${Object.getOwnPropertyNames(n).map(e=>`"${e}"`).join(", ")}]`}function IC(n){return ju(n.name)||ju(n.filename)||ju(n.path)?.split(/[\\/]/).pop()}var ju=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},CC=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",$u=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody";var dn=n=>h(void 0,null,function*(){let t=yield _m(n.body);return Ru(t,n)}),_m=n=>h(void 0,null,function*(){let t=new Pu;return yield Promise.all(Object.entries(n||{}).map(([e,i])=>Vu(t,e,i))),t});var Vu=(n,t,e)=>h(void 0,null,function*(){if(e!==void 0){if(e==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")n.append(t,String(e));else if(vC(e)){let i=yield zu(e);n.append(t,i)}else if(Array.isArray(e))yield Promise.all(e.map(i=>Vu(n,t+"[]",i)));else if(typeof e=="object")yield Promise.all(Object.entries(e).map(([i,r])=>Vu(n,`${t}[${i}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${e} instead`)}});var SC=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},EC=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},_l;function xm(n){return h(this,null,function*(){let{response:t}=n;if(n.options.stream)return ia("response",t.status,t.url,t.headers,t.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(t,n.controller):un.fromSSEResponse(t,n.controller);if(t.status===204)return null;if(n.options.__binaryResponse)return t;let e=t.headers.get("content-type");if(e?.includes("application/json")||e?.includes("application/vnd.api+json")){let s=yield t.json();return ia("response",t.status,t.url,t.headers,s),s}let r=yield t.text();return ia("response",t.status,t.url,t.headers,r),r})}var yl=class n extends Promise{constructor(t,e=xm){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=e}_thenUnwrap(t){return new n(this.responsePromise,e=>h(this,null,function*(){return t(yield this.parseResponse(e))}))}asResponse(){return this.responsePromise.then(t=>t.response)}withResponse(){return h(this,null,function*(){let[t,e]=yield Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}})}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}},bl=class{constructor({baseURL:t,maxRetries:e=2,timeout:i=6e5,httpAgent:r,fetch:s}){this.baseURL=t,this.maxRetries=Bu("maxRetries",e),this.timeout=Bu("timeout",i),this.httpAgent=r,this.fetch=s??ku}authHeaders(t){return{}}defaultHeaders(t){return c(c({Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent()},MC()),this.authHeaders(t))}validateHeaders(t,e){}defaultIdempotencyKey(){return`stainless-node-retry-${FC()}`}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,i){return this.request(Promise.resolve(i).then(r=>h(this,null,function*(){let s=r&&gl(r?.body)?new DataView(yield r.body.arrayBuffer()):r?.body instanceof DataView?r.body:r?.body instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r?.body)?new DataView(r.body.buffer):r?.body;return v(c({method:t,path:e},r),{body:s})})))}getAPIList(t,e,i){return this.requestAPIList(e,c({method:"get",path:t},i))}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t){let{method:e,path:i,query:r,headers:s={}}=t,a=ArrayBuffer.isView(t.body)||t.__binaryRequest&&typeof t.body=="string"?t.body:$u(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,o=this.calculateContentLength(a),l=this.buildURL(i,r);"timeout"in t&&Bu("timeout",t.timeout);let u=t.timeout??this.timeout,p=t.httpAgent??this.httpAgent??Du(l),g=u+1e3;typeof p?.options?.timeout=="number"&&g>(p.options.timeout??0)&&(p.options.timeout=g),this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);let b=this.buildHeaders({options:t,headers:s,contentLength:o});return{req:v(c(v(c({method:e},a&&{body:a}),{headers:b}),p&&{agent:p}),{signal:t.signal??null}),url:l,timeout:u}}buildHeaders({options:t,headers:e,contentLength:i}){let r={};i&&(r["content-length"]=i);let s=this.defaultHeaders(t);return wm(r,s),wm(r,e),$u(t.body)&&Dr!=="node"&&delete r["content-type"],this.validateHeaders(r,e),r}prepareOptions(t){return h(this,null,function*(){})}prepareRequest(r,s){return h(this,arguments,function*(t,{url:e,options:i}){})}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(e=>[...e])):c({},t):{}}makeStatusError(t,e,i,r){return wt.generate(t,e,i,r)}request(t,e=null){return new yl(this.makeRequest(t,e))}makeRequest(t,e){return h(this,null,function*(){let i=yield t;e==null&&(e=i.maxRetries??this.maxRetries),yield this.prepareOptions(i);let{req:r,url:s,timeout:a}=this.buildRequest(i);if(yield this.prepareRequest(r,{url:s,options:i}),ia("request",s,i,r.headers),i.signal?.aborted)throw new _t;let o=new AbortController,l=yield this.fetchWithTimeout(s,r,a,o).catch(fl);if(l instanceof Error){if(i.signal?.aborted)throw new _t;if(e)return this.retryRequest(i,e);throw l.name==="AbortError"?new Sn:new Tn({cause:l})}let u=OC(l.headers);if(!l.ok){if(e&&this.shouldRetry(l)){let P=`retrying, ${e} attempts remaining`;return ia(`response (error; ${P})`,l.status,s,u),this.retryRequest(i,e,u)}let p=yield l.text().catch(P=>fl(P).message),g=RC(p),b=g?void 0:p;throw ia(`response (error; ${e?"(error; no more retries left)":"(error; not retryable)"})`,l.status,s,u,b),this.makeStatusError(l.status,g,b,u)}return{response:l,options:i,controller:o}})}requestAPIList(t,e){let i=this.makeRequest(e,null);return new Uu(this,i,t)}buildURL(t,e){let i=NC(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),r=this.defaultQuery();return Im(r)||(e=c(c({},r),e)),typeof e=="object"&&e&&!Array.isArray(e)&&(i.search=this.stringifyQuery(e)),i.toString()}stringifyQuery(t){return Object.entries(t).filter(([e,i])=>typeof i<"u").map(([e,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(e)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(e)}=`;throw new ve(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}fetchWithTimeout(t,e,i,r){return h(this,null,function*(){let l=e||{},{signal:s}=l,a=Ee(l,["signal"]);s&&s.addEventListener("abort",()=>r.abort());let o=setTimeout(()=>r.abort(),i);return this.getRequestClient().fetch.call(void 0,t,c({signal:r.signal},a)).finally(()=>{clearTimeout(o)})})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){let e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}retryRequest(t,e,i){return h(this,null,function*(){let r,s=i?.["retry-after-ms"];if(s){let o=parseFloat(s);Number.isNaN(o)||(r=o)}let a=i?.["retry-after"];if(a&&!r){let o=parseFloat(a);Number.isNaN(o)?r=Date.parse(a)-Date.now():r=o*1e3}if(!(r&&0<=r&&r<60*1e3)){let o=t.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(e,o)}return yield En(r),this.makeRequest(t,e-1)})}calculateDefaultRetryTimeoutMillis(t,e){let s=e-t,a=Math.min(.5*Math.pow(2,s),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Rr}`}},Fa=class{constructor(t,e,i,r){_l.set(this,void 0),SC(this,_l,t,"f"),this.options=r,this.response=e,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}getNextPage(){return h(this,null,function*(){let t=this.nextPageInfo();if(!t)throw new ve("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let e=c({},this.options);if("params"in t&&typeof e.query=="object")e.query=c(c({},e.query),t.params);else if("url"in t){let i=[...Object.entries(e.query||{}),...t.url.searchParams.entries()];for(let[r,s]of i)t.url.searchParams.set(r,s);e.query=void 0,e.path=t.url.toString()}return yield EC(this,_l,"f").requestAPIList(this.constructor,e)})}iterPages(){return ne(this,null,function*(){let t=this;for(yield t;t.hasNextPage();)t=yield new R(t.getNextPage()),yield t})}[(_l=new WeakMap,Symbol.asyncIterator)](){return ne(this,null,function*(){try{for(var t=G(this.iterPages()),e,i,r;e=!(i=yield new R(t.next())).done;e=!1){let s=i.value;for(let a of s.getPaginatedItems())yield a}}catch{r=[i]}finally{try{e&&(i=t.return)&&(yield new R(i.call(t)))}finally{if(r)throw r[0]}}})}},Uu=class extends yl{constructor(t,e,i){super(e,r=>h(this,null,function*(){return new i(t,r.response,yield xm(r),r.options)}))}[Symbol.asyncIterator](){return ne(this,null,function*(){let t=yield new R(this);try{for(var e=G(t),i,r,s;i=!(r=yield new R(e.next())).done;i=!1){let a=r.value;yield a}}catch{s=[r]}finally{try{i&&(r=e.return)&&(yield new R(r.call(e)))}finally{if(s)throw s[0]}}})}},OC=n=>new Proxy(Object.fromEntries(n.entries()),{get(t,e){let i=e.toString();return t[i.toLowerCase()]||t[i]}}),AC={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},tt=n=>typeof n=="object"&&n!==null&&!Im(n)&&Object.keys(n).every(t=>Cm(AC,t)),kC=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rr,"X-Stainless-OS":bm(Deno.build.os),"X-Stainless-Arch":ym(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rr,"X-Stainless-OS":bm(process.platform),"X-Stainless-Arch":ym(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};let n=PC();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function PC(){if(typeof navigator>"u"||!navigator)return null;let n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:t,pattern:e}of n){let i=e.exec(navigator.userAgent);if(i){let r=i[1]||0,s=i[2]||0,a=i[3]||0;return{browser:t,version:`${r}.${s}.${a}`}}}return null}var ym=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",bm=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown"),vm,MC=()=>vm??(vm=kC()),RC=n=>{try{return JSON.parse(n)}catch{return}},DC=new RegExp("^(?:[a-z]+:)?//","i"),NC=n=>DC.test(n),En=n=>new Promise(t=>setTimeout(t,n)),Bu=(n,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ve(`${n} must be an integer`);if(t<0)throw new ve(`${n} must be a positive integer`);return t},fl=n=>n instanceof Error?n:new Error(n);var La=n=>{if(typeof process<"u")return process.env?.[n]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(n)?.trim()};function Im(n){if(!n)return!0;for(let t in n)return!1;return!0}function Cm(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function wm(n,t){for(let e in t){if(!Cm(t,e))continue;let i=e.toLowerCase();if(!i)continue;let r=t[e];r===null?delete n[i]:r!==void 0&&(n[i]=r)}}function ia(n,...t){typeof process<"u"&&process?.env?.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${n}`,...t)}var FC=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)}),Tm=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function vl(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}var tr=class extends Fa{constructor(t,e,i,r){super(t,e,i,r),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}},pt=class extends Fa{constructor(t,e,i,r){super(t,e,i,r),this.data=i.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){let t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;let e=Object.fromEntries(t.url.searchParams);return Object.keys(e).length?e:null}nextPageInfo(){let t=this.getPaginatedItems();if(!t.length)return null;let e=t[t.length-1]?.id;return e?{params:{after:e}}:null}};var se=class{constructor(t){this._client=t}};var Nr=class extends se{create(t,e){return this._client.post("/chat/completions",v(c({body:t},e),{stream:t.stream??!1}))}};Nr||(Nr={});var ir=class extends se{constructor(){super(...arguments),this.completions=new Nr(this._client)}};(function(n){n.Completions=Nr})(ir||(ir={}));var Fr=class extends se{create(t,e){return this._client.post("/audio/speech",v(c({body:t},e),{__binaryResponse:!0}))}};Fr||(Fr={});var Lr=class extends se{create(t,e){return this._client.post("/audio/transcriptions",dn(c({body:t},e)))}};Lr||(Lr={});var jr=class extends se{create(t,e){return this._client.post("/audio/translations",dn(c({body:t},e)))}};jr||(jr={});var nr=class extends se{constructor(){super(...arguments),this.transcriptions=new Lr(this._client),this.translations=new jr(this._client),this.speech=new Fr(this._client)}};(function(n){n.Transcriptions=Lr,n.Translations=jr,n.Speech=Fr})(nr||(nr={}));var rr=class extends se{create(t,e){return this._client.post("/batches",c({body:t},e))}retrieve(t,e){return this._client.get(`/batches/${t}`,e)}list(t={},e){return tt(t)?this.list({},t):this._client.getAPIList("/batches",sr,c({query:t},e))}cancel(t,e){return this._client.post(`/batches/${t}/cancel`,e)}},sr=class extends pt{};(function(n){n.BatchesPage=sr})(rr||(rr={}));var Vr=class extends se{create(t,e){return this._client.post("/assistants",v(c({body:t},e),{headers:c({"OpenAI-Beta":"assistants=v2"},e?.headers)}))}retrieve(t,e){return this._client.get(`/assistants/${t}`,v(c({},e),{headers:c({"OpenAI-Beta":"assistants=v2"},e?.headers)}))}update(t,e,i){return this._client.post(`/assistants/${t}`,v(c({body:e},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}list(t={},e){return tt(t)?this.list({},t):this._client.getAPIList("/assistants",zr,v(c({query:t},e),{headers:c({"OpenAI-Beta":"assistants=v2"},e?.headers)}))}del(t,e){return this._client.delete(`/assistants/${t}`,v(c({},e),{headers:c({"OpenAI-Beta":"assistants=v2"},e?.headers)}))}},zr=class extends pt{};(function(n){n.AssistantsPage=zr})(Vr||(Vr={}));function Hu(n){return typeof n.parse=="function"}var ar=n=>n?.role==="assistant",qu=n=>n?.role==="function",Ku=n=>n?.role==="tool";var Li=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},Pe=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},Wt,wl,xl,ja,Va,Il,za,On,$a,Cl,Tl,na,Gu,Sl,Zu,Wu,Qu,Ju,Am,Yu,Om=10,ra=class{constructor(){Wt.add(this),this.controller=new AbortController,wl.set(this,void 0),xl.set(this,()=>{}),ja.set(this,()=>{}),Va.set(this,void 0),Il.set(this,()=>{}),za.set(this,()=>{}),On.set(this,{}),this._chatCompletions=[],this.messages=[],$a.set(this,!1),Cl.set(this,!1),Tl.set(this,!1),na.set(this,!1),Ju.set(this,t=>{if(Li(this,Cl,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new _t),t instanceof _t)return Li(this,Tl,!0,"f"),this._emit("abort",t);if(t instanceof ve)return this._emit("error",t);if(t instanceof Error){let e=new ve(t.message);return e.cause=t,this._emit("error",e)}return this._emit("error",new ve(String(t)))}),Li(this,wl,new Promise((t,e)=>{Li(this,xl,t,"f"),Li(this,ja,e,"f")}),"f"),Li(this,Va,new Promise((t,e)=>{Li(this,Il,t,"f"),Li(this,za,e,"f")}),"f"),Pe(this,wl,"f").catch(()=>{}),Pe(this,Va,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},Pe(this,Ju,"f"))},0)}_addChatCompletion(t){this._chatCompletions.push(t),this._emit("chatCompletion",t);let e=t.choices[0]?.message;return e&&this._addMessage(e),t}_addMessage(t,e=!0){if("content"in t||(t.content=null),this.messages.push(t),e){if(this._emit("message",t),(qu(t)||Ku(t))&&t.content)this._emit("functionCallResult",t.content);else if(ar(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(ar(t)&&t.tool_calls)for(let i of t.tool_calls)i.type==="function"&&this._emit("functionCall",i.function)}}_connected(){this.ended||(Pe(this,xl,"f").call(this),this._emit("connect"))}get ended(){return Pe(this,$a,"f")}get errored(){return Pe(this,Cl,"f")}get aborted(){return Pe(this,Tl,"f")}abort(){this.controller.abort()}on(t,e){return(Pe(this,On,"f")[t]||(Pe(this,On,"f")[t]=[])).push({listener:e}),this}off(t,e){let i=Pe(this,On,"f")[t];if(!i)return this;let r=i.findIndex(s=>s.listener===e);return r>=0&&i.splice(r,1),this}once(t,e){return(Pe(this,On,"f")[t]||(Pe(this,On,"f")[t]=[])).push({listener:e,once:!0}),this}emitted(t){return new Promise((e,i)=>{Li(this,na,!0,"f"),t!=="error"&&this.once("error",i),this.once(t,e)})}done(){return h(this,null,function*(){Li(this,na,!0,"f"),yield Pe(this,Va,"f")})}finalChatCompletion(){return h(this,null,function*(){yield this.done();let t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new ve("stream ended without producing a ChatCompletion");return t})}finalContent(){return h(this,null,function*(){return yield this.done(),Pe(this,Wt,"m",Gu).call(this)})}finalMessage(){return h(this,null,function*(){return yield this.done(),Pe(this,Wt,"m",Sl).call(this)})}finalFunctionCall(){return h(this,null,function*(){return yield this.done(),Pe(this,Wt,"m",Zu).call(this)})}finalFunctionCallResult(){return h(this,null,function*(){return yield this.done(),Pe(this,Wt,"m",Wu).call(this)})}totalUsage(){return h(this,null,function*(){return yield this.done(),Pe(this,Wt,"m",Qu).call(this)})}allChatCompletions(){return[...this._chatCompletions]}_emit(t,...e){if(Pe(this,$a,"f"))return;t==="end"&&(Li(this,$a,!0,"f"),Pe(this,Il,"f").call(this));let i=Pe(this,On,"f")[t];if(i&&(Pe(this,On,"f")[t]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...e))),t==="abort"){let r=e[0];!Pe(this,na,"f")&&!i?.length&&Promise.reject(r),Pe(this,ja,"f").call(this,r),Pe(this,za,"f").call(this,r),this._emit("end");return}if(t==="error"){let r=e[0];!Pe(this,na,"f")&&!i?.length&&Promise.reject(r),Pe(this,ja,"f").call(this,r),Pe(this,za,"f").call(this,r),this._emit("end")}}_emitFinal(){let t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);let e=Pe(this,Wt,"m",Sl).call(this);e&&this._emit("finalMessage",e);let i=Pe(this,Wt,"m",Gu).call(this);i&&this._emit("finalContent",i);let r=Pe(this,Wt,"m",Zu).call(this);r&&this._emit("finalFunctionCall",r);let s=Pe(this,Wt,"m",Wu).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",Pe(this,Wt,"m",Qu).call(this))}_createChatCompletion(t,e,i){return h(this,null,function*(){let r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Pe(this,Wt,"m",Am).call(this,e);let s=yield t.create(v(c({},e),{stream:!1}),v(c({},i),{signal:this.controller.signal}));return this._connected(),this._addChatCompletion(s)})}_runChatCompletion(t,e,i){return h(this,null,function*(){for(let r of e.messages)this._addMessage(r,!1);return yield this._createChatCompletion(t,e,i)})}_runFunctions(t,e,i){return h(this,null,function*(){let r="function",b=e,{function_call:s="auto",stream:a}=b,o=Ee(b,["function_call","stream"]),l=typeof s!="string"&&s?.name,{maxChatCompletions:u=Om}=i||{},p={};for(let x of e.functions)p[x.name||x.function.name]=x;let g=e.functions.map(x=>({name:x.name||x.function.name,parameters:x.parameters,description:x.description}));for(let x of e.messages)this._addMessage(x,!1);for(let x=0;x<u;++x){let P=(yield this._createChatCompletion(t,v(c({},o),{function_call:s,functions:g,messages:[...this.messages]}),i)).choices[0]?.message;if(!P)throw new ve("missing message in ChatCompletion response");if(!P.function_call)return;let{name:S,arguments:T}=P.function_call,F=p[S];if(F){if(l&&l!==S){let J=`Invalid function_call: ${JSON.stringify(S)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,name:S,content:J});continue}}else{let J=`Invalid function_call: ${JSON.stringify(S)}. Available options are: ${g.map(_e=>JSON.stringify(_e.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:S,content:J});continue}let q;try{q=Hu(F)?yield F.parse(T):T}catch(J){this._addMessage({role:r,name:S,content:J instanceof Error?J.message:String(J)});continue}let X=yield F.function(q,this),K=Pe(this,Wt,"m",Yu).call(this,X);if(this._addMessage({role:r,name:S,content:K}),l)return}})}_runTools(t,e,i){return h(this,null,function*(){let r="tool",b=e,{tool_choice:s="auto",stream:a}=b,o=Ee(b,["tool_choice","stream"]),l=typeof s!="string"&&s?.function?.name,{maxChatCompletions:u=Om}=i||{},p={};for(let x of e.tools)x.type==="function"&&(p[x.function.name||x.function.function.name]=x.function);let g="tools"in e?e.tools.map(x=>x.type==="function"?{type:"function",function:{name:x.function.name||x.function.function.name,parameters:x.function.parameters,description:x.function.description}}:x):void 0;for(let x of e.messages)this._addMessage(x,!1);for(let x=0;x<u;++x){let P=(yield this._createChatCompletion(t,v(c({},o),{tool_choice:s,tools:g,messages:[...this.messages]}),i)).choices[0]?.message;if(!P)throw new ve("missing message in ChatCompletion response");if(!P.tool_calls)return;for(let S of P.tool_calls){if(S.type!=="function")continue;let T=S.id,{name:F,arguments:q}=S.function,X=p[F];if(X){if(l&&l!==F){let Oe=`Invalid tool_call: ${JSON.stringify(F)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,tool_call_id:T,content:Oe});continue}}else{let Oe=`Invalid tool_call: ${JSON.stringify(F)}. Available options are: ${g.map(Ne=>JSON.stringify(Ne.function.name)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:T,content:Oe});continue}let K;try{K=Hu(X)?yield X.parse(q):q}catch(Oe){let Ne=Oe instanceof Error?Oe.message:String(Oe);this._addMessage({role:r,tool_call_id:T,content:Ne});continue}let J=yield X.function(K,this),_e=Pe(this,Wt,"m",Yu).call(this,J);if(this._addMessage({role:r,tool_call_id:T,content:_e}),l)return}}})}};wl=new WeakMap,xl=new WeakMap,ja=new WeakMap,Va=new WeakMap,Il=new WeakMap,za=new WeakMap,On=new WeakMap,$a=new WeakMap,Cl=new WeakMap,Tl=new WeakMap,na=new WeakMap,Ju=new WeakMap,Wt=new WeakSet,Gu=function(){return Pe(this,Wt,"m",Sl).call(this).content??null},Sl=function(){let t=this.messages.length;for(;t-- >0;){let i=this.messages[t];if(ar(i)){let e=i,{function_call:r}=e,s=Ee(e,["function_call"]),a=v(c({},s),{content:i.content??null});return r&&(a.function_call=r),a}}throw new ve("stream ended without producing a ChatCompletionMessage with role=assistant")},Zu=function(){for(let t=this.messages.length-1;t>=0;t--){let e=this.messages[t];if(ar(e)&&e?.function_call)return e.function_call;if(ar(e)&&e?.tool_calls?.length)return e.tool_calls.at(-1)?.function}},Wu=function(){for(let t=this.messages.length-1;t>=0;t--){let e=this.messages[t];if(qu(e)&&e.content!=null||Ku(e)&&e.content!=null&&this.messages.some(i=>i.role==="assistant"&&i.tool_calls?.some(r=>r.type==="function"&&r.id===e.tool_call_id)))return e.content}},Qu=function(){let t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:e}of this._chatCompletions)e&&(t.completion_tokens+=e.completion_tokens,t.prompt_tokens+=e.prompt_tokens,t.total_tokens+=e.total_tokens);return t},Am=function(t){if(t.n!=null&&t.n>1)throw new ve("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Yu=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};var Ba=class n extends ra{static runFunctions(t,e,i){let r=new n,s=v(c({},i),{headers:v(c({},i?.headers),{"X-Stainless-Helper-Method":"runFunctions"})});return r._run(()=>r._runFunctions(t,e,s)),r}static runTools(t,e,i){let r=new n,s=v(c({},i),{headers:v(c({},i?.headers),{"X-Stainless-Helper-Method":"runTools"})});return r._run(()=>r._runTools(t,e,s)),r}_addMessage(t){super._addMessage(t),ar(t)&&t.content&&this._emit("content",t.content)}};var ji=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},Xu=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},pn,or,ed,td,El,km,sa=class n extends ra{constructor(){super(...arguments),pn.add(this),or.set(this,void 0)}get currentChatCompletionSnapshot(){return ji(this,or,"f")}static fromReadableStream(t){let e=new n;return e._run(()=>e._fromReadableStream(t)),e}static createChatCompletion(t,e,i){let r=new n;return r._run(()=>r._runChatCompletion(t,v(c({},e),{stream:!0}),v(c({},i),{headers:v(c({},i?.headers),{"X-Stainless-Helper-Method":"stream"})}))),r}_createChatCompletion(t,e,i){return h(this,null,function*(){let r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ji(this,pn,"m",ed).call(this);let s=yield t.create(v(c({},e),{stream:!0}),v(c({},i),{signal:this.controller.signal}));this._connected();try{for(var a=G(s),o,l,u;o=!(l=yield a.next()).done;o=!1){let p=l.value;ji(this,pn,"m",td).call(this,p)}}catch{u=[l]}finally{try{o&&(l=a.return)&&(yield l.call(a))}finally{if(u)throw u[0]}}if(s.controller.signal?.aborted)throw new _t;return this._addChatCompletion(ji(this,pn,"m",El).call(this))})}_fromReadableStream(t,e){return h(this,null,function*(){let i=e?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ji(this,pn,"m",ed).call(this),this._connected();let r=un.fromReadableStream(t,this.controller),s;try{for(var a=G(r),o,l,u;o=!(l=yield a.next()).done;o=!1){let p=l.value;s&&s!==p.id&&this._addChatCompletion(ji(this,pn,"m",El).call(this)),ji(this,pn,"m",td).call(this,p),s=p.id}}catch{u=[l]}finally{try{o&&(l=a.return)&&(yield l.call(a))}finally{if(u)throw u[0]}}if(r.controller.signal?.aborted)throw new _t;return this._addChatCompletion(ji(this,pn,"m",El).call(this))})}[(or=new WeakMap,pn=new WeakSet,ed=function(){this.ended||Xu(this,or,void 0,"f")},td=function(e){if(this.ended)return;let i=ji(this,pn,"m",km).call(this,e);this._emit("chunk",e,i);let r=e.choices[0]?.delta?.content,s=i.choices[0]?.message;r!=null&&s?.role==="assistant"&&s?.content&&this._emit("content",r,s.content)},El=function(){if(this.ended)throw new ve("stream has ended, this shouldn't happen");let e=ji(this,or,"f");if(!e)throw new ve("request ended without sending any chunks");return Xu(this,or,void 0,"f"),UC(e)},km=function(e){var i,r,s;let a=ji(this,or,"f"),u=e,{choices:o}=u,l=Ee(u,["choices"]);a?Object.assign(a,l):a=Xu(this,or,v(c({},l),{choices:[]}),"f");for(let I of e.choices){let P=I,{delta:S,finish_reason:T,index:F,logprobs:q=null}=P,X=Ee(P,["delta","finish_reason","index","logprobs"]);let K=a.choices[F];if(K||(K=a.choices[F]=c({finish_reason:T,index:F,message:{},logprobs:q},X)),q)if(!K.logprobs)K.logprobs=Object.assign({},q);else{let p=q,{content:xt}=p,It=Ee(p,["content"]);Object.assign(K.logprobs,It),xt&&((i=K.logprobs).content??(i.content=[]),K.logprobs.content.push(...xt))}if(T&&(K.finish_reason=T),Object.assign(K,X),!S)continue;let g=S,{content:J,function_call:_e,role:Oe,tool_calls:Ne}=g,pi=Ee(g,["content","function_call","role","tool_calls"]);if(Object.assign(K.message,pi),J&&(K.message.content=(K.message.content||"")+J),Oe&&(K.message.role=Oe),_e&&(K.message.function_call?(_e.name&&(K.message.function_call.name=_e.name),_e.arguments&&((r=K.message.function_call).arguments??(r.arguments=""),K.message.function_call.arguments+=_e.arguments)):K.message.function_call=_e),Ne){K.message.tool_calls||(K.message.tool_calls=[]);for(let b of Ne){let x=b,{index:xt,id:It,type:tn,function:hi}=x,Ar=Ee(x,["index","id","type","function"]);let te=(s=K.message.tool_calls)[xt]??(s[xt]={});Object.assign(te,Ar),It&&(te.id=It),tn&&(te.type=tn),hi&&(te.function??(te.function={arguments:""})),hi?.name&&(te.function.name=hi.name),hi?.arguments&&(te.function.arguments+=hi.arguments)}}}return a},Symbol.asyncIterator)](){let t=[],e=[],i=!1;return this.on("chunk",r=>{let s=e.shift();s?s.resolve(r):t.push(r)}),this.on("end",()=>{i=!0;for(let r of e)r.resolve(void 0);e.length=0}),this.on("abort",r=>{i=!0;for(let s of e)s.reject(r);e.length=0}),this.on("error",r=>{i=!0;for(let s of e)s.reject(r);e.length=0}),{next:()=>h(this,null,function*(){return t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((s,a)=>e.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0})}),return:()=>h(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}toReadableStream(){return new un(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function UC(n){let o=n,{id:t,choices:e,created:i,model:r,system_fingerprint:s}=o,a=Ee(o,["id","choices","created","model","system_fingerprint"]);return c(v(c({},a),{id:t,choices:e.map(x=>{var I=x,{message:l,finish_reason:u,index:p,logprobs:g}=I,b=Ee(I,["message","finish_reason","index","logprobs"]);if(!u)throw new ve(`missing finish_reason for choice ${p}`);let X=l,{content:P=null,function_call:S,tool_calls:T}=X,F=Ee(X,["content","function_call","tool_calls"]),q=l.role;if(!q)throw new ve(`missing role for choice ${p}`);if(S){let{arguments:K,name:J}=S;if(K==null)throw new ve(`missing function_call.arguments for choice ${p}`);if(!J)throw new ve(`missing function_call.name for choice ${p}`);return v(c({},b),{message:{content:P,function_call:{arguments:K,name:J},role:q},finish_reason:u,index:p,logprobs:g})}return T?v(c({},b),{index:p,finish_reason:u,logprobs:g,message:v(c({},F),{role:q,content:P,tool_calls:T.map((K,J)=>{let hi=K,{function:_e,type:Oe,id:Ne}=hi,pi=Ee(hi,["function","type","id"]),Ar=_e||{},{arguments:xt,name:It}=Ar,tn=Ee(Ar,["arguments","name"]);if(Ne==null)throw new ve(`missing choices[${p}].tool_calls[${J}].id
${Ol(n)}`);if(Oe==null)throw new ve(`missing choices[${p}].tool_calls[${J}].type
${Ol(n)}`);if(It==null)throw new ve(`missing choices[${p}].tool_calls[${J}].function.name
${Ol(n)}`);if(xt==null)throw new ve(`missing choices[${p}].tool_calls[${J}].function.arguments
${Ol(n)}`);return v(c({},pi),{id:Ne,type:Oe,function:v(c({},tn),{name:It,arguments:xt})})})})}):v(c({},b),{message:v(c({},F),{content:P,role:q}),finish_reason:u,index:p,logprobs:g})}),created:i,model:r,object:"chat.completion"}),s?{system_fingerprint:s}:{})}function Ol(n){return JSON.stringify(n)}var Ua=class n extends sa{static fromReadableStream(t){let e=new n;return e._run(()=>e._fromReadableStream(t)),e}static runFunctions(t,e,i){let r=new n,s=v(c({},i),{headers:v(c({},i?.headers),{"X-Stainless-Helper-Method":"runFunctions"})});return r._run(()=>r._runFunctions(t,e,s)),r}static runTools(t,e,i){let r=new n,s=v(c({},i),{headers:v(c({},i?.headers),{"X-Stainless-Helper-Method":"runTools"})});return r._run(()=>r._runTools(t,e,s)),r}};var Ha=class extends se{runFunctions(t,e){return t.stream?Ua.runFunctions(this._client.chat.completions,t,e):Ba.runFunctions(this._client.chat.completions,t,e)}runTools(t,e){return t.stream?Ua.runTools(this._client.chat.completions,t,e):Ba.runTools(this._client.chat.completions,t,e)}stream(t,e){return sa.createChatCompletion(this._client.chat.completions,t,e)}};var $r=class extends se{constructor(){super(...arguments),this.completions=new Ha(this._client)}};(function(n){n.Completions=Ha})($r||($r={}));var Vi=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},ht=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},Al,kl,qa,Ka,Pl,Ga,An,Za,Ml,Rl,aa,id,Dl=class{constructor(){this.controller=new AbortController,Al.set(this,void 0),kl.set(this,()=>{}),qa.set(this,()=>{}),Ka.set(this,void 0),Pl.set(this,()=>{}),Ga.set(this,()=>{}),An.set(this,{}),Za.set(this,!1),Ml.set(this,!1),Rl.set(this,!1),aa.set(this,!1),id.set(this,t=>{if(Vi(this,Ml,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new _t),t instanceof _t)return Vi(this,Rl,!0,"f"),this._emit("abort",t);if(t instanceof ve)return this._emit("error",t);if(t instanceof Error){let e=new ve(t.message);return e.cause=t,this._emit("error",e)}return this._emit("error",new ve(String(t)))}),Vi(this,Al,new Promise((t,e)=>{Vi(this,kl,t,"f"),Vi(this,qa,e,"f")}),"f"),Vi(this,Ka,new Promise((t,e)=>{Vi(this,Pl,t,"f"),Vi(this,Ga,e,"f")}),"f"),ht(this,Al,"f").catch(()=>{}),ht(this,Ka,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emit("end")},ht(this,id,"f"))},0)}_addRun(t){return t}_connected(){this.ended||(ht(this,kl,"f").call(this),this._emit("connect"))}get ended(){return ht(this,Za,"f")}get errored(){return ht(this,Ml,"f")}get aborted(){return ht(this,Rl,"f")}abort(){this.controller.abort()}on(t,e){return(ht(this,An,"f")[t]||(ht(this,An,"f")[t]=[])).push({listener:e}),this}off(t,e){let i=ht(this,An,"f")[t];if(!i)return this;let r=i.findIndex(s=>s.listener===e);return r>=0&&i.splice(r,1),this}once(t,e){return(ht(this,An,"f")[t]||(ht(this,An,"f")[t]=[])).push({listener:e,once:!0}),this}emitted(t){return new Promise((e,i)=>{Vi(this,aa,!0,"f"),t!=="error"&&this.once("error",i),this.once(t,e)})}done(){return h(this,null,function*(){Vi(this,aa,!0,"f"),yield ht(this,Ka,"f")})}_emit(t,...e){if(ht(this,Za,"f"))return;t==="end"&&(Vi(this,Za,!0,"f"),ht(this,Pl,"f").call(this));let i=ht(this,An,"f")[t];if(i&&(ht(this,An,"f")[t]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...e))),t==="abort"){let r=e[0];!ht(this,aa,"f")&&!i?.length&&Promise.reject(r),ht(this,qa,"f").call(this,r),ht(this,Ga,"f").call(this,r),this._emit("end");return}if(t==="error"){let r=e[0];!ht(this,aa,"f")&&!i?.length&&Promise.reject(r),ht(this,qa,"f").call(this,r),ht(this,Ga,"f").call(this,r),this._emit("end")}}_threadAssistantStream(t,e,i){return h(this,null,function*(){return yield this._createThreadAssistantStream(e,t,i)})}_runAssistantStream(t,e,i,r){return h(this,null,function*(){return yield this._createAssistantStream(e,t,i,r)})}_runToolAssistantStream(t,e,i,r,s){return h(this,null,function*(){return yield this._createToolAssistantStream(i,t,e,r,s)})}_createThreadAssistantStream(t,e,i){return h(this,null,function*(){let r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));let s=yield t.createAndRun(v(c({},e),{stream:!1}),v(c({},i),{signal:this.controller.signal}));return this._connected(),this._addRun(s)})}_createToolAssistantStream(t,e,i,r,s){return h(this,null,function*(){let a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));let o=yield t.submitToolOutputs(e,i,v(c({},r),{stream:!1}),v(c({},s),{signal:this.controller.signal}));return this._connected(),this._addRun(o)})}_createAssistantStream(t,e,i,r){return h(this,null,function*(){let s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));let a=yield t.create(e,v(c({},i),{stream:!1}),v(c({},r),{signal:this.controller.signal}));return this._connected(),this._addRun(a)})}};Al=new WeakMap,kl=new WeakMap,qa=new WeakMap,Ka=new WeakMap,Pl=new WeakMap,Ga=new WeakMap,An=new WeakMap,Za=new WeakMap,Ml=new WeakMap,Rl=new WeakMap,aa=new WeakMap,id=new WeakMap;var ae=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},yi=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},Ft,nd,hn,Nl,zi,Ur,oa,Br,jl,bi,Fl,Ll,Ja,Wa,Qa,Pm,Mm,Rm,Dm,Nm,Fm,Lm,mn=class n extends Dl{constructor(){super(...arguments),Ft.add(this),nd.set(this,[]),hn.set(this,{}),Nl.set(this,{}),zi.set(this,void 0),Ur.set(this,void 0),oa.set(this,void 0),Br.set(this,void 0),jl.set(this,void 0),bi.set(this,void 0),Fl.set(this,void 0),Ll.set(this,void 0),Ja.set(this,void 0)}[(nd=new WeakMap,hn=new WeakMap,Nl=new WeakMap,zi=new WeakMap,Ur=new WeakMap,oa=new WeakMap,Br=new WeakMap,jl=new WeakMap,bi=new WeakMap,Fl=new WeakMap,Ll=new WeakMap,Ja=new WeakMap,Ft=new WeakSet,Symbol.asyncIterator)](){let t=[],e=[],i=!1;return this.on("event",r=>{let s=e.shift();s?s.resolve(r):t.push(r)}),this.on("end",()=>{i=!0;for(let r of e)r.resolve(void 0);e.length=0}),this.on("abort",r=>{i=!0;for(let s of e)s.reject(r);e.length=0}),this.on("error",r=>{i=!0;for(let s of e)s.reject(r);e.length=0}),{next:()=>h(this,null,function*(){return t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((s,a)=>e.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0})}),return:()=>h(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}static fromReadableStream(t){let e=new n;return e._run(()=>e._fromReadableStream(t)),e}_fromReadableStream(t,e){return h(this,null,function*(){let i=e?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();let r=un.fromReadableStream(t,this.controller);try{for(var s=G(r),a,o,l;a=!(o=yield s.next()).done;a=!1){let u=o.value;ae(this,Ft,"m",Wa).call(this,u)}}catch{l=[o]}finally{try{a&&(o=s.return)&&(yield o.call(s))}finally{if(l)throw l[0]}}if(r.controller.signal?.aborted)throw new _t;return this._addRun(ae(this,Ft,"m",Qa).call(this))})}toReadableStream(){return new un(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,e,i,r,s){let a=new n;return a._run(()=>a._runToolAssistantStream(t,e,i,r,v(c({},s),{headers:v(c({},s?.headers),{"X-Stainless-Helper-Method":"stream"})}))),a}_createToolAssistantStream(t,e,i,r,s){return h(this,null,function*(){let a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));let o=v(c({},r),{stream:!0}),l=yield t.submitToolOutputs(e,i,o,v(c({},s),{signal:this.controller.signal}));this._connected();try{for(var u=G(l),p,g,b;p=!(g=yield u.next()).done;p=!1){let x=g.value;ae(this,Ft,"m",Wa).call(this,x)}}catch{b=[g]}finally{try{p&&(g=u.return)&&(yield g.call(u))}finally{if(b)throw b[0]}}if(l.controller.signal?.aborted)throw new _t;return this._addRun(ae(this,Ft,"m",Qa).call(this))})}static createThreadAssistantStream(t,e,i){let r=new n;return r._run(()=>r._threadAssistantStream(t,e,v(c({},i),{headers:v(c({},i?.headers),{"X-Stainless-Helper-Method":"stream"})}))),r}static createAssistantStream(t,e,i,r){let s=new n;return s._run(()=>s._runAssistantStream(t,e,i,v(c({},r),{headers:v(c({},r?.headers),{"X-Stainless-Helper-Method":"stream"})}))),s}currentEvent(){return ae(this,Fl,"f")}currentRun(){return ae(this,Ll,"f")}currentMessageSnapshot(){return ae(this,zi,"f")}currentRunStepSnapshot(){return ae(this,Ja,"f")}finalRunSteps(){return h(this,null,function*(){return yield this.done(),Object.values(ae(this,hn,"f"))})}finalMessages(){return h(this,null,function*(){return yield this.done(),Object.values(ae(this,Nl,"f"))})}finalRun(){return h(this,null,function*(){if(yield this.done(),!ae(this,Ur,"f"))throw Error("Final run was not received.");return ae(this,Ur,"f")})}_createThreadAssistantStream(t,e,i){return h(this,null,function*(){let r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));let s=v(c({},e),{stream:!0}),a=yield t.createAndRun(s,v(c({},i),{signal:this.controller.signal}));this._connected();try{for(var o=G(a),l,u,p;l=!(u=yield o.next()).done;l=!1){let g=u.value;ae(this,Ft,"m",Wa).call(this,g)}}catch{p=[u]}finally{try{l&&(u=o.return)&&(yield u.call(o))}finally{if(p)throw p[0]}}if(a.controller.signal?.aborted)throw new _t;return this._addRun(ae(this,Ft,"m",Qa).call(this))})}_createAssistantStream(t,e,i,r){return h(this,null,function*(){let s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));let a=v(c({},i),{stream:!0}),o=yield t.create(e,a,v(c({},r),{signal:this.controller.signal}));this._connected();try{for(var l=G(o),u,p,g;u=!(p=yield l.next()).done;u=!1){let b=p.value;ae(this,Ft,"m",Wa).call(this,b)}}catch{g=[p]}finally{try{u&&(p=l.return)&&(yield p.call(l))}finally{if(g)throw g[0]}}if(o.controller.signal?.aborted)throw new _t;return this._addRun(ae(this,Ft,"m",Qa).call(this))})}static accumulateDelta(t,e){for(let[i,r]of Object.entries(e)){if(!t.hasOwnProperty(i)){t[i]=r;continue}let s=t[i];if(s==null){t[i]=r;continue}if(i==="index"||i==="type"){t[i]=r;continue}if(typeof s=="string"&&typeof r=="string")s+=r;else if(typeof s=="number"&&typeof r=="number")s+=r;else if(vl(s)&&vl(r))s=this.accumulateDelta(s,r);else if(Array.isArray(s)&&Array.isArray(r)){if(s.every(a=>typeof a=="string"||typeof a=="number")){s.push(...r);continue}}else throw Error(`Unhandled record type: ${i}, deltaValue: ${r}, accValue: ${s}`);t[i]=s}return t}};Wa=function(t){if(!this.ended)switch(yi(this,Fl,t,"f"),ae(this,Ft,"m",Rm).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ae(this,Ft,"m",Lm).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ae(this,Ft,"m",Mm).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ae(this,Ft,"m",Pm).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Qa=function(){if(this.ended)throw new ve("stream has ended, this shouldn't happen");if(!ae(this,Ur,"f"))throw Error("Final run has not been received");return ae(this,Ur,"f")},Pm=function(t){let[e,i]=ae(this,Ft,"m",Nm).call(this,t,ae(this,zi,"f"));yi(this,zi,e,"f"),ae(this,Nl,"f")[e.id]=e;for(let r of i){let s=e.content[r.index];s?.type=="text"&&this._emit("textCreated",s.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,e),t.data.delta.content)for(let r of t.data.delta.content){if(r.type=="text"&&r.text){let s=r.text,a=e.content[r.index];if(a&&a.type=="text")this._emit("textDelta",s,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=ae(this,oa,"f")){if(ae(this,Br,"f"))switch(ae(this,Br,"f").type){case"text":this._emit("textDone",ae(this,Br,"f").text,ae(this,zi,"f"));break;case"image_file":this._emit("imageFileDone",ae(this,Br,"f").image_file,ae(this,zi,"f"));break}yi(this,oa,r.index,"f")}yi(this,Br,e.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(ae(this,oa,"f")!==void 0){let r=t.data.content[ae(this,oa,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,ae(this,zi,"f"));break;case"text":this._emit("textDone",r.text,ae(this,zi,"f"));break}}ae(this,zi,"f")&&this._emit("messageDone",t.data),yi(this,zi,void 0,"f")}},Mm=function(t){let e=ae(this,Ft,"m",Dm).call(this,t);switch(yi(this,Ja,e,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":let i=t.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&e.step_details.type=="tool_calls")for(let s of i.step_details.tool_calls)s.index==ae(this,jl,"f")?this._emit("toolCallDelta",s,e.step_details.tool_calls[s.index]):(ae(this,bi,"f")&&this._emit("toolCallDone",ae(this,bi,"f")),yi(this,jl,s.index,"f"),yi(this,bi,e.step_details.tool_calls[s.index],"f"),ae(this,bi,"f")&&this._emit("toolCallCreated",ae(this,bi,"f")));this._emit("runStepDelta",t.data.delta,e);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":yi(this,Ja,void 0,"f"),t.data.step_details.type=="tool_calls"&&ae(this,bi,"f")&&(this._emit("toolCallDone",ae(this,bi,"f")),yi(this,bi,void 0,"f")),this._emit("runStepDone",t.data,e);break;case"thread.run.step.in_progress":break}},Rm=function(t){ae(this,nd,"f").push(t),this._emit("event",t)},Dm=function(t){switch(t.event){case"thread.run.step.created":return ae(this,hn,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let e=ae(this,hn,"f")[t.data.id];if(!e)throw Error("Received a RunStepDelta before creation of a snapshot");let i=t.data;if(i.delta){let r=mn.accumulateDelta(e,i.delta);ae(this,hn,"f")[t.data.id]=r}return ae(this,hn,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ae(this,hn,"f")[t.data.id]=t.data;break}if(ae(this,hn,"f")[t.data.id])return ae(this,hn,"f")[t.data.id];throw new Error("No snapshot available")},Nm=function(t,e){let i=[];switch(t.event){case"thread.message.created":return[t.data,i];case"thread.message.delta":if(!e)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=t.data;if(r.delta.content)for(let s of r.delta.content)if(s.index in e.content){let a=e.content[s.index];e.content[s.index]=ae(this,Ft,"m",Fm).call(this,s,a)}else e.content[s.index]=s,i.push(s);return[e,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(e)return[e,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Fm=function(t,e){return mn.accumulateDelta(e,t)},Lm=function(t){switch(yi(this,Ll,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":yi(this,Ur,t.data,"f"),ae(this,bi,"f")&&(this._emit("toolCallDone",ae(this,bi,"f")),yi(this,bi,void 0,"f"));break;case"thread.run.cancelling":break}};var Hr=class extends se{create(t,e,i){return this._client.post(`/threads/${t}/messages`,v(c({body:e},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}retrieve(t,e,i){return this._client.get(`/threads/${t}/messages/${e}`,v(c({},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}update(t,e,i,r){return this._client.post(`/threads/${t}/messages/${e}`,v(c({body:i},r),{headers:c({"OpenAI-Beta":"assistants=v2"},r?.headers)}))}list(t,e={},i){return tt(e)?this.list(t,{},e):this._client.getAPIList(`/threads/${t}/messages`,qr,v(c({query:e},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}del(t,e,i){return this._client.delete(`/threads/${t}/messages/${e}`,v(c({},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}},qr=class extends pt{};(function(n){n.MessagesPage=qr})(Hr||(Hr={}));var Kr=class extends se{retrieve(t,e,i,r){return this._client.get(`/threads/${t}/runs/${e}/steps/${i}`,v(c({},r),{headers:c({"OpenAI-Beta":"assistants=v2"},r?.headers)}))}list(t,e,i={},r){return tt(i)?this.list(t,e,{},i):this._client.getAPIList(`/threads/${t}/runs/${e}/steps`,Gr,v(c({query:i},r),{headers:c({"OpenAI-Beta":"assistants=v2"},r?.headers)}))}},Gr=class extends pt{};(function(n){n.RunStepsPage=Gr})(Kr||(Kr={}));var Zr=class extends se{constructor(){super(...arguments),this.steps=new Kr(this._client)}create(t,e,i){return this._client.post(`/threads/${t}/runs`,v(c({body:e},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers),stream:e.stream??!1}))}retrieve(t,e,i){return this._client.get(`/threads/${t}/runs/${e}`,v(c({},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}update(t,e,i,r){return this._client.post(`/threads/${t}/runs/${e}`,v(c({body:i},r),{headers:c({"OpenAI-Beta":"assistants=v2"},r?.headers)}))}list(t,e={},i){return tt(e)?this.list(t,{},e):this._client.getAPIList(`/threads/${t}/runs`,Wr,v(c({query:e},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}cancel(t,e,i){return this._client.post(`/threads/${t}/runs/${e}/cancel`,v(c({},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}createAndPoll(t,e,i){return h(this,null,function*(){let r=yield this.create(t,e,i);return yield this.poll(t,r.id,i)})}createAndStream(t,e,i){return mn.createAssistantStream(t,this._client.beta.threads.runs,e,i)}poll(t,e,i){return h(this,null,function*(){let r=v(c({},i?.headers),{"X-Stainless-Poll-Helper":"true"});for(i?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){let{data:s,response:a}=yield this.retrieve(t,e,v(c({},i),{headers:c(c({},i?.headers),r)})).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(i?.pollIntervalMs)o=i.pollIntervalMs;else{let l=a.headers.get("openai-poll-after-ms");if(l){let u=parseInt(l);isNaN(u)||(o=u)}}yield En(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}})}stream(t,e,i){return mn.createAssistantStream(t,this._client.beta.threads.runs,e,i)}submitToolOutputs(t,e,i,r){return this._client.post(`/threads/${t}/runs/${e}/submit_tool_outputs`,v(c({body:i},r),{headers:c({"OpenAI-Beta":"assistants=v2"},r?.headers),stream:i.stream??!1}))}submitToolOutputsAndPoll(t,e,i,r){return h(this,null,function*(){let s=yield this.submitToolOutputs(t,e,i,r);return yield this.poll(t,s.id,r)})}submitToolOutputsStream(t,e,i,r){return mn.createToolAssistantStream(t,e,this._client.beta.threads.runs,i,r)}},Wr=class extends pt{};(function(n){n.RunsPage=Wr,n.Steps=Kr,n.RunStepsPage=Gr})(Zr||(Zr={}));var Qr=class extends se{constructor(){super(...arguments),this.runs=new Zr(this._client),this.messages=new Hr(this._client)}create(t={},e){return tt(t)?this.create({},t):this._client.post("/threads",v(c({body:t},e),{headers:c({"OpenAI-Beta":"assistants=v2"},e?.headers)}))}retrieve(t,e){return this._client.get(`/threads/${t}`,v(c({},e),{headers:c({"OpenAI-Beta":"assistants=v2"},e?.headers)}))}update(t,e,i){return this._client.post(`/threads/${t}`,v(c({body:e},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}del(t,e){return this._client.delete(`/threads/${t}`,v(c({},e),{headers:c({"OpenAI-Beta":"assistants=v2"},e?.headers)}))}createAndRun(t,e){return this._client.post("/threads/runs",v(c({body:t},e),{headers:c({"OpenAI-Beta":"assistants=v2"},e?.headers),stream:t.stream??!1}))}createAndRunPoll(t,e){return h(this,null,function*(){let i=yield this.createAndRun(t,e);return yield this.runs.poll(i.thread_id,i.id,e)})}createAndRunStream(t,e){return mn.createThreadAssistantStream(t,this._client.beta.threads,e)}};(function(n){n.Runs=Zr,n.RunsPage=Wr,n.Messages=Hr,n.MessagesPage=qr})(Qr||(Qr={}));var $m=n=>h(void 0,null,function*(){let t=yield Promise.allSettled(n),e=t.filter(r=>r.status==="rejected");if(e.length){for(let r of e)console.error(r.reason);throw new Error(`${e.length} promise(s) failed - see the above errors`)}let i=[];for(let r of t)r.status==="fulfilled"&&i.push(r.value);return i});var Jr=class extends se{create(t,e,i){return this._client.post(`/vector_stores/${t}/files`,v(c({body:e},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}retrieve(t,e,i){return this._client.get(`/vector_stores/${t}/files/${e}`,v(c({},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}list(t,e={},i){return tt(e)?this.list(t,{},e):this._client.getAPIList(`/vector_stores/${t}/files`,kn,v(c({query:e},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}del(t,e,i){return this._client.delete(`/vector_stores/${t}/files/${e}`,v(c({},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}createAndPoll(t,e,i){return h(this,null,function*(){let r=yield this.create(t,e,i);return yield this.poll(t,r.id,i)})}poll(t,e,i){return h(this,null,function*(){let r=v(c({},i?.headers),{"X-Stainless-Poll-Helper":"true"});for(i?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){let s=yield this.retrieve(t,e,v(c({},i),{headers:r})).withResponse(),a=s.data;switch(a.status){case"in_progress":let o=5e3;if(i?.pollIntervalMs)o=i.pollIntervalMs;else{let l=s.response.headers.get("openai-poll-after-ms");if(l){let u=parseInt(l);isNaN(u)||(o=u)}}yield En(o);break;case"failed":case"completed":return a}}})}upload(t,e,i){return h(this,null,function*(){let r=yield this._client.files.create({file:e,purpose:"assistants"},i);return this.create(t,{file_id:r.id},i)})}uploadAndPoll(t,e,i){return h(this,null,function*(){let r=yield this.upload(t,e,i);return yield this.poll(t,r.id,i)})}},kn=class extends pt{};(function(n){n.VectorStoreFilesPage=kn})(Jr||(Jr={}));var Yr=class extends se{create(t,e,i){return this._client.post(`/vector_stores/${t}/file_batches`,v(c({body:e},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}retrieve(t,e,i){return this._client.get(`/vector_stores/${t}/file_batches/${e}`,v(c({},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}cancel(t,e,i){return this._client.post(`/vector_stores/${t}/file_batches/${e}/cancel`,v(c({},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}createAndPoll(t,e,i){return h(this,null,function*(){let r=yield this.create(t,e);return yield this.poll(t,r.id,i)})}listFiles(t,e,i={},r){return tt(i)?this.listFiles(t,e,{},i):this._client.getAPIList(`/vector_stores/${t}/file_batches/${e}/files`,kn,v(c({query:i},r),{headers:c({"OpenAI-Beta":"assistants=v2"},r?.headers)}))}poll(t,e,i){return h(this,null,function*(){let r=v(c({},i?.headers),{"X-Stainless-Poll-Helper":"true"});for(i?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){let{data:s,response:a}=yield this.retrieve(t,e,v(c({},i),{headers:r})).withResponse();switch(s.status){case"in_progress":let o=5e3;if(i?.pollIntervalMs)o=i.pollIntervalMs;else{let l=a.headers.get("openai-poll-after-ms");if(l){let u=parseInt(l);isNaN(u)||(o=u)}}yield En(o);break;case"failed":case"cancelled":case"completed":return s}}})}uploadAndPoll(s,a,o){return h(this,arguments,function*(t,{files:e,fileIds:i=[]},r){if(e===null||e.length==0)throw new Error("No files provided to process.");let l=r?.maxConcurrency??5,u=Math.min(l,e.length),p=this._client,g=e.values(),b=[...i];function x(P){return h(this,null,function*(){for(let S of P){let T=yield p.files.create({file:S,purpose:"assistants"},r);b.push(T.id)}})}let I=Array(u).fill(g).map(x);return yield $m(I),yield this.createAndPoll(t,{file_ids:b})})}};Yr||(Yr={});var Xr=class extends se{constructor(){super(...arguments),this.files=new Jr(this._client),this.fileBatches=new Yr(this._client)}create(t,e){return this._client.post("/vector_stores",v(c({body:t},e),{headers:c({"OpenAI-Beta":"assistants=v2"},e?.headers)}))}retrieve(t,e){return this._client.get(`/vector_stores/${t}`,v(c({},e),{headers:c({"OpenAI-Beta":"assistants=v2"},e?.headers)}))}update(t,e,i){return this._client.post(`/vector_stores/${t}`,v(c({body:e},i),{headers:c({"OpenAI-Beta":"assistants=v2"},i?.headers)}))}list(t={},e){return tt(t)?this.list({},t):this._client.getAPIList("/vector_stores",es,v(c({query:t},e),{headers:c({"OpenAI-Beta":"assistants=v2"},e?.headers)}))}del(t,e){return this._client.delete(`/vector_stores/${t}`,v(c({},e),{headers:c({"OpenAI-Beta":"assistants=v2"},e?.headers)}))}},es=class extends pt{};(function(n){n.VectorStoresPage=es,n.Files=Jr,n.VectorStoreFilesPage=kn,n.FileBatches=Yr})(Xr||(Xr={}));var lr=class extends se{constructor(){super(...arguments),this.vectorStores=new Xr(this._client),this.chat=new $r(this._client),this.assistants=new Vr(this._client),this.threads=new Qr(this._client)}};(function(n){n.VectorStores=Xr,n.VectorStoresPage=es,n.Chat=$r,n.Assistants=Vr,n.AssistantsPage=zr,n.Threads=Qr})(lr||(lr={}));var cr=class extends se{create(t,e){return this._client.post("/completions",v(c({body:t},e),{stream:t.stream??!1}))}};cr||(cr={});var ur=class extends se{create(t,e){return this._client.post("/embeddings",c({body:t},e))}};ur||(ur={});var dr=class extends se{create(t,e){return this._client.post("/files",dn(c({body:t},e)))}retrieve(t,e){return this._client.get(`/files/${t}`,e)}list(t={},e){return tt(t)?this.list({},t):this._client.getAPIList("/files",pr,c({query:t},e))}del(t,e){return this._client.delete(`/files/${t}`,e)}content(t,e){return this._client.get(`/files/${t}/content`,v(c({},e),{__binaryResponse:!0}))}retrieveContent(t,e){return this._client.get(`/files/${t}/content`,v(c({},e),{headers:c({Accept:"application/json"},e?.headers)}))}waitForProcessing(r){return h(this,arguments,function*(t,{pollInterval:e=5e3,maxWait:i=30*60*1e3}={}){let s=new Set(["processed","error","deleted"]),a=Date.now(),o=yield this.retrieve(t);for(;!o.status||!s.has(o.status);)if(yield En(e),o=yield this.retrieve(t),Date.now()-a>i)throw new Sn({message:`Giving up on waiting for file ${t} to finish processing after ${i} milliseconds.`});return o})}},pr=class extends tr{};(function(n){n.FileObjectsPage=pr})(dr||(dr={}));var ts=class extends se{list(t,e={},i){return tt(e)?this.list(t,{},e):this._client.getAPIList(`/fine_tuning/jobs/${t}/checkpoints`,is,c({query:e},i))}},is=class extends pt{};(function(n){n.FineTuningJobCheckpointsPage=is})(ts||(ts={}));var ns=class extends se{constructor(){super(...arguments),this.checkpoints=new ts(this._client)}create(t,e){return this._client.post("/fine_tuning/jobs",c({body:t},e))}retrieve(t,e){return this._client.get(`/fine_tuning/jobs/${t}`,e)}list(t={},e){return tt(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",rs,c({query:t},e))}cancel(t,e){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,e)}listEvents(t,e={},i){return tt(e)?this.listEvents(t,{},e):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,ss,c({query:e},i))}},rs=class extends pt{},ss=class extends pt{};(function(n){n.FineTuningJobsPage=rs,n.FineTuningJobEventsPage=ss,n.Checkpoints=ts,n.FineTuningJobCheckpointsPage=is})(ns||(ns={}));var hr=class extends se{constructor(){super(...arguments),this.jobs=new ns(this._client)}};(function(n){n.Jobs=ns,n.FineTuningJobsPage=rs,n.FineTuningJobEventsPage=ss})(hr||(hr={}));var mr=class extends se{createVariation(t,e){return this._client.post("/images/variations",dn(c({body:t},e)))}edit(t,e){return this._client.post("/images/edits",dn(c({body:t},e)))}generate(t,e){return this._client.post("/images/generations",c({body:t},e))}};mr||(mr={});var fr=class extends se{retrieve(t,e){return this._client.get(`/models/${t}`,e)}list(t){return this._client.getAPIList("/models",gr,t)}del(t,e){return this._client.delete(`/models/${t}`,e)}},gr=class extends tr{};(function(n){n.ModelsPage=gr})(fr||(fr={}));var _r=class extends se{create(t,e){return this._client.post("/moderations",c({body:t},e))}};_r||(_r={});var Km,Ye=class extends bl{constructor(a={}){var o=a,{baseURL:t=La("OPENAI_BASE_URL"),apiKey:e=La("OPENAI_API_KEY"),organization:i=La("OPENAI_ORG_ID")??null,project:r=La("OPENAI_PROJECT_ID")??null}=o,s=Ee(o,["baseURL","apiKey","organization","project"]);if(e===void 0)throw new ve("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");let l=v(c({apiKey:e,organization:i,project:r},s),{baseURL:t||"https://api.openai.com/v1"});if(!l.dangerouslyAllowBrowser&&Tm())throw new ve(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:l.baseURL,timeout:l.timeout??6e5,httpAgent:l.httpAgent,maxRetries:l.maxRetries,fetch:l.fetch}),this.completions=new cr(this),this.chat=new ir(this),this.embeddings=new ur(this),this.files=new dr(this),this.images=new mr(this),this.audio=new nr(this),this.moderations=new _r(this),this.models=new fr(this),this.fineTuning=new hr(this),this.beta=new lr(this),this.batches=new rr(this),this._options=l,this.apiKey=e,this.organization=i,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return c(v(c({},super.defaultHeaders(t)),{"OpenAI-Organization":this.organization,"OpenAI-Project":this.project}),this._options.defaultHeaders)}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}};Km=Ye;Ye.OpenAI=Km;Ye.OpenAIError=ve;Ye.APIError=wt;Ye.APIConnectionError=Tn;Ye.APIConnectionTimeoutError=Sn;Ye.APIUserAbortError=_t;Ye.NotFoundError=Qs;Ye.ConflictError=Js;Ye.RateLimitError=Xs;Ye.BadRequestError=Gs;Ye.AuthenticationError=Zs;Ye.InternalServerError=ea;Ye.PermissionDeniedError=Ws;Ye.UnprocessableEntityError=Ys;Ye.toFile=zu;Ye.fileFromPath=hl;var{OpenAIError:rL,APIError:sL,APIConnectionError:aL,APIConnectionTimeoutError:Gm,APIUserAbortError:Zm,NotFoundError:oL,ConflictError:lL,RateLimitError:cL,BadRequestError:uL,AuthenticationError:dL,InternalServerError:pL,PermissionDeniedError:hL,UnprocessableEntityError:mL}=Fu;(function(n){n.Page=tr,n.CursorPage=pt,n.Completions=cr,n.Chat=ir,n.Embeddings=ur,n.Files=dr,n.FileObjectsPage=pr,n.Images=mr,n.Audio=nr,n.Moderations=_r,n.Models=fr,n.ModelsPage=gr,n.FineTuning=hr,n.Beta=lr,n.Batches=rr,n.BatchesPage=sr})(Ye||(Ye={}));function Vl(n){if(typeof n>"u")return null;try{return JSON.parse(n)}catch{}let t="",e=[],i=!1,r=!1;for(let s of n){if(i)s==='"'&&!r?i=!1:s===`
`&&!r?s="\\n":s==="\\"?r=!r:r=!1;else if(s==='"')i=!0,r=!1;else if(s==="{")e.push("}");else if(s==="[")e.push("]");else if(s==="}"||s==="]")if(e&&e[e.length-1]===s)e.pop();else return null;t+=s}i&&(t+='"');for(let s=e.length-1;s>=0;s-=1)t+=e[s];try{return JSON.parse(t)}catch{return null}}var sf=rn(Qm(),1),nT=rn(rf(),1);function af(n,t){return t?.[n]||(0,sf.default)(n)}function of(n,t,e){let i={};for(let r in n)Object.hasOwn(n,r)&&(i[t(r,e)]=n[r]);return i}function lf(n){return Array.isArray(n)?[...n]:c({},n)}function rT(n,t){let e=lf(n);for(let[i,r]of Object.entries(t)){let[s,...a]=i.split(".").reverse(),o=e;for(let l of a.reverse()){if(o[l]===void 0)break;o[l]=lf(o[l]),o=o[l]}o[s]!==void 0&&(o[s]={lc:1,type:"secret",id:[r]})}return e}function sd(n){let t=Object.getPrototypeOf(n);return typeof n.lc_name=="function"&&(typeof t.lc_name!="function"||n.lc_name()!==t.lc_name())?n.lc_name():n.name}var $i=class n{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,sd(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(t,...e){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=t||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof n||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let t={},e={},i=Object.keys(this.lc_kwargs).reduce((r,s)=>(r[s]=s in this?this[s]:this.lc_kwargs[s],r),{});for(let r=Object.getPrototypeOf(this);r;r=Object.getPrototypeOf(r))Object.assign(t,Reflect.get(r,"lc_aliases",this)),Object.assign(e,Reflect.get(r,"lc_secrets",this)),Object.assign(i,Reflect.get(r,"lc_attributes",this));return Object.keys(e).forEach(r=>{let s=this,a=i,[o,...l]=r.split(".").reverse();for(let u of l.reverse()){if(!(u in s)||s[u]===void 0)return;(!(u in a)||a[u]===void 0)&&(typeof s[u]=="object"&&s[u]!=null?a[u]={}:Array.isArray(s[u])&&(a[u]=[])),s=s[u],a=a[u]}o in s&&s[o]!==void 0&&(a[o]=a[o]||s[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:of(Object.keys(e).length?rT(i,e):i,af,t)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};function as(n,t){return typeof n=="string"?typeof t=="string"?n+t:[{type:"text",text:n},...t]:Array.isArray(t)?[...n,...t]:[...n,{type:"text",text:t}]}var vi=class extends $i{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:""}constructor(t,e){typeof t=="string"&&(t={content:t,additional_kwargs:e,response_metadata:{}}),t.additional_kwargs||(t.additional_kwargs={}),t.response_metadata||(t.response_metadata={}),super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=t.name,this.content=t.content,this.additional_kwargs=t.additional_kwargs,this.response_metadata=t.response_metadata,this.id=t.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}};function fn(n,t){let e=c({},n);for(let[i,r]of Object.entries(t))if(e[i]==null)e[i]=r;else{if(r==null)continue;if(typeof e[i]!=typeof r||Array.isArray(e[i])!==Array.isArray(r))throw new Error(`field[${i}] already exists in the message chunk, but with a different type.`);if(typeof e[i]=="string")e[i]=e[i]+r;else if(!Array.isArray(e[i])&&typeof e[i]=="object")e[i]=fn(e[i],r);else if(Array.isArray(e[i]))e[i]=ad(e[i],r);else{if(e[i]===r)continue;console.warn(`field[${i}] already exists in this message chunk and value has unsupported type.`)}}return e}function ad(n,t){if(!(n===void 0&&t===void 0)){if(n===void 0||t===void 0)return n||t;{let e=[...n];for(let i of t)if(typeof i=="object"&&"index"in i&&typeof i.index=="number"){let r=e.findIndex(s=>s.index===i.index);r!==-1?e[r]=fn(e[r],i):e.push(i)}else e.push(i);return e}}}var Pn=class extends vi{};function la(n){return typeof n?._getType=="function"}function cf(n){let t=[],e=[];for(let i of n)if(i.function){let r=i.function.name;try{let s=JSON.parse(i.function.arguments),a={name:r||"",args:s||{},id:i.id};t.push(a)}catch{e.push({name:r,args:i.function.arguments,id:i.id,error:"Malformed args."})}}else continue;return[t,e]}var Oi=class extends vi{get lc_aliases(){return v(c({},super.lc_aliases),{tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"})}constructor(t,e){let i;if(typeof t=="string")i={content:t,tool_calls:[],invalid_tool_calls:[],additional_kwargs:e??{}};else{i=t;let r=i.additional_kwargs?.tool_calls,s=i.tool_calls;r!=null&&r.length>0&&(s===void 0||s.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(r!=null&&s===void 0){let[a,o]=cf(r);i.tool_calls=a??[],i.invalid_tool_calls=o??[]}else i.tool_calls=i.tool_calls??[],i.invalid_tool_calls=i.invalid_tool_calls??[]}catch{i.tool_calls=[],i.invalid_tool_calls=[]}}super(i),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof i!="string"&&(this.tool_calls=i.tool_calls??this.tool_calls,this.invalid_tool_calls=i.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=i.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}};var Bi=class n extends Pn{constructor(t){let e;if(typeof t=="string")e={content:t,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(t.tool_call_chunks===void 0)e=v(c({},t),{tool_calls:t.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[]});else{let i=[],r=[];for(let s of t.tool_call_chunks){let a={};try{if(a=Vl(s.args??"{}")??{},typeof a!="object"||Array.isArray(a))throw new Error("Malformed tool call chunk args.");i.push({name:s.name??"",args:a,id:s.id})}catch{r.push({name:s.name,args:s.args,id:s.id,error:"Malformed args."})}}e=v(c({},t),{tool_calls:i,invalid_tool_calls:r})}super(e),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=e.tool_call_chunks??this.tool_call_chunks,this.tool_calls=e.tool_calls??this.tool_calls,this.invalid_tool_calls=e.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=e.usage_metadata}get lc_aliases(){return v(c({},super.lc_aliases),{tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"})}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}concat(t){let e={content:as(this.content,t.content),additional_kwargs:fn(this.additional_kwargs,t.additional_kwargs),response_metadata:fn(this.response_metadata,t.response_metadata),tool_call_chunks:[],id:this.id??t.id};if(this.tool_call_chunks!==void 0||t.tool_call_chunks!==void 0){let i=ad(this.tool_call_chunks,t.tool_call_chunks);i!==void 0&&i.length>0&&(e.tool_call_chunks=i)}if(this.usage_metadata!==void 0||t.usage_metadata!==void 0){let i=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},r=t.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},s={input_tokens:i.input_tokens+r.input_tokens,output_tokens:i.output_tokens+r.output_tokens,total_tokens:i.total_tokens+r.total_tokens};e.usage_metadata=s}return new n(e)}};var os=class n extends vi{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return n}constructor(t,e){typeof t=="string"&&(t={content:t,role:e}),super(t),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=t.role}_getType(){return"generic"}static isInstance(t){return t._getType()==="generic"}};var Ui=class extends vi{static lc_name(){return"HumanMessage"}_getType(){return"human"}};var Ya=class extends vi{static lc_name(){return"SystemMessage"}_getType(){return"system"}};function ls(n){if(typeof n=="string")return new Ui(n);if(la(n))return n;let[t,e]=n;if(t==="human"||t==="user")return new Ui({content:e});if(t==="ai"||t==="assistant")return new Oi({content:e});if(t==="system")return new Ya({content:e});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}function cs(n,t="Human",e="AI"){let i=[];for(let r of n){let s;if(r._getType()==="human")s=t;else if(r._getType()==="ai")s=e;else if(r._getType()==="system")s="System";else if(r._getType()==="function")s="Function";else if(r._getType()==="tool")s="Tool";else if(r._getType()==="generic")s=r.role;else throw new Error(`Got unsupported message type: ${r._getType()}`);let a=r.name?`${r.name}, `:"";i.push(`${s}: ${a}${r.content}`)}return i.join(`
`)}var je;(function(n){n.assertEqual=r=>r;function t(r){}n.assertIs=t;function e(r){throw new Error}n.assertNever=e,n.arrayToEnum=r=>{let s={};for(let a of r)s[a]=a;return s},n.getValidEnumValues=r=>{let s=n.objectKeys(r).filter(o=>typeof r[r[o]]!="number"),a={};for(let o of s)a[o]=r[o];return n.objectValues(a)},n.objectValues=r=>n.objectKeys(r).map(function(s){return r[s]}),n.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{let s=[];for(let a in r)Object.prototype.hasOwnProperty.call(r,a)&&s.push(a);return s},n.find=(r,s)=>{for(let a of r)if(s(a))return a},n.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}n.joinValues=i,n.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(je||(je={}));var _f=function(n){return n.mergeShapes=(t,e)=>c(c({},t),e),n}(_f||{}),ie=je.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),yr=n=>{switch(typeof n){case"undefined":return ie.undefined;case"string":return ie.string;case"number":return isNaN(n)?ie.nan:ie.number;case"boolean":return ie.boolean;case"function":return ie.function;case"bigint":return ie.bigint;case"symbol":return ie.symbol;case"object":return Array.isArray(n)?ie.array:n===null?ie.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ie.promise:typeof Map<"u"&&n instanceof Map?ie.map:typeof Set<"u"&&n instanceof Set?ie.set:typeof Date<"u"&&n instanceof Date?ie.date:ie.object;default:return ie.unknown}},V=je.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),aT=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:"),Rn=(()=>{class n extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let i=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,i):this.__proto__=i,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let i=e||function(a){return a.message},r={_errors:[]},s=a=>{for(let o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(i(o));else{let l=r,u=0;for(;u<o.path.length;){let p=o.path[u];u===o.path.length-1?(l[p]=l[p]||{_errors:[]},l[p]._errors.push(i(o))):l[p]=l[p]||{_errors:[]},l=l[p],u++}}};return s(this),r}static assert(e){if(!(e instanceof n))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,je.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=i=>i.message){let i={},r=[];for(let s of this.issues)s.path.length>0?(i[s.path[0]]=i[s.path[0]]||[],i[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:i}}get formErrors(){return this.flatten()}}return n.create=t=>new n(t),n})(),da=(n,t)=>{let e;switch(n.code){case V.invalid_type:n.received===ie.undefined?e="Required":e=`Expected ${n.expected}, received ${n.received}`;break;case V.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(n.expected,je.jsonStringifyReplacer)}`;break;case V.unrecognized_keys:e=`Unrecognized key(s) in object: ${je.joinValues(n.keys,", ")}`;break;case V.invalid_union:e="Invalid input";break;case V.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${je.joinValues(n.options)}`;break;case V.invalid_enum_value:e=`Invalid enum value. Expected ${je.joinValues(n.options)}, received '${n.received}'`;break;case V.invalid_arguments:e="Invalid function arguments";break;case V.invalid_return_type:e="Invalid function return type";break;case V.invalid_date:e="Invalid date";break;case V.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(e=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(e=`${e} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?e=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?e=`Invalid input: must end with "${n.validation.endsWith}"`:je.assertNever(n.validation):n.validation!=="regex"?e=`Invalid ${n.validation}`:e="Invalid";break;case V.too_small:n.type==="array"?e=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?e=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?e=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?e=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:e="Invalid input";break;case V.too_big:n.type==="array"?e=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?e=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?e=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?e=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?e=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:e="Invalid input";break;case V.custom:e="Invalid input";break;case V.invalid_intersection_types:e="Intersection results could not be merged";break;case V.not_multiple_of:e=`Number must be a multiple of ${n.multipleOf}`;break;case V.not_finite:e="Number must be finite";break;default:e=t.defaultError,je.assertNever(n)}return{message:e}},yf=da;function oT(n){yf=n}function zl(){return yf}var $l=n=>{let{data:t,path:e,errorMaps:i,issueData:r}=n,s=[...e,...r.path||[]],a=v(c({},r),{path:s});if(r.message!==void 0)return v(c({},r),{path:s,message:r.message});let o="",l=i.filter(u=>!!u).slice().reverse();for(let u of l)o=u(a,{data:t,defaultError:o}).message;return v(c({},r),{path:s,message:o})},lT=[];function Y(n,t){let e=zl(),i=$l({issueData:t,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,e,e===da?void 0:da].filter(r=>!!r)});n.common.issues.push(i)}var Qt=class n{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,e){let i=[];for(let r of e){if(r.status==="aborted")return ge;r.status==="dirty"&&t.dirty(),i.push(r.value)}return{status:t.value,value:i}}static mergeObjectAsync(t,e){return h(this,null,function*(){let i=[];for(let r of e){let s=yield r.key,a=yield r.value;i.push({key:s,value:a})}return n.mergeObjectSync(t,i)})}static mergeObjectSync(t,e){let i={};for(let r of e){let{key:s,value:a}=r;if(s.status==="aborted"||a.status==="aborted")return ge;s.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||r.alwaysSet)&&(i[s.value]=a.value)}return{status:t.value,value:i}}},ge=Object.freeze({status:"aborted"}),ua=n=>({status:"dirty",value:n}),ii=n=>({status:"valid",value:n}),ld=n=>n.status==="aborted",cd=n=>n.status==="dirty",io=n=>n.status==="valid",no=n=>typeof Promise<"u"&&n instanceof Promise;function Bl(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)}function bf(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e}var oe=function(n){return n.errToObj=t=>typeof t=="string"?{message:t}:t||{},n.toString=t=>typeof t=="string"?t:t?.message,n}(oe||{}),Xa,eo,Ai=class{constructor(t,e,i,r){this._cachedPath=[],this.parent=t,this.data=e,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ff=(n,t)=>{if(io(t))return{success:!0,data:t.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let e=new Rn(n.common.issues);return this._error=e,this._error}}};function Ie(n){if(!n)return{};let{errorMap:t,invalid_type_error:e,required_error:i,description:r}=n;if(t&&(e||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:r}:{errorMap:(a,o)=>{var l,u;let{message:p}=n;return a.code==="invalid_enum_value"?{message:p??o.defaultError}:typeof o.data>"u"?{message:(l=p??i)!==null&&l!==void 0?l:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(u=p??e)!==null&&u!==void 0?u:o.defaultError}},description:r}}var Ce=class{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return yr(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:yr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Qt,ctx:{common:t.parent.common,data:t.data,parsedType:yr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let e=this._parse(t);if(no(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){let e=this._parse(t);return Promise.resolve(e)}parse(t,e){let i=this.safeParse(t,e);if(i.success)return i.data;throw i.error}safeParse(t,e){var i;let r={common:{issues:[],async:(i=e?.async)!==null&&i!==void 0?i:!1,contextualErrorMap:e?.errorMap},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:yr(t)},s=this._parseSync({data:t,path:r.path,parent:r});return ff(r,s)}parseAsync(t,e){return h(this,null,function*(){let i=yield this.safeParseAsync(t,e);if(i.success)return i.data;throw i.error})}safeParseAsync(t,e){return h(this,null,function*(){let i={common:{issues:[],contextualErrorMap:e?.errorMap,async:!0},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:yr(t)},r=this._parse({data:t,path:i.path,parent:i}),s=yield no(r)?r:Promise.resolve(r);return ff(i,s)})}refine(t,e){let i=r=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(r):e;return this._refinement((r,s)=>{let a=t(r),o=()=>s.addIssue(c({code:V.custom},i(r)));return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(t,e){return this._refinement((i,r)=>t(i)?!0:(r.addIssue(typeof e=="function"?e(i,r):e),!1))}_refinement(t){return new hs({schema:this,typeName:z.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return br.create(this,this._def)}nullable(){return ma.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ro.create(this,this._def)}promise(){return Zl.create(this,this._def)}or(t){return _d.create([this,t],this._def)}and(t){return yd.create(this,t,this._def)}transform(t){return new hs(v(c({},Ie(this._def)),{schema:this,typeName:z.ZodEffects,effect:{type:"transform",transform:t}}))}default(t){let e=typeof t=="function"?t:()=>t;return new wd(v(c({},Ie(this._def)),{innerType:this,defaultValue:e,typeName:z.ZodDefault}))}brand(){return new so(c({typeName:z.ZodBranded,type:this},Ie(this._def)))}catch(t){let e=typeof t=="function"?t:()=>t;return new xd(v(c({},Ie(this._def)),{innerType:this,catchValue:e,typeName:z.ZodCatch}))}describe(t){let e=this.constructor;return new e(v(c({},this._def),{description:t}))}pipe(t){return ao.create(this,t)}readonly(){return Id.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},cT=/^c[^\s-]{8,}$/i,uT=/^[0-9a-z]+$/,dT=/^[0-9A-HJKMNP-TV-Z]{26}$/,pT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,hT=/^[a-z0-9_-]{21}$/i,mT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,fT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,gT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",od,_T=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,yT=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,bT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,vf="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vT=new RegExp(`^${vf}$`);function wf(n){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?t=`${t}\\.\\d{${n.precision}}`:n.precision==null&&(t=`${t}(\\.\\d+)?`),t}function wT(n){return new RegExp(`^${wf(n)}$`)}function xf(n){let t=`${vf}T${wf(n)}`,e=[];return e.push(n.local?"Z?":"Z"),n.offset&&e.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${e.join("|")})`,new RegExp(`^${t}$`)}function xT(n,t){return!!((t==="v4"||!t)&&_T.test(n)||(t==="v6"||!t)&&yT.test(n))}var Gl=(()=>{class n extends Ce{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ie.string){let a=this._getOrReturnCtx(e);return Y(a,{code:V.invalid_type,expected:ie.string,received:a.parsedType}),ge}let r=new Qt,s;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),Y(s,{code:V.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),Y(s,{code:V.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){let o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?Y(s,{code:V.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Y(s,{code:V.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")fT.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"email",code:V.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")od||(od=new RegExp(gT,"u")),od.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"emoji",code:V.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")pT.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"uuid",code:V.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")hT.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"nanoid",code:V.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")cT.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"cuid",code:V.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")uT.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"cuid2",code:V.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")dT.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"ulid",code:V.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Y(s,{validation:"url",code:V.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"regex",code:V.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),Y(s,{code:V.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),Y(s,{code:V.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),Y(s,{code:V.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?xf(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{code:V.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?vT.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{code:V.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?wT(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{code:V.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?mT.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"duration",code:V.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?xT(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"ip",code:V.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?bT.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"base64",code:V.invalid_string,message:a.message}),r.dirty()):je.assertNever(a);return{status:r.value,value:e.data}}_regex(e,i,r){return this.refinement(s=>e.test(s),c({validation:i,code:V.invalid_string},oe.errToObj(r)))}_addCheck(e){return new n(v(c({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(c({kind:"email"},oe.errToObj(e)))}url(e){return this._addCheck(c({kind:"url"},oe.errToObj(e)))}emoji(e){return this._addCheck(c({kind:"emoji"},oe.errToObj(e)))}uuid(e){return this._addCheck(c({kind:"uuid"},oe.errToObj(e)))}nanoid(e){return this._addCheck(c({kind:"nanoid"},oe.errToObj(e)))}cuid(e){return this._addCheck(c({kind:"cuid"},oe.errToObj(e)))}cuid2(e){return this._addCheck(c({kind:"cuid2"},oe.errToObj(e)))}ulid(e){return this._addCheck(c({kind:"ulid"},oe.errToObj(e)))}base64(e){return this._addCheck(c({kind:"base64"},oe.errToObj(e)))}ip(e){return this._addCheck(c({kind:"ip"},oe.errToObj(e)))}datetime(e){var i,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(c({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(i=e?.offset)!==null&&i!==void 0?i:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1},oe.errToObj(e?.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(c({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision},oe.errToObj(e?.message)))}duration(e){return this._addCheck(c({kind:"duration"},oe.errToObj(e)))}regex(e,i){return this._addCheck(c({kind:"regex",regex:e},oe.errToObj(i)))}includes(e,i){return this._addCheck(c({kind:"includes",value:e,position:i?.position},oe.errToObj(i?.message)))}startsWith(e,i){return this._addCheck(c({kind:"startsWith",value:e},oe.errToObj(i)))}endsWith(e,i){return this._addCheck(c({kind:"endsWith",value:e},oe.errToObj(i)))}min(e,i){return this._addCheck(c({kind:"min",value:e},oe.errToObj(i)))}max(e,i){return this._addCheck(c({kind:"max",value:e},oe.errToObj(i)))}length(e,i){return this._addCheck(c({kind:"length",value:e},oe.errToObj(i)))}nonempty(e){return this.min(1,oe.errToObj(e))}trim(){return new n(v(c({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new n(v(c({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new n(v(c({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let i of this._def.checks)i.kind==="min"&&(e===null||i.value>e)&&(e=i.value);return e}get maxLength(){let e=null;for(let i of this._def.checks)i.kind==="max"&&(e===null||i.value<e)&&(e=i.value);return e}}return n.create=t=>{var e;return new n(c({checks:[],typeName:z.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1},Ie(t)))},n})();function IT(n,t){let e=(n.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,r=e>i?e:i,s=parseInt(n.toFixed(r).replace(".","")),a=parseInt(t.toFixed(r).replace(".",""));return s%a/Math.pow(10,r)}var dd=(()=>{class n extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ie.number){let a=this._getOrReturnCtx(e);return Y(a,{code:V.invalid_type,expected:ie.number,received:a.parsedType}),ge}let r,s=new Qt;for(let a of this._def.checks)a.kind==="int"?je.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Y(r,{code:V.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:V.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:V.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?IT(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Y(r,{code:V.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Y(r,{code:V.not_finite,message:a.message}),s.dirty()):je.assertNever(a);return{status:s.value,value:e.data}}gte(e,i){return this.setLimit("min",e,!0,oe.toString(i))}gt(e,i){return this.setLimit("min",e,!1,oe.toString(i))}lte(e,i){return this.setLimit("max",e,!0,oe.toString(i))}lt(e,i){return this.setLimit("max",e,!1,oe.toString(i))}setLimit(e,i,r,s){return new n(v(c({},this._def),{checks:[...this._def.checks,{kind:e,value:i,inclusive:r,message:oe.toString(s)}]}))}_addCheck(e){return new n(v(c({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:oe.toString(e)})}multipleOf(e,i){return this._addCheck({kind:"multipleOf",value:e,message:oe.toString(i)})}finite(e){return this._addCheck({kind:"finite",message:oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:oe.toString(e)})}get minValue(){let e=null;for(let i of this._def.checks)i.kind==="min"&&(e===null||i.value>e)&&(e=i.value);return e}get maxValue(){let e=null;for(let i of this._def.checks)i.kind==="max"&&(e===null||i.value<e)&&(e=i.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&je.isInteger(e.value))}get isFinite(){let e=null,i=null;for(let r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(i===null||r.value>i)&&(i=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(i)&&Number.isFinite(e)}}return n.create=t=>new n(c({checks:[],typeName:z.ZodNumber,coerce:t?.coerce||!1},Ie(t))),n})(),pd=(()=>{class n extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ie.bigint){let a=this._getOrReturnCtx(e);return Y(a,{code:V.invalid_type,expected:ie.bigint,received:a.parsedType}),ge}let r,s=new Qt;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:V.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:V.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:V.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):je.assertNever(a);return{status:s.value,value:e.data}}gte(e,i){return this.setLimit("min",e,!0,oe.toString(i))}gt(e,i){return this.setLimit("min",e,!1,oe.toString(i))}lte(e,i){return this.setLimit("max",e,!0,oe.toString(i))}lt(e,i){return this.setLimit("max",e,!1,oe.toString(i))}setLimit(e,i,r,s){return new n(v(c({},this._def),{checks:[...this._def.checks,{kind:e,value:i,inclusive:r,message:oe.toString(s)}]}))}_addCheck(e){return new n(v(c({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:oe.toString(e)})}multipleOf(e,i){return this._addCheck({kind:"multipleOf",value:e,message:oe.toString(i)})}get minValue(){let e=null;for(let i of this._def.checks)i.kind==="min"&&(e===null||i.value>e)&&(e=i.value);return e}get maxValue(){let e=null;for(let i of this._def.checks)i.kind==="max"&&(e===null||i.value<e)&&(e=i.value);return e}}return n.create=t=>{var e;return new n(c({checks:[],typeName:z.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1},Ie(t)))},n})(),hd=(()=>{class n extends Ce{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ie.boolean){let r=this._getOrReturnCtx(e);return Y(r,{code:V.invalid_type,expected:ie.boolean,received:r.parsedType}),ge}return ii(e.data)}}return n.create=t=>new n(c({typeName:z.ZodBoolean,coerce:t?.coerce||!1},Ie(t))),n})(),md=(()=>{class n extends Ce{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ie.date){let a=this._getOrReturnCtx(e);return Y(a,{code:V.invalid_type,expected:ie.date,received:a.parsedType}),ge}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return Y(a,{code:V.invalid_date}),ge}let r=new Qt,s;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),Y(s,{code:V.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),Y(s,{code:V.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):je.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new n(v(c({},this._def),{checks:[...this._def.checks,e]}))}min(e,i){return this._addCheck({kind:"min",value:e.getTime(),message:oe.toString(i)})}max(e,i){return this._addCheck({kind:"max",value:e.getTime(),message:oe.toString(i)})}get minDate(){let e=null;for(let i of this._def.checks)i.kind==="min"&&(e===null||i.value>e)&&(e=i.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let i of this._def.checks)i.kind==="max"&&(e===null||i.value<e)&&(e=i.value);return e!=null?new Date(e):null}}return n.create=t=>new n(c({checks:[],coerce:t?.coerce||!1,typeName:z.ZodDate},Ie(t))),n})(),If=(()=>{class n extends Ce{_parse(e){if(this._getType(e)!==ie.symbol){let r=this._getOrReturnCtx(e);return Y(r,{code:V.invalid_type,expected:ie.symbol,received:r.parsedType}),ge}return ii(e.data)}}return n.create=t=>new n(c({typeName:z.ZodSymbol},Ie(t))),n})(),fd=(()=>{class n extends Ce{_parse(e){if(this._getType(e)!==ie.undefined){let r=this._getOrReturnCtx(e);return Y(r,{code:V.invalid_type,expected:ie.undefined,received:r.parsedType}),ge}return ii(e.data)}}return n.create=t=>new n(c({typeName:z.ZodUndefined},Ie(t))),n})(),gd=(()=>{class n extends Ce{_parse(e){if(this._getType(e)!==ie.null){let r=this._getOrReturnCtx(e);return Y(r,{code:V.invalid_type,expected:ie.null,received:r.parsedType}),ge}return ii(e.data)}}return n.create=t=>new n(c({typeName:z.ZodNull},Ie(t))),n})(),Ul=(()=>{class n extends Ce{constructor(){super(...arguments),this._any=!0}_parse(e){return ii(e.data)}}return n.create=t=>new n(c({typeName:z.ZodAny},Ie(t))),n})(),to=(()=>{class n extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ii(e.data)}}return n.create=t=>new n(c({typeName:z.ZodUnknown},Ie(t))),n})(),us=(()=>{class n extends Ce{_parse(e){let i=this._getOrReturnCtx(e);return Y(i,{code:V.invalid_type,expected:ie.never,received:i.parsedType}),ge}}return n.create=t=>new n(c({typeName:z.ZodNever},Ie(t))),n})(),Cf=(()=>{class n extends Ce{_parse(e){if(this._getType(e)!==ie.undefined){let r=this._getOrReturnCtx(e);return Y(r,{code:V.invalid_type,expected:ie.void,received:r.parsedType}),ge}return ii(e.data)}}return n.create=t=>new n(c({typeName:z.ZodVoid},Ie(t))),n})(),ro=(()=>{class n extends Ce{_parse(e){let{ctx:i,status:r}=this._processInputParams(e),s=this._def;if(i.parsedType!==ie.array)return Y(i,{code:V.invalid_type,expected:ie.array,received:i.parsedType}),ge;if(s.exactLength!==null){let o=i.data.length>s.exactLength.value,l=i.data.length<s.exactLength.value;(o||l)&&(Y(i,{code:o?V.too_big:V.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&i.data.length<s.minLength.value&&(Y(i,{code:V.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&i.data.length>s.maxLength.value&&(Y(i,{code:V.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),i.common.async)return Promise.all([...i.data].map((o,l)=>s.type._parseAsync(new Ai(i,o,i.path,l)))).then(o=>Qt.mergeArray(r,o));let a=[...i.data].map((o,l)=>s.type._parseSync(new Ai(i,o,i.path,l)));return Qt.mergeArray(r,a)}get element(){return this._def.type}min(e,i){return new n(v(c({},this._def),{minLength:{value:e,message:oe.toString(i)}}))}max(e,i){return new n(v(c({},this._def),{maxLength:{value:e,message:oe.toString(i)}}))}length(e,i){return new n(v(c({},this._def),{exactLength:{value:e,message:oe.toString(i)}}))}nonempty(e){return this.min(1,e)}}return n.create=(t,e)=>new n(c({type:t,minLength:null,maxLength:null,exactLength:null,typeName:z.ZodArray},Ie(e))),n})();function ca(n){if(n instanceof pa){let t={};for(let e in n.shape){let i=n.shape[e];t[e]=br.create(ca(i))}return new pa(v(c({},n._def),{shape:()=>t}))}else return n instanceof ro?new ro(v(c({},n._def),{type:ca(n.element)})):n instanceof br?br.create(ca(n.unwrap())):n instanceof ma?ma.create(ca(n.unwrap())):n instanceof ha?ha.create(n.items.map(t=>ca(t))):n}var pa=(()=>{class n extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),i=je.objectKeys(e);return this._cached={shape:e,keys:i}}_parse(e){if(this._getType(e)!==ie.object){let p=this._getOrReturnCtx(e);return Y(p,{code:V.invalid_type,expected:ie.object,received:p.parsedType}),ge}let{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof us&&this._def.unknownKeys==="strip"))for(let p in s.data)o.includes(p)||l.push(p);let u=[];for(let p of o){let g=a[p],b=s.data[p];u.push({key:{status:"valid",value:p},value:g._parse(new Ai(s,b,s.path,p)),alwaysSet:p in s.data})}if(this._def.catchall instanceof us){let p=this._def.unknownKeys;if(p==="passthrough")for(let g of l)u.push({key:{status:"valid",value:g},value:{status:"valid",value:s.data[g]}});else if(p==="strict")l.length>0&&(Y(s,{code:V.unrecognized_keys,keys:l}),r.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let p=this._def.catchall;for(let g of l){let b=s.data[g];u.push({key:{status:"valid",value:g},value:p._parse(new Ai(s,b,s.path,g)),alwaysSet:g in s.data})}}return s.common.async?Promise.resolve().then(()=>h(this,null,function*(){let p=[];for(let g of u){let b=yield g.key,x=yield g.value;p.push({key:b,value:x,alwaysSet:g.alwaysSet})}return p})).then(p=>Qt.mergeObjectSync(r,p)):Qt.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return oe.errToObj,new n(c(v(c({},this._def),{unknownKeys:"strict"}),e!==void 0?{errorMap:(i,r)=>{var s,a,o,l;let u=(o=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,i,r).message)!==null&&o!==void 0?o:r.defaultError;return i.code==="unrecognized_keys"?{message:(l=oe.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}))}strip(){return new n(v(c({},this._def),{unknownKeys:"strip"}))}passthrough(){return new n(v(c({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new n(v(c({},this._def),{shape:()=>c(c({},this._def.shape()),e)}))}merge(e){return new n({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>c(c({},this._def.shape()),e._def.shape()),typeName:z.ZodObject})}setKey(e,i){return this.augment({[e]:i})}catchall(e){return new n(v(c({},this._def),{catchall:e}))}pick(e){let i={};return je.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(i[r]=this.shape[r])}),new n(v(c({},this._def),{shape:()=>i}))}omit(e){let i={};return je.objectKeys(this.shape).forEach(r=>{e[r]||(i[r]=this.shape[r])}),new n(v(c({},this._def),{shape:()=>i}))}deepPartial(){return ca(this)}partial(e){let i={};return je.objectKeys(this.shape).forEach(r=>{let s=this.shape[r];e&&!e[r]?i[r]=s:i[r]=s.optional()}),new n(v(c({},this._def),{shape:()=>i}))}required(e){let i={};return je.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])i[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof br;)a=a._def.innerType;i[r]=a}}),new n(v(c({},this._def),{shape:()=>i}))}keyof(){return Ef(je.objectKeys(this.shape))}}return n.create=(t,e)=>new n(c({shape:()=>t,unknownKeys:"strip",catchall:us.create(),typeName:z.ZodObject},Ie(e))),n.strictCreate=(t,e)=>new n(c({shape:()=>t,unknownKeys:"strict",catchall:us.create(),typeName:z.ZodObject},Ie(e))),n.lazycreate=(t,e)=>new n(c({shape:t,unknownKeys:"strip",catchall:us.create(),typeName:z.ZodObject},Ie(e))),n})(),_d=(()=>{class n extends Ce{_parse(e){let{ctx:i}=this._processInputParams(e),r=this._def.options;function s(a){for(let l of a)if(l.result.status==="valid")return l.result;for(let l of a)if(l.result.status==="dirty")return i.common.issues.push(...l.ctx.common.issues),l.result;let o=a.map(l=>new Rn(l.ctx.common.issues));return Y(i,{code:V.invalid_union,unionErrors:o}),ge}if(i.common.async)return Promise.all(r.map(a=>h(this,null,function*(){let o=v(c({},i),{common:v(c({},i.common),{issues:[]}),parent:null});return{result:yield a._parseAsync({data:i.data,path:i.path,parent:o}),ctx:o}}))).then(s);{let a,o=[];for(let u of r){let p=v(c({},i),{common:v(c({},i.common),{issues:[]}),parent:null}),g=u._parseSync({data:i.data,path:i.path,parent:p});if(g.status==="valid")return g;g.status==="dirty"&&!a&&(a={result:g,ctx:p}),p.common.issues.length&&o.push(p.common.issues)}if(a)return i.common.issues.push(...a.ctx.common.issues),a.result;let l=o.map(u=>new Rn(u));return Y(i,{code:V.invalid_union,unionErrors:l}),ge}}get options(){return this._def.options}}return n.create=(t,e)=>new n(c({options:t,typeName:z.ZodUnion},Ie(e))),n})(),Mn=n=>n instanceof bd?Mn(n.schema):n instanceof hs?Mn(n.innerType()):n instanceof vd?[n.value]:n instanceof ds?n.options:n instanceof ps?je.objectValues(n.enum):n instanceof wd?Mn(n._def.innerType):n instanceof fd?[void 0]:n instanceof gd?[null]:n instanceof br?[void 0,...Mn(n.unwrap())]:n instanceof ma?[null,...Mn(n.unwrap())]:n instanceof so||n instanceof Id?Mn(n.unwrap()):n instanceof xd?Mn(n._def.innerType):[],Hl=class n extends Ce{_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==ie.object)return Y(e,{code:V.invalid_type,expected:ie.object,received:e.parsedType}),ge;let i=this.discriminator,r=e.data[i],s=this.optionsMap.get(r);return s?e.common.async?s._parseAsync({data:e.data,path:e.path,parent:e}):s._parseSync({data:e.data,path:e.path,parent:e}):(Y(e,{code:V.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),ge)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,e,i){let r=new Map;for(let s of e){let a=Mn(s.shape[t]);if(!a.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let o of a){if(r.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);r.set(o,s)}}return new n(c({typeName:z.ZodDiscriminatedUnion,discriminator:t,options:e,optionsMap:r},Ie(i)))}};function ud(n,t){let e=yr(n),i=yr(t);if(n===t)return{valid:!0,data:n};if(e===ie.object&&i===ie.object){let r=je.objectKeys(t),s=je.objectKeys(n).filter(o=>r.indexOf(o)!==-1),a=c(c({},n),t);for(let o of s){let l=ud(n[o],t[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(e===ie.array&&i===ie.array){if(n.length!==t.length)return{valid:!1};let r=[];for(let s=0;s<n.length;s++){let a=n[s],o=t[s],l=ud(a,o);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return e===ie.date&&i===ie.date&&+n==+t?{valid:!0,data:n}:{valid:!1}}var yd=(()=>{class n extends Ce{_parse(e){let{status:i,ctx:r}=this._processInputParams(e),s=(a,o)=>{if(ld(a)||ld(o))return ge;let l=ud(a.value,o.value);return l.valid?((cd(a)||cd(o))&&i.dirty(),{status:i.value,value:l.data}):(Y(r,{code:V.invalid_intersection_types}),ge)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}return n.create=(t,e,i)=>new n(c({left:t,right:e,typeName:z.ZodIntersection},Ie(i))),n})(),ha=(()=>{class n extends Ce{_parse(e){let{status:i,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.array)return Y(r,{code:V.invalid_type,expected:ie.array,received:r.parsedType}),ge;if(r.data.length<this._def.items.length)return Y(r,{code:V.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ge;!this._def.rest&&r.data.length>this._def.items.length&&(Y(r,{code:V.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),i.dirty());let a=[...r.data].map((o,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new Ai(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Qt.mergeArray(i,o)):Qt.mergeArray(i,a)}get items(){return this._def.items}rest(e){return new n(v(c({},this._def),{rest:e}))}}return n.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new n(c({items:t,typeName:z.ZodTuple,rest:null},Ie(e)))},n})(),ql=class n extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==ie.object)return Y(i,{code:V.invalid_type,expected:ie.object,received:i.parsedType}),ge;let r=[],s=this._def.keyType,a=this._def.valueType;for(let o in i.data)r.push({key:s._parse(new Ai(i,o,i.path,o)),value:a._parse(new Ai(i,i.data[o],i.path,o)),alwaysSet:o in i.data});return i.common.async?Qt.mergeObjectAsync(e,r):Qt.mergeObjectSync(e,r)}get element(){return this._def.valueType}static create(t,e,i){return e instanceof Ce?new n(c({keyType:t,valueType:e,typeName:z.ZodRecord},Ie(i))):new n(c({keyType:Gl.create(),valueType:t,typeName:z.ZodRecord},Ie(e)))}},Tf=(()=>{class n extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:i,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.map)return Y(r,{code:V.invalid_type,expected:ie.map,received:r.parsedType}),ge;let s=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,u],p)=>({key:s._parse(new Ai(r,l,r.path,[p,"key"])),value:a._parse(new Ai(r,u,r.path,[p,"value"]))}));if(r.common.async){let l=new Map;return Promise.resolve().then(()=>h(this,null,function*(){for(let u of o){let p=yield u.key,g=yield u.value;if(p.status==="aborted"||g.status==="aborted")return ge;(p.status==="dirty"||g.status==="dirty")&&i.dirty(),l.set(p.value,g.value)}return{status:i.value,value:l}}))}else{let l=new Map;for(let u of o){let p=u.key,g=u.value;if(p.status==="aborted"||g.status==="aborted")return ge;(p.status==="dirty"||g.status==="dirty")&&i.dirty(),l.set(p.value,g.value)}return{status:i.value,value:l}}}}return n.create=(t,e,i)=>new n(c({valueType:e,keyType:t,typeName:z.ZodMap},Ie(i))),n})(),Sf=(()=>{class n extends Ce{_parse(e){let{status:i,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.set)return Y(r,{code:V.invalid_type,expected:ie.set,received:r.parsedType}),ge;let s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Y(r,{code:V.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),i.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Y(r,{code:V.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),i.dirty());let a=this._def.valueType;function o(u){let p=new Set;for(let g of u){if(g.status==="aborted")return ge;g.status==="dirty"&&i.dirty(),p.add(g.value)}return{status:i.value,value:p}}let l=[...r.data.values()].map((u,p)=>a._parse(new Ai(r,u,r.path,p)));return r.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,i){return new n(v(c({},this._def),{minSize:{value:e,message:oe.toString(i)}}))}max(e,i){return new n(v(c({},this._def),{maxSize:{value:e,message:oe.toString(i)}}))}size(e,i){return this.min(e,i).max(e,i)}nonempty(e){return this.min(1,e)}}return n.create=(t,e)=>new n(c({valueType:t,minSize:null,maxSize:null,typeName:z.ZodSet},Ie(e))),n})(),Kl=class n extends Ce{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==ie.function)return Y(e,{code:V.invalid_type,expected:ie.function,received:e.parsedType}),ge;function i(o,l){return $l({data:o,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,zl(),da].filter(u=>!!u),issueData:{code:V.invalid_arguments,argumentsError:l}})}function r(o,l){return $l({data:o,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,zl(),da].filter(u=>!!u),issueData:{code:V.invalid_return_type,returnTypeError:l}})}let s={errorMap:e.common.contextualErrorMap},a=e.data;if(this._def.returns instanceof Zl){let o=this;return ii(function(...l){return h(this,null,function*(){let u=new Rn([]),p=yield o._def.args.parseAsync(l,s).catch(x=>{throw u.addIssue(i(l,x)),u}),g=yield Reflect.apply(a,this,p);return yield o._def.returns._def.type.parseAsync(g,s).catch(x=>{throw u.addIssue(r(g,x)),u})})})}else{let o=this;return ii(function(...l){let u=o._def.args.safeParse(l,s);if(!u.success)throw new Rn([i(l,u.error)]);let p=Reflect.apply(a,this,u.data),g=o._def.returns.safeParse(p,s);if(!g.success)throw new Rn([r(p,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new n(v(c({},this._def),{args:ha.create(t).rest(to.create())}))}returns(t){return new n(v(c({},this._def),{returns:t}))}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,e,i){return new n(c({args:t||ha.create([]).rest(to.create()),returns:e||to.create(),typeName:z.ZodFunction},Ie(i)))}},bd=(()=>{class n extends Ce{get schema(){return this._def.getter()}_parse(e){let{ctx:i}=this._processInputParams(e);return this._def.getter()._parse({data:i.data,path:i.path,parent:i})}}return n.create=(t,e)=>new n(c({getter:t,typeName:z.ZodLazy},Ie(e))),n})(),vd=(()=>{class n extends Ce{_parse(e){if(e.data!==this._def.value){let i=this._getOrReturnCtx(e);return Y(i,{received:i.data,code:V.invalid_literal,expected:this._def.value}),ge}return{status:"valid",value:e.data}}get value(){return this._def.value}}return n.create=(t,e)=>new n(c({value:t,typeName:z.ZodLiteral},Ie(e))),n})();function Ef(n,t){return new ds(c({values:n,typeName:z.ZodEnum},Ie(t)))}var ds=class n extends Ce{constructor(){super(...arguments),Xa.set(this,void 0)}_parse(t){if(typeof t.data!="string"){let e=this._getOrReturnCtx(t),i=this._def.values;return Y(e,{expected:je.joinValues(i),received:e.parsedType,code:V.invalid_type}),ge}if(Bl(this,Xa,"f")||bf(this,Xa,new Set(this._def.values),"f"),!Bl(this,Xa,"f").has(t.data)){let e=this._getOrReturnCtx(t),i=this._def.values;return Y(e,{received:e.data,code:V.invalid_enum_value,options:i}),ge}return ii(t.data)}get options(){return this._def.values}get enum(){let t={};for(let e of this._def.values)t[e]=e;return t}get Values(){let t={};for(let e of this._def.values)t[e]=e;return t}get Enum(){let t={};for(let e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return n.create(t,c(c({},this._def),e))}exclude(t,e=this._def){return n.create(this.options.filter(i=>!t.includes(i)),c(c({},this._def),e))}};Xa=new WeakMap;ds.create=Ef;var ps=class extends Ce{constructor(){super(...arguments),eo.set(this,void 0)}_parse(t){let e=je.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(t);if(i.parsedType!==ie.string&&i.parsedType!==ie.number){let r=je.objectValues(e);return Y(i,{expected:je.joinValues(r),received:i.parsedType,code:V.invalid_type}),ge}if(Bl(this,eo,"f")||bf(this,eo,new Set(je.getValidEnumValues(this._def.values)),"f"),!Bl(this,eo,"f").has(t.data)){let r=je.objectValues(e);return Y(i,{received:i.data,code:V.invalid_enum_value,options:r}),ge}return ii(t.data)}get enum(){return this._def.values}};eo=new WeakMap;ps.create=(n,t)=>new ps(c({values:n,typeName:z.ZodNativeEnum},Ie(t)));var Zl=(()=>{class n extends Ce{unwrap(){return this._def.type}_parse(e){let{ctx:i}=this._processInputParams(e);if(i.parsedType!==ie.promise&&i.common.async===!1)return Y(i,{code:V.invalid_type,expected:ie.promise,received:i.parsedType}),ge;let r=i.parsedType===ie.promise?i.data:Promise.resolve(i.data);return ii(r.then(s=>this._def.type.parseAsync(s,{path:i.path,errorMap:i.common.contextualErrorMap})))}}return n.create=(t,e)=>new n(c({type:t,typeName:z.ZodPromise},Ie(e))),n})(),hs=(()=>{class n extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===z.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:i,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{Y(r,o),o.fatal?i.abort():i.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){let o=s.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(l=>h(this,null,function*(){if(i.value==="aborted")return ge;let u=yield this._def.schema._parseAsync({data:l,path:r.path,parent:r});return u.status==="aborted"?ge:u.status==="dirty"||i.value==="dirty"?ua(u.value):u}));{if(i.value==="aborted")return ge;let l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?ge:l.status==="dirty"||i.value==="dirty"?ua(l.value):l}}if(s.type==="refinement"){let o=l=>{let u=s.refinement(l,a);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){let l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?ge:(l.status==="dirty"&&i.dirty(),o(l.value),{status:i.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?ge:(l.status==="dirty"&&i.dirty(),o(l.value).then(()=>({status:i.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){let o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!io(o))return o;let l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:i.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>io(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:i.value,value:l})):o);je.assertNever(s)}}return n.create=(t,e,i)=>new n(c({schema:t,typeName:z.ZodEffects,effect:e},Ie(i))),n.createWithPreprocess=(t,e,i)=>new n(c({schema:e,effect:{type:"preprocess",transform:t},typeName:z.ZodEffects},Ie(i))),n})(),br=(()=>{class n extends Ce{_parse(e){return this._getType(e)===ie.undefined?ii(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}return n.create=(t,e)=>new n(c({innerType:t,typeName:z.ZodOptional},Ie(e))),n})(),ma=(()=>{class n extends Ce{_parse(e){return this._getType(e)===ie.null?ii(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}return n.create=(t,e)=>new n(c({innerType:t,typeName:z.ZodNullable},Ie(e))),n})(),wd=(()=>{class n extends Ce{_parse(e){let{ctx:i}=this._processInputParams(e),r=i.data;return i.parsedType===ie.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:i.path,parent:i})}removeDefault(){return this._def.innerType}}return n.create=(t,e)=>new n(c({innerType:t,typeName:z.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default},Ie(e))),n})(),xd=(()=>{class n extends Ce{_parse(e){let{ctx:i}=this._processInputParams(e),r=v(c({},i),{common:v(c({},i.common),{issues:[]})}),s=this._def.innerType._parse({data:r.data,path:r.path,parent:c({},r)});return no(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Rn(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Rn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}return n.create=(t,e)=>new n(c({innerType:t,typeName:z.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch},Ie(e))),n})(),Of=(()=>{class n extends Ce{_parse(e){if(this._getType(e)!==ie.nan){let r=this._getOrReturnCtx(e);return Y(r,{code:V.invalid_type,expected:ie.nan,received:r.parsedType}),ge}return{status:"valid",value:e.data}}}return n.create=t=>new n(c({typeName:z.ZodNaN},Ie(t))),n})(),CT=Symbol("zod_brand"),so=class extends Ce{_parse(t){let{ctx:e}=this._processInputParams(t),i=e.data;return this._def.type._parse({data:i,path:e.path,parent:e})}unwrap(){return this._def.type}},ao=class n extends Ce{_parse(t){let{status:e,ctx:i}=this._processInputParams(t);if(i.common.async)return h(this,null,function*(){let s=yield this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?ge:s.status==="dirty"?(e.dirty(),ua(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})});{let r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?ge:r.status==="dirty"?(e.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(t,e){return new n({in:t,out:e,typeName:z.ZodPipeline})}},Id=(()=>{class n extends Ce{_parse(e){let i=this._def.innerType._parse(e),r=s=>(io(s)&&(s.value=Object.freeze(s.value)),s);return no(i)?i.then(s=>r(s)):r(i)}unwrap(){return this._def.innerType}}return n.create=(t,e)=>new n(c({innerType:t,typeName:z.ZodReadonly},Ie(e))),n})();function Af(n,t={},e){return n?Ul.create().superRefine((i,r)=>{var s,a;if(!n(i)){let o=typeof t=="function"?t(i):typeof t=="string"?{message:t}:t,l=(a=(s=o.fatal)!==null&&s!==void 0?s:e)!==null&&a!==void 0?a:!0,u=typeof o=="string"?{message:o}:o;r.addIssue(v(c({code:"custom"},u),{fatal:l}))}}):Ul.create()}var TT={object:pa.lazycreate},z=function(n){return n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly",n}(z||{}),ST=(n,t={message:`Input not instance of ${n.name}`})=>Af(e=>e instanceof n,t),kf=Gl.create,Pf=dd.create,ET=Of.create,OT=pd.create,Mf=hd.create,AT=md.create,kT=If.create,PT=fd.create,MT=gd.create,RT=Ul.create,DT=to.create,NT=us.create,FT=Cf.create,LT=ro.create,jT=pa.create,VT=pa.strictCreate,zT=_d.create,$T=Hl.create,BT=yd.create,UT=ha.create,HT=ql.create,qT=Tf.create,KT=Sf.create,GT=Kl.create,ZT=bd.create,WT=vd.create,QT=ds.create,JT=ps.create,YT=Zl.create,gf=hs.create,XT=br.create,eS=ma.create,tS=hs.createWithPreprocess,iS=ao.create,nS=()=>kf().optional(),rS=()=>Pf().optional(),sS=()=>Mf().optional(),aS={string:n=>Gl.create(v(c({},n),{coerce:!0})),number:n=>dd.create(v(c({},n),{coerce:!0})),boolean:n=>hd.create(v(c({},n),{coerce:!0})),bigint:n=>pd.create(v(c({},n),{coerce:!0})),date:n=>md.create(v(c({},n),{coerce:!0}))},oS=ge,fa=Object.freeze({__proto__:null,defaultErrorMap:da,setErrorMap:oT,getErrorMap:zl,makeIssue:$l,EMPTY_PATH:lT,addIssueToContext:Y,ParseStatus:Qt,INVALID:ge,DIRTY:ua,OK:ii,isAborted:ld,isDirty:cd,isValid:io,isAsync:no,get util(){return je},get objectUtil(){return _f},ZodParsedType:ie,getParsedType:yr,ZodType:Ce,datetimeRegex:xf,ZodString:Gl,ZodNumber:dd,ZodBigInt:pd,ZodBoolean:hd,ZodDate:md,ZodSymbol:If,ZodUndefined:fd,ZodNull:gd,ZodAny:Ul,ZodUnknown:to,ZodNever:us,ZodVoid:Cf,ZodArray:ro,ZodObject:pa,ZodUnion:_d,ZodDiscriminatedUnion:Hl,ZodIntersection:yd,ZodTuple:ha,ZodRecord:ql,ZodMap:Tf,ZodSet:Sf,ZodFunction:Kl,ZodLazy:bd,ZodLiteral:vd,ZodEnum:ds,ZodNativeEnum:ps,ZodPromise:Zl,ZodEffects:hs,ZodTransformer:hs,ZodOptional:br,ZodNullable:ma,ZodDefault:wd,ZodCatch:xd,ZodNaN:Of,BRAND:CT,ZodBranded:so,ZodPipeline:ao,ZodReadonly:Id,custom:Af,Schema:Ce,ZodSchema:Ce,late:TT,get ZodFirstPartyTypeKind(){return z},coerce:aS,any:RT,array:LT,bigint:OT,boolean:Mf,date:AT,discriminatedUnion:$T,effect:gf,enum:QT,function:GT,instanceof:ST,intersection:BT,lazy:ZT,literal:WT,map:qT,nan:ET,nativeEnum:JT,never:NT,null:MT,nullable:eS,number:Pf,object:jT,oboolean:sS,onumber:rS,optional:XT,ostring:nS,pipeline:iS,preprocess:tS,promise:YT,record:HT,set:KT,strictObject:VT,string:kf,symbol:kT,transformer:gf,tuple:UT,undefined:PT,union:zT,unknown:DT,void:FT,NEVER:oS,ZodIssueCode:V,quotelessJson:aT,ZodError:Rn});var up=rn(Jl(),1);var Yl,hS=new Uint8Array(16);function Cd(){if(!Yl&&(Yl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yl(hS)}var zf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function mS(n){return typeof n=="string"&&zf.test(n)}var Td=mS;var Lt=[];for(let n=0;n<256;++n)Lt.push((n+256).toString(16).slice(1));function $f(n,t=0){return Lt[n[t+0]]+Lt[n[t+1]]+Lt[n[t+2]]+Lt[n[t+3]]+"-"+Lt[n[t+4]]+Lt[n[t+5]]+"-"+Lt[n[t+6]]+Lt[n[t+7]]+"-"+Lt[n[t+8]]+Lt[n[t+9]]+"-"+Lt[n[t+10]]+Lt[n[t+11]]+Lt[n[t+12]]+Lt[n[t+13]]+Lt[n[t+14]]+Lt[n[t+15]]}var fS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Sd={randomUUID:fS};function gS(n,t,e){if(Sd.randomUUID&&!t&&!n)return Sd.randomUUID();n=n||{};let i=n.random||(n.rng||Cd)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=i[r];return t}return $f(i)}var ci=gS;var Ed=class{getStore(){}run(t,e){return e()}},Od=class{constructor(){Object.defineProperty(this,"asyncLocalStorage",{enumerable:!0,configurable:!0,writable:!0,value:new Ed}),Object.defineProperty(this,"hasBeenInitialized",{enumerable:!0,configurable:!0,writable:!0,value:!1})}getInstance(){return this.asyncLocalStorage}initializeGlobalInstance(t){this.hasBeenInitialized||(this.hasBeenInitialized=!0,this.asyncLocalStorage=t)}},yS=new Od,Bf=()=>{let n=yS.getInstance().getStore();if(n===void 0)throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function or the tracing is enabled."].join(`
`));return n};var gj=Symbol.for("langsmith:traceable:root");function Xl(n){return typeof n=="function"&&"langsmith:traceable"in n}var bS=()=>typeof window<"u"&&typeof window.document<"u",vS=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",wS=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Uf=()=>typeof Deno<"u",xS=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Uf(),IS=()=>{let n;return bS()?n="browser":xS()?n="node":vS()?n="webworker":wS()?n="jsdom":Uf()?n="deno":n="other",n},Ad;function Hf(){return h(this,null,function*(){return Ad===void 0&&(Ad={library:"langchain-js",runtime:IS()}),Ad})}function Se(n){try{return typeof process<"u"?process.env?.[n]:void 0}catch{return}}var kd=class{},fs=class n extends kd{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,sd(this.constructor)]}constructor(t){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:Se("LANGCHAIN_CALLBACKS_BACKGROUND")!=="true"}),this.lc_kwargs=t||{},t&&(this.ignoreLLM=t.ignoreLLM??this.ignoreLLM,this.ignoreChain=t.ignoreChain??this.ignoreChain,this.ignoreAgent=t.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=t.ignoreRetriever??this.ignoreRetriever,this.raiseError=t.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(t._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return $i.prototype.toJSON.call(this)}toJSONNotImplemented(){return $i.prototype.toJSONNotImplemented.call(this)}static fromMethods(t){class e extends n{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:ci()}),Object.assign(this,t)}}return new e}};var Md=rn(Zf(),1);function Pd(n,t){return n&&!Array.isArray(n)&&typeof n=="object"?n:{[t]:n}}function TS(n){return n.replace(/[-:.]/g,"")}function SS(n,t,e){let i=e.toFixed(0).slice(0,3).padStart(3,"0");return TS(`${new Date(n).toISOString().slice(0,-1)}${i}Z`)+t}var wi=class extends fs{constructor(t){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(t){return t instanceof Error?t.message+(t?.stack?`

${t.stack}`:""):typeof t=="string"?t:`${t}`}_addChildRun(t,e){t.child_runs.push(e)}_startTrace(t){return h(this,null,function*(){let e=SS(t.start_time,t.id,t.execution_order),i=c({},t);if(i.parent_run_id!==void 0){let r=this.runMap.get(i.parent_run_id);r&&(this._addChildRun(r,i),r.child_execution_order=Math.max(r.child_execution_order,i.child_execution_order),i.trace_id=r.trace_id,r.dotted_order!==void 0&&(i.dotted_order=[r.dotted_order,e].join(".")))}else i.trace_id=i.id,i.dotted_order=e;this.runMap.set(i.id,i),yield this.onRunCreate?.(i)})}_endTrace(t){return h(this,null,function*(){let e=t.parent_run_id!==void 0&&this.runMap.get(t.parent_run_id);e?e.child_execution_order=Math.max(e.child_execution_order,t.child_execution_order):yield this.persistRun(t),this.runMap.delete(t.id),yield this.onRunUpdate?.(t)})}_getExecutionOrder(t){let e=t!==void 0&&this.runMap.get(t);return e?e.child_execution_order+1:1}handleLLMStart(t,e,i,r,s,a,o,l){return h(this,null,function*(){let u=this._getExecutionOrder(r),p=Date.now(),g=o?v(c({},s),{metadata:o}):s,b={id:i,name:l??t.id[t.id.length-1],parent_run_id:r,start_time:p,serialized:t,events:[{name:"start",time:new Date(p).toISOString()}],inputs:{prompts:e},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:g??{},tags:a||[]};return yield this._startTrace(b),yield this.onLLMStart?.(b),b})}handleChatModelStart(t,e,i,r,s,a,o,l){return h(this,null,function*(){let u=this._getExecutionOrder(r),p=Date.now(),g=o?v(c({},s),{metadata:o}):s,b={id:i,name:l??t.id[t.id.length-1],parent_run_id:r,start_time:p,serialized:t,events:[{name:"start",time:new Date(p).toISOString()}],inputs:{messages:e},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:g??{},tags:a||[]};return yield this._startTrace(b),yield this.onLLMStart?.(b),b})}handleLLMEnd(t,e){return h(this,null,function*(){let i=this.runMap.get(e);if(!i||i?.run_type!=="llm")throw new Error("No LLM run to end.");return i.end_time=Date.now(),i.outputs=t,i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),yield this.onLLMEnd?.(i),yield this._endTrace(i),i})}handleLLMError(t,e){return h(this,null,function*(){let i=this.runMap.get(e);if(!i||i?.run_type!=="llm")throw new Error("No LLM run to end.");return i.end_time=Date.now(),i.error=this.stringifyError(t),i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),yield this.onLLMError?.(i),yield this._endTrace(i),i})}handleChainStart(t,e,i,r,s,a,o,l){return h(this,null,function*(){let u=this._getExecutionOrder(r),p=Date.now(),g={id:i,name:l??t.id[t.id.length-1],parent_run_id:r,start_time:p,serialized:t,events:[{name:"start",time:new Date(p).toISOString()}],inputs:e,execution_order:u,child_execution_order:u,run_type:o??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return yield this._startTrace(g),yield this.onChainStart?.(g),g})}handleChainEnd(t,e,i,r,s){return h(this,null,function*(){let a=this.runMap.get(e);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=Pd(t,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),s?.inputs!==void 0&&(a.inputs=Pd(s.inputs,"input")),yield this.onChainEnd?.(a),yield this._endTrace(a),a})}handleChainError(t,e,i,r,s){return h(this,null,function*(){let a=this.runMap.get(e);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(t),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),s?.inputs!==void 0&&(a.inputs=Pd(s.inputs,"input")),yield this.onChainError?.(a),yield this._endTrace(a),a})}handleToolStart(t,e,i,r,s,a,o){return h(this,null,function*(){let l=this._getExecutionOrder(r),u=Date.now(),p={id:i,name:o??t.id[t.id.length-1],parent_run_id:r,start_time:u,serialized:t,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{input:e},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return yield this._startTrace(p),yield this.onToolStart?.(p),p})}handleToolEnd(t,e){return h(this,null,function*(){let i=this.runMap.get(e);if(!i||i?.run_type!=="tool")throw new Error("No tool run to end");return i.end_time=Date.now(),i.outputs={output:t},i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),yield this.onToolEnd?.(i),yield this._endTrace(i),i})}handleToolError(t,e){return h(this,null,function*(){let i=this.runMap.get(e);if(!i||i?.run_type!=="tool")throw new Error("No tool run to end");return i.end_time=Date.now(),i.error=this.stringifyError(t),i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),yield this.onToolError?.(i),yield this._endTrace(i),i})}handleAgentAction(t,e){return h(this,null,function*(){let i=this.runMap.get(e);if(!i||i?.run_type!=="chain")return;let r=i;r.actions=r.actions||[],r.actions.push(t),r.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:t}}),yield this.onAgentAction?.(i)})}handleAgentEnd(t,e){return h(this,null,function*(){let i=this.runMap.get(e);!i||i?.run_type!=="chain"||(i.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:t}}),yield this.onAgentEnd?.(i))})}handleRetrieverStart(t,e,i,r,s,a,o){return h(this,null,function*(){let l=this._getExecutionOrder(r),u=Date.now(),p={id:i,name:o??t.id[t.id.length-1],parent_run_id:r,start_time:u,serialized:t,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{query:e},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return yield this._startTrace(p),yield this.onRetrieverStart?.(p),p})}handleRetrieverEnd(t,e){return h(this,null,function*(){let i=this.runMap.get(e);if(!i||i?.run_type!=="retriever")throw new Error("No retriever run to end");return i.end_time=Date.now(),i.outputs={documents:t},i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),yield this.onRetrieverEnd?.(i),yield this._endTrace(i),i})}handleRetrieverError(t,e){return h(this,null,function*(){let i=this.runMap.get(e);if(!i||i?.run_type!=="retriever")throw new Error("No retriever run to end");return i.end_time=Date.now(),i.error=this.stringifyError(t),i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),yield this.onRetrieverError?.(i),yield this._endTrace(i),i})}handleText(t,e){return h(this,null,function*(){let i=this.runMap.get(e);!i||i?.run_type!=="chain"||(i.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:t}}),yield this.onText?.(i))})}handleLLMNewToken(t,e,i,r,s,a){return h(this,null,function*(){let o=this.runMap.get(i);if(!o||o?.run_type!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:t,idx:e,chunk:a?.chunk}}),yield this.onLLMNewToken?.(o,t,{chunk:a?.chunk}),o})}};function ni(n,t){return`${n.open}${t}${n.close}`}function Hi(n,t){try{return JSON.stringify(n,null,2)}catch{return t}}function vr(n){if(!n.end_time)return"";let t=n.end_time-n.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}var{color:ui}=Md.default,oo=class extends wi{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(t){return Promise.resolve()}getParents(t){let e=[],i=t;for(;i.parent_run_id;){let r=this.runMap.get(i.parent_run_id);if(r)e.push(r),i=r;else break}return e}getBreadcrumbs(t){let i=[...this.getParents(t).reverse(),t].map((r,s,a)=>{let o=`${r.execution_order}:${r.run_type}:${r.name}`;return s===a.length-1?ni(Md.default.bold,o):o}).join(" > ");return ni(ui.grey,i)}onChainStart(t){let e=this.getBreadcrumbs(t);console.log(`${ni(ui.green,"[chain/start]")} [${e}] Entering Chain run with input: ${Hi(t.inputs,"[inputs]")}`)}onChainEnd(t){let e=this.getBreadcrumbs(t);console.log(`${ni(ui.cyan,"[chain/end]")} [${e}] [${vr(t)}] Exiting Chain run with output: ${Hi(t.outputs,"[outputs]")}`)}onChainError(t){let e=this.getBreadcrumbs(t);console.log(`${ni(ui.red,"[chain/error]")} [${e}] [${vr(t)}] Chain run errored with error: ${Hi(t.error,"[error]")}`)}onLLMStart(t){let e=this.getBreadcrumbs(t),i="prompts"in t.inputs?{prompts:t.inputs.prompts.map(r=>r.trim())}:t.inputs;console.log(`${ni(ui.green,"[llm/start]")} [${e}] Entering LLM run with input: ${Hi(i,"[inputs]")}`)}onLLMEnd(t){let e=this.getBreadcrumbs(t);console.log(`${ni(ui.cyan,"[llm/end]")} [${e}] [${vr(t)}] Exiting LLM run with output: ${Hi(t.outputs,"[response]")}`)}onLLMError(t){let e=this.getBreadcrumbs(t);console.log(`${ni(ui.red,"[llm/error]")} [${e}] [${vr(t)}] LLM run errored with error: ${Hi(t.error,"[error]")}`)}onToolStart(t){let e=this.getBreadcrumbs(t);console.log(`${ni(ui.green,"[tool/start]")} [${e}] Entering Tool run with input: "${t.inputs.input?.trim()}"`)}onToolEnd(t){let e=this.getBreadcrumbs(t);console.log(`${ni(ui.cyan,"[tool/end]")} [${e}] [${vr(t)}] Exiting Tool run with output: "${t.outputs?.output?.trim()}"`)}onToolError(t){let e=this.getBreadcrumbs(t);console.log(`${ni(ui.red,"[tool/error]")} [${e}] [${vr(t)}] Tool run errored with error: ${Hi(t.error,"[error]")}`)}onRetrieverStart(t){let e=this.getBreadcrumbs(t);console.log(`${ni(ui.green,"[retriever/start]")} [${e}] Entering Retriever run with input: ${Hi(t.inputs,"[inputs]")}`)}onRetrieverEnd(t){let e=this.getBreadcrumbs(t);console.log(`${ni(ui.cyan,"[retriever/end]")} [${e}] [${vr(t)}] Exiting Retriever run with output: ${Hi(t.outputs,"[outputs]")}`)}onRetrieverError(t){let e=this.getBreadcrumbs(t);console.log(`${ni(ui.red,"[retriever/error]")} [${e}] [${vr(t)}] Retriever run errored with error: ${Hi(t.error,"[error]")}`)}onAgentAction(t){let e=t,i=this.getBreadcrumbs(t);console.log(`${ni(ui.blue,"[agent/action]")} [${i}] Agent selected action: ${Hi(e.actions[e.actions.length-1],"[action]")}`)}};var ec,ES=new Uint8Array(16);function Rd(){if(!ec&&(ec=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ec))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ec(ES)}var Wf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function OS(n){return typeof n=="string"&&Wf.test(n)}var Dd=OS;var jt=[];for(let n=0;n<256;++n)jt.push((n+256).toString(16).slice(1));function Qf(n,t=0){return jt[n[t+0]]+jt[n[t+1]]+jt[n[t+2]]+jt[n[t+3]]+"-"+jt[n[t+4]]+jt[n[t+5]]+"-"+jt[n[t+6]]+jt[n[t+7]]+"-"+jt[n[t+8]]+jt[n[t+9]]+"-"+jt[n[t+10]]+jt[n[t+11]]+jt[n[t+12]]+jt[n[t+13]]+jt[n[t+14]]+jt[n[t+15]]}var AS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Nd={randomUUID:AS};function kS(n,t,e){if(Nd.randomUUID&&!t&&!n)return Nd.randomUUID();n=n||{};let i=n.random||(n.rng||Rd)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=i[r];return t}return Qf(i)}var tc=kS;var og=rn(Jl(),1),oc=rn(ac(),1);var VS=[400,401,403,404,405,406,407,408],zS=[409],co=class{constructor(t){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,"default"in oc.default?this.queue=new oc.default.default({concurrency:this.maxConcurrency}):this.queue=new oc.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=t?.onFailedResponseHook}call(t,...e){let i=this.onFailedResponseHook;return this.queue.add(()=>(0,og.default)(()=>t(...e).catch(s=>{throw s instanceof Error?s:new Error(s)}),{onFailedAttempt(s){return h(this,null,function*(){if(s.message.startsWith("Cancel")||s.message.startsWith("TimeoutError")||s.message.startsWith("AbortError")||s?.code==="ECONNABORTED")throw s;let a=s?.response,o=a?.status;if(o){if(VS.includes(+o))throw s;if(zS.includes(+o))return;i&&(yield i(a))}})},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,e,...i){return t.signal?Promise.race([this.call(e,...i),new Promise((r,s)=>{t.signal?.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(e,...i)}fetch(...t){return this.call(()=>fetch(...t).then(e=>e.ok?e:Promise.reject(e)))}};function Bd(n){return typeof n?._getType=="function"}function Ud(n){let t={type:n._getType(),data:{content:n.content}};return n?.additional_kwargs&&Object.keys(n.additional_kwargs).length>0&&(t.data.additional_kwargs=c({},n.additional_kwargs)),t}var Dn,$S=()=>typeof window<"u"&&typeof window.document<"u",BS=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",US=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),lg=()=>typeof Deno<"u",HS=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!lg(),qS=()=>Dn||($S()?Dn="browser":HS()?Dn="node":BS()?Dn="webworker":US()?Dn="jsdom":lg()?Dn="deno":Dn="other",Dn),Hd;function Kd(){return h(this,null,function*(){if(Hd===void 0){let n=qS(),t=GS();Hd=c({library:"langsmith",runtime:n,sdk:"langsmith-js",sdk_version:lc},t)}return Hd})}function cg(){let n=KS()||{},t={},e=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION"];for(let[i,r]of Object.entries(n))i.startsWith("LANGCHAIN_")&&typeof r=="string"&&!e.includes(i)&&!i.toLowerCase().includes("key")&&!i.toLowerCase().includes("secret")&&!i.toLowerCase().includes("token")&&(i==="LANGCHAIN_REVISION_ID"?t.revision_id=r:t[i]=r);return t}function KS(){try{return typeof process<"u"&&process.env?Object.entries(process.env).reduce((n,[t,e])=>(n[t]=String(e),n),{}):void 0}catch{return}}function gn(n){try{return typeof process<"u"?process.env?.[n]:void 0}catch{return}}var qd;function GS(){if(qd!==void 0)return qd;let n=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(let e of n){let i=gn(e);i!==void 0&&(t[e]=i)}return qd=t,t}function lt(n){if(!Dd(n))throw new Error(`Invalid UUID: ${n}`)}var ug={};function Gd(n){ug[n]||(console.warn(n),ug[n]=!0)}function dg(n){return h(this,null,function*(){let t=yield Kd(),e=cg();return n.map(i=>{let r=i.extra??{},s=r.metadata;return i.extra=v(c({},r),{runtime:c(c({},t),r?.runtime),metadata:c(c(c({},e),e.revision_id||i.revision_id?{revision_id:i.revision_id??e.revision_id}:{}),s)}),i})})}var ZS=()=>{let n=gn("LANGCHAIN_TRACING_SAMPLING_RATE");if(n===void 0)return;let t=parseFloat(n);if(t<0||t>1)throw new Error(`LANGCHAIN_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${t}`);return t},WS=n=>{let e=n.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return e==="localhost"||e==="127.0.0.1"||e==="::1"},wr=(n,t)=>h(void 0,null,function*(){let e=yield n.text();if(!n.ok)throw new Error(`Failed to ${t}: ${n.status} ${n.statusText} ${e}`)});function QS(n){return h(this,null,function*(){let t=[];try{for(var e=G(n),i,r,s;i=!(r=yield e.next()).done;i=!1){let a=r.value;t.push(a)}}catch{s=[r]}finally{try{i&&(r=e.return)&&(yield r.call(e))}finally{if(s)throw s[0]}}return t})}function Zd(n){if(n!==void 0)return n.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}var JS=n=>h(void 0,null,function*(){if(n?.status===429){let t=parseInt(n.headers.get("retry-after")??"30",10)*1e3;if(t>0)return yield new Promise(e=>setTimeout(e,t)),!0}return!1}),Wd=class{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]})}get size(){return this.items.length}push(t){return new Promise(e=>{this.items.push([t,e])})}pop(t){if(t<1)throw new Error("Number of items to pop off may not be less than 1.");let e=[];for(;e.length<t&&this.items.length;){let i=this.items.shift();if(i)e.push(i);else break}return[e.map(i=>i[0]),()=>e.forEach(i=>i[1]())]}},YS=20971520,ga=class n{constructor(t={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sampledPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"batchEndpointSupported",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new Wd}),Object.defineProperty(this,"pendingAutoBatchedRunLimit",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchInitialDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let e=n.getDefaultClientConfig();this.tracingSampleRate=ZS(),this.apiUrl=Zd(t.apiUrl??e.apiUrl)??"",this.apiKey=Zd(t.apiKey??e.apiKey),this.webUrl=Zd(t.webUrl??e.webUrl),this.timeout_ms=t.timeout_ms??12e3,this.caller=new co(t.callerOptions??{}),this.batchIngestCaller=new co(v(c({},t.callerOptions??{}),{onFailedResponseHook:JS})),this.hideInputs=t.hideInputs??e.hideInputs,this.hideOutputs=t.hideOutputs??e.hideOutputs,this.autoBatchTracing=t.autoBatchTracing??this.autoBatchTracing,this.pendingAutoBatchedRunLimit=t.pendingAutoBatchedRunLimit??this.pendingAutoBatchedRunLimit,this.fetchOptions=t.fetchOptions||{}}static getDefaultClientConfig(){let t=gn("LANGCHAIN_API_KEY"),e=gn("LANGCHAIN_ENDPOINT")??"https://api.smith.langchain.com",i=gn("LANGCHAIN_HIDE_INPUTS")==="true",r=gn("LANGCHAIN_HIDE_OUTPUTS")==="true";return{apiUrl:e,apiKey:t,webUrl:void 0,hideInputs:i,hideOutputs:r}}getHostUrl(){return this.webUrl?this.webUrl:WS(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){let t={"User-Agent":`langsmith-js/${lc}`};return this.apiKey&&(t["x-api-key"]=`${this.apiKey}`),t}processInputs(t){return this.hideInputs===!1?t:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(t):t}processOutputs(t){return this.hideOutputs===!1?t:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(t):t}prepareRunCreateOrUpdateInputs(t){let e=c({},t);return e.inputs!==void 0&&(e.inputs=this.processInputs(e.inputs)),e.outputs!==void 0&&(e.outputs=this.processOutputs(e.outputs)),e}_getResponse(t,e){return h(this,null,function*(){let i=e?.toString()??"",r=`${this.apiUrl}${t}?${i}`,s=yield this.caller.call(fetch,r,c({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));if(!s.ok)throw new Error(`Failed to fetch ${t}: ${s.status} ${s.statusText}`);return s})}_get(t,e){return h(this,null,function*(){return(yield this._getResponse(t,e)).json()})}_getPaginated(i){return ne(this,arguments,function*(t,e=new URLSearchParams){let r=Number(e.get("offset"))||0,s=Number(e.get("limit"))||100;for(;;){e.set("offset",String(r)),e.set("limit",String(s));let a=`${this.apiUrl}${t}?${e}`,o=yield new R(this.caller.call(fetch,a,c({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions)));if(!o.ok)throw new Error(`Failed to fetch ${t}: ${o.status} ${o.statusText}`);let l=yield new R(o.json());if(l.length===0||(yield l,l.length<s))break;r+=l.length}})}_getCursorPaginatedList(t,e=null,i="POST",r="runs"){return ne(this,null,function*(){let s=e?c({},e):{};for(;;){let a=yield new R(this.caller.call(fetch,`${this.apiUrl}${t}`,v(c({method:i,headers:v(c({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:JSON.stringify(s)}))),o=yield new R(a.json());if(!o||!o[r])break;yield o[r];let l=o.cursors;if(!l||!l.next)break;s.cursor=l.next}})}_filterForSampling(t,e=!1){if(this.tracingSampleRate===void 0)return t;if(e){let i=[];for(let r of t)this.sampledPostUuids.has(r.id)&&(i.push(r),this.sampledPostUuids.delete(r.id));return i}else{let i=[];for(let r of t)Math.random()<this.tracingSampleRate&&(i.push(r),this.sampledPostUuids.add(r.id));return i}}drainAutoBatchQueue(){return h(this,null,function*(){for(;this.autoBatchQueue.size>=0;){let[t,e]=this.autoBatchQueue.pop(this.pendingAutoBatchedRunLimit);if(!t.length){e();return}try{yield this.batchIngestRuns({runCreates:t.filter(i=>i.action==="create").map(i=>i.item),runUpdates:t.filter(i=>i.action==="update").map(i=>i.item)})}finally{e()}}})}processRunOperation(t,e){return h(this,null,function*(){let i=this.autoBatchTimeout;clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0;let r=this.autoBatchQueue.push(t);return(e||this.autoBatchQueue.size>this.pendingAutoBatchedRunLimit)&&(yield this.drainAutoBatchQueue()),this.autoBatchQueue.size>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue().catch(console.error)},i?this.autoBatchAggregationDelayMs:this.autoBatchInitialDelayMs)),r})}_getServerInfo(){return h(this,null,function*(){let t=yield fetch(`${this.apiUrl}/info`,c({method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));if(!t.ok)throw yield t.text(),new Error("Failed to retrieve server info.");return t.json()})}batchEndpointIsSupported(){return h(this,null,function*(){try{this.serverInfo=yield this._getServerInfo()}catch{return!1}return!0})}createRun(t){return h(this,null,function*(){if(!this._filterForSampling([t]).length)return;let e=v(c({},this.headers),{"Content-Type":"application/json"}),i=t.project_name;delete t.project_name;let r=this.prepareRunCreateOrUpdateInputs(v(c({session_name:i},t),{start_time:t.start_time??Date.now()}));if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){this.processRunOperation({action:"create",item:r}).catch(console.error);return}let s=yield dg([r]),a=yield this.caller.call(fetch,`${this.apiUrl}/runs`,c({method:"POST",headers:e,body:JSON.stringify(s[0]),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));yield wr(a,"create run")})}batchIngestRuns(i){return h(this,arguments,function*({runCreates:t,runUpdates:e}){if(t===void 0&&e===void 0)return;let r=t?.map(p=>this.prepareRunCreateOrUpdateInputs(p))??[],s=e?.map(p=>this.prepareRunCreateOrUpdateInputs(p))??[];if(r.length>0&&s.length>0){let p=r.reduce((b,x)=>(x.id&&(b[x.id]=x),b),{}),g=[];for(let b of s)b.id!==void 0&&p[b.id]?p[b.id]=c(c({},p[b.id]),b):g.push(b);r=Object.values(p),s=g}let a={post:this._filterForSampling(r),patch:this._filterForSampling(s,!0)};if(!a.post.length&&!a.patch.length)return;if(r=yield dg(r),this.batchEndpointSupported===void 0&&(this.batchEndpointSupported=yield this.batchEndpointIsSupported()),!this.batchEndpointSupported){this.autoBatchTracing=!1;for(let p of a.post)yield this.createRun(p);for(let p of a.patch)p.id!==void 0&&(yield this.updateRun(p.id,p));return}let o=this.serverInfo?.batch_ingest_config?.size_limit_bytes??YS,l={post:[],patch:[]},u=0;for(let p of["post","patch"]){let g=p,b=a[g].reverse(),x=b.pop();for(;x!==void 0;){let I=JSON.stringify(x);u>0&&u+I.length>o&&(yield this._postBatchIngestRuns(JSON.stringify(l)),u=0,l.post=[],l.patch=[]),u+=I.length,l[g].push(x),x=b.pop()}}(l.post.length>0||l.patch.length>0)&&(yield this._postBatchIngestRuns(JSON.stringify(l)))})}_postBatchIngestRuns(t){return h(this,null,function*(){let e=v(c({},this.headers),{"Content-Type":"application/json",Accept:"application/json"}),i=yield this.batchIngestCaller.call(fetch,`${this.apiUrl}/runs/batch`,c({method:"POST",headers:e,body:t,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));yield wr(i,"batch create run")})}updateRun(t,e){return h(this,null,function*(){lt(t),e.inputs&&(e.inputs=this.processInputs(e.inputs)),e.outputs&&(e.outputs=this.processOutputs(e.outputs));let i=v(c({},e),{id:t});if(!this._filterForSampling([i],!0).length)return;if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){if(e.end_time!==void 0&&i.parent_run_id===void 0){yield this.processRunOperation({action:"update",item:i},!0);return}else this.processRunOperation({action:"update",item:i}).catch(console.error);return}let r=v(c({},this.headers),{"Content-Type":"application/json"}),s=yield this.caller.call(fetch,`${this.apiUrl}/runs/${t}`,c({method:"PATCH",headers:r,body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));yield wr(s,"update run")})}readRun(i){return h(this,arguments,function*(t,{loadChildRuns:e}={loadChildRuns:!1}){lt(t);let r=yield this._get(`/runs/${t}`);return e&&r.child_run_ids&&(r=yield this._loadChildRuns(r)),r})}getRunUrl(r){return h(this,arguments,function*({runId:t,run:e,projectOpts:i}){if(e!==void 0){let s;e.session_id?s=e.session_id:i?.projectName?s=(yield this.readProject({projectName:i?.projectName})).id:i?.projectId?s=i?.projectId:s=(yield this.readProject({projectName:gn("LANGCHAIN_PROJECT")||"default"})).id;let a=yield this._getTenantId();return`${this.getHostUrl()}/o/${a}/projects/p/${s}/r/${e.id}?poll=true`}else if(t!==void 0){let s=yield this.readRun(t);if(!s.app_path)throw new Error(`Run ${t} has no app_path`);return`${this.getHostUrl()}${s.app_path}`}else throw new Error("Must provide either runId or run")})}_loadChildRuns(t){return h(this,null,function*(){let e=yield QS(this.listRuns({id:t.child_run_ids})),i={},r={};e.sort((s,a)=>(s?.dotted_order??"").localeCompare(a?.dotted_order??""));for(let s of e){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);s.parent_run_id in i||(i[s.parent_run_id]=[]),i[s.parent_run_id].push(s),r[s.id]=s}t.child_runs=i[t.id]||[];for(let s in i)s!==t.id&&(r[s].child_runs=i[s]);return t})}listRuns(t){return ne(this,null,function*(){let{projectId:e,projectName:i,parentRunId:r,traceId:s,referenceExampleId:a,startTime:o,executionOrder:l,isRoot:u,runType:p,error:g,id:b,query:x,filter:I,traceFilter:P,treeFilter:S,limit:T,select:F}=t,q=[];if(e&&(q=Array.isArray(e)?e:[e]),i){let xt=Array.isArray(i)?i:[i],It=yield new R(Promise.all(xt.map(tn=>this.readProject({projectName:tn}).then(hi=>hi.id))));q.push(...It)}let X=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],K={session:q.length?q:null,run_type:p,reference_example:a,query:x,filter:I,trace_filter:P,tree_filter:S,execution_order:l,parent_run:r,start_time:o?o.toISOString():null,error:g,id:b,limit:T,trace:s,select:F||X,is_root:u},J=0;try{for(var _e=G(this._getCursorPaginatedList("/runs/query",K)),Oe,Ne,pi;Oe=!(Ne=yield new R(_e.next())).done;Oe=!1){let xt=Ne.value;if(T){if(J>=T)break;if(xt.length+J>T){let It=xt.slice(0,T-J);yield*$t(It);break}J+=xt.length,yield*$t(xt)}else yield*$t(xt)}}catch{pi=[Ne]}finally{try{Oe&&(Ne=_e.return)&&(yield new R(Ne.call(_e)))}finally{if(pi)throw pi[0]}}})}shareRun(i){return h(this,arguments,function*(t,{shareId:e}={}){let r={run_id:t,share_token:e||tc()};lt(t);let a=yield(yield this.caller.call(fetch,`${this.apiUrl}/runs/${t}/share`,c({method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions))).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`})}unshareRun(t){return h(this,null,function*(){lt(t);let e=yield this.caller.call(fetch,`${this.apiUrl}/runs/${t}/share`,c({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));yield wr(e,"unshare run")})}readRunSharedLink(t){return h(this,null,function*(){lt(t);let i=yield(yield this.caller.call(fetch,`${this.apiUrl}/runs/${t}/share`,c({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions))).json();if(!(i===null||!("share_token"in i)))return`${this.getHostUrl()}/public/${i.share_token}/r`})}listSharedRuns(i){return h(this,arguments,function*(t,{runIds:e}={}){let r=new URLSearchParams({share_token:t});if(e!==void 0)for(let o of e)r.append("id",o);return lt(t),yield(yield this.caller.call(fetch,`${this.apiUrl}/public/${t}/runs${r}`,c({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions))).json()})}readDatasetSharedSchema(t,e){return h(this,null,function*(){if(!t&&!e)throw new Error("Either datasetId or datasetName must be given");t||(t=(yield this.readDataset({datasetName:e})).id),lt(t);let r=yield(yield this.caller.call(fetch,`${this.apiUrl}/datasets/${t}/share`,c({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions))).json();return r.url=`${this.getHostUrl()}/public/${r.share_token}/d`,r})}shareDataset(t,e){return h(this,null,function*(){if(!t&&!e)throw new Error("Either datasetId or datasetName must be given");t||(t=(yield this.readDataset({datasetName:e})).id);let i={dataset_id:t};lt(t);let s=yield(yield this.caller.call(fetch,`${this.apiUrl}/datasets/${t}/share`,c({method:"PUT",headers:this.headers,body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions))).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s})}unshareDataset(t){return h(this,null,function*(){lt(t);let e=yield this.caller.call(fetch,`${this.apiUrl}/datasets/${t}/share`,c({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));yield wr(e,"unshare dataset")})}readSharedDataset(t){return h(this,null,function*(){return lt(t),yield(yield this.caller.call(fetch,`${this.apiUrl}/public/${t}/datasets`,c({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions))).json()})}createProject(o){return h(this,arguments,function*({projectName:t,description:e=null,metadata:i=null,upsert:r=!1,projectExtra:s=null,referenceDatasetId:a=null}){let l=r?"?upsert=true":"",u=`${this.apiUrl}/sessions${l}`,p=s||{};i&&(p.metadata=i);let g={name:t,extra:p,description:e};a!==null&&(g.reference_dataset_id=a);let b=yield this.caller.call(fetch,u,c({method:"POST",headers:v(c({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions)),x=yield b.json();if(!b.ok)throw new Error(`Failed to create session ${t}: ${b.status} ${b.statusText}`);return x})}updateProject(o,l){return h(this,arguments,function*(t,{name:e=null,description:i=null,metadata:r=null,projectExtra:s=null,endTime:a=null}){let u=`${this.apiUrl}/sessions/${t}`,p=s;r&&(p=v(c({},p||{}),{metadata:r}));let g={name:e,extra:p,description:i,end_time:a?new Date(a).toISOString():null},b=yield this.caller.call(fetch,u,c({method:"PATCH",headers:v(c({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions)),x=yield b.json();if(!b.ok)throw new Error(`Failed to update project ${t}: ${b.status} ${b.statusText}`);return x})}hasProject(i){return h(this,arguments,function*({projectId:t,projectName:e}){let r="/sessions",s=new URLSearchParams;if(t!==void 0&&e!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)lt(t),r+=`/${t}`;else if(e!==void 0)s.append("name",e);else throw new Error("Must provide projectName or projectId");let a=yield this.caller.call(fetch,`${this.apiUrl}${r}?${s}`,c({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));try{let o=yield a.json();return a.ok?Array.isArray(o)?o.length>0:!0:!1}catch{return!1}})}readProject(r){return h(this,arguments,function*({projectId:t,projectName:e,includeStats:i}){let s="/sessions",a=new URLSearchParams;if(t!==void 0&&e!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)lt(t),s+=`/${t}`;else if(e!==void 0)a.append("name",e);else throw new Error("Must provide projectName or projectId");i!==void 0&&a.append("include_stats",i.toString());let o=yield this._get(s,a),l;if(Array.isArray(o)){if(o.length===0)throw new Error(`Project[id=${t}, name=${e}] not found`);l=o[0]}else l=o;return l})}getProjectUrl(i){return h(this,arguments,function*({projectId:t,projectName:e}){if(t===void 0&&e===void 0)throw new Error("Must provide either projectName or projectId");let r=yield this.readProject({projectId:t,projectName:e}),s=yield this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${r.id}`})}getDatasetUrl(i){return h(this,arguments,function*({datasetId:t,datasetName:e}){if(t===void 0&&e===void 0)throw new Error("Must provide either datasetName or datasetId");let r=yield this.readDataset({datasetId:t,datasetName:e}),s=yield this._getTenantId();return`${this.getHostUrl()}/o/${s}/datasets/${r.id}`})}_getTenantId(){return h(this,null,function*(){if(this._tenantId!==null)return this._tenantId;let t=new URLSearchParams({limit:"1"});try{for(var e=G(this._getPaginated("/sessions",t)),i,r,s;i=!(r=yield e.next()).done;i=!1){let a=r.value;return this._tenantId=a[0].tenant_id,a[0].tenant_id}}catch{s=[r]}finally{try{i&&(r=e.return)&&(yield r.call(e))}finally{if(s)throw s[0]}}throw new Error("No projects found to resolve tenant.")})}listProjects(){return ne(this,arguments,function*({projectIds:t,name:e,nameContains:i,referenceDatasetId:r,referenceDatasetName:s,referenceFree:a}={}){let o=new URLSearchParams;if(t!==void 0)for(let b of t)o.append("id",b);if(e!==void 0&&o.append("name",e),i!==void 0&&o.append("name_contains",i),r!==void 0)o.append("reference_dataset",r);else if(s!==void 0){let b=yield new R(this.readDataset({datasetName:s}));o.append("reference_dataset",b.id)}a!==void 0&&o.append("reference_free",a.toString());try{for(var l=G(this._getPaginated("/sessions",o)),u,p,g;u=!(p=yield new R(l.next())).done;u=!1){let b=p.value;yield*$t(b)}}catch{g=[p]}finally{try{u&&(p=l.return)&&(yield new R(p.call(l)))}finally{if(g)throw g[0]}}})}deleteProject(i){return h(this,arguments,function*({projectId:t,projectName:e}){let r;if(t===void 0&&e===void 0)throw new Error("Must provide projectName or projectId");if(t!==void 0&&e!==void 0)throw new Error("Must provide either projectName or projectId, not both");t===void 0?r=(yield this.readProject({projectName:e})).id:r=t,lt(r);let s=yield this.caller.call(fetch,`${this.apiUrl}/sessions/${r}`,c({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));yield wr(s,`delete session ${r} (${e})`)})}uploadCsv(l){return h(this,arguments,function*({csvFile:t,fileName:e,inputKeys:i,outputKeys:r,description:s,dataType:a,name:o}){let u=`${this.apiUrl}/datasets/upload`,p=new FormData;p.append("file",t,e),i.forEach(x=>{p.append("input_keys",x)}),r.forEach(x=>{p.append("output_keys",x)}),s&&p.append("description",s),a&&p.append("data_type",a),o&&p.append("name",o);let g=yield this.caller.call(fetch,u,c({method:"POST",headers:this.headers,body:p,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));if(!g.ok){let x=yield g.json();throw x.detail&&x.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to upload CSV: ${g.status} ${g.statusText}`)}return yield g.json()})}createDataset(r){return h(this,arguments,function*(t,{description:e,dataType:i}={}){let s={name:t,description:e};i&&(s.data_type=i);let a=yield this.caller.call(fetch,`${this.apiUrl}/datasets`,c({method:"POST",headers:v(c({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));if(!a.ok){let l=yield a.json();throw l.detail&&l.detail.includes("already exists")?new Error(`Dataset ${t} already exists`):new Error(`Failed to create dataset ${a.status} ${a.statusText}`)}return yield a.json()})}readDataset(i){return h(this,arguments,function*({datasetId:t,datasetName:e}){let r="/datasets",s=new URLSearchParams({limit:"1"});if(t!==void 0&&e!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0)lt(t),r+=`/${t}`;else if(e!==void 0)s.append("name",e);else throw new Error("Must provide datasetName or datasetId");let a=yield this._get(r,s),o;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${t}, name=${e}] not found`);o=a[0]}else o=a;return o})}hasDataset(i){return h(this,arguments,function*({datasetId:t,datasetName:e}){try{return yield this.readDataset({datasetId:t,datasetName:e}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}})}diffDatasetVersions(s){return h(this,arguments,function*({datasetId:t,datasetName:e,fromVersion:i,toVersion:r}){let a=t;if(a===void 0&&e===void 0)throw new Error("Must provide either datasetName or datasetId");if(a!==void 0&&e!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");a===void 0&&(a=(yield this.readDataset({datasetName:e})).id);let o=new URLSearchParams({from_version:typeof i=="string"?i:i.toISOString(),to_version:typeof r=="string"?r:r.toISOString()});return yield this._get(`/datasets/${a}/versions/diff`,o)})}readDatasetOpenaiFinetuning(i){return h(this,arguments,function*({datasetId:t,datasetName:e}){let r="/datasets";if(t===void 0)if(e!==void 0)t=(yield this.readDataset({datasetName:e})).id;else throw new Error("Must provide datasetName or datasetId");return(yield(yield this._getResponse(`${r}/${t}/openai_ft`)).text()).trim().split(`
`).map(l=>JSON.parse(l))})}listDatasets(){return ne(this,arguments,function*({limit:t=100,offset:e=0,datasetIds:i,datasetName:r,datasetNameContains:s}={}){let a="/datasets",o=new URLSearchParams({limit:t.toString(),offset:e.toString()});if(i!==void 0)for(let b of i)o.append("id",b);r!==void 0&&o.append("name",r),s!==void 0&&o.append("name_contains",s);try{for(var l=G(this._getPaginated(a,o)),u,p,g;u=!(p=yield new R(l.next())).done;u=!1){let b=p.value;yield*$t(b)}}catch{g=[p]}finally{try{u&&(p=l.return)&&(yield new R(p.call(l)))}finally{if(g)throw g[0]}}})}deleteDataset(i){return h(this,arguments,function*({datasetId:t,datasetName:e}){let r="/datasets",s=t;if(t!==void 0&&e!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0&&(s=(yield this.readDataset({datasetName:e})).id),s!==void 0)lt(s),r+=`/${s}`;else throw new Error("Must provide datasetName or datasetId");let a=yield this.caller.call(fetch,this.apiUrl+r,c({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));if(!a.ok)throw new Error(`Failed to delete ${r}: ${a.status} ${a.statusText}`);yield a.json()})}createExample(u,p,g){return h(this,arguments,function*(t,e,{datasetId:i,datasetName:r,createdAt:s,exampleId:a,metadata:o,split:l}){let b=i;if(b===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");if(b!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");b===void 0&&(b=(yield this.readDataset({datasetName:r})).id);let I={dataset_id:b,inputs:t,outputs:e,created_at:(s||new Date)?.toISOString(),id:a,metadata:o,split:l},P=yield this.caller.call(fetch,`${this.apiUrl}/examples`,c({method:"POST",headers:v(c({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(I),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));if(!P.ok)throw new Error(`Failed to create example: ${P.status} ${P.statusText}`);return yield P.json()})}createExamples(t){return h(this,null,function*(){let{inputs:e,outputs:i,metadata:r,sourceRunIds:s,exampleIds:a,datasetId:o,datasetName:l}=t,u=o;if(u===void 0&&l===void 0)throw new Error("Must provide either datasetName or datasetId");if(u!==void 0&&l!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");u===void 0&&(u=(yield this.readDataset({datasetName:l})).id);let p=e.map((x,I)=>({dataset_id:u,inputs:x,outputs:i?i[I]:void 0,metadata:r?r[I]:void 0,split:t.splits?t.splits[I]:void 0,id:a?a[I]:void 0,source_run_id:s?s[I]:void 0})),g=yield this.caller.call(fetch,`${this.apiUrl}/examples/bulk`,c({method:"POST",headers:v(c({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));if(!g.ok)throw new Error(`Failed to create examples: ${g.status} ${g.statusText}`);return yield g.json()})}createLLMExample(t,e,i){return h(this,null,function*(){return this.createExample({input:t},{output:e},i)})}createChatExample(t,e,i){return h(this,null,function*(){let r=t.map(a=>Bd(a)?Ud(a):a),s=Bd(e)?Ud(e):e;return this.createExample({input:r},{output:s},i)})}readExample(t){return h(this,null,function*(){lt(t);let e=`/examples/${t}`;return yield this._get(e)})}listExamples(){return ne(this,arguments,function*({datasetId:t,datasetName:e,exampleIds:i,asOf:r,splits:s,inlineS3Urls:a,metadata:o}={}){let l;if(t!==void 0&&e!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0)l=t;else if(e!==void 0)l=(yield new R(this.readDataset({datasetName:e}))).id;else throw new Error("Must provide a datasetName or datasetId");let u=new URLSearchParams({dataset:l}),p=r?typeof r=="string"?r:r?.toISOString():void 0;p&&u.append("as_of",p);let g=a??!0;if(u.append("inline_s3_urls",g.toString()),i!==void 0)for(let S of i)u.append("id",S);if(s!==void 0)for(let S of s)u.append("splits",S);if(o!==void 0){let S=JSON.stringify(o);u.append("metadata",S)}try{for(var b=G(this._getPaginated("/examples",u)),x,I,P;x=!(I=yield new R(b.next())).done;x=!1){let S=I.value;yield*$t(S)}}catch{P=[I]}finally{try{x&&(I=b.return)&&(yield new R(I.call(b)))}finally{if(P)throw P[0]}}})}deleteExample(t){return h(this,null,function*(){lt(t);let e=`/examples/${t}`,i=yield this.caller.call(fetch,this.apiUrl+e,c({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));if(!i.ok)throw new Error(`Failed to delete ${e}: ${i.status} ${i.statusText}`);yield i.json()})}updateExample(t,e){return h(this,null,function*(){lt(t);let i=yield this.caller.call(fetch,`${this.apiUrl}/examples/${t}`,c({method:"PATCH",headers:v(c({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));if(!i.ok)throw new Error(`Failed to update example ${t}: ${i.status} ${i.statusText}`);return yield i.json()})}evaluateRun(a,o){return h(this,arguments,function*(t,e,{sourceInfo:i,loadChildRuns:r,referenceExample:s}={loadChildRuns:!1}){Gd("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let l;if(typeof t=="string")l=yield this.readRun(t,{loadChildRuns:r});else if(typeof t=="object"&&"id"in t)l=t;else throw new Error(`Invalid run type: ${typeof t}`);l.reference_example_id!==null&&l.reference_example_id!==void 0&&(s=yield this.readExample(l.reference_example_id));let u=yield e.evaluateRun(l,s),[p,g]=yield this._logEvaluationFeedback(u,l,i);return g[0]})}createFeedback(I,P,S){return h(this,arguments,function*(t,e,{score:i,value:r,correction:s,comment:a,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:u,feedbackId:p,feedbackConfig:g,projectId:b,comparativeExperimentId:x}){if(!t&&!b)throw new Error("One of runId or projectId must be provided");if(t&&b)throw new Error("Only one of runId or projectId can be provided");let T={type:l??"api",metadata:o??{}};u!==void 0&&T?.metadata!==void 0&&!T.metadata.__run&&(T.metadata.__run={run_id:u}),T?.metadata!==void 0&&T.metadata.__run?.run_id!==void 0&&lt(T.metadata.__run.run_id);let F={id:p??tc(),run_id:t,key:e,score:i,value:r,correction:s,comment:a,feedback_source:T,comparative_experiment_id:x,feedbackConfig:g,session_id:b},q=`${this.apiUrl}/feedback`,X=yield this.caller.call(fetch,q,c({method:"POST",headers:v(c({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(F),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield wr(X,"create feedback"),F})}updateFeedback(a,o){return h(this,arguments,function*(t,{score:e,value:i,correction:r,comment:s}){let l={};e!=null&&(l.score=e),i!=null&&(l.value=i),r!=null&&(l.correction=r),s!=null&&(l.comment=s),lt(t);let u=yield this.caller.call(fetch,`${this.apiUrl}/feedback/${t}`,c({method:"PATCH",headers:v(c({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));yield wr(u,"update feedback")})}readFeedback(t){return h(this,null,function*(){lt(t);let e=`/feedback/${t}`;return yield this._get(e)})}deleteFeedback(t){return h(this,null,function*(){lt(t);let e=`/feedback/${t}`,i=yield this.caller.call(fetch,this.apiUrl+e,c({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));if(!i.ok)throw new Error(`Failed to delete ${e}: ${i.status} ${i.statusText}`);yield i.json()})}listFeedback(){return ne(this,arguments,function*({runIds:t,feedbackKeys:e,feedbackSourceTypes:i}={}){let r=new URLSearchParams;if(t&&r.append("run",t.join(",")),e)for(let u of e)r.append("key",u);if(i)for(let u of i)r.append("source",u);try{for(var s=G(this._getPaginated("/feedback",r)),a,o,l;a=!(o=yield new R(s.next())).done;a=!1){let u=o.value;yield*$t(u)}}catch{l=[o]}finally{try{a&&(o=s.return)&&(yield new R(o.call(s)))}finally{if(l)throw l[0]}}})}createPresignedFeedbackToken(s,a){return h(this,arguments,function*(t,e,{expiration:i,feedbackConfig:r}={}){let o={run_id:t,feedback_key:e,feedback_config:r};return i?typeof i=="string"?o.expires_at=i:(i?.hours||i?.minutes||i?.days)&&(o.expires_in=i):o.expires_in={hours:3},yield(yield this.caller.call(fetch,`${this.apiUrl}/feedback/tokens`,c({method:"POST",headers:v(c({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions))).json()})}createComparativeExperiment(l){return h(this,arguments,function*({name:t,experimentIds:e,referenceDatasetId:i,createdAt:r,description:s,metadata:a,id:o}){if(e.length===0)throw new Error("At least one experiment is required");if(i||(i=(yield this.readProject({projectId:e[0]})).reference_dataset_id),!i==null)throw new Error("A reference dataset is required");let u={id:o,name:t,experiment_ids:e,reference_dataset_id:i,description:s,created_at:(r??new Date)?.toISOString(),extra:{}};return a&&(u.extra.metadata=a),yield(yield this.caller.call(fetch,`${this.apiUrl}/datasets/comparative`,c({method:"POST",headers:v(c({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions))).json()})}listPresignedFeedbackTokens(t){return ne(this,null,function*(){lt(t);let e=new URLSearchParams({run_id:t});try{for(var i=G(this._getPaginated("/feedback/tokens",e)),r,s,a;r=!(s=yield new R(i.next())).done;r=!1){let o=s.value;yield*$t(o)}}catch{a=[s]}finally{try{r&&(s=i.return)&&(yield new R(s.call(i)))}finally{if(a)throw a[0]}}})}_selectEvalResults(t){let e;return"results"in t?e=t.results:e=[t],e}_logEvaluationFeedback(t,e,i){return h(this,null,function*(){let r=this._selectEvalResults(t),s=[];for(let a of r){let o=i||{};a.evaluatorInfo&&(o=c(c({},a.evaluatorInfo),o));let l=null;a.targetRunId?l=a.targetRunId:e&&(l=e.id),s.push(yield this.createFeedback(l,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:o,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[r,s]})}logEvaluationFeedback(t,e,i){return h(this,null,function*(){let[r]=yield this._logEvaluationFeedback(t,e,i);return r})}};var lc="0.1.32";var uo=class extends wi{constructor(t={}){super(t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{exampleId:e,projectName:i,client:r}=t;this.projectName=i??Se("LANGCHAIN_PROJECT")??Se("LANGCHAIN_SESSION"),this.exampleId=e,this.client=r??new ga({});let s=this.getTraceableRunTree();if(s){let a=s,o=new Set;for(;a.parent_run&&!(o.has(a.id)||(o.add(a.id),!a.parent_run));)a=a.parent_run;o.clear();let l=[a];for(;l.length>0;){let u=l.shift();!u||o.has(u.id)||(o.add(u.id),this.runMap.set(u.id,u),u.child_runs&&l.push(...u.child_runs))}this.client=s.client??this.client,this.projectName=s.project_name??this.projectName,this.exampleId=s.reference_example_id??this.exampleId}}_convertToCreate(t,e=void 0){return h(this,null,function*(){return v(c({},t),{extra:v(c({},t.extra),{runtime:yield Hf()}),child_runs:void 0,session_name:this.projectName,reference_example_id:t.parent_run_id?void 0:e})})}persistRun(t){return h(this,null,function*(){})}onRunCreate(t){return h(this,null,function*(){let e=yield this._convertToCreate(t,this.exampleId);yield this.client.createRun(e)})}onRunUpdate(t){return h(this,null,function*(){let e={end_time:t.end_time,error:t.error,outputs:t.outputs,events:t.events,inputs:t.inputs,trace_id:t.trace_id,dotted_order:t.dotted_order,parent_run_id:t.parent_run_id};yield this.client.updateRun(t.id,e)})}getRun(t){return this.runMap.get(t)}getTraceableRunTree(){try{return Bf()}catch{return}}};function pg(){return h(this,null,function*(){return new uo})}var cc=rn(ac(),1);var Qd;function XS(){let n="default"in cc.default?cc.default.default:cc.default;return new n({autoStart:!0,concurrency:1})}function kt(n,t){return h(this,null,function*(){t===!0?yield n():(typeof Qd>"u"&&(Qd=XS()),Qd.add(n))})}Se("LANGCHAIN_TRACING_V2")==="true"&&Se("LANGCHAIN_CALLBACKS_BACKGROUND")!=="true"&&["[WARN]: You have enabled LangSmith tracing without backgrounding callbacks.","[WARN]: If you are not using a serverless environment where you must wait for tracing calls to finish,",'[WARN]: we suggest setting "process.env.LANGCHAIN_CALLBACKS_BACKGROUND=true" to avoid additional latency.'].join(`
`);function hg(n){return n?Array.isArray(n)||"name"in n?{callbacks:n}:n:{}}var Jd=class{setHandler(t){return this.setHandlers([t])}},_a=class{constructor(t,e,i,r,s,a,o,l){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:l})}handleText(t){return h(this,null,function*(){yield Promise.all(this.handlers.map(e=>kt(()=>h(this,null,function*(){try{yield e.handleText?.(t,this.runId,this._parentRunId,this.tags)}catch(i){if(console.error(`Error in handler ${e.constructor.name}, handleText: ${i}`),e.raiseError)throw i}}),e.awaitHandlers)))})}},Yd=class extends _a{getChild(t){let e=new bt(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}handleRetrieverEnd(t){return h(this,null,function*(){yield Promise.all(this.handlers.map(e=>kt(()=>h(this,null,function*(){if(!e.ignoreRetriever)try{yield e.handleRetrieverEnd?.(t,this.runId,this._parentRunId,this.tags)}catch(i){if(console.error(`Error in handler ${e.constructor.name}, handleRetriever`),e.raiseError)throw i}}),e.awaitHandlers)))})}handleRetrieverError(t){return h(this,null,function*(){yield Promise.all(this.handlers.map(e=>kt(()=>h(this,null,function*(){if(!e.ignoreRetriever)try{yield e.handleRetrieverError?.(t,this.runId,this._parentRunId,this.tags)}catch(i){if(console.error(`Error in handler ${e.constructor.name}, handleRetrieverError: ${i}`),e.raiseError)throw t}}),e.awaitHandlers)))})}},uc=class extends _a{handleLLMNewToken(t,e,i,r,s,a){return h(this,null,function*(){yield Promise.all(this.handlers.map(o=>kt(()=>h(this,null,function*(){if(!o.ignoreLLM)try{yield o.handleLLMNewToken?.(t,e??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a)}catch(l){if(console.error(`Error in handler ${o.constructor.name}, handleLLMNewToken: ${l}`),o.raiseError)throw l}}),o.awaitHandlers)))})}handleLLMError(t){return h(this,null,function*(){yield Promise.all(this.handlers.map(e=>kt(()=>h(this,null,function*(){if(!e.ignoreLLM)try{yield e.handleLLMError?.(t,this.runId,this._parentRunId,this.tags)}catch(i){if(console.error(`Error in handler ${e.constructor.name}, handleLLMError: ${i}`),e.raiseError)throw i}}),e.awaitHandlers)))})}handleLLMEnd(t){return h(this,null,function*(){yield Promise.all(this.handlers.map(e=>kt(()=>h(this,null,function*(){if(!e.ignoreLLM)try{yield e.handleLLMEnd?.(t,this.runId,this._parentRunId,this.tags)}catch(i){if(console.error(`Error in handler ${e.constructor.name}, handleLLMEnd: ${i}`),e.raiseError)throw i}}),e.awaitHandlers)))})}},Xd=class extends _a{getChild(t){let e=new bt(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}handleChainError(t,e,i,r,s){return h(this,null,function*(){yield Promise.all(this.handlers.map(a=>kt(()=>h(this,null,function*(){if(!a.ignoreChain)try{yield a.handleChainError?.(t,this.runId,this._parentRunId,this.tags,s)}catch(o){if(console.error(`Error in handler ${a.constructor.name}, handleChainError: ${o}`),a.raiseError)throw o}}),a.awaitHandlers)))})}handleChainEnd(t,e,i,r,s){return h(this,null,function*(){yield Promise.all(this.handlers.map(a=>kt(()=>h(this,null,function*(){if(!a.ignoreChain)try{yield a.handleChainEnd?.(t,this.runId,this._parentRunId,this.tags,s)}catch(o){if(console.error(`Error in handler ${a.constructor.name}, handleChainEnd: ${o}`),a.raiseError)throw o}}),a.awaitHandlers)))})}handleAgentAction(t){return h(this,null,function*(){yield Promise.all(this.handlers.map(e=>kt(()=>h(this,null,function*(){if(!e.ignoreAgent)try{yield e.handleAgentAction?.(t,this.runId,this._parentRunId,this.tags)}catch(i){if(console.error(`Error in handler ${e.constructor.name}, handleAgentAction: ${i}`),e.raiseError)throw i}}),e.awaitHandlers)))})}handleAgentEnd(t){return h(this,null,function*(){yield Promise.all(this.handlers.map(e=>kt(()=>h(this,null,function*(){if(!e.ignoreAgent)try{yield e.handleAgentEnd?.(t,this.runId,this._parentRunId,this.tags)}catch(i){if(console.error(`Error in handler ${e.constructor.name}, handleAgentEnd: ${i}`),e.raiseError)throw i}}),e.awaitHandlers)))})}},ep=class extends _a{getChild(t){let e=new bt(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}handleToolError(t){return h(this,null,function*(){yield Promise.all(this.handlers.map(e=>kt(()=>h(this,null,function*(){if(!e.ignoreAgent)try{yield e.handleToolError?.(t,this.runId,this._parentRunId,this.tags)}catch(i){if(console.error(`Error in handler ${e.constructor.name}, handleToolError: ${i}`),e.raiseError)throw i}}),e.awaitHandlers)))})}handleToolEnd(t){return h(this,null,function*(){yield Promise.all(this.handlers.map(e=>kt(()=>h(this,null,function*(){if(!e.ignoreAgent)try{yield e.handleToolEnd?.(t,this.runId,this._parentRunId,this.tags)}catch(i){if(console.error(`Error in handler ${e.constructor.name}, handleToolEnd: ${i}`),e.raiseError)throw i}}),e.awaitHandlers)))})}},bt=class n extends Jd{constructor(t,e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=e?.handlers??this.handlers,this.inheritableHandlers=e?.inheritableHandlers??this.inheritableHandlers,this.tags=e?.tags??this.tags,this.inheritableTags=e?.inheritableTags??this.inheritableTags,this.metadata=e?.metadata??this.metadata,this.inheritableMetadata=e?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=t}getParentRunId(){return this._parentRunId}handleLLMStart(t,e,i=void 0,r=void 0,s=void 0,a=void 0,o=void 0,l=void 0){return h(this,null,function*(){return Promise.all(e.map((u,p)=>h(this,null,function*(){let g=p===0&&i?i:ci();return yield Promise.all(this.handlers.map(b=>kt(()=>h(this,null,function*(){if(!b.ignoreLLM)try{yield b.handleLLMStart?.(t,[u],g,this._parentRunId,s,this.tags,this.metadata,l)}catch(x){if(console.error(`Error in handler ${b.constructor.name}, handleLLMStart: ${x}`),b.raiseError)throw x}}),b.awaitHandlers))),new uc(g,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))})}handleChatModelStart(t,e,i=void 0,r=void 0,s=void 0,a=void 0,o=void 0,l=void 0){return h(this,null,function*(){return Promise.all(e.map((u,p)=>h(this,null,function*(){let g=p===0&&i?i:ci();return yield Promise.all(this.handlers.map(b=>kt(()=>h(this,null,function*(){if(!b.ignoreLLM)try{if(b.handleChatModelStart)yield b.handleChatModelStart?.(t,[u],g,this._parentRunId,s,this.tags,this.metadata,l);else if(b.handleLLMStart){let x=cs(u);yield b.handleLLMStart?.(t,[x],g,this._parentRunId,s,this.tags,this.metadata,l)}}catch(x){if(console.error(`Error in handler ${b.constructor.name}, handleLLMStart: ${x}`),b.raiseError)throw x}}),b.awaitHandlers))),new uc(g,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))})}handleChainStart(l,u){return h(this,arguments,function*(t,e,i=ci(),r=void 0,s=void 0,a=void 0,o=void 0){return yield Promise.all(this.handlers.map(p=>kt(()=>h(this,null,function*(){if(!p.ignoreChain)try{yield p.handleChainStart?.(t,e,i,this._parentRunId,this.tags,this.metadata,r,o)}catch(g){if(console.error(`Error in handler ${p.constructor.name}, handleChainStart: ${g}`),p.raiseError)throw g}}),p.awaitHandlers))),new Xd(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})}handleToolStart(l,u){return h(this,arguments,function*(t,e,i=ci(),r=void 0,s=void 0,a=void 0,o=void 0){return yield Promise.all(this.handlers.map(p=>kt(()=>h(this,null,function*(){if(!p.ignoreAgent)try{yield p.handleToolStart?.(t,e,i,this._parentRunId,this.tags,this.metadata,o)}catch(g){if(console.error(`Error in handler ${p.constructor.name}, handleToolStart: ${g}`),p.raiseError)throw g}}),p.awaitHandlers))),new ep(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})}handleRetrieverStart(l,u){return h(this,arguments,function*(t,e,i=ci(),r=void 0,s=void 0,a=void 0,o=void 0){return yield Promise.all(this.handlers.map(p=>kt(()=>h(this,null,function*(){if(!p.ignoreRetriever)try{yield p.handleRetrieverStart?.(t,e,i,this._parentRunId,this.tags,this.metadata,o)}catch(g){if(console.error(`Error in handler ${p.constructor.name}, handleRetrieverStart: ${g}`),p.raiseError)throw g}}),p.awaitHandlers))),new Yd(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})}addHandler(t,e=!0){this.handlers.push(t),e&&this.inheritableHandlers.push(t)}removeHandler(t){this.handlers=this.handlers.filter(e=>e!==t),this.inheritableHandlers=this.inheritableHandlers.filter(e=>e!==t)}setHandlers(t,e=!0){this.handlers=[],this.inheritableHandlers=[];for(let i of t)this.addHandler(i,e)}addTags(t,e=!0){this.removeTags(t),this.tags.push(...t),e&&this.inheritableTags.push(...t)}removeTags(t){this.tags=this.tags.filter(e=>!t.includes(e)),this.inheritableTags=this.inheritableTags.filter(e=>!t.includes(e))}addMetadata(t,e=!0){this.metadata=c(c({},this.metadata),t),e&&(this.inheritableMetadata=c(c({},this.inheritableMetadata),t))}removeMetadata(t){for(let e of Object.keys(t))delete this.metadata[e],delete this.inheritableMetadata[e]}copy(t=[],e=!0){let i=new n(this._parentRunId);for(let r of this.handlers){let s=this.inheritableHandlers.includes(r);i.addHandler(r,s)}for(let r of this.tags){let s=this.inheritableTags.includes(r);i.addTags([r],s)}for(let r of Object.keys(this.metadata)){let s=Object.keys(this.inheritableMetadata).includes(r);i.addMetadata({[r]:this.metadata[r]},s)}for(let r of t)i.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===r.name)||i.addHandler(r,e);return i}static fromHandlers(t){class e extends fs{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:ci()}),Object.assign(this,t)}}let i=new this;return i.addHandler(new e),i}static configure(t,e,i,r,s,a,o){return h(this,null,function*(){let l;(t||e)&&(Array.isArray(t)||!t?(l=new n,l.setHandlers(t?.map(po)??[],!0)):l=t,l=l.copy(Array.isArray(e)?e.map(po):e?.handlers,!1));let u=Se("LANGCHAIN_VERBOSE")==="true"||o?.verbose,p=Se("LANGCHAIN_TRACING_V2")==="true"||Se("LANGSMITH_TRACING")==="true",g=p||(Se("LANGCHAIN_TRACING")??!1);if(u||g){if(l||(l=new n),u&&!l.handlers.some(b=>b.name===oo.prototype.name)){let b=new oo;l.addHandler(b,!0)}if(g&&!l.handlers.some(b=>b.name==="langchain_tracer")&&p){let b=yield pg();l.addHandler(b,!0),l._parentRunId=b.getTraceableRunTree()?.id??l._parentRunId}}return(i||r)&&l&&(l.addTags(i??[]),l.addTags(r??[],!1)),(s||a)&&l&&(l.addMetadata(s??{}),l.addMetadata(a??{},!1)),l})}};function po(n){return"name"in n?n:fs.fromMethods(n)}var tp={};dh(tp,{JsonPatchError:()=>yt,_areEquals:()=>mo,applyOperation:()=>_s,applyPatch:()=>xr,applyReducer:()=>nE,deepClone:()=>tE,getValueByPointer:()=>mc,validate:()=>_g,validator:()=>fc});var eE=Object.prototype.hasOwnProperty;function fg(n,t){return eE.call(n,t)}function gg(n){if(Array.isArray(n)){let e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=""+i;return e}if(Object.keys)return Object.keys(n);let t=[];for(let e in n)fg(n,e)&&t.push(e);return t}function Pi(n){switch(typeof n){case"object":return JSON.parse(JSON.stringify(n));case"undefined":return null;default:return n}}function pc(n){let t=0,e=n.length,i;for(;t<e;){if(i=n.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function hc(n){return n.indexOf("/")===-1&&n.indexOf("~")===-1?n:n.replace(/~/g,"~0").replace(/\//g,"~1")}function ho(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}function dc(n){if(n===void 0)return!0;if(n){if(Array.isArray(n)){for(let e=0,i=n.length;e<i;e++)if(dc(n[e]))return!0}else if(typeof n=="object"){let e=gg(n),i=e.length;for(var t=0;t<i;t++)if(dc(n[e[t]]))return!0}}return!1}function mg(n,t){let e=[n];for(let i in t){let r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&e.push(`${i}: ${r}`)}return e.join(`
`)}var gs=class extends Error{constructor(t,e,i,r,s){super(mg(t,{name:e,index:i,operation:r,tree:s})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.setPrototypeOf(this,new.target.prototype),this.message=mg(t,{name:e,index:i,operation:r,tree:s})}};var yt=gs,tE=Pi,ya={add:function(n,t,e){return n[t]=this.value,{newDocument:e}},remove:function(n,t,e){var i=n[t];return delete n[t],{newDocument:e,removed:i}},replace:function(n,t,e){var i=n[t];return n[t]=this.value,{newDocument:e,removed:i}},move:function(n,t,e){let i=mc(e,this.path);i&&(i=Pi(i));let r=_s(e,{op:"remove",path:this.from}).removed;return _s(e,{op:"add",path:this.path,value:r}),{newDocument:e,removed:i}},copy:function(n,t,e){let i=mc(e,this.from);return _s(e,{op:"add",path:this.path,value:Pi(i)}),{newDocument:e}},test:function(n,t,e){return{newDocument:e,test:mo(n[t],this.value)}},_get:function(n,t,e){return this.value=n[t],{newDocument:e}}},iE={add:function(n,t,e){return pc(t)?n.splice(t,0,this.value):n[t]=this.value,{newDocument:e,index:t}},remove:function(n,t,e){var i=n.splice(t,1);return{newDocument:e,removed:i[0]}},replace:function(n,t,e){var i=n[t];return n[t]=this.value,{newDocument:e,removed:i}},move:ya.move,copy:ya.copy,test:ya.test,_get:ya._get};function mc(n,t){if(t=="")return n;var e={op:"_get",path:t};return _s(n,e),e.value}function _s(n,t,e=!1,i=!0,r=!0,s=0){if(e&&(typeof e=="function"?e(t,0,n,t.path):fc(t,0)),t.path===""){let a={newDocument:n};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=n,a;if(t.op==="move"||t.op==="copy")return a.newDocument=mc(n,t.from),t.op==="move"&&(a.removed=n),a;if(t.op==="test"){if(a.test=mo(n,t.value),a.test===!1)throw new yt("Test operation failed","TEST_OPERATION_FAILED",s,t,n);return a.newDocument=n,a}else{if(t.op==="remove")return a.removed=n,a.newDocument=null,a;if(t.op==="_get")return t.value=n,a;if(e)throw new yt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,n);return a}}else{i||(n=Pi(n));let o=(t.path||"").split("/"),l=n,u=1,p=o.length,g,b,x;for(typeof e=="function"?x=e:x=fc;;){if(b=o[u],b&&b.indexOf("~")!=-1&&(b=ho(b)),r&&(b=="__proto__"||b=="prototype"&&u>0&&o[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(e&&g===void 0&&(l[b]===void 0?g=o.slice(0,u).join("/"):u==p-1&&(g=t.path),g!==void 0&&x(t,0,n,g)),u++,Array.isArray(l)){if(b==="-")b=l.length;else{if(e&&!pc(b))throw new yt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,n);pc(b)&&(b=~~b)}if(u>=p){if(e&&t.op==="add"&&b>l.length)throw new yt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,n);let I=iE[t.op].call(t,l,b,n);if(I.test===!1)throw new yt("Test operation failed","TEST_OPERATION_FAILED",s,t,n);return I}}else if(u>=p){let I=ya[t.op].call(t,l,b,n);if(I.test===!1)throw new yt("Test operation failed","TEST_OPERATION_FAILED",s,t,n);return I}if(l=l[b],e&&u<p&&(!l||typeof l!="object"))throw new yt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,n)}}}function xr(n,t,e,i=!0,r=!0){if(e&&!Array.isArray(t))throw new yt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(n=Pi(n));let s=new Array(t.length);for(let a=0,o=t.length;a<o;a++)s[a]=_s(n,t[a],e,!0,r,a),n=s[a].newDocument;return s.newDocument=n,s}function nE(n,t,e){let i=_s(n,t);if(i.test===!1)throw new yt("Test operation failed","TEST_OPERATION_FAILED",e,t,n);return i.newDocument}function fc(n,t,e,i){if(typeof n!="object"||n===null||Array.isArray(n))throw new yt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,n,e);if(ya[n.op]){if(typeof n.path!="string")throw new yt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,n,e);if(n.path.indexOf("/")!==0&&n.path.length>0)throw new yt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,n,e);if((n.op==="move"||n.op==="copy")&&typeof n.from!="string")throw new yt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,n,e);if((n.op==="add"||n.op==="replace"||n.op==="test")&&n.value===void 0)throw new yt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,n,e);if((n.op==="add"||n.op==="replace"||n.op==="test")&&dc(n.value))throw new yt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,n,e);if(e){if(n.op=="add"){var r=n.path.split("/").length,s=i.split("/").length;if(r!==s+1&&r!==s)throw new yt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,n,e)}else if(n.op==="replace"||n.op==="remove"||n.op==="_get"){if(n.path!==i)throw new yt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,n,e)}else if(n.op==="move"||n.op==="copy"){var a={op:"_get",path:n.from,value:void 0},o=_g([a],e);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new yt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,n,e)}}}else throw new yt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,n,e)}function _g(n,t,e){try{if(!Array.isArray(n))throw new yt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)xr(Pi(t),Pi(n),e||!0);else{e=e||fc;for(var i=0;i<n.length;i++)e(n[i],i,t,void 0)}}catch(r){if(r instanceof yt)return r;throw r}}function mo(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){var e=Array.isArray(n),i=Array.isArray(t),r,s,a;if(e&&i){if(s=n.length,s!=t.length)return!1;for(r=s;r--!==0;)if(!mo(n[r],t[r]))return!1;return!0}if(e!=i)return!1;var o=Object.keys(n);if(s=o.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!t.hasOwnProperty(o[r]))return!1;for(r=s;r--!==0;)if(a=o[r],!mo(n[a],t[a]))return!1;return!0}return n!==n&&t!==t}var lV=v(c({},tp),{JsonPatchError:gs,deepClone:Pi,escapePathComponent:hc,unescapePathComponent:ho});var ip=class{getStore(){}run(t,e){return e()}},rE=new ip,np=class{getInstance(){return globalThis.__lc_tracing_async_local_storage??rE}initializeGlobalInstance(t){globalThis.__lc_tracing_async_local_storage===void 0&&(globalThis.__lc_tracing_async_local_storage=t)}},qi=new np;var Yt=class n extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}next(){return h(this,null,function*(){this.ensureReader();try{let t=yield this.reader.read();return t.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:t.value}}catch(t){throw this.reader.releaseLock(),t}})}return(){return h(this,null,function*(){if(this.ensureReader(),this.locked){let t=this.reader.cancel();this.reader.releaseLock(),yield t}return{done:!0,value:void 0}})}throw(t){return h(this,null,function*(){if(this.ensureReader(),this.locked){let e=this.reader.cancel();this.reader.releaseLock(),yield e}throw t})}[Symbol.asyncIterator](){return this}static fromReadableStream(t){let e=t.getReader();return new n({start(i){return r();function r(){return e.read().then(({done:s,value:a})=>{if(s){i.close();return}return i.enqueue(a),r()})}},cancel(){e.releaseLock()}})}static fromAsyncGenerator(t){return new n({pull(i){return h(this,null,function*(){let{value:r,done:s}=yield t.next();s&&i.close(),i.enqueue(r)})},cancel(i){return h(this,null,function*(){yield t.return(i)})}})}};function rp(n,t=2){let e=Array.from({length:t},()=>[]);return e.map(function(r){return ne(this,null,function*(){for(;;)if(r.length===0){let s=yield new R(n.next());for(let a of e)a.push(s)}else{if(r[0].done)return;yield r.shift().value}})})}function Xt(n,t){if(Array.isArray(n)&&Array.isArray(t))return n.concat(t);if(typeof n=="string"&&typeof t=="string")return n+t;if(typeof n=="number"&&typeof t=="number")return n+t;if("concat"in n&&typeof n.concat=="function")return n.concat(t);if(typeof n=="object"&&typeof t=="object"){let e=c({},n);for(let[i,r]of Object.entries(t))i in e&&!Array.isArray(e[i])?e[i]=Xt(e[i],r):e[i]=r;return e}else throw new Error(`Cannot concat ${typeof n} and ${typeof t}`)}var Nn=class{constructor(t){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=t.generator,this.config=t.config,this.setup=new Promise((e,i)=>{qi.getInstance().run(t.config,()=>h(this,null,function*(){this.firstResult=t.generator.next(),t.startSetup?this.firstResult.then(t.startSetup).then(e,i):this.firstResult.then(s=>e(void 0),i)}))})}next(...t){return h(this,null,function*(){return this.firstResultUsed?qi.getInstance().run(this.config,()=>h(this,null,function*(){return this.generator.next(...t)})):(this.firstResultUsed=!0,this.firstResult)})}return(t){return h(this,null,function*(){return this.generator.return(t)})}throw(t){return h(this,null,function*(){return this.generator.throw(t)})}[Symbol.asyncIterator](){return this}};function yg(n,t,e,...i){return h(this,null,function*(){let r=new Nn({generator:t,startSetup:e}),s=yield r.setup;return{output:n(r,s,...i),setup:s}})}var Ki=class{constructor(t){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=t.ops??[]}concat(t){let e=this.ops.concat(t.ops),i=xr({},e);return new fo({ops:e,state:i[i.length-1].newDocument})}},fo=class n extends Ki{constructor(t){super(t),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=t.state}concat(t){let e=this.ops.concat(t.ops),i=xr(this.state,t.ops);return new n({ops:e,state:i[i.length-1].newDocument})}static fromRunLogPatch(t){let e=xr({},t.ops);return new n({ops:t.ops,state:e[e.length-1].newDocument})}},ba=n=>n.name==="log_stream_tracer";function bg(n,t){return h(this,null,function*(){if(t==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");let{inputs:e}=n;if(["retriever","llm","prompt"].includes(n.run_type))return e;if(!(Object.keys(e).length===1&&e?.input===""))return e.input})}function vg(n,t){return h(this,null,function*(){let{outputs:e}=n;return t==="original"||["retriever","llm","prompt"].includes(n.run_type)?e:e!==void 0&&Object.keys(e).length===1&&e?.output!==void 0?e.output:e})}function sE(n){return n!==void 0&&n.message!==void 0}var go=class extends wi{constructor(t){super(c({_awaitHandler:!0},t)),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=t?.autoClose??!0,this.includeNames=t?.includeNames,this.includeTypes=t?.includeTypes,this.includeTags=t?.includeTags,this.excludeNames=t?.excludeNames,this.excludeTypes=t?.excludeTypes,this.excludeTags=t?.excludeTags,this._schemaFormat=t?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Yt.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}persistRun(t){return h(this,null,function*(){})}_includeRun(t){if(t.id===this.rootId)return!1;let e=t.tags??[],i=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(i=i||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(i=i||this.includeTypes.includes(t.run_type)),this.includeTags!==void 0&&(i=i||e.find(r=>this.includeTags?.includes(r))!==void 0),this.excludeNames!==void 0&&(i=i&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(i=i&&!this.excludeTypes.includes(t.run_type)),this.excludeTags!==void 0&&(i=i&&e.every(r=>!this.excludeTags?.includes(r))),i}tapOutputIterable(t,e){return ne(this,null,function*(){try{for(var i=G(e),r,s,a;r=!(s=yield new R(i.next())).done;r=!1){let o=s.value;if(t!==this.rootId){let l=this.keyMapByRunId[t];l&&(yield new R(this.writer.write(new Ki({ops:[{op:"add",path:`/logs/${l}/streamed_output/-`,value:o}]}))))}yield o}}catch{a=[s]}finally{try{r&&(s=i.return)&&(yield new R(s.call(i)))}finally{if(a)throw a[0]}}})}onRunCreate(t){return h(this,null,function*(){if(this.rootId===void 0&&(this.rootId=t.id,yield this.writer.write(new Ki({ops:[{op:"replace",path:"",value:{id:t.id,name:t.name,type:t.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(t))return;this.counterMapByRunName[t.name]===void 0&&(this.counterMapByRunName[t.name]=0),this.counterMapByRunName[t.name]+=1;let e=this.counterMapByRunName[t.name];this.keyMapByRunId[t.id]=e===1?t.name:`${t.name}:${e}`;let i={id:t.id,name:t.name,type:t.run_type,tags:t.tags??[],metadata:t.extra?.metadata??{},start_time:new Date(t.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(i.inputs=yield bg(t,this._schemaFormat)),yield this.writer.write(new Ki({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[t.id]}`,value:i}]}))})}onRunUpdate(t){return h(this,null,function*(){try{let e=this.keyMapByRunId[t.id];if(e===void 0)return;let i=[];this._schemaFormat==="streaming_events"&&i.push({op:"replace",path:`/logs/${e}/inputs`,value:yield bg(t,this._schemaFormat)}),i.push({op:"add",path:`/logs/${e}/final_output`,value:yield vg(t,this._schemaFormat)}),t.end_time!==void 0&&i.push({op:"add",path:`/logs/${e}/end_time`,value:new Date(t.end_time).toISOString()});let r=new Ki({ops:i});yield this.writer.write(r)}finally{if(t.id===this.rootId){let e=new Ki({ops:[{op:"replace",path:"/final_output",value:yield vg(t,this._schemaFormat)}]});yield this.writer.write(e),this.autoClose&&(yield this.writer.close())}}})}onLLMNewToken(t,e,i){return h(this,null,function*(){let r=this.keyMapByRunId[t.id];if(r===void 0)return;let s=t.inputs.messages!==void 0,a;s?sE(i?.chunk)?a=i?.chunk:a=new Bi(e):a=e;let o=new Ki({ops:[{op:"add",path:`/logs/${r}/streamed_output_str/-`,value:e},{op:"add",path:`/logs/${r}/streamed_output/-`,value:a}]});yield this.writer.write(o)})}};var wa="__run",Mi=class n{constructor(t){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=t.text,this.generationInfo=t.generationInfo}concat(t){return new n({text:this.text+t.text,generationInfo:c(c({},this.generationInfo),t.generationInfo)})}},va=class n extends Mi{constructor(t){super(t),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=t.message}concat(t){return new n({text:this.text+t.text,generationInfo:c(c({},this.generationInfo),t.generationInfo),message:this.message.concat(t.message)})}};function gc({name:n,serialized:t}){return n!==void 0?n:t?.name!==void 0?t.name:t?.id!==void 0&&Array.isArray(t?.id)?t.id[t.id.length-1]:"Unnamed"}var xa=n=>n.name==="event_stream_tracer",_c=class extends wi{constructor(t){super(c({_awaitHandler:!0},t)),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),this.autoClose=t?.autoClose??!0,this.includeNames=t?.includeNames,this.includeTypes=t?.includeTypes,this.includeTags=t?.includeTags,this.excludeNames=t?.excludeNames,this.excludeTypes=t?.excludeTypes,this.excludeTags=t?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Yt.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}persistRun(t){return h(this,null,function*(){})}_includeRun(t){let e=t.tags??[],i=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(i=i||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(i=i||this.includeTypes.includes(t.runType)),this.includeTags!==void 0&&(i=i||e.find(r=>this.includeTags?.includes(r))!==void 0),this.excludeNames!==void 0&&(i=i&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(i=i&&!this.excludeTypes.includes(t.runType)),this.excludeTags!==void 0&&(i=i&&e.every(r=>!this.excludeTags?.includes(r))),i}tapOutputIterable(t,e){return ne(this,null,function*(){let i=yield new R(e.next());if(i.done)return;let r=this.runInfoMap.get(t);if(r===void 0){yield i.value;return}let s=this.tappedPromises.get(t);if(s===void 0){let I;s=new Promise(P=>{I=P}),this.tappedPromises.set(t,s);try{let P={event:`on_${r.runType}_stream`,run_id:t,name:r.name,tags:r.tags,metadata:r.metadata,data:{}};yield new R(this.send(v(c({},P),{data:{chunk:i.value}}),r)),yield i.value;try{for(var a=G(e),o,l,u;o=!(l=yield new R(a.next())).done;o=!1){let S=l.value;r.runType!=="tool"&&r.runType!=="retriever"&&(yield new R(this.send(v(c({},P),{data:{chunk:S}}),r))),yield S}}catch{u=[l]}finally{try{o&&(l=a.return)&&(yield new R(l.call(a)))}finally{if(u)throw u[0]}}}finally{I()}}else{yield i.value;try{for(var p=G(e),g,b,x;g=!(b=yield new R(p.next())).done;g=!1){let I=b.value;yield I}}catch{x=[b]}finally{try{g&&(b=p.return)&&(yield new R(b.call(p)))}finally{if(x)throw x[0]}}}})}send(t,e){return h(this,null,function*(){this._includeRun(e)&&(yield this.writer.write(t))})}sendEndEvent(t,e){return h(this,null,function*(){let i=this.tappedPromises.get(t.run_id);i!==void 0?i.then(()=>{this.send(t,e)}):yield this.send(t,e)})}onLLMStart(t){return h(this,null,function*(){let e=gc(t),i=t.inputs.messages!==void 0?"chat_model":"llm",r={tags:t.tags??[],metadata:t.extra?.metadata??{},name:e,runType:i,inputs:t.inputs};this.runInfoMap.set(t.id,r);let s=`on_${i}_start`;yield this.send({event:s,data:{input:t.inputs},name:e,tags:t.tags??[],run_id:t.id,metadata:t.extra?.metadata??{}},r)})}onLLMNewToken(t,e,i){return h(this,null,function*(){let r=this.runInfoMap.get(t.id),s,a;if(r===void 0)throw new Error(`onLLMNewToken: Run ID ${t.id} not found in run map.`);if(r.runType==="chat_model")a="on_chat_model_stream",i?.chunk===void 0?s=new Bi({content:e}):s=i.chunk.message;else if(r.runType==="llm")a="on_llm_stream",i?.chunk===void 0?s=new Mi({text:e}):s=i.chunk;else throw new Error(`Unexpected run type ${r.runType}`);yield this.send({event:a,data:{chunk:s},run_id:t.id,name:r.name,tags:r.tags,metadata:r.metadata},r)})}onLLMEnd(t){return h(this,null,function*(){let e=this.runInfoMap.get(t.id);this.runInfoMap.delete(t.id);let i;if(e===void 0)throw new Error(`onLLMEnd: Run ID ${t.id} not found in run map.`);let r=t.outputs?.generations,s;if(e.runType==="chat_model"){for(let a of r??[]){if(s!==void 0)break;s=a[0]?.message}i="on_chat_model_end"}else if(e.runType==="llm")s={generations:r?.map(a=>a.map(o=>({text:o.text,generationInfo:o.generationInfo}))),llmOutput:t.outputs?.llmOutput??{}},i="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${e.runType}`);yield this.sendEndEvent({event:i,data:{output:s,input:e.inputs},run_id:t.id,name:e.name,tags:e.tags,metadata:e.metadata},e)})}onChainStart(t){return h(this,null,function*(){let e=gc(t),i=t.run_type??"chain",r={tags:t.tags??[],metadata:t.extra?.metadata??{},name:e,runType:t.run_type},s={};t.inputs.input===""&&Object.keys(t.inputs).length===1?(s={},r.inputs={}):t.inputs.input!==void 0?(s.input=t.inputs.input,r.inputs=t.inputs.input):(s.input=t.inputs,r.inputs=t.inputs),this.runInfoMap.set(t.id,r),yield this.send({event:`on_${i}_start`,data:s,name:e,tags:t.tags??[],run_id:t.id,metadata:t.extra?.metadata??{}},r)})}onChainEnd(t){return h(this,null,function*(){let e=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),e===void 0)throw new Error(`onChainEnd: Run ID ${t.id} not found in run map.`);let i=`on_${t.run_type}_end`,r=t.inputs??e.inputs??{},a={output:t.outputs?.output??t.outputs,input:r};r.input&&Object.keys(r).length===1&&(a.input=r.input,e.inputs=r.input),yield this.sendEndEvent({event:i,data:a,run_id:t.id,name:e.name,tags:e.tags,metadata:e.metadata??{}},e)})}onToolStart(t){return h(this,null,function*(){let e=gc(t),i={tags:t.tags??[],metadata:t.extra?.metadata??{},name:e,runType:"tool",inputs:t.inputs??{}};this.runInfoMap.set(t.id,i),yield this.send({event:"on_tool_start",data:{input:t.inputs??{}},name:e,run_id:t.id,tags:t.tags??[],metadata:t.extra?.metadata??{}},i)})}onToolEnd(t){return h(this,null,function*(){let e=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),e===void 0)throw new Error(`onToolEnd: Run ID ${t.id} not found in run map.`);if(e.inputs===void 0)throw new Error(`onToolEnd: Run ID ${t.id} is a tool call, and is expected to have traced inputs.`);let i=t.outputs?.output===void 0?t.outputs:t.outputs.output;yield this.sendEndEvent({event:"on_tool_end",data:{output:i,input:e.inputs},run_id:t.id,name:e.name,tags:e.tags,metadata:e.metadata},e)})}onRetrieverStart(t){return h(this,null,function*(){let e=gc(t),r={tags:t.tags??[],metadata:t.extra?.metadata??{},name:e,runType:"retriever",inputs:{query:t.inputs.query}};this.runInfoMap.set(t.id,r),yield this.send({event:"on_retriever_start",data:{input:{query:t.inputs.query}},name:e,tags:t.tags??[],run_id:t.id,metadata:t.extra?.metadata??{}},r)})}onRetrieverEnd(t){return h(this,null,function*(){let e=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),e===void 0)throw new Error(`onRetrieverEnd: Run ID ${t.id} not found in run map.`);yield this.sendEndEvent({event:"on_retriever_end",data:{output:t.outputs?.documents??t.outputs,input:e.inputs},run_id:t.id,name:e.name,tags:e.tags,metadata:e.metadata},e)})}finish(){return h(this,null,function*(){let t=[...this.tappedPromises.values()];Promise.all(t).finally(()=>{this.writer.close()})})}};var yc=25;function Gi(n){return h(this,null,function*(){return bt.configure(n?.callbacks,void 0,n?.tags,void 0,n?.metadata)})}function bc(...n){let t={};for(let e of n.filter(i=>!!i))for(let i of Object.keys(e))if(i==="metadata")t[i]=c(c({},t[i]),e[i]);else if(i==="tags"){let r=t[i]??[];t[i]=[...new Set(r.concat(e[i]??[]))]}else if(i==="configurable")t[i]=c(c({},t[i]),e[i]);else if(i==="callbacks"){let r=t.callbacks,s=e.callbacks;if(Array.isArray(s))if(!r)t.callbacks=s;else if(Array.isArray(r))t.callbacks=r.concat(s);else{let a=r.copy();for(let o of s)a.addHandler(po(o),!0);t.callbacks=a}else if(s)if(!r)t.callbacks=s;else if(Array.isArray(r)){let a=s.copy();for(let o of r)a.addHandler(po(o),!0);t.callbacks=a}else t.callbacks=new bt(s._parentRunId,{handlers:r.handlers.concat(s.handlers),inheritableHandlers:r.inheritableHandlers.concat(s.inheritableHandlers),tags:Array.from(new Set(r.tags.concat(s.tags))),inheritableTags:Array.from(new Set(r.inheritableTags.concat(s.inheritableTags))),metadata:c(c({},r.metadata),s.metadata)})}else{let r=i;t[r]=e[r]??t[r]}return t}var aE=new Set(["string","number","boolean"]);function Ve(n){let t=n??qi.getInstance().getStore(),e={tags:[],metadata:{},callbacks:void 0,recursionLimit:25,runId:void 0};if(t&&(e=c(c({},e),t)),t?.configurable)for(let i of Object.keys(t.configurable))aE.has(typeof t.configurable[i])&&!e.metadata?.[i]&&(e.metadata||(e.metadata={}),e.metadata[i]=t.configurable[i]);return e}function Pt(n={},{callbacks:t,maxConcurrency:e,recursionLimit:i,runName:r,configurable:s,runId:a}={}){let o=Ve(n);return t!==void 0&&(delete o.runName,o.callbacks=t),i!==void 0&&(o.recursionLimit=i),e!==void 0&&(o.maxConcurrency=e),r!==void 0&&(o.runName=r),s!==void 0&&(o.configurable=c(c({},o.configurable),s)),a!==void 0&&delete o.runId,o}var wg=rn(Jl(),1),vc=rn(ac(),1),oE=[400,401,402,403,404,405,406,407,409],lE=n=>{if(n.message.startsWith("Cancel")||n.message.startsWith("AbortError")||n.name==="AbortError"||n?.code==="ECONNABORTED")throw n;let t=n?.response?.status??n?.status;if(t&&oE.includes(+t))throw n;if(n?.error?.code==="insufficient_quota"){let e=new Error(n?.message);throw e.name="InsufficientQuotaError",e}},Fn=class{constructor(t){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.onFailedAttempt=t.onFailedAttempt??lE;let e="default"in vc.default?vc.default.default:vc.default;this.queue=new e({concurrency:this.maxConcurrency})}call(t,...e){return this.queue.add(()=>(0,wg.default)(()=>t(...e).catch(i=>{throw i instanceof Error?i:new Error(i)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,e,...i){return t.signal?Promise.race([this.call(e,...i),new Promise((r,s)=>{t.signal?.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(e,...i)}fetch(...t){return this.call(()=>fetch(...t).then(e=>e.ok?e:Promise.reject(e)))}};var _o=class extends wi{constructor({config:t,onStart:e,onEnd:i,onError:r}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=t,this.argOnStart=e,this.argOnEnd=i,this.argOnError=r}persistRun(t){return Promise.resolve()}onRunCreate(t){return h(this,null,function*(){this.rootId||(this.rootId=t.id,this.argOnStart&&(this.argOnStart.length===1?yield this.argOnStart(t):this.argOnStart.length===2&&(yield this.argOnStart(t,this.config))))})}onRunUpdate(t){return h(this,null,function*(){t.id===this.rootId&&(t.error?this.argOnError&&(this.argOnError.length===1?yield this.argOnError(t):this.argOnError.length===2&&(yield this.argOnError(t,this.config))):this.argOnEnd&&(this.argOnEnd.length===1?yield this.argOnEnd(t):this.argOnEnd.length===2&&(yield this.argOnEnd(t,this.config))))})}};function xc(n){return n?n.lc_runnable:!1}var wc=class{constructor(t){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=t.includeNames,this.includeTypes=t.includeTypes,this.includeTags=t.includeTags,this.excludeNames=t.excludeNames,this.excludeTypes=t.excludeTypes,this.excludeTags=t.excludeTags}includeEvent(t,e){let i=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0,r=t.tags??[];return this.includeNames!==void 0&&(i=i||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(i=i||this.includeTypes.includes(e)),this.includeTags!==void 0&&(i=i||r.some(s=>this.includeTags?.includes(s))),this.excludeNames!==void 0&&(i=i&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(i=i&&!this.excludeTypes.includes(e)),this.excludeTags!==void 0&&(i=i&&r.every(s=>!this.excludeTags?.includes(s))),i}};var Ig=Symbol("Let zodToJsonSchema decide on which parser to use"),xg={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",emailStrategy:"format:email",base64Strategy:"contentEncoding:base64"},Cg=n=>typeof n=="string"?v(c({},xg),{name:n}):c(c({},xg),n);var Tg=n=>{let t=Cg(n),e=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return v(c({},t),{currentPath:e,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([i,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,i],jsonSchema:void 0}]))})};function sp(n,t,e,i){i?.errorMessages&&e&&(n.errorMessage=v(c({},n.errorMessage),{[t]:e}))}function De(n,t,e,i,r){n[t]=e,sp(n,t,i,r)}function Sg(){return{}}function Eg(n,t){let e={type:"array"};return n.type?._def?.typeName!==z.ZodAny&&(e.items=de(n.type._def,v(c({},t),{currentPath:[...t.currentPath,"items"]}))),n.minLength&&De(e,"minItems",n.minLength.value,n.minLength.message,t),n.maxLength&&De(e,"maxItems",n.maxLength.value,n.maxLength.message,t),n.exactLength&&(De(e,"minItems",n.exactLength.value,n.exactLength.message,t),De(e,"maxItems",n.exactLength.value,n.exactLength.message,t)),e}function Og(n,t){let e={type:"integer",format:"int64"};if(!n.checks)return e;for(let i of n.checks)switch(i.kind){case"min":t.target==="jsonSchema7"?i.inclusive?De(e,"minimum",i.value,i.message,t):De(e,"exclusiveMinimum",i.value,i.message,t):(i.inclusive||(e.exclusiveMinimum=!0),De(e,"minimum",i.value,i.message,t));break;case"max":t.target==="jsonSchema7"?i.inclusive?De(e,"maximum",i.value,i.message,t):De(e,"exclusiveMaximum",i.value,i.message,t):(i.inclusive||(e.exclusiveMaximum=!0),De(e,"maximum",i.value,i.message,t));break;case"multipleOf":De(e,"multipleOf",i.value,i.message,t);break}return e}function Ag(){return{type:"boolean"}}function kg(n,t){return de(n.type._def,t)}var Pg=(n,t)=>de(n.innerType._def,t);function ap(n,t,e){let i=e??t.dateStrategy;if(Array.isArray(i))return{anyOf:i.map((r,s)=>ap(n,t,r))};switch(i){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return cE(n,t)}}var cE=(n,t)=>{let e={type:"integer",format:"unix-time"};if(t.target==="openApi3")return e;for(let i of n.checks)switch(i.kind){case"min":De(e,"minimum",i.value,i.message,t);break;case"max":De(e,"maximum",i.value,i.message,t);break}return e};function Mg(n,t){return v(c({},de(n.innerType._def,t)),{default:n.defaultValue()})}function Rg(n,t){return t.effectStrategy==="input"?de(n.schema._def,t):{}}function Dg(n){return{type:"string",enum:n.values}}var uE=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function Ng(n,t){let e=[de(n.left._def,v(c({},t),{currentPath:[...t.currentPath,"allOf","0"]})),de(n.right._def,v(c({},t),{currentPath:[...t.currentPath,"allOf","1"]}))].filter(s=>!!s),i=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,r=[];return e.forEach(s=>{if(uE(s))r.push(...s.allOf),s.unevaluatedProperties===void 0&&(i=void 0);else{let o=s;if("additionalProperties"in s&&s.additionalProperties===!1){let a=s,{additionalProperties:l}=a;o=Ee(a,["additionalProperties"])}else i=void 0;r.push(o)}}),r.length?c({allOf:r},i):void 0}function Fg(n,t){let e=typeof n.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(n.value)?"array":"object"}:t.target==="openApi3"?{type:e==="bigint"?"integer":e,enum:[n.value]}:{type:e==="bigint"?"integer":e,const:n.value}}var ys={cuid:"^[cC][^\\s-]{8,}$",cuid2:"^[a-z][a-z0-9]*$",ulid:"^[0-9A-HJKMNP-TV-Z]{26}$",email:"^(?!\\.)(?!.*\\.\\.)([a-zA-Z0-9_+-\\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\\-]*\\.)+[a-zA-Z]{2,}$",emoji:"^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",uuid:"^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$",ipv4:"^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$",ipv6:"^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$",base64:"^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$",nanoid:"^[a-zA-Z0-9_-]{21}$"};function Ic(n,t){let e={type:"string"};function i(r){return t.patternStrategy==="escape"?dE(r):r}if(n.checks)for(let r of n.checks)switch(r.kind){case"min":De(e,"minLength",typeof e.minLength=="number"?Math.max(e.minLength,r.value):r.value,r.message,t);break;case"max":De(e,"maxLength",typeof e.maxLength=="number"?Math.min(e.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Zi(e,"email",r.message,t);break;case"format:idn-email":Zi(e,"idn-email",r.message,t);break;case"pattern:zod":Wi(e,ys.email,r.message,t);break}break;case"url":Zi(e,"uri",r.message,t);break;case"uuid":Zi(e,"uuid",r.message,t);break;case"regex":Wi(e,r.regex.source,r.message,t);break;case"cuid":Wi(e,ys.cuid,r.message,t);break;case"cuid2":Wi(e,ys.cuid2,r.message,t);break;case"startsWith":Wi(e,"^"+i(r.value),r.message,t);break;case"endsWith":Wi(e,i(r.value)+"$",r.message,t);break;case"datetime":Zi(e,"date-time",r.message,t);break;case"date":Zi(e,"date",r.message,t);break;case"time":Zi(e,"time",r.message,t);break;case"duration":Zi(e,"duration",r.message,t);break;case"length":De(e,"minLength",typeof e.minLength=="number"?Math.max(e.minLength,r.value):r.value,r.message,t),De(e,"maxLength",typeof e.maxLength=="number"?Math.min(e.maxLength,r.value):r.value,r.message,t);break;case"includes":{Wi(e,i(r.value),r.message,t);break}case"ip":{r.version!=="v6"&&Zi(e,"ipv4",r.message,t),r.version!=="v4"&&Zi(e,"ipv6",r.message,t);break}case"emoji":Wi(e,ys.emoji,r.message,t);break;case"ulid":{Wi(e,ys.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Zi(e,"binary",r.message,t);break}case"contentEncoding:base64":{De(e,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{Wi(e,ys.base64,r.message,t);break}}break}case"nanoid":Wi(e,ys.nanoid,r.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return e}var dE=n=>Array.from(n).map(t=>/[a-zA-Z0-9]/.test(t)?t:`\\${t}`).join(""),Zi=(n,t,e,i)=>{n.format||n.anyOf?.some(r=>r.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push(c({format:n.format},n.errorMessage&&i.errorMessages&&{errorMessage:{format:n.errorMessage.format}})),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push(c({format:t},e&&i.errorMessages&&{errorMessage:{format:e}}))):De(n,"format",t,e,i)},Wi=(n,t,e,i)=>{n.pattern||n.allOf?.some(r=>r.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push(c({pattern:n.pattern},n.errorMessage&&i.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}})),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push(c({pattern:t},e&&i.errorMessages&&{errorMessage:{pattern:e}}))):De(n,"pattern",t,e,i)};function Cc(n,t){if(t.target==="openApi3"&&n.keyType?._def.typeName===z.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((i,r)=>v(c({},i),{[r]:de(n.valueType._def,v(c({},t),{currentPath:[...t.currentPath,"properties",r]}))??{}}),{}),additionalProperties:!1};let e={type:"object",additionalProperties:de(n.valueType._def,v(c({},t),{currentPath:[...t.currentPath,"additionalProperties"]}))??{}};if(t.target==="openApi3")return e;if(n.keyType?._def.typeName===z.ZodString&&n.keyType._def.checks?.length){let i=Object.entries(Ic(n.keyType._def,t)).reduce((r,[s,a])=>s==="type"?r:v(c({},r),{[s]:a}),{});return v(c({},e),{propertyNames:i})}else if(n.keyType?._def.typeName===z.ZodEnum)return v(c({},e),{propertyNames:{enum:n.keyType._def.values}});return e}function Lg(n,t){if(t.mapStrategy==="record")return Cc(n,t);let e=de(n.keyType._def,v(c({},t),{currentPath:[...t.currentPath,"items","items","0"]}))||{},i=de(n.valueType._def,v(c({},t),{currentPath:[...t.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[e,i],minItems:2,maxItems:2}}}function jg(n){let t=n.values,i=Object.keys(n.values).filter(s=>typeof t[t[s]]!="number").map(s=>t[s]),r=Array.from(new Set(i.map(s=>typeof s)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:i}}function Vg(){return{not:{}}}function zg(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var yo={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Bg(n,t){if(t.target==="openApi3")return $g(n,t);let e=n.options instanceof Map?Array.from(n.options.values()):n.options;if(e.every(i=>i._def.typeName in yo&&(!i._def.checks||!i._def.checks.length))){let i=e.reduce((r,s)=>{let a=yo[s._def.typeName];return a&&!r.includes(a)?[...r,a]:r},[]);return{type:i.length>1?i:i[0]}}else if(e.every(i=>i._def.typeName==="ZodLiteral"&&!i.description)){let i=e.reduce((r,s)=>{let a=typeof s._def.value;switch(a){case"string":case"number":case"boolean":return[...r,a];case"bigint":return[...r,"integer"];case"object":if(s._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(i.length===e.length){let r=i.filter((s,a,o)=>o.indexOf(s)===a);return{type:r.length>1?r:r[0],enum:e.reduce((s,a)=>s.includes(a._def.value)?s:[...s,a._def.value],[])}}}else if(e.every(i=>i._def.typeName==="ZodEnum"))return{type:"string",enum:e.reduce((i,r)=>[...i,...r._def.values.filter(s=>!i.includes(s))],[])};return $g(n,t)}var $g=(n,t)=>{let e=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((i,r)=>de(i._def,v(c({},t),{currentPath:[...t.currentPath,"anyOf",`${r}`]}))).filter(i=>!!i&&(!t.strictUnions||typeof i=="object"&&Object.keys(i).length>0));return e.length?{anyOf:e}:void 0};function Ug(n,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return t.target==="openApi3"?{type:yo[n.innerType._def.typeName],nullable:!0}:{type:[yo[n.innerType._def.typeName],"null"]};if(t.target==="openApi3"){let i=de(n.innerType._def,v(c({},t),{currentPath:[...t.currentPath]}));return i&&"$ref"in i?{allOf:[i],nullable:!0}:i&&v(c({},i),{nullable:!0})}let e=de(n.innerType._def,v(c({},t),{currentPath:[...t.currentPath,"anyOf","0"]}));return e&&{anyOf:[e,{type:"null"}]}}function Hg(n,t){let e={type:"number"};if(!n.checks)return e;for(let i of n.checks)switch(i.kind){case"int":e.type="integer",sp(e,"type",i.message,t);break;case"min":t.target==="jsonSchema7"?i.inclusive?De(e,"minimum",i.value,i.message,t):De(e,"exclusiveMinimum",i.value,i.message,t):(i.inclusive||(e.exclusiveMinimum=!0),De(e,"minimum",i.value,i.message,t));break;case"max":t.target==="jsonSchema7"?i.inclusive?De(e,"maximum",i.value,i.message,t):De(e,"exclusiveMaximum",i.value,i.message,t):(i.inclusive||(e.exclusiveMaximum=!0),De(e,"maximum",i.value,i.message,t));break;case"multipleOf":De(e,"multipleOf",i.value,i.message,t);break}return e}function pE(n,t){return t.removeAdditionalStrategy==="strict"?n.catchall._def.typeName==="ZodNever"?n.unknownKeys!=="strict":de(n.catchall._def,v(c({},t),{currentPath:[...t.currentPath,"additionalProperties"]}))??!0:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":de(n.catchall._def,v(c({},t),{currentPath:[...t.currentPath,"additionalProperties"]}))??!0}function qg(n,t){let e=v(c({type:"object"},Object.entries(n.shape()).reduce((i,[r,s])=>{if(s===void 0||s._def===void 0)return i;let a=de(s._def,v(c({},t),{currentPath:[...t.currentPath,"properties",r],propertyPath:[...t.currentPath,"properties",r]}));return a===void 0?i:{properties:v(c({},i.properties),{[r]:a}),required:s.isOptional()?i.required:[...i.required,r]}},{properties:{},required:[]})),{additionalProperties:pE(n,t)});return e.required.length||delete e.required,e}var Kg=(n,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return de(n.innerType._def,t);let e=de(n.innerType._def,v(c({},t),{currentPath:[...t.currentPath,"anyOf","1"]}));return e?{anyOf:[{not:{}},e]}:{}};var Gg=(n,t)=>{if(t.pipeStrategy==="input")return de(n.in._def,t);if(t.pipeStrategy==="output")return de(n.out._def,t);let e=de(n.in._def,v(c({},t),{currentPath:[...t.currentPath,"allOf","0"]})),i=de(n.out._def,v(c({},t),{currentPath:[...t.currentPath,"allOf",e?"1":"0"]}));return{allOf:[e,i].filter(r=>r!==void 0)}};function Zg(n,t){return de(n.type._def,t)}function Wg(n,t){let i={type:"array",uniqueItems:!0,items:de(n.valueType._def,v(c({},t),{currentPath:[...t.currentPath,"items"]}))};return n.minSize&&De(i,"minItems",n.minSize.value,n.minSize.message,t),n.maxSize&&De(i,"maxItems",n.maxSize.value,n.maxSize.message,t),i}function Qg(n,t){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((e,i)=>de(e._def,v(c({},t),{currentPath:[...t.currentPath,"items",`${i}`]}))).reduce((e,i)=>i===void 0?e:[...e,i],[]),additionalItems:de(n.rest._def,v(c({},t),{currentPath:[...t.currentPath,"additionalItems"]}))}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((e,i)=>de(e._def,v(c({},t),{currentPath:[...t.currentPath,"items",`${i}`]}))).reduce((e,i)=>i===void 0?e:[...e,i],[])}}function Jg(){return{not:{}}}function Yg(){return{}}var Xg=(n,t)=>de(n.innerType._def,t);function de(n,t,e=!1){let i=t.seen.get(n);if(t.override){let a=t.override?.(n,t,i,e);if(a!==Ig)return a}if(i&&!e){let a=hE(i,t);if(a!==void 0)return a}let r={def:n,path:t.currentPath,jsonSchema:void 0};t.seen.set(n,r);let s=fE(n,n.typeName,t);return s&&gE(n,t,s),r.jsonSchema=s,s}var hE=(n,t)=>{switch(t.$refStrategy){case"root":return{$ref:n.path.join("/")};case"relative":return{$ref:mE(t.currentPath,n.path)};case"none":case"seen":return n.path.length<t.currentPath.length&&n.path.every((e,i)=>t.currentPath[i]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},mE=(n,t)=>{let e=0;for(;e<n.length&&e<t.length&&n[e]===t[e];e++);return[(n.length-e).toString(),...t.slice(e)].join("/")},fE=(n,t,e)=>{switch(t){case z.ZodString:return Ic(n,e);case z.ZodNumber:return Hg(n,e);case z.ZodObject:return qg(n,e);case z.ZodBigInt:return Og(n,e);case z.ZodBoolean:return Ag();case z.ZodDate:return ap(n,e);case z.ZodUndefined:return Jg();case z.ZodNull:return zg(e);case z.ZodArray:return Eg(n,e);case z.ZodUnion:case z.ZodDiscriminatedUnion:return Bg(n,e);case z.ZodIntersection:return Ng(n,e);case z.ZodTuple:return Qg(n,e);case z.ZodRecord:return Cc(n,e);case z.ZodLiteral:return Fg(n,e);case z.ZodEnum:return Dg(n);case z.ZodNativeEnum:return jg(n);case z.ZodNullable:return Ug(n,e);case z.ZodOptional:return Kg(n,e);case z.ZodMap:return Lg(n,e);case z.ZodSet:return Wg(n,e);case z.ZodLazy:return de(n.getter()._def,e);case z.ZodPromise:return Zg(n,e);case z.ZodNaN:case z.ZodNever:return Vg();case z.ZodEffects:return Rg(n,e);case z.ZodAny:return Sg();case z.ZodUnknown:return Yg();case z.ZodDefault:return Mg(n,e);case z.ZodBranded:return kg(n,e);case z.ZodReadonly:return Xg(n,e);case z.ZodCatch:return Pg(n,e);case z.ZodPipeline:return Gg(n,e);case z.ZodFunction:case z.ZodVoid:case z.ZodSymbol:return;default:return(i=>{})(t)}},gE=(n,t,e)=>(n.description&&(e.description=n.description,t.markdownDescription&&(e.markdownDescription=n.description)),e);var Qi=(n,t)=>{let e=Tg(t),i=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((o,[l,u])=>v(c({},o),{[l]:de(u._def,v(c({},e),{currentPath:[...e.basePath,e.definitionPath,l]}),!0)??{}}),{}):void 0,r=typeof t=="string"?t:t?.name,s=de(n._def,r===void 0?e:v(c({},e),{currentPath:[...e.basePath,e.definitionPath,r]}),!1)??{},a=r===void 0?i?v(c({},s),{[e.definitionPath]:i}):s:{$ref:[...e.$refStrategy==="relative"?[]:e.basePath,e.definitionPath,r].join("/"),[e.definitionPath]:v(c({},i),{[r]:s})};return e.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":e.target==="jsonSchema2019-09"&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),a};function _E(n){return xc(n.data)?{type:"runnable",data:{id:n.data.lc_id,name:n.data.getName()}}:{type:"schema",data:v(c({},Qi(n.data.schema)),{title:n.data.name})}}var bo=class{constructor(){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]})}toJSON(){let t={};return Object.values(this.nodes).forEach((e,i)=>{t[e.id]=Td(e.id)?i:e.id}),{nodes:Object.values(this.nodes).map(e=>c({id:t[e.id]},_E(e))),edges:this.edges.map(e=>e.data?{source:t[e.source],target:t[e.target],data:e.data}:{source:t[e.source],target:t[e.target]})}}addNode(t,e){if(e!==void 0&&this.nodes[e]!==void 0)throw new Error(`Node with id ${e} already exists`);let i=e||ci(),r={id:i,data:t};return this.nodes[i]=r,r}removeNode(t){delete this.nodes[t.id],this.edges=this.edges.filter(e=>e.source!==t.id&&e.target!==t.id)}addEdge(t,e,i){if(this.nodes[t.id]===void 0)throw new Error(`Source node ${t.id} not in graph`);if(this.nodes[e.id]===void 0)throw new Error(`Target node ${e.id} not in graph`);let r={source:t.id,target:e.id,data:i};return this.edges.push(r),r}firstNode(){let t=new Set(this.edges.map(i=>i.target)),e=[];return Object.values(this.nodes).forEach(i=>{t.has(i.id)||e.push(i)}),e[0]}lastNode(){let t=new Set(this.edges.map(i=>i.source)),e=[];return Object.values(this.nodes).forEach(i=>{t.has(i.id)||e.push(i)}),e[0]}extend(t){Object.entries(t.nodes).forEach(([e,i])=>{this.nodes[e]=i}),this.edges=[...this.edges,...t.edges]}trimFirstNode(){let t=this.firstNode();if(t){let e=this.edges.filter(i=>i.source===t.id);(Object.keys(this.nodes).length===1||e.length===1)&&this.removeNode(t)}}trimLastNode(){let t=this.lastNode();if(t){let e=this.edges.filter(i=>i.target===t.id);(Object.keys(this.nodes).length===1||e.length===1)&&this.removeNode(t)}}};function e_(n){let t=new TextEncoder,e=new ReadableStream({start(r){return h(this,null,function*(){try{for(var s=G(n),a,o,l;a=!(o=yield s.next()).done;a=!1){let u=o.value;r.enqueue(t.encode(`event: data
data: ${JSON.stringify(u)}

`))}}catch{l=[o]}finally{try{a&&(o=s.return)&&(yield o.call(s))}finally{if(l)throw l[0]}}r.enqueue(t.encode(`event: end

`)),r.close()})}});return Yt.fromReadableStream(e)}function op(n){return typeof n=="object"&&n!==null&&typeof n[Symbol.iterator]=="function"&&typeof n.next=="function"}var t_=n=>n!=null&&typeof n=="object"&&"next"in n&&typeof n.next=="function";function Tc(n){return typeof n=="object"&&n!==null&&typeof n[Symbol.asyncIterator]=="function"}function*lp(n,t){let e=qi.getInstance();for(;;){let{value:i,done:r}=e.run(n,t.next.bind(t));if(r)break;yield i}}function cp(n,t){return ne(this,null,function*(){let e=qi.getInstance(),i=t[Symbol.asyncIterator]();for(;;){let{value:r,done:s}=yield new R(e.run(n,i.next.bind(t)));if(s)break;yield r}})}function Vt(n,t){return n&&!Array.isArray(n)&&!(n instanceof Date)&&typeof n=="object"?n:{[t]:n}}var it=class extends $i{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(t){let e=this.name??this.constructor.lc_name()??this.constructor.name;return t?`${e}${t}`:e}bind(t){return new Ir({bound:this,kwargs:t,config:{}})}map(){return new Sc({bound:this})}withRetry(t){return new Ec(c({bound:this,kwargs:{},config:{},maxAttemptNumber:t?.stopAfterAttempt},t))}withConfig(t){return new Ir({bound:this,config:t,kwargs:{}})}withFallbacks(t){return new Oc({runnable:this,fallbacks:t.fallbacks})}_getOptionsList(t,e=0){if(Array.isArray(t)&&t.length!==e)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${t.length} options for ${e} inputs`);if(Array.isArray(t))return t.map(Ve);if(e>1&&!Array.isArray(t)&&t.runId){console.warn("Provided runId will be used only for the first element of the batch.");let i=Object.fromEntries(Object.entries(t).filter(([r])=>r!=="runId"));return Array.from({length:e},(r,s)=>Ve(s===0?t:i))}return Array.from({length:e},()=>Ve(t))}batch(t,e,i){return h(this,null,function*(){let r=this._getOptionsList(e??{},t.length),s=r[0]?.maxConcurrency??i?.maxConcurrency,a=new Fn({maxConcurrency:s,onFailedAttempt:l=>{throw l}}),o=t.map((l,u)=>a.call(()=>h(this,null,function*(){try{return yield this.invoke(l,r[u])}catch(p){if(i?.returnExceptions)return p;throw p}})));return Promise.all(o)})}_streamIterator(t,e){return ne(this,null,function*(){yield this.invoke(t,e)})}stream(t,e){return h(this,null,function*(){let i=Ve(e),r=new Nn({generator:this._streamIterator(t,i),config:i});return yield r.setup,Yt.fromAsyncGenerator(r)})}_separateRunnableConfigFromCallOptions(t){let e;t===void 0?e=Ve(t):e=Ve({callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,runName:t.runName,configurable:t.configurable,recursionLimit:t.recursionLimit,maxConcurrency:t.maxConcurrency,runId:t.runId});let i=c({},t);return delete i.callbacks,delete i.tags,delete i.metadata,delete i.runName,delete i.configurable,delete i.recursionLimit,delete i.maxConcurrency,delete i.runId,[e,i]}_callWithConfig(t,e,i){return h(this,null,function*(){let r=Ve(i),a=yield(yield Gi(r))?.handleChainStart(this.toJSON(),Vt(e,"input"),r.runId,r?.runType,void 0,void 0,r?.runName??this.getName());delete r.runId;let o;try{o=yield t.call(this,e,r,a)}catch(l){throw yield a?.handleChainError(l),l}return yield a?.handleChainEnd(Vt(o,"output")),o})}_batchWithConfig(t,e,i,r){return h(this,null,function*(){let s=this._getOptionsList(i??{},e.length),a=yield Promise.all(s.map(Gi)),o=yield Promise.all(a.map((u,p)=>h(this,null,function*(){let g=yield u?.handleChainStart(this.toJSON(),Vt(e[p],"input"),s[p].runId,s[p].runType,void 0,void 0,s[p].runName??this.getName());return delete s[p].runId,g}))),l;try{l=yield t.call(this,e,s,o,r)}catch(u){throw yield Promise.all(o.map(p=>p?.handleChainError(u))),u}return yield Promise.all(o.map(u=>u?.handleChainEnd(Vt(l,"output")))),l})}_transformStreamWithConfig(t,e,i){return ne(this,null,function*(){let r,s=!0,a,o=!0,l=Ve(i),u=yield new R(Gi(l));function p(){return ne(this,null,function*(){try{for(var S=G(t),T,F,q;T=!(F=yield new R(S.next())).done;T=!1){let X=F.value;if(s)if(r===void 0)r=X;else try{r=Xt(r,X)}catch{r=void 0,s=!1}yield X}}catch{q=[F]}finally{try{T&&(F=S.return)&&(yield new R(F.call(S)))}finally{if(q)throw q[0]}}})}let g;try{let S=yield new R(yg(e.bind(this),p(),()=>h(this,null,function*(){return u?.handleChainStart(this.toJSON(),{input:""},l.runId,l.runType,void 0,void 0,l.runName??this.getName())}),l));delete l.runId,g=S.setup;let T=g?.handlers.find(xa),F=S.output;T!==void 0&&g!==void 0&&(F=T.tapOutputIterable(g.runId,F));let q=g?.handlers.find(ba);q!==void 0&&g!==void 0&&(F=q.tapOutputIterable(g.runId,F));try{for(var b=G(F),x,I,P;x=!(I=yield new R(b.next())).done;x=!1){let X=I.value;if(yield X,o)if(a===void 0)a=X;else try{a=Xt(a,X)}catch{a=void 0,o=!1}}}catch{P=[I]}finally{try{x&&(I=b.return)&&(yield new R(I.call(b)))}finally{if(P)throw P[0]}}}catch(S){throw yield new R(g?.handleChainError(S,void 0,void 0,void 0,{inputs:Vt(r,"input")})),S}yield new R(g?.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:Vt(r,"input")}))})}getGraph(t){let e=new bo,i=e.addNode({name:`${this.getName()}Input`,schema:fa.any()}),r=e.addNode(this),s=e.addNode({name:`${this.getName()}Output`,schema:fa.any()});return e.addEdge(i,r),e.addEdge(r,s),e}pipe(t){return new jn({first:this,last:Ln(t)})}pick(t){return this.pipe(new Ac(t))}assign(t){return this.pipe(new Ia(new Cr({steps:t})))}transform(t,e){return ne(this,null,function*(){let i;try{for(var r=G(t),s,a,o;s=!(a=yield new R(r.next())).done;s=!1){let l=a.value;i===void 0?i=l:i=Xt(i,l)}}catch{o=[a]}finally{try{s&&(a=r.return)&&(yield new R(a.call(r)))}finally{if(o)throw o[0]}}yield*$t(this._streamIterator(i,Ve(e)))})}streamLog(t,e,i){return ne(this,null,function*(){let r=new go(v(c({},i),{autoClose:!1,_schemaFormat:"original"})),s=Ve(e);yield*$t(this._streamLog(t,r,s))})}_streamLog(t,e,i){return ne(this,null,function*(){let{callbacks:r}=i;if(r===void 0)i.callbacks=[e];else if(Array.isArray(r))i.callbacks=r.concat([e]);else{let b=r.copy();b.inheritableHandlers.push(e),i.callbacks=b}let s=this.stream(t,i);function a(){return h(this,null,function*(){try{let S=yield s;try{for(var b=G(S),x,I,P;x=!(I=yield b.next()).done;x=!1){let T=I.value;let F=new Ki({ops:[{op:"add",path:"/streamed_output/-",value:T}]});yield e.writer.write(F)}}catch{P=[I]}finally{try{x&&(I=b.return)&&(yield I.call(b))}finally{if(P)throw P[0]}}}finally{yield e.writer.close()}})}let o=a();try{try{for(var l=G(e),u,p,g;u=!(p=yield new R(l.next())).done;u=!1){let b=p.value;yield b}}catch{g=[p]}finally{try{u&&(p=l.return)&&(yield new R(p.call(l)))}finally{if(g)throw g[0]}}}finally{yield new R(o)}})}streamEvents(t,e,i){let r;if(e.version==="v1")r=this._streamEventsV1(t,e,i);else if(e.version==="v2")r=this._streamEventsV2(t,e,i);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return e.encoding==="text/event-stream"?e_(r):Yt.fromAsyncGenerator(r)}_streamEventsV2(t,e,i){return ne(this,null,function*(){let r=new _c(v(c({},i),{autoClose:!1})),s=Ve(e),a=s.runId??ci();s.runId=a;let o=s.callbacks;if(o===void 0)s.callbacks=[r];else if(Array.isArray(o))s.callbacks=o.concat(r);else{let T=o.copy();T.inheritableHandlers.push(r),s.callbacks=T}let l=this;function u(){return h(this,null,function*(){try{let K=yield l.stream(t,s),J=r.tapOutputIterable(a,K);try{for(var T=G(J),F,q,X;F=!(q=yield T.next()).done;F=!1){let _e=q.value;;}}catch{X=[q]}finally{try{F&&(q=T.return)&&(yield q.call(T))}finally{if(X)throw X[0]}}}finally{yield r.finish()}})}let p=u(),g=!1,b;try{try{for(var x=G(r),I,P,S;I=!(P=yield new R(x.next())).done;I=!1){let T=P.value;if(!g){T.data.input=t,g=!0,b=T.run_id,yield T;continue}T.run_id===b&&T.event.endsWith("_end")&&T.data?.input&&delete T.data.input,yield T}}catch{S=[P]}finally{try{I&&(P=x.return)&&(yield new R(P.call(x)))}finally{if(S)throw S[0]}}}finally{yield new R(p)}})}_streamEventsV1(t,e,i){return ne(this,null,function*(){let r,s=!1,a=Ve(e),o=a.tags??[],l=a.metadata??{},u=a.runName??this.getName(),p=new go(v(c({},i),{autoClose:!1,_schemaFormat:"streaming_events"})),g=new wc(c({},i)),b=this._streamLog(t,p,a);try{for(var I=G(b),P,S,T;P=!(S=yield new R(I.next())).done;P=!1){let F=S.value;if(r?r=r.concat(F):r=fo.fromRunLogPatch(F),r.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!s){s=!0;let J=c({},r.state),_e={run_id:J.id,event:`on_${J.type}_start`,name:u,tags:o,metadata:l,data:{input:t}};g.includeEvent(_e,J.type)&&(yield _e)}let q=F.ops.filter(J=>J.path.startsWith("/logs/")).map(J=>J.path.split("/")[2]),X=[...new Set(q)];for(let J of X){let _e,Oe={},Ne=r.state.logs[J];if(Ne.end_time===void 0?Ne.streamed_output.length>0?_e="stream":_e="start":_e="end",_e==="start")Ne.inputs!==void 0&&(Oe.input=Ne.inputs);else if(_e==="end")Ne.inputs!==void 0&&(Oe.input=Ne.inputs),Oe.output=Ne.final_output;else if(_e==="stream"){let pi=Ne.streamed_output.length;if(pi!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${pi} instead. Encountered in: "${Ne.name}"`);Oe={chunk:Ne.streamed_output[0]},Ne.streamed_output=[]}yield{event:`on_${Ne.type}_${_e}`,name:Ne.name,run_id:Ne.id,tags:Ne.tags,metadata:Ne.metadata,data:Oe}}let{state:K}=r;if(K.streamed_output.length>0){let J=K.streamed_output.length;if(J!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${J} instead. Encountered in: "${K.name}"`);let _e={chunk:K.streamed_output[0]};K.streamed_output=[];let Oe={event:`on_${K.type}_stream`,run_id:K.id,tags:o,metadata:l,name:u,data:_e};g.includeEvent(Oe,K.type)&&(yield Oe)}}}catch{T=[S]}finally{try{P&&(S=I.return)&&(yield new R(S.call(I)))}finally{if(T)throw T[0]}}let x=r?.state;if(x!==void 0){let F={event:`on_${x.type}_end`,name:u,run_id:x.id,tags:o,metadata:l,data:{output:x.final_output}};g.includeEvent(F,x.type)&&(yield F)}})}static isRunnable(t){return xc(t)}withListeners({onStart:t,onEnd:e,onError:i}){return new Ir({bound:this,config:{},configFactories:[r=>({callbacks:[new _o({config:r,onStart:t,onEnd:e,onError:i})]})]})}},Ir=class n extends it{static lc_name(){return"RunnableBinding"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=t.bound,this.kwargs=t.kwargs,this.config=t.config,this.configFactories=t.configFactories}getName(t){return this.bound.getName(t)}_mergeConfig(...t){return h(this,null,function*(){let e=bc(this.config,...t);return bc(e,...this.configFactories?yield Promise.all(this.configFactories.map(i=>h(this,null,function*(){return yield i(e)}))):[])})}bind(t){return new this.constructor({bound:this.bound,kwargs:c(c({},this.kwargs),t),config:this.config})}withConfig(t){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:c(c({},this.config),t)})}withRetry(t){return new this.constructor({bound:this.bound.withRetry(t),kwargs:this.kwargs,config:this.config})}invoke(t,e){return h(this,null,function*(){return this.bound.invoke(t,yield this._mergeConfig(Ve(e),this.kwargs))})}batch(t,e,i){return h(this,null,function*(){let r=Array.isArray(e)?yield Promise.all(e.map(s=>h(this,null,function*(){return this._mergeConfig(Ve(s),this.kwargs)}))):yield this._mergeConfig(Ve(e),this.kwargs);return this.bound.batch(t,r,i)})}_streamIterator(t,e){return ne(this,null,function*(){yield*$t(this.bound._streamIterator(t,yield new R(this._mergeConfig(Ve(e),this.kwargs))))})}stream(t,e){return h(this,null,function*(){return this.bound.stream(t,yield this._mergeConfig(Ve(e),this.kwargs))})}transform(t,e){return ne(this,null,function*(){yield*$t(this.bound.transform(t,yield new R(this._mergeConfig(Ve(e),this.kwargs))))})}streamEvents(t,e,i){let r=this,s=function(){return ne(this,null,function*(){yield*$t(r.bound.streamEvents(t,v(c({},yield new R(r._mergeConfig(Ve(e),r.kwargs))),{version:e.version}),i))})};return Yt.fromAsyncGenerator(s())}static isRunnableBinding(t){return t.bound&&it.isRunnable(t.bound)}withListeners({onStart:t,onEnd:e,onError:i}){return new n({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[r=>({callbacks:[new _o({config:r,onStart:t,onEnd:e,onError:i})]})]})}},Sc=class n extends it{static lc_name(){return"RunnableEach"}constructor(t){super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=t.bound}bind(t){return new n({bound:this.bound.bind(t)})}invoke(t,e){return h(this,null,function*(){return this._callWithConfig(this._invoke,t,e)})}_invoke(t,e,i){return h(this,null,function*(){return this.bound.batch(t,Pt(e,{callbacks:i?.getChild()}))})}withListeners({onStart:t,onEnd:e,onError:i}){return new n({bound:this.bound.withListeners({onStart:t,onEnd:e,onError:i})})}},Ec=class n extends Ir{static lc_name(){return"RunnableRetry"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=t.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=t.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(t,e,i){let r=t>1?`retry:attempt:${t}`:void 0;return Pt(e,{callbacks:i?.getChild(r)})}_invoke(t,e,i){return h(this,null,function*(){return(0,up.default)(r=>Es(n.prototype,this,"invoke").call(this,t,this._patchConfigForRetry(r,e,i)),{onFailedAttempt:r=>this.onFailedAttempt(r,t),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})})}invoke(t,e){return h(this,null,function*(){return this._callWithConfig(this._invoke,t,e)})}_batch(t,e,i,r){return h(this,null,function*(){let s={};try{yield(0,up.default)(a=>h(this,null,function*(){let o=t.map((b,x)=>x).filter(b=>s[b.toString()]===void 0||s[b.toString()]instanceof Error),l=o.map(b=>t[b]),u=o.map(b=>this._patchConfigForRetry(a,e?.[b],i?.[b])),p=yield Es(n.prototype,this,"batch").call(this,l,u,v(c({},r),{returnExceptions:!0})),g;for(let b=0;b<p.length;b+=1){let x=p[b],I=o[b];x instanceof Error&&g===void 0&&(g=x,g.input=l[b]),s[I.toString()]=x}if(g)throw g;return p}),{onFailedAttempt:a=>this.onFailedAttempt(a,a.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if(r?.returnExceptions!==!0)throw a}return Object.keys(s).sort((a,o)=>parseInt(a,10)-parseInt(o,10)).map(a=>s[parseInt(a,10)])})}batch(t,e,i){return h(this,null,function*(){return this._batchWithConfig(this._batch.bind(this),t,e,i)})}},jn=class n extends it{static lc_name(){return"RunnableSequence"}constructor(t){super(t),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=t.first,this.middle=t.middle??this.middle,this.last=t.last,this.name=t.name}get steps(){return[this.first,...this.middle,this.last]}invoke(t,e){return h(this,null,function*(){let i=Ve(e),s=yield(yield Gi(i))?.handleChainStart(this.toJSON(),Vt(t,"input"),i.runId,void 0,void 0,void 0,i?.runName);delete i.runId;let a=t,o;try{let l=[this.first,...this.middle];for(let u=0;u<l.length;u+=1)a=yield l[u].invoke(a,Pt(i,{callbacks:s?.getChild(`seq:step:${u+1}`)}));o=yield this.last.invoke(a,Pt(i,{callbacks:s?.getChild(`seq:step:${this.steps.length}`)}))}catch(l){throw yield s?.handleChainError(l),l}return yield s?.handleChainEnd(Vt(o,"output")),o})}batch(t,e,i){return h(this,null,function*(){let r=this._getOptionsList(e??{},t.length),s=yield Promise.all(r.map(Gi)),a=yield Promise.all(s.map((l,u)=>h(this,null,function*(){let p=yield l?.handleChainStart(this.toJSON(),Vt(t[u],"input"),r[u].runId,void 0,void 0,void 0,r[u].runName);return delete r[u].runId,p}))),o=t;try{for(let l=0;l<this.steps.length;l+=1)o=yield this.steps[l].batch(o,a.map((p,g)=>{let b=p?.getChild(`seq:step:${l+1}`);return Pt(r[g],{callbacks:b})}),i)}catch(l){throw yield Promise.all(a.map(u=>u?.handleChainError(l))),l}return yield Promise.all(a.map(l=>l?.handleChainEnd(Vt(o,"output")))),o})}_streamIterator(t,e){return ne(this,null,function*(){let i=yield new R(Gi(e)),g=e??{},{runId:r}=g,s=Ee(g,["runId"]),a=yield new R(i?.handleChainStart(this.toJSON(),Vt(t,"input"),r,void 0,void 0,void 0,s?.runName)),o=[this.first,...this.middle,this.last],l=!0,u;function p(){return ne(this,null,function*(){yield t})}try{let S=o[0].transform(p(),Pt(s,{callbacks:a?.getChild("seq:step:1")}));for(let T=1;T<o.length;T+=1){let F=o[T];S=yield new R(F.transform(S,Pt(s,{callbacks:a?.getChild(`seq:step:${T+1}`)})))}try{for(var b=G(S),x,I,P;x=!(I=yield new R(b.next())).done;x=!1){let T=I.value;if(yield T,l)if(u===void 0)u=T;else try{u=Xt(u,T)}catch{u=void 0,l=!1}}}catch{P=[I]}finally{try{x&&(I=b.return)&&(yield new R(I.call(b)))}finally{if(P)throw P[0]}}}catch(S){throw yield new R(a?.handleChainError(S)),S}yield new R(a?.handleChainEnd(Vt(u,"output")))})}getGraph(t){let e=new bo,i=null;return this.steps.forEach((r,s)=>{let a=r.getGraph(t);s!==0&&a.trimFirstNode(),s!==this.steps.length-1&&a.trimLastNode(),e.extend(a);let o=a.firstNode();if(!o)throw new Error(`Runnable ${r} has no first node`);i&&e.addEdge(i,o),i=a.lastNode()}),e}pipe(t){return n.isRunnableSequence(t)?new n({first:this.first,middle:this.middle.concat([this.last,t.first,...t.middle]),last:t.last,name:this.name??t.name}):new n({first:this.first,middle:[...this.middle,this.last],last:Ln(t),name:this.name})}static isRunnableSequence(t){return Array.isArray(t.middle)&&it.isRunnable(t)}static from([t,...e],i){return new n({first:Ln(t),middle:e.slice(0,-1).map(Ln),last:Ln(e[e.length-1]),name:i})}},Cr=class n extends it{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(let[e,i]of Object.entries(t.steps))this.steps[e]=Ln(i)}static from(t){return new n({steps:t})}invoke(t,e){return h(this,null,function*(){let i=Ve(e),s=yield(yield Gi(i))?.handleChainStart(this.toJSON(),{input:t},i.runId,void 0,void 0,void 0,i?.runName);delete i.runId;let a={};try{yield Promise.all(Object.entries(this.steps).map(u=>h(this,[u],function*([o,l]){a[o]=yield l.invoke(t,Pt(i,{callbacks:s?.getChild(`map:key:${o}`)}))})))}catch(o){throw yield s?.handleChainError(o),o}return yield s?.handleChainEnd(a),a})}_transform(t,e,i){return ne(this,null,function*(){let r=c({},this.steps),s=rp(t,Object.keys(r).length),a=new Map(Object.entries(r).map(([o,l],u)=>{let p=l.transform(s[u],Pt(i,{callbacks:e?.getChild(`map:key:${o}`)}));return[o,p.next().then(g=>({key:o,gen:p,result:g}))]}));for(;a.size;){let{key:o,result:l,gen:u}=yield new R(Promise.race(a.values()));a.delete(o),l.done||(yield{[o]:l.value},a.set(o,u.next().then(p=>({key:o,gen:u,result:p}))))}})}transform(t,e){return this._transformStreamWithConfig(t,this._transform.bind(this),e)}stream(t,e){return h(this,null,function*(){function i(){return ne(this,null,function*(){yield t})}let r=Ve(e),s=new Nn({generator:this.transform(i(),r),config:r});return yield s.setup,Yt.fromAsyncGenerator(s)})}},dp=class n extends it{constructor(t){if(super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!Xl(t.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=t.func}invoke(t,e){return h(this,null,function*(){let[i]=this._getOptionsList(e??{},1),r=yield Gi(i);return yield this.func(Pt(i,{callbacks:r}),t)})}_streamIterator(t,e){return ne(this,null,function*(){let i=yield new R(this.invoke(t,e));if(Tc(i)){try{for(var r=G(i),s,a,o;s=!(a=yield new R(r.next())).done;s=!1){let l=a.value;yield l}}catch{o=[a]}finally{try{s&&(a=r.return)&&(yield new R(a.call(r)))}finally{if(o)throw o[0]}}return}if(t_(i)){for(;;){let l=i.next();if(l.done)break;yield l.value}return}yield i})}static from(t){return new n({func:t})}};function yE(n){if(Xl(n))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var Tr=class n extends it{static lc_name(){return"RunnableLambda"}constructor(t){if(Xl(t.func))return dp.from(t.func);super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),yE(t.func),this.func=t.func}static from(t){return new n({func:t})}_invoke(t,e,i){return h(this,null,function*(){return new Promise((r,s)=>{let a=Pt(e,{callbacks:i?.getChild(),recursionLimit:(e?.recursionLimit??yc)-1});qi.getInstance().run(a,()=>h(this,null,function*(){try{let g=yield this.func(t,v(c({},a),{config:a}));if(g&&it.isRunnable(g)){if(e?.recursionLimit===0)throw new Error("Recursion limit reached.");g=yield g.invoke(t,v(c({},a),{recursionLimit:(a.recursionLimit??yc)-1}))}else if(Tc(g)){let b;try{for(var o=G(cp(a,g)),l,u,p;l=!(u=yield o.next()).done;l=!1){let x=u.value;if(b===void 0)b=x;else try{b=Xt(b,x)}catch{b=x}}}catch{p=[u]}finally{try{l&&(u=o.return)&&(yield u.call(o))}finally{if(p)throw p[0]}}g=b}else if(op(g)){let b;for(let x of lp(a,g))if(b===void 0)b=x;else try{b=Xt(b,x)}catch{b=x}g=b}r(g)}catch(g){s(g)}}))})})}invoke(t,e){return h(this,null,function*(){return this._callWithConfig(this._invoke,t,e)})}_transform(t,e,i){return ne(this,null,function*(){let r;try{for(var a=G(t),o,l,u;o=!(l=yield new R(a.next())).done;o=!1){let F=l.value;if(r===void 0)r=F;else try{r=Xt(r,F)}catch{r=F}}}catch{u=[l]}finally{try{o&&(l=a.return)&&(yield new R(l.call(a)))}finally{if(u)throw u[0]}}let s=yield new R(new Promise((F,q)=>{qi.getInstance().run(i,()=>h(this,null,function*(){try{let X=yield this.func(r,v(c({},i),{config:i}));F(X)}catch(X){q(X)}}))}));if(s&&it.isRunnable(s)){if(i?.recursionLimit===0)throw new Error("Recursion limit reached.");let F=yield new R(s.stream(r,Pt(i,{callbacks:e?.getChild(),recursionLimit:(i?.recursionLimit??yc)-1})));try{for(var p=G(F),g,b,x;g=!(b=yield new R(p.next())).done;g=!1){let q=b.value;yield q}}catch{x=[b]}finally{try{g&&(b=p.return)&&(yield new R(b.call(p)))}finally{if(x)throw x[0]}}}else if(Tc(s))try{for(var I=G(cp(i,s)),P,S,T;P=!(S=yield new R(I.next())).done;P=!1){let F=S.value;yield F}}catch{T=[S]}finally{try{P&&(S=I.return)&&(yield new R(S.call(I)))}finally{if(T)throw T[0]}}else if(op(s))for(let F of lp(i,s))yield F;else yield s})}transform(t,e){return this._transformStreamWithConfig(t,this._transform.bind(this),e)}stream(t,e){return h(this,null,function*(){function i(){return ne(this,null,function*(){yield t})}let r=Ve(e),s=new Nn({generator:this.transform(i(),r),config:r});return yield s.setup,Yt.fromAsyncGenerator(s)})}};var Oc=class extends it{static lc_name(){return"RunnableWithFallbacks"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=t.runnable,this.fallbacks=t.fallbacks}*runnables(){yield this.runnable;for(let t of this.fallbacks)yield t}invoke(t,e){return h(this,null,function*(){let i=yield bt.configure(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),l=e??{},{runId:r}=l,s=Ee(l,["runId"]),a=yield i?.handleChainStart(this.toJSON(),Vt(t,"input"),r,void 0,void 0,void 0,s?.runName),o;for(let u of this.runnables())try{let p=yield u.invoke(t,Pt(s,{callbacks:a?.getChild()}));return yield a?.handleChainEnd(Vt(p,"output")),p}catch(p){o===void 0&&(o=p)}throw o===void 0?new Error("No error stored at end of fallback."):(yield a?.handleChainError(o),o)})}batch(t,e,i){return h(this,null,function*(){if(i?.returnExceptions)throw new Error("Not implemented.");let r=this._getOptionsList(e??{},t.length),s=yield Promise.all(r.map(l=>bt.configure(l?.callbacks,void 0,l?.tags,void 0,l?.metadata))),a=yield Promise.all(s.map((l,u)=>h(this,null,function*(){let p=yield l?.handleChainStart(this.toJSON(),Vt(t[u],"input"),r[u].runId,void 0,void 0,void 0,r[u].runName);return delete r[u].runId,p}))),o;for(let l of this.runnables())try{let u=yield l.batch(t,a.map((p,g)=>Pt(r[g],{callbacks:p?.getChild()})),i);return yield Promise.all(a.map((p,g)=>p?.handleChainEnd(Vt(u[g],"output")))),u}catch(u){o===void 0&&(o=u)}throw o?(yield Promise.all(a.map(l=>l?.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")})}};function Ln(n){if(typeof n=="function")return new Tr({func:n});if(it.isRunnable(n))return n;if(!Array.isArray(n)&&typeof n=="object"){let t={};for(let[e,i]of Object.entries(n))t[e]=Ln(i);return new Cr({steps:t})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var Ia=class extends it{static lc_name(){return"RunnableAssign"}constructor(t){t instanceof Cr&&(t={mapper:t}),super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=t.mapper}invoke(t,e){return h(this,null,function*(){let i=yield this.mapper.invoke(t,e);return c(c({},t),i)})}_transform(t,e,i){return ne(this,null,function*(){let r=this.mapper.getStepsKeys(),[s,a]=rp(t),o=this.mapper.transform(a,Pt(i,{callbacks:e?.getChild()})),l=o.next();try{for(var u=G(s),p,g,b;p=!(g=yield new R(u.next())).done;p=!1){let T=g.value;if(typeof T!="object"||Array.isArray(T))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof T}`);let F=Object.fromEntries(Object.entries(T).filter(([q])=>!r.includes(q)));Object.keys(F).length>0&&(yield F)}}catch{b=[g]}finally{try{p&&(g=u.return)&&(yield new R(g.call(u)))}finally{if(b)throw b[0]}}yield(yield new R(l)).value;try{for(var x=G(o),I,P,S;I=!(P=yield new R(x.next())).done;I=!1){let T=P.value;yield T}}catch{S=[P]}finally{try{I&&(P=x.return)&&(yield new R(P.call(x)))}finally{if(S)throw S[0]}}})}transform(t,e){return this._transformStreamWithConfig(t,this._transform.bind(this),e)}stream(t,e){return h(this,null,function*(){function i(){return ne(this,null,function*(){yield t})}let r=Ve(e),s=new Nn({generator:this.transform(i(),r),config:r});return yield s.setup,Yt.fromAsyncGenerator(s)})}},Ac=class extends it{static lc_name(){return"RunnablePick"}constructor(t){(typeof t=="string"||Array.isArray(t))&&(t={keys:t}),super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=t.keys}_pick(t){return h(this,null,function*(){if(typeof this.keys=="string")return t[this.keys];{let e=this.keys.map(i=>[i,t[i]]).filter(i=>i[1]!==void 0);return e.length===0?void 0:Object.fromEntries(e)}})}invoke(t,e){return h(this,null,function*(){return this._callWithConfig(this._pick.bind(this),t,e)})}_transform(t){return ne(this,null,function*(){try{for(var e=G(t),i,r,s;i=!(r=yield new R(e.next())).done;i=!1){let a=r.value;let o=yield new R(this._pick(a));o!==void 0&&(yield o)}}catch{s=[r]}finally{try{i&&(r=e.return)&&(yield new R(r.call(e)))}finally{if(s)throw s[0]}}})}transform(t,e){return this._transformStreamWithConfig(t,this._transform.bind(this),e)}stream(t,e){return h(this,null,function*(){function i(){return ne(this,null,function*(){yield t})}let r=Ve(e),s=new Nn({generator:this.transform(i(),r),config:r});return yield s.setup,Yt.fromAsyncGenerator(s)})}};var vE=typeof window=="object"?window:{},Te="0123456789abcdef".split(""),wE=[-2147483648,8388608,32768,128],Ji=[24,16,8,0];var Mt=[];function Yi(n){n?(Mt[0]=Mt[16]=Mt[1]=Mt[2]=Mt[3]=Mt[4]=Mt[5]=Mt[6]=Mt[7]=Mt[8]=Mt[9]=Mt[10]=Mt[11]=Mt[12]=Mt[13]=Mt[14]=Mt[15]=0,this.blocks=Mt):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Yi.prototype.update=function(n){if(!this.finalized){var t=typeof n!="string";t&&n.constructor===vE.ArrayBuffer&&(n=new Uint8Array(n));for(var e,i=0,r,s=n.length||0,a=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(r=this.start;i<s&&r<64;++i)a[r>>2]|=n[i]<<Ji[r++&3];else for(r=this.start;i<s&&r<64;++i)e=n.charCodeAt(i),e<128?a[r>>2]|=e<<Ji[r++&3]:e<2048?(a[r>>2]|=(192|e>>6)<<Ji[r++&3],a[r>>2]|=(128|e&63)<<Ji[r++&3]):e<55296||e>=57344?(a[r>>2]|=(224|e>>12)<<Ji[r++&3],a[r>>2]|=(128|e>>6&63)<<Ji[r++&3],a[r>>2]|=(128|e&63)<<Ji[r++&3]):(e=65536+((e&1023)<<10|n.charCodeAt(++i)&1023),a[r>>2]|=(240|e>>18)<<Ji[r++&3],a[r>>2]|=(128|e>>12&63)<<Ji[r++&3],a[r>>2]|=(128|e>>6&63)<<Ji[r++&3],a[r>>2]|=(128|e&63)<<Ji[r++&3]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=a[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Yi.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,t=this.lastByteIndex;n[16]=this.block,n[t>>2]|=wE[t&3],this.block=n[16],t>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}};Yi.prototype.hash=function(){var n=this.h0,t=this.h1,e=this.h2,i=this.h3,r=this.h4,s,a,o,l=this.blocks;for(a=16;a<80;++a)o=l[a-3]^l[a-8]^l[a-14]^l[a-16],l[a]=o<<1|o>>>31;for(a=0;a<20;a+=5)s=t&e|~t&i,o=n<<5|n>>>27,r=o+s+r+1518500249+l[a]<<0,t=t<<30|t>>>2,s=n&t|~n&e,o=r<<5|r>>>27,i=o+s+i+1518500249+l[a+1]<<0,n=n<<30|n>>>2,s=r&n|~r&t,o=i<<5|i>>>27,e=o+s+e+1518500249+l[a+2]<<0,r=r<<30|r>>>2,s=i&r|~i&n,o=e<<5|e>>>27,t=o+s+t+1518500249+l[a+3]<<0,i=i<<30|i>>>2,s=e&i|~e&r,o=t<<5|t>>>27,n=o+s+n+1518500249+l[a+4]<<0,e=e<<30|e>>>2;for(;a<40;a+=5)s=t^e^i,o=n<<5|n>>>27,r=o+s+r+1859775393+l[a]<<0,t=t<<30|t>>>2,s=n^t^e,o=r<<5|r>>>27,i=o+s+i+1859775393+l[a+1]<<0,n=n<<30|n>>>2,s=r^n^t,o=i<<5|i>>>27,e=o+s+e+1859775393+l[a+2]<<0,r=r<<30|r>>>2,s=i^r^n,o=e<<5|e>>>27,t=o+s+t+1859775393+l[a+3]<<0,i=i<<30|i>>>2,s=e^i^r,o=t<<5|t>>>27,n=o+s+n+1859775393+l[a+4]<<0,e=e<<30|e>>>2;for(;a<60;a+=5)s=t&e|t&i|e&i,o=n<<5|n>>>27,r=o+s+r-1894007588+l[a]<<0,t=t<<30|t>>>2,s=n&t|n&e|t&e,o=r<<5|r>>>27,i=o+s+i-1894007588+l[a+1]<<0,n=n<<30|n>>>2,s=r&n|r&t|n&t,o=i<<5|i>>>27,e=o+s+e-1894007588+l[a+2]<<0,r=r<<30|r>>>2,s=i&r|i&n|r&n,o=e<<5|e>>>27,t=o+s+t-1894007588+l[a+3]<<0,i=i<<30|i>>>2,s=e&i|e&r|i&r,o=t<<5|t>>>27,n=o+s+n-1894007588+l[a+4]<<0,e=e<<30|e>>>2;for(;a<80;a+=5)s=t^e^i,o=n<<5|n>>>27,r=o+s+r-899497514+l[a]<<0,t=t<<30|t>>>2,s=n^t^e,o=r<<5|r>>>27,i=o+s+i-899497514+l[a+1]<<0,n=n<<30|n>>>2,s=r^n^t,o=i<<5|i>>>27,e=o+s+e-899497514+l[a+2]<<0,r=r<<30|r>>>2,s=i^r^n,o=e<<5|e>>>27,t=o+s+t-899497514+l[a+3]<<0,i=i<<30|i>>>2,s=e^i^r,o=t<<5|t>>>27,n=o+s+n-899497514+l[a+4]<<0,e=e<<30|e>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+t<<0,this.h2=this.h2+e<<0,this.h3=this.h3+i<<0,this.h4=this.h4+r<<0};Yi.prototype.hex=function(){this.finalize();var n=this.h0,t=this.h1,e=this.h2,i=this.h3,r=this.h4;return Te[n>>28&15]+Te[n>>24&15]+Te[n>>20&15]+Te[n>>16&15]+Te[n>>12&15]+Te[n>>8&15]+Te[n>>4&15]+Te[n&15]+Te[t>>28&15]+Te[t>>24&15]+Te[t>>20&15]+Te[t>>16&15]+Te[t>>12&15]+Te[t>>8&15]+Te[t>>4&15]+Te[t&15]+Te[e>>28&15]+Te[e>>24&15]+Te[e>>20&15]+Te[e>>16&15]+Te[e>>12&15]+Te[e>>8&15]+Te[e>>4&15]+Te[e&15]+Te[i>>28&15]+Te[i>>24&15]+Te[i>>20&15]+Te[i>>16&15]+Te[i>>12&15]+Te[i>>8&15]+Te[i>>4&15]+Te[i&15]+Te[r>>28&15]+Te[r>>24&15]+Te[r>>20&15]+Te[r>>16&15]+Te[r>>12&15]+Te[r>>8&15]+Te[r>>4&15]+Te[r&15]};Yi.prototype.toString=Yi.prototype.hex;Yi.prototype.digest=function(){this.finalize();var n=this.h0,t=this.h1,e=this.h2,i=this.h3,r=this.h4;return[n>>24&255,n>>16&255,n>>8&255,n&255,t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24&255,i>>16&255,i>>8&255,i&255,r>>24&255,r>>16&255,r>>8&255,r&255]};Yi.prototype.array=Yi.prototype.digest;Yi.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(20),t=new DataView(n);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),n};var pp=n=>new Yi(!0).update(n).hex();var n_=(...n)=>pp(n.join("_"));var hp=class{},xE=new Map,kc=class n extends hp{constructor(t){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=t??new Map}lookup(t,e){return Promise.resolve(this.cache.get(n_(t,e))??null)}update(t,e,i){return h(this,null,function*(){this.cache.set(n_(t,e),i)})}static global(){return new n(xE)}};var Pc=class extends $i{},Mc=class extends Pc{static lc_name(){return"StringPromptValue"}constructor(t){super({value:t}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=t}toString(){return this.value}toChatMessages(){return[new Ui(this.value)]}},Rc=class extends Pc{static lc_name(){return"ChatPromptValue"}constructor(t){Array.isArray(t)&&(t={messages:t}),super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=t.messages}toString(){return cs(this.messages)}toChatMessages(){return this.messages}};var o_=rn(a_(),1);var kE=Object.defineProperty,PE=(n,t,e)=>t in n?kE(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,ME=(n,t,e)=>(PE(n,typeof t!="symbol"?t+"":t,e),e);function RE(n,t){let e=Array.from({length:n.length},(i,r)=>({start:r,end:r+1}));for(;e.length>1;){let i=null;for(let r=0;r<e.length-1;r++){let s=n.slice(e[r].start,e[r+1].end),a=t.get(s.join(","));a!=null&&(i==null||a<i[0])&&(i=[a,r])}if(i!=null){let r=i[1];e[r]={start:e[r].start,end:e[r+1].end},e.splice(r+1,1)}else break}return e}function DE(n,t){return n.length===1?[t.get(n.join(","))]:RE(n,t).map(e=>t.get(n.slice(e.start,e.end).join(","))).filter(e=>e!=null)}function NE(n){return n.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var fp=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(n,t){this.patStr=n.pat_str;let e=n.bpe_ranks.split(`
`).filter(Boolean).reduce((i,r)=>{let[s,a,...o]=r.split(" "),l=Number.parseInt(a,10);return o.forEach((u,p)=>i[u]=l+p),i},{});for(let[i,r]of Object.entries(e)){let s=o_.default.toByteArray(i);this.rankMap.set(s.join(","),r),this.textMap.set(r,s)}this.specialTokens=c(c({},n.special_tokens),t),this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((i,[r,s])=>(i[s]=this.textEncoder.encode(r),i),{})}encode(n,t=[],e="all"){let i=new RegExp(this.patStr,"ug"),r=fp.specialTokenRegex(Object.keys(this.specialTokens)),s=[],a=new Set(t==="all"?Object.keys(this.specialTokens):t),o=new Set(e==="all"?Object.keys(this.specialTokens).filter(u=>!a.has(u)):e);if(o.size>0){let u=fp.specialTokenRegex([...o]),p=n.match(u);if(p!=null)throw new Error(`The text contains a special token that is not allowed: ${p[0]}`)}let l=0;for(;;){let u=null,p=l;for(;r.lastIndex=p,u=r.exec(n),!(u==null||a.has(u[0]));)p=u.index+1;let g=u?.index??n.length;for(let x of n.substring(l,g).matchAll(i)){let I=this.textEncoder.encode(x[0]),P=this.rankMap.get(I.join(","));if(P!=null){s.push(P);continue}s.push(...DE(I,this.rankMap))}if(u==null)break;let b=this.specialTokens[u[0]];s.push(b),l=u.index+u[0].length}return s}decode(n){let t=[],e=0;for(let s=0;s<n.length;++s){let a=n[s],o=this.textMap.get(a)??this.inverseSpecialTokens[a];o!=null&&(t.push(o),e+=o.length)}let i=new Uint8Array(e),r=0;for(let s of t)i.set(s,r),r+=s.length;return this.textDecoder.decode(i)}},Nc=fp;ME(Nc,"specialTokenRegex",n=>new RegExp(n.map(t=>NE(t)).join("|"),"g"));function gp(n){switch(n){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":return"o200k_base";default:throw new Error("Unknown model")}}var Fc={},FE=new Fn({});function LE(n){return h(this,null,function*(){return n in Fc||(Fc[n]=FE.fetch(`https://tiktoken.pages.dev/js/${n}.json`).then(t=>t.json()).then(t=>new Nc(t)).catch(t=>{throw delete Fc[n],t})),yield Fc[n]})}function _p(n){return h(this,null,function*(){return LE(gp(n))})}var yp=n=>n.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":n.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":n.startsWith("gpt-4-32k")?"gpt-4-32k":n.startsWith("gpt-4-")?"gpt-4":n.startsWith("gpt-4o")?"gpt-4o":n;var jE=n=>{switch(yp(n)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}};var l_=e=>h(void 0,[e],function*({prompt:n,modelName:t}){let i;try{i=(yield _p(yp(t))).encode(n).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),i=Math.ceil(n.length/4)}return jE(t)-i}),VE=()=>!1,vo=class extends it{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(t){super(t),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=t.verbose??VE(),this.callbacks=t.callbacks,this.tags=t.tags??[],this.metadata=t.metadata??{}}},Ca=class extends vo{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor(r){var s=r,{callbacks:t,callbackManager:e}=s,i=Ee(s,["callbacks","callbackManager"]);super(c({callbacks:t??e},i)),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof i.cache=="object"?this.cache=i.cache:i.cache?this.cache=kc.global():this.cache=void 0,this.caller=new Fn(i??{})}getNumTokens(t){return h(this,null,function*(){if(typeof t!="string")return 0;let e=Math.ceil(t.length/4);if(!this._encoding)try{this._encoding=yield _p("modelName"in this?yp(this.modelName):"gpt2")}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}if(this._encoding)try{e=this._encoding.encode(t).length}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}return e})}static _convertInputToPromptValue(t){return typeof t=="string"?new Mc(t):Array.isArray(t)?new Rc(t.map(ls)):t}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(i){var r=i,{config:t}=r,e=Ee(r,["config"]);let s=v(c(c({},this._identifyingParams()),e),{_type:this._llmType(),_model:this._modelType()});return Object.entries(s).filter(([l,u])=>u!==void 0).map(([l,u])=>`${l}:${JSON.stringify(u)}`).sort().join(",")}serialize(){return v(c({},this._identifyingParams()),{_type:this._llmType(),_model:this._modelType()})}static deserialize(t){return h(this,null,function*(){throw new Error("Use .toJSON() instead")})}};var Xi=class extends it{static lc_name(){return"RunnablePassthrough"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t&&(this.func=t.func)}invoke(t,e){return h(this,null,function*(){let i=Ve(e);return this.func&&(yield this.func(t,i)),this._callWithConfig(r=>Promise.resolve(r),t,i)})}transform(t,e){return ne(this,null,function*(){let i=Ve(e),r,s=!0;try{for(var a=G(this._transformStreamWithConfig(t,g=>g,i)),o,l,u;o=!(l=yield new R(a.next())).done;o=!1){let p=l.value;if(yield p,s)if(r===void 0)r=p;else try{r=Xt(r,p)}catch{r=void 0,s=!1}}}catch{u=[l]}finally{try{o&&(l=a.return)&&(yield new R(l.call(a)))}finally{if(u)throw u[0]}}this.func&&r!==void 0&&(yield new R(this.func(r,i)))})}static assign(t){return new Ia(new Cr({steps:t}))}};function Lc(n){return typeof n?.parse=="function"}var wo=class n extends Ca{constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(t){let[e,i]=super._separateRunnableConfigFromCallOptions(t);return i?.timeout&&!i.signal&&(i.signal=AbortSignal.timeout(i.timeout)),[e,i]}invoke(t,e){return h(this,null,function*(){let i=n._convertInputToPromptValue(t);return(yield this.generatePrompt([i],e,e?.callbacks)).generations[0][0].message})}_streamResponseChunks(t,e,i){return ne(this,null,function*(){throw new Error("Not implemented.")})}_streamIterator(t,e){return ne(this,null,function*(){if(this._streamResponseChunks===n.prototype._streamResponseChunks)yield this.invoke(t,e);else{let l=n._convertInputToPromptValue(t).toChatMessages(),[u,p]=this._separateRunnableConfigFromCallOptions(e),g=c(c({},u.metadata),this.getLsParams(p)),b=yield new R(bt.configure(u.callbacks,this.callbacks,u.tags,this.tags,g,this.metadata,{verbose:this.verbose})),x={options:p,invocation_params:this?.invocationParams(p),batch_size:1},I=yield new R(b?.handleChatModelStart(this.toJSON(),[l],u.runId,void 0,x,void 0,void 0,u.runName)),P;try{try{for(var i=G(this._streamResponseChunks(l,p,I?.[0])),r,s,a;r=!(s=yield new R(i.next())).done;r=!1){let S=s.value;S.message.response_metadata=c(c({},S.generationInfo),S.message.response_metadata),yield S.message,P?P=P.concat(S):P=S}}catch{a=[s]}finally{try{r&&(s=i.return)&&(yield new R(s.call(i)))}finally{if(a)throw a[0]}}}catch(S){throw yield new R(Promise.all((I??[]).map(T=>T?.handleLLMError(S)))),S}yield new R(Promise.all((I??[]).map(S=>S?.handleLLMEnd({generations:[[P]]}))))}})}getLsParams(t){return{ls_model_type:"chat",ls_stop:t.stop}}_generateUncached(t,e,i){return h(this,null,function*(){let r=t.map(T=>T.map(ls)),s=c(c({},i.metadata),this.getLsParams(e)),a=yield bt.configure(i.callbacks,this.callbacks,i.tags,this.tags,s,this.metadata,{verbose:this.verbose}),o={options:e,invocation_params:this?.invocationParams(e),batch_size:1},l=yield a?.handleChatModelStart(this.toJSON(),r,i.runId,void 0,o,void 0,void 0,i.runName),u=[],p=[];if(!!l?.[0].handlers.find(T=>xa(T)||ba(T))&&r.length===1&&this._streamResponseChunks!==n.prototype._streamResponseChunks)try{let T=yield this._streamResponseChunks(r[0],e,l?.[0]),F;try{for(var x=G(T),I,P,S;I=!(P=yield x.next()).done;I=!1){let q=P.value;F===void 0?F=q:F=Xt(F,q)}}catch{S=[P]}finally{try{I&&(P=x.return)&&(yield P.call(x))}finally{if(S)throw S[0]}}if(F===void 0)throw new Error("Received empty response from chat model call.");u.push([F]),yield l?.[0].handleLLMEnd({generations:u,llmOutput:{}})}catch(T){throw yield l?.[0].handleLLMError(T),T}else{let T=yield Promise.allSettled(r.map((F,q)=>this._generate(F,v(c({},e),{promptIndex:q}),l?.[q])));yield Promise.all(T.map((F,q)=>h(this,null,function*(){if(F.status==="fulfilled"){let X=F.value;for(let K of X.generations)K.message.response_metadata=c(c({},K.generationInfo),K.message.response_metadata);return X.generations.length===1&&(X.generations[0].message.response_metadata=c(c({},X.llmOutput),X.generations[0].message.response_metadata)),u[q]=X.generations,p[q]=X.llmOutput,l?.[q]?.handleLLMEnd({generations:[X.generations],llmOutput:X.llmOutput})}else return yield l?.[q]?.handleLLMError(F.reason),Promise.reject(F.reason)})))}let b={generations:u,llmOutput:p.length?this._combineLLMOutput?.(...p):void 0};return Object.defineProperty(b,wa,{value:l?{runIds:l?.map(T=>T.runId)}:void 0,configurable:!0}),b})}_generateCached(a){return h(this,arguments,function*({messages:t,cache:e,llmStringKey:i,parsedOptions:r,handledOptions:s}){let o=t.map(T=>T.map(ls)),l=c(c({},s.metadata),this.getLsParams(r)),u=yield bt.configure(s.callbacks,this.callbacks,s.tags,this.tags,l,this.metadata,{verbose:this.verbose}),p={options:r,invocation_params:this?.invocationParams(r),batch_size:1,cached:!0},g=yield u?.handleChatModelStart(this.toJSON(),o,s.runId,void 0,p,void 0,void 0,s.runName),b=[],I=(yield Promise.allSettled(o.map((T,F)=>h(this,null,function*(){let q=n._convertInputToPromptValue(T).toString(),X=yield e.lookup(q,i);return X==null&&b.push(F),X})))).map((T,F)=>({result:T,runManager:g?.[F]})).filter(({result:T})=>T.status==="fulfilled"&&T.value!=null||T.status==="rejected"),P=[];yield Promise.all(I.map((X,K)=>h(this,[X,K],function*({result:T,runManager:F},q){if(T.status==="fulfilled"){let J=T.value;return P[q]=J,J.length&&(yield F?.handleLLMNewToken(J[0].text)),F?.handleLLMEnd({generations:[J]})}else return yield F?.handleLLMError(T.reason),Promise.reject(T.reason)})));let S={generations:P,missingPromptIndices:b};return Object.defineProperty(S,wa,{value:g?{runIds:g?.map(T=>T.runId)}:void 0,configurable:!0}),S})}generate(t,e,i){return h(this,null,function*(){let r;Array.isArray(e)?r={stop:e}:r=e;let s=t.map(x=>x.map(ls)),[a,o]=this._separateRunnableConfigFromCallOptions(r);if(a.callbacks=a.callbacks??i,!this.cache)return this._generateUncached(s,o,a);let{cache:l}=this,u=this._getSerializedCacheKeyParametersForCall(o),{generations:p,missingPromptIndices:g}=yield this._generateCached({messages:s,cache:l,llmStringKey:u,parsedOptions:o,handledOptions:a}),b={};if(g.length>0){let x=yield this._generateUncached(g.map(I=>s[I]),o,a);yield Promise.all(x.generations.map((I,P)=>h(this,null,function*(){let S=g[P];p[S]=I;let T=n._convertInputToPromptValue(s[S]).toString();return l.update(T,u,I)}))),b=x.llmOutput??{}}return{generations:p,llmOutput:b}})}invocationParams(t){return{}}_modelType(){return"base_chat_model"}serialize(){return v(c({},this.invocationParams()),{_type:this._llmType(),_model:this._modelType()})}generatePrompt(t,e,i){return h(this,null,function*(){let r=t.map(s=>s.toChatMessages());return this.generate(r,e,i)})}call(t,e,i){return h(this,null,function*(){return(yield this.generate([t.map(ls)],e,i)).generations[0][0].message})}callPrompt(t,e,i){return h(this,null,function*(){let r=t.toChatMessages();return this.call(r,e,i)})}predictMessages(t,e,i){return h(this,null,function*(){return this.call(t,e,i)})}predict(t,e,i){return h(this,null,function*(){let r=new Ui(t),s=yield this.call([r],e,i);if(typeof s.content!="string")throw new Error("Cannot use predict when output is not a string.");return s.content})}withStructuredOutput(t,e){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');let i=t,r=e?.name,s=i.description??"A function available to call.",a=e?.method,o=e?.includeRaw;if(a==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let l=r??"extract",u;Lc(i)?u=[{type:"function",function:{name:l,description:s,parameters:Qi(i)}}]:("name"in i&&(l=i.name),u=[{type:"function",function:{name:l,description:s,parameters:i}}]);let p=this.bindTools(u),g=Tr.from(P=>{if(!P.tool_calls||P.tool_calls.length===0)throw new Error("No tool calls found in the response.");let S=P.tool_calls.find(T=>T.name===l);if(!S)throw new Error(`No tool call found with name ${l}.`);return S.args});if(!o)return p.pipe(g).withConfig({runName:"StructuredOutput"});let b=Xi.assign({parsed:(P,S)=>g.invoke(P.raw,S)}),x=Xi.assign({parsed:()=>null}),I=b.withFallbacks({fallbacks:[x]});return jn.from([{raw:p},I]).withConfig({runName:"StructuredOutputRunnable"})}};function c_(n){return n!==void 0&&Array.isArray(n.lc_namespace)}var xo=class extends it{parseResultWithPrompt(t,e,i){return this.parseResult(t,i)}_baseMessageToString(t){return typeof t.content=="string"?t.content:this._baseMessageContentToString(t.content)}_baseMessageContentToString(t){return JSON.stringify(t)}invoke(t,e){return h(this,null,function*(){return typeof t=="string"?this._callWithConfig((i,r)=>h(this,null,function*(){return this.parseResult([{text:i}],r?.callbacks)}),t,v(c({},e),{runType:"parser"})):this._callWithConfig((i,r)=>h(this,null,function*(){return this.parseResult([{message:i,text:this._baseMessageToString(i)}],r?.callbacks)}),t,v(c({},e),{runType:"parser"}))})}};var vs=class extends Error{constructor(t,e,i,r=!1){if(super(t),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=e,this.observation=i,this.sendToLLM=r,r&&(i===void 0||e===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true")}};var p$=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");var $E=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,BE=[0,31,28,31,30,31,30,31,31,30,31,30,31],UE=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,HE=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,qE=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,KE=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,GE=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,ZE=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,WE=/^(?:\/(?:[^~/]|~0|~1)*)*$/,QE=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,JE=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,YE=/^\d\d\d\d-[0-1]\d-[0-3]\d$/,XE=/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,e2=/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,t2=/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,i2=n=>{if(n[0]==='"')return!1;let[t,e,...i]=n.split("@");return!t||!e||i.length!==0||t.length>64||e.length>253||t[0]==="."||t.endsWith(".")||t.includes("..")||!/^[a-z0-9.-]+$/i.test(e)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t)?!1:e.split(".").every(r=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(r))},n2=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,r2=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,s2=n=>n.length>1&&n.length<80&&(/^P\d+([.,]\d+)?W$/.test(n)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(n)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(n));function di(n){return n.test.bind(n)}var a2={date:u_,time:d_.bind(void 0,!1),"date-time":u2,duration:s2,uri:h2,"uri-reference":di(qE),"uri-template":di(KE),url:di(GE),email:i2,hostname:di(HE),ipv4:di(n2),ipv6:di(r2),regex:f2,uuid:di(ZE),"json-pointer":di(WE),"json-pointer-uri-fragment":di(QE),"relative-json-pointer":di(JE)},o2=v(c({},a2),{date:di(YE),time:di(XE),"date-time":di(e2),"uri-reference":di(t2)});function l2(n){return n%4===0&&(n%100!==0||n%400===0)}function u_(n){let t=n.match($E);if(!t)return!1;let e=+t[1],i=+t[2],r=+t[3];return i>=1&&i<=12&&r>=1&&r<=(i==2&&l2(e)?29:BE[i])}function d_(n,t){let e=t.match(UE);if(!e)return!1;let i=+e[1],r=+e[2],s=+e[3],a=!!e[5];return(i<=23&&r<=59&&s<=59||i==23&&r==59&&s==60)&&(!n||a)}var c2=/t|\s/i;function u2(n){let t=n.split(c2);return t.length==2&&u_(t[0])&&d_(!0,t[1])}var d2=/\/|:/,p2=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function h2(n){return d2.test(n)&&p2.test(n)}var m2=/[^\\]\\Z/;function f2(n){if(m2.test(n))return!1;try{return new RegExp(n),!0}catch{return!1}}function Vn(n){let{azureOpenAIApiDeploymentName:t,azureOpenAIApiInstanceName:e,azureOpenAIApiKey:i,azureOpenAIBasePath:r,baseURL:s,azureADTokenProvider:a}=n;if((i||a)&&r&&t)return`${r}/${t}`;if(i||a){if(!e)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!t)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${e}.openai.azure.com/openai/deployments/${t}`}return s}function ws(n){let t;return n.constructor.name===Gm.name?(t=new Error(n.message),t.name="TimeoutError"):n.constructor.name===Zm.name?(t=new Error(n.message),t.name="AbortError"):t=n,t}var Io=class n extends Ca{constructor(i){var r=i,{concurrency:t}=r,e=Ee(r,["concurrency"]);super(t?c({maxConcurrency:t},e):e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]})}invoke(t,e){return h(this,null,function*(){let i=n._convertInputToPromptValue(t);return(yield this.generatePrompt([i],e,e?.callbacks)).generations[0][0].text})}_streamResponseChunks(t,e,i){return ne(this,null,function*(){throw new Error("Not implemented.")})}_separateRunnableConfigFromCallOptions(t){let[e,i]=super._separateRunnableConfigFromCallOptions(t);return i?.timeout&&!i.signal&&(i.signal=AbortSignal.timeout(i.timeout)),[e,i]}_streamIterator(t,e){return ne(this,null,function*(){if(this._streamResponseChunks===n.prototype._streamResponseChunks)yield this.invoke(t,e);else{let o=n._convertInputToPromptValue(t),[l,u]=this._separateRunnableConfigFromCallOptions(e),p=yield new R(bt.configure(l.callbacks,this.callbacks,l.tags,this.tags,l.metadata,this.metadata,{verbose:this.verbose})),g={options:u,invocation_params:this?.invocationParams(u),batch_size:1},b=yield new R(p?.handleLLMStart(this.toJSON(),[o.toString()],l.runId,void 0,g,void 0,void 0,l.runName)),x=new Mi({text:""});try{try{for(var i=G(this._streamResponseChunks(t.toString(),u,b?.[0])),r,s,a;r=!(s=yield new R(i.next())).done;r=!1){let I=s.value;x?x=x.concat(I):x=I,typeof I.text=="string"&&(yield I.text)}}catch{a=[s]}finally{try{r&&(s=i.return)&&(yield new R(s.call(i)))}finally{if(a)throw a[0]}}}catch(I){throw yield new R(Promise.all((b??[]).map(P=>P?.handleLLMError(I)))),I}yield new R(Promise.all((b??[]).map(I=>I?.handleLLMEnd({generations:[[x]]}))))}})}generatePrompt(t,e,i){return h(this,null,function*(){let r=t.map(s=>s.toString());return this.generate(r,e,i)})}invocationParams(t){return{}}_flattenLLMResult(t){let e=[];for(let i=0;i<t.generations.length;i+=1){let r=t.generations[i];if(i===0)e.push({generations:[r],llmOutput:t.llmOutput});else{let s=t.llmOutput?v(c({},t.llmOutput),{tokenUsage:{}}):void 0;e.push({generations:[r],llmOutput:s})}}return e}_generateUncached(t,e,i){return h(this,null,function*(){let r=yield bt.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),s={options:e,invocation_params:this?.invocationParams(e),batch_size:t.length},a=yield r?.handleLLMStart(this.toJSON(),t,i.runId,void 0,s,void 0,void 0,i?.runName),o=!!a?.[0].handlers.find(I=>xa(I)||ba(I)),l;if(o&&t.length===1&&this._streamResponseChunks!==n.prototype._streamResponseChunks)try{let I=yield this._streamResponseChunks(t[0],e,a?.[0]),P;try{for(var p=G(I),g,b,x;g=!(b=yield p.next()).done;g=!1){let S=b.value;P===void 0?P=S:P=Xt(P,S)}}catch{x=[b]}finally{try{g&&(b=p.return)&&(yield b.call(p))}finally{if(x)throw x[0]}}if(P===void 0)throw new Error("Received empty response from chat model call.");l={generations:[[P]],llmOutput:{}},yield a?.[0].handleLLMEnd(l)}catch(I){throw yield a?.[0].handleLLMError(I),I}else{try{l=yield this._generate(t,e,a?.[0])}catch(P){throw yield Promise.all((a??[]).map(S=>S?.handleLLMError(P))),P}let I=this._flattenLLMResult(l);yield Promise.all((a??[]).map((P,S)=>P?.handleLLMEnd(I[S])))}let u=a?.map(I=>I.runId)||void 0;return Object.defineProperty(l,wa,{value:u?{runIds:u}:void 0,configurable:!0}),l})}_generateCached(o){return h(this,arguments,function*({prompts:t,cache:e,llmStringKey:i,parsedOptions:r,handledOptions:s,runId:a}){let l=yield bt.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),u={options:r,invocation_params:this?.invocationParams(r),batch_size:t.length,cached:!0},p=yield l?.handleLLMStart(this.toJSON(),t,a,void 0,u,void 0,void 0,s?.runName),g=[],x=(yield Promise.allSettled(t.map((S,T)=>h(this,null,function*(){let F=yield e.lookup(S,i);return F==null&&g.push(T),F})))).map((S,T)=>({result:S,runManager:p?.[T]})).filter(({result:S})=>S.status==="fulfilled"&&S.value!=null||S.status==="rejected"),I=[];yield Promise.all(x.map((q,X)=>h(this,[q,X],function*({result:S,runManager:T},F){if(S.status==="fulfilled"){let K=S.value;return I[F]=K,K.length&&(yield T?.handleLLMNewToken(K[0].text)),T?.handleLLMEnd({generations:[K]})}else return yield T?.handleLLMError(S.reason),Promise.reject(S.reason)})));let P={generations:I,missingPromptIndices:g};return Object.defineProperty(P,wa,{value:p?{runIds:p?.map(S=>S.runId)}:void 0,configurable:!0}),P})}generate(t,e,i){return h(this,null,function*(){if(!Array.isArray(t))throw new Error("Argument 'prompts' is expected to be a string[]");let r;Array.isArray(e)?r={stop:e}:r=e;let[s,a]=this._separateRunnableConfigFromCallOptions(r);if(s.callbacks=s.callbacks??i,!this.cache)return this._generateUncached(t,a,s);let{cache:o}=this,l=this._getSerializedCacheKeyParametersForCall(a),{generations:u,missingPromptIndices:p}=yield this._generateCached({prompts:t,cache:o,llmStringKey:l,parsedOptions:a,handledOptions:s,runId:s.runId}),g={};if(p.length>0){let b=yield this._generateUncached(p.map(x=>t[x]),a,s);yield Promise.all(b.generations.map((x,I)=>h(this,null,function*(){let P=p[I];return u[P]=x,o.update(t[P],l,x)}))),g=b.llmOutput??{}}return{generations:u,llmOutput:g}})}call(t,e,i){return h(this,null,function*(){let{generations:r}=yield this.generate([t],e,i);return r[0][0].text})}predict(t,e,i){return h(this,null,function*(){return this.call(t,e,i)})}predictMessages(t,e,i){return h(this,null,function*(){let r=cs(t),s=yield this.call(r,e,i);return new Oi(s)})}_identifyingParams(){return{}}serialize(){return v(c({},this._identifyingParams()),{_type:this._llmType(),_model:this._modelType()})}_modelType(){return"base_llm"}},jc=class extends Io{_generate(t,e,i){return h(this,null,function*(){return{generations:yield Promise.all(t.map((s,a)=>this._call(s,v(c({},e),{promptIndex:a}),i).then(o=>[{text:o}])))}})}};var Co=(n,t)=>n.reduce((e,i,r)=>{let s=Math.floor(r/t),a=e[s]||[];return e[s]=a.concat([i]),e},[]);var Vc=class extends jc{static lc_name(){return"OpenAIChat"}get callKeys(){return[...super.callKeys,"options","promptIndex"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(t,e){if(super(t??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"prefixMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=t?.openAIApiKey??Se("OPENAI_API_KEY"),this.azureOpenAIApiKey=t?.azureOpenAIApiKey??Se("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=t?.azureOpenAIApiInstanceName??Se("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(t?.azureOpenAIApiCompletionsDeploymentName||t?.azureOpenAIApiDeploymentName)??(Se("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME")||Se("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureOpenAIApiVersion=t?.azureOpenAIApiVersion??Se("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=t?.azureOpenAIBasePath??Se("AZURE_OPENAI_BASE_PATH"),this.organization=t?.configuration?.organization??Se("OPENAI_ORGANIZATION"),this.modelName=t?.modelName??this.modelName,this.prefixMessages=t?.prefixMessages??this.prefixMessages,this.modelKwargs=t?.modelKwargs??{},this.timeout=t?.timeout,this.temperature=t?.temperature??this.temperature,this.topP=t?.topP??this.topP,this.frequencyPenalty=t?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=t?.presencePenalty??this.presencePenalty,this.n=t?.n??this.n,this.logitBias=t?.logitBias,this.maxTokens=t?.maxTokens,this.stop=t?.stop,this.user=t?.user,this.streaming=t?.streaming??!1,this.n>1)throw new Error("Cannot use n > 1 in OpenAIChat LLM. Use ChatOpenAI Chat Model instead.");if(this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");this.openAIApiKey=this.openAIApiKey??""}this.clientConfig=c(c({apiKey:this.openAIApiKey,organization:this.organization,baseURL:e?.basePath??t?.configuration?.basePath,dangerouslyAllowBrowser:!0,defaultHeaders:e?.baseOptions?.headers??t?.configuration?.baseOptions?.headers,defaultQuery:e?.baseOptions?.params??t?.configuration?.baseOptions?.params},e),t?.configuration)}invocationParams(t){return c({model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,logit_bias:this.logitBias,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,stop:t?.stop??this.stop,user:this.user,stream:this.streaming},this.modelKwargs)}_identifyingParams(){return c(c({model_name:this.modelName},this.invocationParams()),this.clientConfig)}identifyingParams(){return c(c({model_name:this.modelName},this.invocationParams()),this.clientConfig)}formatMessages(t){let e={role:"user",content:t};return this.prefixMessages?[...this.prefixMessages,e]:[e]}_streamResponseChunks(t,e,i){return ne(this,null,function*(){let r=v(c({},this.invocationParams(e)),{messages:this.formatMessages(t),stream:!0}),s=yield new R(this.completionWithRetry(r,e));try{for(var a=G(s),o,l,u;o=!(l=yield new R(a.next())).done;o=!1){let p=l.value;let g=p?.choices[0];if(!g)continue;let{delta:b}=g,x=new Mi({text:b.content??""});yield x;let I={prompt:e.promptIndex??0,completion:g.index??0};i?.handleLLMNewToken(x.text??"",I)}}catch{u=[l]}finally{try{o&&(l=a.return)&&(yield new R(l.call(a)))}finally{if(u)throw u[0]}}if(e.signal?.aborted)throw new Error("AbortError")})}_call(t,e,i){return h(this,null,function*(){let r=this.invocationParams(e);if(r.stream){let u=yield this._streamResponseChunks(t,e,i),p;try{for(var s=G(u),a,o,l;a=!(o=yield s.next()).done;a=!1){let g=o.value;p===void 0?p=g:p=p.concat(g)}}catch{l=[o]}finally{try{a&&(o=s.return)&&(yield o.call(s))}finally{if(l)throw l[0]}}return p?.text??""}else return(yield this.completionWithRetry(v(c({},r),{stream:!1,messages:this.formatMessages(t)}),c({signal:e.signal},e.options)))?.choices[0]?.message?.content??""})}completionWithRetry(t,e){return h(this,null,function*(){let i=this._getClientOptions(e);return this.caller.call(()=>h(this,null,function*(){try{return yield this.client.chat.completions.create(t,i)}catch(r){throw ws(r)}}))})}_getClientOptions(t){if(!this.client){let i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL},r=Vn(i),s=v(c({},this.clientConfig),{baseURL:r,timeout:this.timeout,maxRetries:0});s.baseURL||delete s.baseURL,this.client=new Ye(s)}let e=c(c({},this.clientConfig),t);return this.azureOpenAIApiKey&&(e.headers=c({"api-key":this.azureOpenAIApiKey},e.headers),e.query=c({"api-version":this.azureOpenAIApiVersion},e.query)),e}_llmType(){return"openai"}};var To=class extends Io{static lc_name(){return"OpenAI"}get callKeys(){return[...super.callKeys,"options"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(t,e){let i=t?.model??t?.modelName;if((i?.startsWith("gpt-3.5-turbo")||i?.startsWith("gpt-4"))&&!i?.includes("-instruct"))return new Vc(t,e);if(super(t??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:256}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"bestOf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo-instruct"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo-instruct"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i=i??this.model,this.openAIApiKey=t?.apiKey??t?.openAIApiKey??Se("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.azureOpenAIApiKey=t?.azureOpenAIApiKey??Se("AZURE_OPENAI_API_KEY"),this.azureADTokenProvider=t?.azureADTokenProvider??void 0,!this.azureOpenAIApiKey&&!this.apiKey&&!this.azureADTokenProvider)throw new Error("OpenAI or Azure OpenAI API key or Token Provider not found");if(this.azureOpenAIApiInstanceName=t?.azureOpenAIApiInstanceName??Se("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(t?.azureOpenAIApiCompletionsDeploymentName||t?.azureOpenAIApiDeploymentName)??(Se("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME")||Se("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureOpenAIApiVersion=t?.azureOpenAIApiVersion??Se("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=t?.azureOpenAIBasePath??Se("AZURE_OPENAI_BASE_PATH"),this.organization=t?.configuration?.organization??Se("OPENAI_ORGANIZATION"),this.modelName=i,this.model=i,this.modelKwargs=t?.modelKwargs??{},this.batchSize=t?.batchSize??this.batchSize,this.timeout=t?.timeout,this.temperature=t?.temperature??this.temperature,this.maxTokens=t?.maxTokens??this.maxTokens,this.topP=t?.topP??this.topP,this.frequencyPenalty=t?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=t?.presencePenalty??this.presencePenalty,this.n=t?.n??this.n,this.bestOf=t?.bestOf??this.bestOf,this.logitBias=t?.logitBias,this.stop=t?.stopSequences??t?.stop,this.stopSequences=t?.stopSequences,this.user=t?.user,this.streaming=t?.streaming??!1,this.streaming&&this.bestOf&&this.bestOf>1)throw new Error("Cannot stream results when bestOf > 1");if(this.azureOpenAIApiKey||this.azureADTokenProvider){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");this.apiKey=this.apiKey??""}this.clientConfig=c(c({apiKey:this.apiKey,organization:this.organization,baseURL:e?.basePath??t?.configuration?.basePath,dangerouslyAllowBrowser:!0,defaultHeaders:e?.baseOptions?.headers??t?.configuration?.baseOptions?.headers,defaultQuery:e?.baseOptions?.params??t?.configuration?.baseOptions?.params},e),t?.configuration)}invocationParams(t){return c({model:this.model,temperature:this.temperature,max_tokens:this.maxTokens,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,best_of:this.bestOf,logit_bias:this.logitBias,stop:t?.stop??this.stopSequences,user:this.user,stream:this.streaming},this.modelKwargs)}_identifyingParams(){return c(c({model_name:this.model},this.invocationParams()),this.clientConfig)}identifyingParams(){return this._identifyingParams()}_generate(t,e,i){return h(this,null,function*(){let r=Co(t,this.batchSize),s=[],a={},o=this.invocationParams(e);if(o.max_tokens===-1){if(t.length!==1)throw new Error("max_tokens set to -1 not supported for multiple inputs");o.max_tokens=yield l_({prompt:t[0],modelName:this.model})}for(let u=0;u<r.length;u+=1){let p=o.stream?yield h(this,null,function*(){let I=[],P,S=yield this.completionWithRetry(v(c({},o),{stream:!0,prompt:r[u]}),e);try{for(var T=G(S),F,q,X;F=!(q=yield T.next()).done;F=!1){let K=q.value;P||(P={id:K.id,object:K.object,created:K.created,model:K.model});for(let J of K.choices){if(!I[J.index])I[J.index]=J;else{let _e=I[J.index];_e.text+=J.text,_e.finish_reason=J.finish_reason,_e.logprobs=J.logprobs}i?.handleLLMNewToken(J.text,{prompt:Math.floor(J.index/this.n),completion:J.index%this.n})}}}catch{X=[q]}finally{try{F&&(q=T.return)&&(yield q.call(T))}finally{if(X)throw X[0]}}if(e.signal?.aborted)throw new Error("AbortError");return v(c({},P),{choices:I})}):yield this.completionWithRetry(v(c({},o),{stream:!1,prompt:r[u]}),c({signal:e.signal},e.options));s.push(...p.choices);let{completion_tokens:g,prompt_tokens:b,total_tokens:x}=p.usage?p.usage:{completion_tokens:void 0,prompt_tokens:void 0,total_tokens:void 0};g&&(a.completionTokens=(a.completionTokens??0)+g),b&&(a.promptTokens=(a.promptTokens??0)+b),x&&(a.totalTokens=(a.totalTokens??0)+x)}return{generations:Co(s,this.n).map(u=>u.map(p=>({text:p.text??"",generationInfo:{finishReason:p.finish_reason,logprobs:p.logprobs}}))),llmOutput:{tokenUsage:a}}})}_streamResponseChunks(t,e,i){return ne(this,null,function*(){let r=v(c({},this.invocationParams(e)),{prompt:t,stream:!0}),s=yield new R(this.completionWithRetry(r,e));try{for(var a=G(s),o,l,u;o=!(l=yield new R(a.next())).done;o=!1){let p=l.value;let g=p?.choices[0];if(!g)continue;let b=new Mi({text:g.text,generationInfo:{finishReason:g.finish_reason}});yield b,i?.handleLLMNewToken(b.text??"")}}catch{u=[l]}finally{try{o&&(l=a.return)&&(yield new R(l.call(a)))}finally{if(u)throw u[0]}}if(e.signal?.aborted)throw new Error("AbortError")})}completionWithRetry(t,e){return h(this,null,function*(){let i=this._getClientOptions(e);return this.caller.call(()=>h(this,null,function*(){try{return yield this.client.completions.create(t,i)}catch(r){throw ws(r)}}))})}_getClientOptions(t){if(!this.client){let i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL},r=Vn(i),s=v(c({},this.clientConfig),{baseURL:r,timeout:this.timeout,maxRetries:0});s.baseURL||delete s.baseURL,this.client=new Ye(s)}let e=c(c({},this.clientConfig),t);return this.azureOpenAIApiKey&&(e.headers=c({"api-key":this.azureOpenAIApiKey},e.headers),e.query=c({"api-version":this.azureOpenAIApiVersion},e.query)),e}_llmType(){return"openai"}};var bp=class extends Error{constructor(t,e){super(t),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=e}},vp=class extends vo{get lc_namespace(){return["langchain","tools"]}constructor(t){super(t??{}),Object.defineProperty(this,"returnDirect",{enumerable:!0,configurable:!0,writable:!0,value:!1})}invoke(t,e){return h(this,null,function*(){return this.call(t,Ve(e))})}call(t,e,i){return h(this,null,function*(){let r;try{r=yield this.schema.parseAsync(t)}catch{throw new bp("Received tool input did not match expected schema",JSON.stringify(t))}let s=hg(e),o=yield(yield bt.configure(s.callbacks,this.callbacks,s.tags||i,this.tags,s.metadata,this.metadata,{verbose:this.verbose}))?.handleToolStart(this.toJSON(),typeof r=="string"?r:JSON.stringify(r),s.runId,void 0,void 0,void 0,s.runName);delete s.runId;let l;try{l=yield this._call(r,o,s)}catch(u){throw yield o?.handleToolError(u),u}return yield o?.handleToolEnd(l),l})}},zc=class extends vp{constructor(t){super(t),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:fa.object({input:fa.string().optional()}).transform(e=>e.input)})}call(t,e){return super.call(typeof t=="string"||!t?{input:t}:t,e)}};var wp=class extends zc{static lc_name(){return"DallEAPIWrapper"}constructor(t){super(t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:"A wrapper around OpenAI DALL-E API. Useful for when you need to generate images from a text description. Input should be an image description."}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"dall-e-3"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:"vivid"}),Object.defineProperty(this,"quality",{enumerable:!0,configurable:!0,writable:!0,value:"standard"}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:"1024x1024"}),Object.defineProperty(this,"responseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"url"}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let e=t?.apiKey??t?.openAIApiKey??Se("OPENAI_API_KEY"),i=t?.organization??Se("OPENAI_ORGANIZATION"),r={apiKey:e,organization:i,dangerouslyAllowBrowser:!0};this.client=new Ye(r),this.model=t?.model??t?.modelName??this.model,this.style=t?.style??this.style,this.quality=t?.quality??this.quality,this.n=t?.n??this.n,this.size=t?.size??this.size,this.responseFormat=t?.responseFormat??this.responseFormat,this.user=t?.user}_call(t){return h(this,null,function*(){let e=yield this.client.images.generate({model:this.model,prompt:t,n:this.n,size:this.size,response_format:this.responseFormat,style:this.style,quality:this.quality,user:this.user}),i="";return this.responseFormat==="url"?[i]=e.data.map(r=>r.url).filter(r=>r!=="undefined"):[i]=e.data.map(r=>r.b64_json).filter(r=>r!=="undefined"),i})}};Object.defineProperty(wp,"toolName",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"});var m_=["user","model","function","system"];var Ip=function(n){return n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n}(Ip||{});var si=class extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}},Sr=class extends si{constructor(t,e){super(t),this.response=e}};var x2="https://generativelanguage.googleapis.com",I2="v1beta",C2="0.7.1",T2="genai-js",Ta=function(n){return n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents",n}(Ta||{}),Bc=class{constructor(t,e,i,r,s){this.model=t,this.task=e,this.apiKey=i,this.stream=r,this.requestOptions=s}toString(){var t,e;let i=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||I2,s=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||x2}/${i}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}};function S2(n){let t=[];return n?.apiClient&&t.push(n.apiClient),t.push(`${T2}/${C2}`),t.join(" ")}function E2(n){return h(this,null,function*(){let t=new Headers;return t.append("Content-Type","application/json"),t.append("x-goog-api-client",S2(n.requestOptions)),t.append("x-goog-api-key",n.apiKey),t})}function O2(n,t,e,i,r,s){return h(this,null,function*(){let a=new Bc(n,t,e,i,s);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},k2(s)),{method:"POST",headers:yield E2(a),body:r})}})}function Oo(n,t,e,i,r,s){return h(this,null,function*(){return A2(n,t,e,i,r,s,fetch)})}function A2(o,l,u,p,g,b){return h(this,arguments,function*(n,t,e,i,r,s,a=fetch){let x=new Bc(n,t,e,i,s),I;try{let P=yield O2(n,t,e,i,r,s);if(I=yield a(P.url,P.fetchOptions),!I.ok){let S="";try{let T=yield I.json();S=T.error.message,T.error.details&&(S+=` ${JSON.stringify(T.error.details)}`)}catch{}throw new Error(`[${I.status} ${I.statusText}] ${S}`)}}catch(P){let S=new si(`Error fetching from ${x.toString()}: ${P.message}`);throw S.stack=P.stack,S}return I})}function k2(n){let t={};if(n?.timeout>=0){let e=new AbortController,i=e.signal;setTimeout(()=>e.abort(),n.timeout),t.signal=i}return t}function Sp(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),$c(n.candidates[0]))throw new Sr(`${Er(n)}`,n);return P2(n)}else if(n.promptFeedback)throw new Sr(`Text not available. ${Er(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$c(n.candidates[0]))throw new Sr(`${Er(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),f_(n)[0]}else if(n.promptFeedback)throw new Sr(`Function call not available. ${Er(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$c(n.candidates[0]))throw new Sr(`${Er(n)}`,n);return f_(n)}else if(n.promptFeedback)throw new Sr(`Function call not available. ${Er(n)}`,n)},n}function P2(n){var t,e,i,r;return!((r=(i=(e=(t=n.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0?void 0:e.parts)===null||i===void 0?void 0:i[0])===null||r===void 0)&&r.text?n.candidates[0].content.parts.map(({text:s})=>s).join(""):""}function f_(n){var t,e,i,r;let s=[];if(!((e=(t=n.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(let a of(r=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)a.functionCall&&s.push(a.functionCall);if(s.length>0)return s}var M2=[Ip.RECITATION,Ip.SAFETY];function $c(n){return!!n.finishReason&&M2.includes(n.finishReason)}function Er(n){var t,e,i;let r="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)r+="Response was blocked",!((t=n.promptFeedback)===null||t===void 0)&&t.blockReason&&(r+=` due to ${n.promptFeedback.blockReason}`),!((e=n.promptFeedback)===null||e===void 0)&&e.blockReasonMessage&&(r+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){let s=n.candidates[0];$c(s)&&(r+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(r+=`: ${s.finishMessage}`))}return r}function So(n){return this instanceof So?(this.v=n,this):new So(n)}function R2(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(b){i[b]&&(r[b]=function(x){return new Promise(function(I,P){s.push([b,x,I,P])>1||o(b,x)})})}function o(b,x){try{l(i[b](x))}catch(I){g(s[0][3],I)}}function l(b){b.value instanceof So?Promise.resolve(b.value.v).then(u,p):g(s[0][2],b)}function u(b){o("next",b)}function p(b){o("throw",b)}function g(b,x){b(x),s.shift(),s.length&&o(s[0][0],s[0][1])}}var g_=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function D2(n){let t=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),e=L2(t),[i,r]=e.tee();return{stream:F2(i),response:N2(r)}}function N2(n){return h(this,null,function*(){let t=[],e=n.getReader();for(;;){let{done:i,value:r}=yield e.read();if(i)return Sp(j2(t));t.push(r)}})}function F2(n){return R2(this,arguments,function*(){let e=n.getReader();for(;;){let{value:i,done:r}=yield So(e.read());if(r)break;yield yield So(Sp(i))}})}function L2(n){let t=n.getReader();return new ReadableStream({start(i){let r="";return s();function s(){return t.read().then(({value:a,done:o})=>{if(o){if(r.trim()){i.error(new si("Failed to parse stream"));return}i.close();return}r+=a;let l=r.match(g_),u;for(;l;){try{u=JSON.parse(l[1])}catch{i.error(new si(`Error parsing JSON response: "${l[1]}"`));return}i.enqueue(u),r=r.substring(l[0].length),l=r.match(g_)}return s()})}}})}function j2(n){let t=n[n.length-1],e={promptFeedback:t?.promptFeedback};for(let i of n)if(i.candidates)for(let r of i.candidates){let s=r.index;if(e.candidates||(e.candidates=[]),e.candidates[s]||(e.candidates[s]={index:r.index}),e.candidates[s].citationMetadata=r.citationMetadata,e.candidates[s].finishReason=r.finishReason,e.candidates[s].finishMessage=r.finishMessage,e.candidates[s].safetyRatings=r.safetyRatings,r.content&&r.content.parts){e.candidates[s].content||(e.candidates[s].content={role:r.content.role||"user",parts:[]});let a={};for(let o of r.content.parts)o.text&&(a.text=o.text),o.functionCall&&(a.functionCall=o.functionCall),Object.keys(a).length===0&&(a.text=""),e.candidates[s].content.parts.push(a)}}return e}function v_(n,t,e,i){return h(this,null,function*(){let r=yield Oo(t,Ta.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(e),i);return D2(r)})}function w_(n,t,e,i){return h(this,null,function*(){let s=yield(yield Oo(t,Ta.GENERATE_CONTENT,n,!1,JSON.stringify(e),i)).json();return{response:Sp(s)}})}function Uc(n){let t=[];if(typeof n=="string")t=[{text:n}];else for(let e of n)typeof e=="string"?t.push({text:e}):t.push(e);return V2(t)}function V2(n){let t={role:"user",parts:[]},e={role:"function",parts:[]},i=!1,r=!1;for(let s of n)"functionResponse"in s?(e.parts.push(s),r=!0):(t.parts.push(s),i=!0);if(i&&r)throw new si("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new si("No content is provided for sending chat message.");return i?t:e}function xp(n){return n.contents?n:{contents:[Uc(n)]}}function z2(n){return typeof n=="string"||Array.isArray(n)?{content:Uc(n)}:n}var __=["text","inlineData","functionCall","functionResponse"],$2={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall"],system:["text"]},y_={user:["model"],function:["model"],model:["user","function"],system:[]};function B2(n){let t;for(let e of n){let{role:i,parts:r}=e;if(!t&&i!=="user")throw new si(`First content should be with role 'user', got ${i}`);if(!m_.includes(i))throw new si(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(m_)}`);if(!Array.isArray(r))throw new si("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new si("Each Content should have at least one part");let s={text:0,inlineData:0,functionCall:0,functionResponse:0};for(let o of r)for(let l of __)l in o&&(s[l]+=1);let a=$2[i];for(let o of __)if(!a.includes(o)&&s[o]>0)throw new si(`Content with role '${i}' can't contain '${o}' part`);if(t&&!y_[i].includes(t.role))throw new si(`Content with role '${i}' can't follow '${t.role}'. Valid previous roles: ${JSON.stringify(y_)}`);t=e}}var b_="SILENT_ERROR",Cp=class{constructor(t,e,i,r){this.model=e,this.params=i,this.requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,i?.history&&(B2(i.history),this._history=i.history)}getHistory(){return h(this,null,function*(){return yield this._sendPromise,this._history})}sendMessage(t){return h(this,null,function*(){var e,i,r,s,a;yield this._sendPromise;let o=Uc(t),l={safetySettings:(e=this.params)===null||e===void 0?void 0:e.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,contents:[...this._history,o]},u;return this._sendPromise=this._sendPromise.then(()=>w_(this._apiKey,this.model,l,this.requestOptions)).then(p=>{var g;if(p.response.candidates&&p.response.candidates.length>0){this._history.push(o);let b=Object.assign({parts:[],role:"model"},(g=p.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(b)}else{let b=Er(p.response);b&&console.warn(`sendMessage() was unsuccessful. ${b}. Inspect response object for details.`)}u=p}),yield this._sendPromise,u})}sendMessageStream(t){return h(this,null,function*(){var e,i,r,s,a;yield this._sendPromise;let o=Uc(t),l={safetySettings:(e=this.params)===null||e===void 0?void 0:e.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,contents:[...this._history,o]},u=v_(this._apiKey,this.model,l,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>u).catch(p=>{throw new Error(b_)}).then(p=>p.response).then(p=>{if(p.candidates&&p.candidates.length>0){this._history.push(o);let g=Object.assign({},p.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{let g=Er(p);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(p=>{p.message!==b_&&console.error(p)}),u})}};function U2(n,t,e,i){return h(this,null,function*(){return(yield Oo(t,Ta.COUNT_TOKENS,n,!1,JSON.stringify(Object.assign(Object.assign({},e),{model:t})),i)).json()})}function H2(n,t,e,i){return h(this,null,function*(){return(yield Oo(t,Ta.EMBED_CONTENT,n,!1,JSON.stringify(e),i)).json()})}function q2(n,t,e,i){return h(this,null,function*(){let r=e.requests.map(a=>Object.assign(Object.assign({},a),{model:t}));return(yield Oo(t,Ta.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:r}),i)).json()})}var Tp=class{constructor(t,e,i){this.apiKey=t,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=e.systemInstruction,this.requestOptions=i||{}}generateContent(t){return h(this,null,function*(){let e=xp(t);return w_(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},e),this.requestOptions)})}generateContentStream(t){return h(this,null,function*(){let e=xp(t);return v_(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},e),this.requestOptions)})}startChat(t){return new Cp(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},t),this.requestOptions)}countTokens(t){return h(this,null,function*(){let e=xp(t);return U2(this.apiKey,this.model,e,this.requestOptions)})}embedContent(t){return h(this,null,function*(){let e=z2(t);return H2(this.apiKey,this.model,e,this.requestOptions)})}batchEmbedContents(t){return h(this,null,function*(){return q2(this.apiKey,this.model,t,this.requestOptions)})}};var Eo=class{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new si("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Tp(this.apiKey,t,e)}};function x_(n){let t=c({},n);if(Object.hasOwn(t,"additionalProperties")&&delete t.additionalProperties,t.properties){let e=Object.keys(t.properties);I_(t.properties,e,0)}return t}function I_(n,t,e){if(e>=t.length||!n)return;let i=t[e];n[i]=x_(n[i]),I_(n,t,e+1)}function Hc(n){let r=x_(Qi(n)),{$schema:e}=r;return Ee(r,["$schema"])}function K2(n){let t=n._getType();return os.isInstance(n)?n.role:n.name??t}function G2(n){switch(n){case"ai":case"model":return"model";case"system":case"human":return"user";default:throw new Error(`Unknown / unsupported author: ${n}`)}}function Z2(n){if("mimeType"in n&&"data"in n)return{inlineData:{mimeType:n.mimeType,data:n.data}};throw new Error("Invalid media content")}function W2(n,t){return typeof n=="string"?[{text:n}]:n.map(e=>{if(e.type==="text")return{text:e.text};if(e.type==="image_url"){if(!t)throw new Error("This model does not support images");let i;if(typeof e.image_url=="string")i=e.image_url;else if(typeof e.image_url=="object"&&"url"in e.image_url)i=e.image_url.url;else throw new Error("Please provide image as base64 encoded data URL");let[r,s]=i.split(",");if(!r.startsWith("data:"))throw new Error("Please provide image as base64 encoded data URL");let[a,o]=r.replace(/^data:/,"").split(";");if(o!=="base64")throw new Error("Please provide image as base64 encoded data URL");return{inlineData:{data:s,mimeType:a}}}else if(e.type==="media")return Z2(e);throw new Error(`Unknown content type ${e.type}`)})}function Ep(n,t){return n.reduce((e,i,r)=>{if(!la(i))throw new Error("Unsupported message input");let s=K2(i);if(s==="system"&&r!==0)throw new Error("System message should be the first one");let a=G2(s),o=e.content[e.content.length];if(!e.mergeWithPreviousContent&&o&&o.role===a)throw new Error("Google Generative AI requires alternate messages between authors");let l=W2(i.content,t);if(e.mergeWithPreviousContent){let p=e.content[e.content.length-1];if(!p)throw new Error("There was a problem parsing your system message. Please try a prompt without one.");return p.parts.push(...l),{mergeWithPreviousContent:!1,content:e.content}}let u={role:a,parts:l};return{mergeWithPreviousContent:s==="system",content:[...e.content,u]}},{content:[],mergeWithPreviousContent:!1}).content}function C_(n){if(!n.candidates||n.candidates.length===0||!n.candidates[0])return{generations:[],llmOutput:{filters:n.promptFeedback}};let t=n.functionCalls(),[e]=n.candidates,o=e,{content:i}=o,r=Ee(o,["content"]),s=i?.parts[0]?.text??"";return{generations:[{text:s,message:new Oi({content:s,tool_calls:t,additional_kwargs:c({},r)}),generationInfo:r}]}}function T_(n){if(!n.candidates||n.candidates.length===0)return null;let[t]=n.candidates,s=t,{content:e}=s,i=Ee(s,["content"]),r=e?.parts[0]?.text??"";return new va({text:r,message:new Bi({content:r,name:e?e.role:void 0,additional_kwargs:{}}),generationInfo:i})}function Op(n){return n.every(t=>"functionDeclarations"in t&&Array.isArray(t.functionDeclarations))?n:[{functionDeclarations:n.map(t=>{if(c_(t)){let e=Hc(t.schema);return{name:t.name,description:t.description,parameters:e}}return t})}]}var Ao=class extends xo{static lc_name(){return"GoogleGenerativeAIToolsOutputParser"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","google_genai","output_parsers"]}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=t.keyName,this.returnSingle=t.returnSingle??this.returnSingle,this.zodSchema=t.zodSchema}_validateResult(t){return h(this,null,function*(){if(this.zodSchema===void 0)return t;let e=yield this.zodSchema.safeParseAsync(t);if(e.success)return e.data;throw new vs(`Failed to parse. Text: "${JSON.stringify(t,null,2)}". Error: ${JSON.stringify(e.error.errors)}`,JSON.stringify(t,null,2))})}parseResult(t){return h(this,null,function*(){let e=t.flatMap(s=>{let{message:a}=s;return!("tool_calls"in a)||!Array.isArray(a.tool_calls)?[]:a.tool_calls});if(e[0]===void 0)throw new Error("No parseable tool calls provided to GoogleGenerativeAIToolsOutputParser.");let[i]=e;return yield this._validateResult(i.args)})}};var ko=class extends wo{static lc_name(){return"ChatGoogleGenerativeAI"}get lc_secrets(){return{apiKey:"GOOGLE_API_KEY"}}get _isMultimodalModel(){return this.model.includes("vision")||this.model.startsWith("gemini-1.5")}constructor(t){if(super(t??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gemini-pro"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gemini-pro"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxOutputTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"safetySettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelName=t?.model?.replace(/^models\//,"")??t?.modelName?.replace(/^models\//,"")??this.model,this.model=this.modelName,this.maxOutputTokens=t?.maxOutputTokens??this.maxOutputTokens,this.maxOutputTokens&&this.maxOutputTokens<0)throw new Error("`maxOutputTokens` must be a positive integer");if(this.temperature=t?.temperature??this.temperature,this.temperature&&(this.temperature<0||this.temperature>1))throw new Error("`temperature` must be in the range of [0.0,1.0]");if(this.topP=t?.topP??this.topP,this.topP&&this.topP<0)throw new Error("`topP` must be a positive integer");if(this.topP&&this.topP>1)throw new Error("`topP` must be below 1.");if(this.topK=t?.topK??this.topK,this.topK&&this.topK<0)throw new Error("`topK` must be a positive integer");if(this.stopSequences=t?.stopSequences??this.stopSequences,this.apiKey=t?.apiKey??Se("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environment variable GOOGLE_API_KEY or in the `apiKey` field of the ChatGoogleGenerativeAI constructor");if(this.safetySettings=t?.safetySettings??this.safetySettings,this.safetySettings&&this.safetySettings.length>0&&new Set(this.safetySettings.map(i=>i.category)).size!==this.safetySettings.length)throw new Error("The categories in `safetySettings` array must be unique");this.streaming=t?.streaming??this.streaming,this.client=new Eo(this.apiKey).getGenerativeModel({model:this.model,safetySettings:this.safetySettings,generationConfig:{candidateCount:1,stopSequences:this.stopSequences,maxOutputTokens:this.maxOutputTokens,temperature:this.temperature,topP:this.topP,topK:this.topK}},{apiVersion:t?.apiVersion,baseUrl:t?.baseUrl})}getLsParams(t){return{ls_provider:"google_genai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.client.generationConfig.temperature,ls_max_tokens:this.client.generationConfig.maxOutputTokens,ls_stop:t.stop}}_combineLLMOutput(){return[]}_llmType(){return"googlegenerativeai"}bindTools(t,e){return this.bind(c({tools:Op(t)},e))}invocationParams(t){let e=t?.tools;return Array.isArray(e)&&!e.some(i=>!("lc_namespace"in i))?{tools:Op(t?.tools)}:{tools:t?.tools}}_generate(t,e,i){return h(this,null,function*(){let r=Ep(t,this._isMultimodalModel),s=this.invocationParams(e);if(this.streaming){let b={},x=this._streamResponseChunks(t,e,i),I={};try{for(var l=G(x),u,p,g;u=!(p=yield l.next()).done;u=!1){let S=p.value;let T=S.generationInfo?.completion??0;I[T]===void 0?I[T]=S:I[T]=I[T].concat(S)}}catch{g=[p]}finally{try{u&&(p=l.return)&&(yield p.call(l))}finally{if(g)throw g[0]}}return{generations:Object.entries(I).sort(([S],[T])=>parseInt(S,10)-parseInt(T,10)).map(([S,T])=>T),llmOutput:{estimatedTokenUsage:b}}}let a=yield this.caller.callWithOptions({signal:e?.signal},()=>h(this,null,function*(){let b;try{b=yield this.client.generateContent(v(c({},s),{contents:r}))}catch(x){throw x.message?.includes("400 Bad Request")&&(x.status=400),x}return b})),o=C_(a.response);return yield i?.handleLLMNewToken(o.generations[0].text??""),o})}_streamResponseChunks(t,e,i){return ne(this,null,function*(){let r=Ep(t,this._isMultimodalModel),s=this.invocationParams(e),a=yield new R(this.caller.callWithOptions({signal:e?.signal},()=>h(this,null,function*(){let{stream:g}=yield this.client.generateContentStream(v(c({},s),{contents:r}));return g})));try{for(var o=G(a),l,u,p;l=!(u=yield new R(o.next())).done;l=!1){let g=u.value;let b=T_(g);b&&(yield b,yield new R(i?.handleLLMNewToken(b.text??"")))}}catch{p=[u]}finally{try{l&&(u=o.return)&&(yield new R(u.call(o)))}finally{if(p)throw p[0]}}})}withStructuredOutput(t,e){let i=t,r=e?.name,s=e?.method,a=e?.includeRaw;if(s==="jsonMode")throw new Error('ChatGoogleGenerativeAI only supports "functionCalling" as a method.');let o=r??"extract",l,u;if(Lc(i)){let I=Hc(i);u=[{functionDeclarations:[{name:o,description:I.description??"A function available to call.",parameters:I}]}],l=new Ao({returnSingle:!0,keyName:o,zodSchema:i})}else{let I;typeof i.name=="string"&&typeof i.parameters=="object"&&i.parameters!=null?(I=i,o=i.name):I={name:o,description:i.description??"",parameters:i},u=[{functionDeclarations:[I]}],l=new Ao({returnSingle:!0,keyName:o})}let p=this.bind({tools:u});if(!a)return p.pipe(l).withConfig({runName:"ChatGoogleGenerativeAIStructuredOutput"});let g=Xi.assign({parsed:(I,P)=>l.invoke(I.raw,P)}),b=Xi.assign({parsed:()=>null}),x=g.withFallbacks({fallbacks:[b]});return jn.from([{raw:p},x]).withConfig({runName:"StructuredOutputRunnable"})}};var qc=(()=>{let t=class t{constructor(){}getDescriptionPrompt(i,r,s){return`Given the following project details, generate a detailed budget description Taking into account the Bolivian currency (BOB):
		

Project Name: ${i}
		
Project Description: ${r}
		
Infrastructure Type: ${s}
		

Just answer with the budget list, don't explain anything else, and at the end of the budget list, tell me the total budget in BOB. Answer all in Spanish`}getValidationPrompt(i,r,s,a){return`Given the following project activity, validate if it is related to the project.
		Just answer with an object that has 2 properties, 'value' that it's boolean and 'explanation' that explains why it is false or true. Answer all in Spanish
		
Project Name: ${i}
		
Project Description: ${r}
		
Amount Spent in the Activity: ${a}
		
Activity description: ${a}
		`}validateActivity(i,r,s,a){return h(this,null,function*(){let o=new ko({model:"gemini-1.0-pro",maxOutputTokens:2048,apiKey:be.geminiApiKey}),l=this.getValidationPrompt(i,r,s,a),u=yield o.invoke(l);return console.log(u),u.content})}generateBudgetDescOpenAI(i,r,s){return h(this,null,function*(){let a=new To({model:"gpt-3.5-turbo-instruct",temperature:.9,apiKey:be.geminiApiKey}),o=this.getDescriptionPrompt(i,r,s);return yield a.invoke(o)})}generateBudgetDescGoogle(i,r,s){return h(this,null,function*(){let a=new ko({model:"gemini-1.0-pro",maxOutputTokens:2048,apiKey:be.geminiApiKey}),o=this.getDescriptionPrompt(i,r,s),l=yield a.invoke(o);return console.log(l),l.content})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var E_=(()=>{let t=class t{constructor(i){if(this.http=i,be.supabaseUrl&&be.supabaseKey)this.supabaseClient=Gt(be.supabaseUrl,be.supabaseKey);else throw new Error("Supabase URL or key is undefined.")}scrapeWebsite(i){return this.http.get(`http://localhost:3000/scrape?url=${encodeURIComponent(i)}`)}updateOdsGoals(){return h(this,null,function*(){this.scrapeWebsite("https://www.un.org/sustainabledevelopment/es/").subscribe(r=>h(this,null,function*(){console.log(r);let{data:s,error:a}=yield this.supabaseClient.from("metas_ods").select("*");if(a)throw a;s.length===0?r.items.forEach((o,l)=>h(this,null,function*(){yield this.supabaseClient.from("metas_ods").insert({objetivo:o,id:l+1,updated_at:new Date})})):r.items.forEach((o,l)=>h(this,null,function*(){s.find(p=>p.objetivo===o)||(yield this.supabaseClient.from("metas_ods").insert({objetivo:o,id:l+1,updated_at:new Date}))}))}))})}getOdsGoals(){return h(this,null,function*(){let{data:i,error:r}=yield this.supabaseClient.from("metas_ods").select("*");if(r)throw r;return i})}};t.\u0275fac=function(r){return new(r||t)(Os(Uo))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Y2=()=>({width:"50rem"}),X2=()=>({"1199px":"75vw","575px":"90vw"}),eO=()=>({height:"10px"});function tO(n,t){if(n&1){let e=H();_(0,"div",37)(1,"p-speedDial",38),L("onShow",function(r){let s=E(e).$implicit,a=f();return O(a.onSpeedDialAction(r,s.project_id))}),y(),_(2,"img",39),L("click",function(){let r=E(e).$implicit,s=f();return O(s.goToProjectDetails(r.project_id))}),y(),_(3,"div",40)(4,"span",41),N(5),y(),_(6,"span",42),N(7),y()(),_(8,"span",43),N(9),y(),_(10,"div",44),A(11,"p-progressBar",45),_(12,"span")(13,"span",46),N(14),y(),N(15),y()()()}if(n&2){let e=t.$implicit,i=f();m(),d("model",i.speedDialActions),m(),Kn("src",e.project_image,fi),m(3),Je("",e.project_location,", SC"),m(2),ye(e.project_name),m(2),ye(e.project_description),m(2),Qe(Fe(11,eO)),d("value",e.amount_raised/e.required_budget*100)("showValue",!1),m(3),Je("Bs. ",e.amount_raised," recaudado"),m(),Je(" de Bs. ",e.required_budget,"")}}var A_=(()=>{let t=class t{constructor(i,r,s,a,o){this.router=i,this.projectService=r,this.aiService=s,this.messageService=a,this.webScrapingService=o,this.dialogVisible=!1,this.projectForm=new Ns({}),this.manageProjectId=0,this.santaCruzProvinces=lm,this.infrastructureTypes=cm,this.riesgosProyecto=um,this.metasOds=[],this.speedDialActions=[{icon:"pi pi-eye",tooltip:"Ver proyecto",command:()=>{this.router.navigate(["app/project-details/",this.manageProjectId])}},{icon:"pi pi-trash",tooltip:"Eliminar proyecto",command:()=>{this.deleteProject()}}]}ngOnInit(){return h(this,null,function*(){this.setupForm(),yield this.webScraping(),yield this.getUserProjects()})}webScraping(){return h(this,null,function*(){this.webScrapingService.updateOdsGoals(),this.webScrapingService.getOdsGoals().then(i=>{i.forEach(r=>{this.metasOds.push({name:r.objetivo,code:r.id})}),this.metasOds.sort((r,s)=>r.code<s.code?-1:r.code>s.code?1:0)})})}getUserProjects(){return h(this,null,function*(){yield this.projectService.getProjectByUserId(this.userSession.id).then(i=>{this.allProjects=i})})}goToProjectDetails(i){this.router.navigate(["app/project-details/",i])}setupForm(){let i=localStorage.getItem("session");this.userSession=JSON.parse(i),this.projectForm=new Ns({project_name:new ti("",_i.required),project_description:new ti("",_i.required),project_image:new ti(""),project_location:new ti("",_i.required),infrastructure_type:new ti("",_i.required),required_budget:new ti("",_i.required),budget_description:new ti("",_i.required),document_url:new ti(""),project_risks:new ti("",_i.required),project_goals:new ti("",_i.required),user_id:new ti(this.userSession.id),created_at:new ti(new Date().toISOString())})}showDialog(){this.dialogVisible=!0}hideDialog(){this.dialogVisible=!1}onFileSelected(i){let r=i.currentFiles[0];this.projectForm.patchValue({project_image:r}),console.log(i)}onDocumentSelected(i){let r=i.currentFiles[0];this.projectForm.patchValue({document_url:r}),console.log(i)}createProject(){return h(this,null,function*(){if(this.projectForm.invalid){this.messageService.add({severity:"error",summary:"Error",detail:"Por favor, complete todos los campos",life:3e3});return}console.log(this.projectForm.value);let i=yield this.projectService.uploadProjectImage(this.projectForm.value.project_image),r=yield this.projectService.uploadDocument(this.projectForm.value.document_url);console.log("Image URL:",r),this.projectForm.patchValue({project_image:i,document_url:r}),this.projectService.createProject(this.projectForm.value).then(()=>{this.dialogVisible=!1}).then(()=>{this.messageService.add({severity:"success",summary:"Proyecto creado",detail:"El proyecto ha sido creado correctamente",life:3e3}),this.getUserProjects()})})}deleteProject(){return h(this,null,function*(){try{yield this.projectService.deleteProject(this.manageProjectId).then(()=>{this.messageService.add({severity:"success",summary:"Proyecto eliminado",detail:"El proyecto ha sido eliminado correctamente",life:3e3}),this.getUserProjects()})}catch{this.messageService.add({severity:"error",summary:"Error",detail:"El proyecto no pudo ser eliminado porque tiene actividades asociadas",life:3e3})}})}onSpeedDialAction(i,r){this.manageProjectId=r}generateBudgetDescription(){return h(this,null,function*(){let i=this.projectForm.value.project_name,r=this.projectForm.value.project_description,s=this.projectForm.value.infrastructure_type,a=yield this.aiService.generateBudgetDescGoogle(i,r,s);this.projectForm.patchValue({budget_description:a})})}};t.\u0275fac=function(r){return new(r||t)(D(Ti),D(er),D(qc),D(an),D(E_))},t.\u0275cmp=Z({type:t,selectors:[["app-manage-projects"]],standalone:!0,features:[qt([an]),xe],decls:66,vars:19,consts:[[1,"w-full","flex","flex-col"],[1,"text-3xl","font-semibold","font-sans"],[1,"flex","flex-col","rounded-lg","bg-custom-yellow","px-4","py-6","w-[340px]","mt-4","shadow-xl"],[1,"flex","justify-between","items-center"],[1,"text-black","text-lg","font-medium"],["label","Crear","severity","secondary",3,"onClick"],["header","Crear proyecto",3,"visibleChange","modal","draggable","visible","breakpoints"],[1,"flex","flex-col","gap-8",3,"formGroup"],[1,"flex","flex-col","gap-2"],["for","project-name"],["pInputText","","id","project-name","aria-describedby","project-name","formControlName","project_name"],["for","project-description"],["pInputText","","id","project-description","aria-describedby","project-description","formControlName","project_description"],["mode","advanced","chooseLabel","Subir","chooseIcon","pi pi-upload","name","demo[]","url","https://www.primefaces.org/cdn/api/upload.php","accept","image/*","maxFileSize","10000000",3,"onSelect","showUploadButton"],["for","project_location"],["formControlName","project_location","optionLabel","name","optionValue","name","placeholder","Selecciona una provincia",3,"options"],["for","infrastructure-type"],["formControlName","infrastructure_type","optionLabel","name","optionValue","name","placeholder","Selecciona un tipo de infraestructura",3,"options"],[1,"flex","items-center","gap-4"],["label","Generar con AI \u2728",3,"onClick","outlined","rounded"],["id","budged-description","rows","10","cols","10","formControlName","budget_description"],[1,"flex","flex-col","gap-2","w-full"],["for","required-budget"],["id","required-budget","inputId","minmaxfraction","mode","currency","currency","BOB","formControlName","required_budget",3,"minFractionDigits","maxFractionDigits"],[1,"text-slate-600","text-sm"],["mode","advanced","chooseLabel","Subir","chooseIcon","pi pi-upload","name","demo[]","url","https://www.primefaces.org/cdn/api/upload.php","accept",".pdf, .doc, .docx, .csv","maxFileSize","10000000",3,"onSelect","showUploadButton"],["for","project-risks"],["optionLabel","name","optionValue","name","placeholder","Selecciona los riesgos asociados al proyecto","formControlName","project_risks",3,"options"],["for","project-goals"],["optionLabel","name","optionValue","name","placeholder","Selecciona las metas ODS","formControlName","project_goals",3,"options"],[1,"flex","justify-end","gap-4","mt-16"],["label","Cancelar","severity","secondary",3,"onClick"],["label","Crear","severity","primary",3,"onClick"],[1,"text-black","font-bold","mt-12","text-6xl"],[1,"text-lg"],[1,"flex","flex-col","gap-4","h-full","overflow-y-auto","overflow-x-hidden"],[1,"grid","lg:grid-cols-3","grid-cols-2","gap-4","cursor-pointer"],[1,"relative","project-card","flex","flex-col","min-w-52","p-4","shadow-xl","rounded-lg","border","border-red-700","bg-white","bg-opacity-10","backdrop-filter","backdrop-blur-lg"],["direction","down","transitionDelay","80","showIcon","pi pi-ellipsis-h","hideIcon","pi pi-times","buttonClassName","p-button",1,"absolute","right-10",3,"onShow","model"],[1,"w-full","h-48","object-cover","rounded-lg",3,"click","src"],[1,"flex","flex-col","mt-4"],[1,"font-bold","text-base","text-custom-purple"],[1,"font-bold","text-base"],[1,"line-clamp-2","mt-2","text-slate-700","text-sm"],[1,"flex","flex-col","gap-2","mt-4"],[3,"value","showValue"],[1,"font-bold"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"h1",1),N(2,"> Gestiona tus proyectos"),y(),_(3,"div",2)(4,"div",3)(5,"span",4),N(6,"Empieza con un proyecto"),y(),_(7,"p-button",5),L("onClick",function(){return s.showDialog()}),y(),_(8,"p-dialog",6),Nt("visibleChange",function(o){return Dt(s.dialogVisible,o)||(s.dialogVisible=o),o}),_(9,"form",7)(10,"div",8)(11,"label",9),N(12,"Nombre del proyecto"),y(),A(13,"input",10),y(),_(14,"div",8)(15,"label",11),N(16,"Descripci\xF3n del proyecto"),y(),A(17,"input",12),y(),_(18,"div",8)(19,"label"),N(20,"Subir imagen"),y(),_(21,"p-fileUpload",13),L("onSelect",function(o){return s.onFileSelected(o)}),y()(),_(22,"div",8)(23,"label",14),N(24,"Ubicaci\xF3n del proyecto"),y(),A(25,"p-dropdown",15),y(),_(26,"div",8)(27,"label",16),N(28,"Tipo de infraestructura"),y(),A(29,"p-dropdown",17),y(),_(30,"div",8)(31,"label",18)(32,"span"),N(33,"Presupuesto en detalle"),y(),_(34,"p-button",19),L("onClick",function(){return s.generateBudgetDescription()}),y()(),A(35,"textarea",20),y(),_(36,"div",21)(37,"label",22),N(38,"Presupuesto requerido"),y(),A(39,"p-inputNumber",23),y(),_(40,"div",8)(41,"label"),N(42,"Subir documentos "),_(43,"span",24),N(44,"Para respaldar tu proyecto (Documentacion legal, presupuesto, etc)"),y()(),_(45,"p-fileUpload",25),L("onSelect",function(o){return s.onDocumentSelected(o)}),y()(),_(46,"div",8)(47,"label",26),N(48,"Riesgos asociados al proyecto"),y(),A(49,"p-multiSelect",27),y(),_(50,"div",8)(51,"label",28),N(52,"Clasificaci\xF3n y metas ODS"),y(),A(53,"p-multiSelect",29),y()(),_(54,"div",30)(55,"p-button",31),L("onClick",function(){return s.hideDialog()}),y(),_(56,"p-button",32),L("onClick",function(){return s.createProject()}),y()()()(),_(57,"span",33),N(58,"100% "),_(59,"span",34),N(60,"Gratis"),y()()(),A(61,"p-toast"),_(62,"div",35)(63,"div",36),Hn(64,tO,16,12,"div",37,Un),y()()()),r&2&&(m(8),Qe(Fe(17,Y2)),d("modal",!0)("draggable",!1),Rt("visible",s.dialogVisible),d("breakpoints",Fe(18,X2)),m(),d("formGroup",s.projectForm),m(12),d("showUploadButton",!1),m(4),d("options",s.santaCruzProvinces),m(4),d("options",s.infrastructureTypes),m(5),d("outlined",!0)("rounded",!0),m(5),d("minFractionDigits",2)("maxFractionDigits",2),m(6),d("showUploadButton",!1),m(4),d("options",s.riesgosProyecto),m(4),d("options",s.metasOds),m(11),qn(s.allProjects))},dependencies:[ue,tl,Yo,Wo,Qo,Jo,Xo,el,gi,gt,Qn,zs,sl,rl,Yn,Jn,Gh,xu,ll,Ra,Jh,tm,Su,rm,nm,cn,ul,om,am,nl,il]});let n=t;return n})();var Kc=n=>[n],k_=(n,t)=>[n,t];function nO(n,t){if(n&1){let e=H();_(0,"div",21),L("click",function(){let r=E(e).$implicit,s=f();return O(s.selectItem(r))}),A(1,"span",22),_(2,"span",23),N(3),y()()}if(n&2){let e=t.$implicit;d("ngClass",le(4,Kc,e.active?"bg-[#30333A]":"")),m(),d("ngClass",qe(6,k_,e.active?"text-white transition duration-300 ease-in-out":"text-secondary transition duration-300 ease-out",e.icon)),m(),d("ngClass",le(9,Kc,e.active?"text-white transition duration-300 ease-in-out":"text-secondary transition duration-300 ease-out")),m(),ye(e.name)}}function rO(n,t){if(n&1){let e=H();_(0,"div",21),L("click",function(){let r=E(e).$implicit,s=f();return O(s.selectItem(r))}),A(1,"span",22),_(2,"span",23),N(3),y()()}if(n&2){let e=t.$implicit;d("ngClass",le(4,Kc,e.active?"bg-[#30333A]":"")),m(),d("ngClass",qe(6,k_,e.active?"text-white transition duration-300 ease-in-out":"text-secondary transition duration-300 ease-out",e.icon)),m(),d("ngClass",le(9,Kc,e.active?"text-white transition duration-300 ease-in-out":"text-secondary transition duration-300 ease-out")),m(),ye(e.name)}}var P_=(()=>{let t=class t{constructor(i,r){this.router=i,this.authService=r,this.sidebarItems=[{name:"Mis proyectos",icon:"pi-briefcase",active:!1,route:"/app/manage-projects"},{name:"Mis donaciones",icon:"pi-chart-bar",active:!1,route:"/app/my-donations"},{name:"Explorar proyectos",icon:"pi-search",active:!1,route:"/app/explore-projects"}]}ngOnInit(){this.selectItem(this.sidebarItems[0])}selectItem(i){this.sidebarItems.forEach(r=>r.active=!1),i.active=!0,this.router.navigate([i.route])}logOut(){return h(this,null,function*(){this.authService.signOut().then(()=>{this.router.navigate(["/login"])}).catch(i=>{console.error(i)})})}};t.\u0275fac=function(r){return new(r||t)(D(Ti),D(Ls))},t.\u0275cmp=Z({type:t,selectors:[["app-ecofin-app"]],standalone:!0,features:[xe],decls:26,vars:2,consts:[[1,"flex","flex-row","mx-4","h-screen","max-h-screen"],[1,"sticky","h-screen","flex","items-center"],[1,"h-[95vh]","w-56","bg-custom-black","rounded-xl","flex","flex-col","justify-between","p-5"],[1,"flex","items-center"],["src","../assets/logo/EcofinIcon.png","alt","logo",1,"w-8"],[1,"text-xl","font-medium","font-sans","tracking-widest","text-white","ml-2"],[1,"flex","flex-col","gap-4"],["class","flex gap-2 items-center py-4 px-3 rounded-lg cursor-pointer hover:bg-[#30333A] transition-all duration-300 ease-in-out",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mx-2","h-px","bg-gray-600"],[1,"flex","items-center","justify-center","p-2","rounded-lg","cursor-pointer","hover:bg-[#30333A]","transition-all","duration-300","ease-in-out",3,"click"],[1,"text-sm","text-secondary"],[1,"flex","flex-col","mx-8","w-full","h-full","overflow-hidden"],[1,"w-full","flex","items-center","justify-between","pt-6","pb-1"],[1,"flex","items-center","gap-2"],[1,""],["type","text","placeholder","Hola de nuevo!","formControlName","search",1,"text-base","font-sans","border-0","placeholder:text-base","focus:outline-none","p-2"],[1,"flex","items-center","gap-10"],[1,"pi","pi-sun","cursor-pointer"],[1,"pi","pi-bell","cursor-pointer"],[1,"pi","pi-cog","cursor-pointer"],[1,"overflow-y-auto","max-h-full"],[1,"flex","gap-2","items-center","py-4","px-3","rounded-lg","cursor-pointer","hover:bg-[#30333A]","transition-all","duration-300","ease-in-out",3,"click","ngClass"],[1,"pi",3,"ngClass"],[1,"text-sm","ml-1",3,"ngClass"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),A(4,"img",4),_(5,"span",5),N(6,"Ecofin"),y()(),_(7,"div",6),w(8,nO,4,11,"div",7),y(),_(9,"div",6),A(10,"div",8),w(11,rO,4,11,"div",7),_(12,"div",9),L("click",function(){return s.logOut()}),_(13,"span",10),N(14," Cerrar Sesion "),y()()()()(),_(15,"div",11)(16,"div",12)(17,"div",13),A(18,"span",14)(19,"input",15),y(),_(20,"div",16),A(21,"span",17)(22,"span",18)(23,"span",19),y()(),_(24,"div",20),A(25,"router-outlet"),y()()()),r&2&&(m(8),d("ngForOf",s.sidebarItems.slice(0,4)),m(3),d("ngForOf",s.sidebarItems.slice(4,6)))},dependencies:[ue,He,vt,gi,Ho,gt]});let n=t;return n})();var M_=(n,t)=>Pr(Ls).isLoggedIn===!1?(Pr(Ti).navigate(["/login"]),!1):!0;var sO=()=>({height:"10px"});function aO(n,t){if(n&1){let e=H();_(0,"div",8),L("click",function(){let r=E(e).$implicit,s=f();return O(s.goToProjectDetails(r.project_id))}),A(1,"img",9),_(2,"div",10)(3,"span",11),N(4),y(),_(5,"span",12),N(6),y()(),_(7,"span",13),N(8),y(),_(9,"div",14),A(10,"p-progressBar",15),_(11,"span")(12,"span",16),N(13),y(),N(14),y()()()}if(n&2){let e=t.$implicit;m(),Kn("src",e.project_image,fi),m(3),Je("",e.project_location,", SC"),m(2),ye(e.project_name),m(2),ye(e.project_description),m(2),Qe(Fe(10,sO)),d("value",e.amount_raised/e.required_budget*100)("showValue",!1),m(3),Je("Bs. ",e.amount_raised," recaudado"),m(),Je(" de Bs. ",e.required_budget,"")}}var R_=(()=>{let t=class t{constructor(i,r){this.projectService=i,this.router=r}ngOnInit(){this.getProjects()}getProjects(){return h(this,null,function*(){yield this.projectService.getProjects().then(i=>{this.allProjects=i}),console.log(this.allProjects)})}goToProjectDetails(i){this.router.navigate(["app/project-details/",i])}};t.\u0275fac=function(r){return new(r||t)(D(er),D(Ti))},t.\u0275cmp=Z({type:t,selectors:[["app-explore-projects"]],standalone:!0,features:[xe],decls:11,vars:0,consts:[[1,"flex","flex-col","gap-4","h-full","overflow-y-auto","overflow-x-hidden"],[1,"flex","gap-8","w-full","p-4","rounded-lg","bg-custom-purple","mt-4"],[1,"flex","flex-col","gap-4","text-white"],[1,"font-bold","text-xl"],[1,"text-slate-200"],["src","https://archive.smashing.media/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/de9ee388-c756-449c-84e0-3318aba74f78/open-peeps-opt.png",1,"w-64","rounded-2xl"],[1,"grid","lg:grid-cols-3","grid-cols-2","gap-4","cursor-pointer"],[1,"project-card","flex","flex-col","min-w-52","p-4","shadow-xl","rounded-lg","border","border-red-700","bg-white","bg-opacity-10","backdrop-filter","backdrop-blur-lg"],[1,"project-card","flex","flex-col","min-w-52","p-4","shadow-xl","rounded-lg","border","border-red-700","bg-white","bg-opacity-10","backdrop-filter","backdrop-blur-lg",3,"click"],[1,"w-full","h-48","object-cover","rounded-lg",3,"src"],[1,"flex","flex-col","mt-4"],[1,"font-bold","text-base","text-custom-purple"],[1,"font-bold","text-base"],[1,"line-clamp-2","mt-2","text-slate-700","text-sm"],[1,"flex","flex-col","gap-2","mt-4"],[3,"value","showValue"],[1,"font-bold"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"div",1)(2,"span",2)(3,"span",3),N(4,"Explora la variedad de proyectos de infraestructura sostenible y s\xFAmate al cambio "),y(),_(5,"span",4),N(6," El mundo necesita un cambio hacia un futuro m\xE1s verde y sostenible. La infraestructura sostenible juega un papel crucial en este camino."),y()(),A(7,"img",5),y(),_(8,"div",6),Hn(9,aO,15,11,"div",7,Un),y()()),r&2&&(m(9),qn(s.allProjects))},dependencies:[zs,gt,ue,Cn,cn,gi]});let n=t;return n})();var Gc=(()=>{let t=class t{constructor(){if(be.supabaseUrl&&be.supabaseKey)this.supabaseClient=Gt(be.supabaseUrl,be.supabaseKey);else throw new Error("Supabase URL or key is undefined.")}createDonation(i,r,s){return h(this,null,function*(){let{data:a,error:o}=yield this.supabaseClient.from("donations").insert([{user_id:i,project_id:r,amount:s}]);if(o)throw o;return a})}getDonationsByUser(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabaseClient.from("donations").select("*").eq("user_id",i);if(s)throw s;return r})}getDonationsByProject(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabaseClient.from("donations").select("*").eq("project_id",i);if(s)throw s;return r})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var oO=()=>({height:"10px"});function lO(n,t){if(n&1){let e=H();_(0,"div",8),L("click",function(){let r=E(e).$implicit,s=f();return O(s.goToProjectDetails(r.project_id))}),A(1,"img",9),_(2,"div",10)(3,"span",11),N(4),y(),_(5,"span",12),N(6),y()(),_(7,"span",13),N(8),y(),_(9,"div",14),A(10,"p-progressBar",15),_(11,"span")(12,"span",16),N(13),y(),N(14),y()()()}if(n&2){let e=t.$implicit;m(),Kn("src",e.project_image,fi),m(3),Je("",e.project_location,", SC"),m(2),ye(e.project_name),m(2),ye(e.project_description),m(2),Qe(Fe(10,oO)),d("value",e.amount_raised/e.required_budget)("showValue",!1),m(3),Je("Bs. ",e.amount_raised," recaudado"),m(),Je(" de Bs. ",e.required_budget,"")}}var N_=(()=>{let t=class t{constructor(i,r,s){this.projectService=i,this.donationService=r,this.router=s}ngOnInit(){this.getProjects()}getProjects(){return h(this,null,function*(){let i=localStorage.getItem("session");this.userSession=JSON.parse(i),yield this.donationService.getDonationsByUser(this.userSession.id).then(r=>{this.donations=r}),yield this.projectService.getProjects().then(r=>{this.projectsDonated=r.filter(s=>this.donations.some(a=>a.project_id===s.project_id))})})}goToProjectDetails(i){this.router.navigate(["app/project-details/",i])}};t.\u0275fac=function(r){return new(r||t)(D(er),D(Gc),D(Ti))},t.\u0275cmp=Z({type:t,selectors:[["app-my-donations"]],standalone:!0,features:[xe],decls:10,vars:1,consts:[[1,"flex","flex-col","gap-4","h-full","overflow-y-auto","overflow-x-hidden"],[1,"flex","gap-8","w-full","p-4","rounded-lg","bg-custom-yellow","mt-4"],[1,"flex","flex-col","gap-4","text-white"],[1,"font-bold","text-xl","text-black"],[1,"text-slate-800"],["src","https://archive.smashing.media/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/de9ee388-c756-449c-84e0-3318aba74f78/open-peeps-opt.png",1,"w-64","rounded-2xl"],[1,"grid","lg:grid-cols-3","grid-cols-2","gap-4","cursor-pointer"],["class","project-card flex flex-col min-w-52 p-4 shadow-xl rounded-lg border border-red-700 bg-white bg-opacity-10 backdrop-filter backdrop-blur-lg",3,"click",4,"ngFor","ngForOf"],[1,"project-card","flex","flex-col","min-w-52","p-4","shadow-xl","rounded-lg","border","border-red-700","bg-white","bg-opacity-10","backdrop-filter","backdrop-blur-lg",3,"click"],[1,"w-full","h-48","object-cover","rounded-lg",3,"src"],[1,"flex","flex-col","mt-4"],[1,"font-bold","text-base","text-custom-purple"],[1,"font-bold","text-base"],[1,"line-clamp-2","mt-2","text-slate-700","text-sm"],[1,"flex","flex-col","gap-2","mt-4"],[3,"value","showValue"],[1,"font-bold"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"div",1)(2,"span",2)(3,"span",3),N(4,"Revisa el avance de tus proyectos donados "),y(),_(5,"span",4),N(6," Aqui puedes ver todos los proyectos que has donado y su estado actual. "),y()(),A(7,"img",5),y(),_(8,"div",6),w(9,lO,15,11,"div",7),y()()),r&2&&(m(9),d("ngForOf",s.projectsDonated))},dependencies:[zs,gt,ue,vt,Cn,cn,gi]});let n=t;return n})();var Ap=(()=>{class n extends at{static \u0275fac=(()=>{let e;return function(r){return(e||(e=rt(n)))(r||n)}})();static \u0275cmp=Z({type:n,selectors:[["ChevronLeftIcon"]],standalone:!0,features:[st,xe],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z","fill","currentColor"]],template:function(i,r){i&1&&(nt(),_(0,"svg",0),A(1,"path",1),y()),i&2&&(ee(r.getClassNames()),k("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();var kp=(()=>{class n extends at{static \u0275fac=(()=>{let e;return function(r){return(e||(e=rt(n)))(r||n)}})();static \u0275cmp=Z({type:n,selectors:[["ChevronRightIcon"]],standalone:!0,features:[st,xe],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(i,r){i&1&&(nt(),_(0,"svg",0),A(1,"path",1),y()),i&2&&(ee(r.getClassNames()),k("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();var F_=["*"];function cO(n,t){n&1&&re(0)}function uO(n,t){if(n&1&&(B(0),w(1,cO,1,0,"ng-container",3),U()),n&2){let e=f(2);m(),d("ngTemplateOutlet",e.contentTemplate)}}function dO(n,t){if(n&1&&(_(0,"div",1),Ct(1),w(2,uO,2,1,"ng-container",2),y()),n&2){let e=f();d("hidden",!e.selected),k("id",e.tabView.getTabContentId(e.id))("aria-hidden",!e.selected)("aria-labelledby",e.tabView.getTabHeaderActionId(e.id))("data-pc-name","tabpanel"),m(2),d("ngIf",e.contentTemplate&&(e.cache?e.loaded:e.selected))}}var pO=["content"],hO=["navbar"],mO=["prevBtn"],fO=["nextBtn"],gO=["inkbar"],_O=["elementToObserve"],yO=n=>({"p-tabview p-component":!0,"p-tabview-scrollable":n}),bO=(n,t)=>({"p-highlight":n,"p-disabled":t});function vO(n,t){n&1&&A(0,"ChevronLeftIcon"),n&2&&k("aria-hidden",!0)}function wO(n,t){}function xO(n,t){n&1&&w(0,wO,0,0,"ng-template")}function IO(n,t){if(n&1){let e=H();_(0,"button",15,4),L("click",function(){E(e);let r=f();return O(r.navBackward())}),w(2,vO,1,1,"ChevronLeftIcon",16)(3,xO,1,0,null,17),y()}if(n&2){let e=f();k("tabindex",e.tabindex)("aria-label",e.prevButtonAriaLabel),m(2),d("ngIf",!e.previousIconTemplate),m(),d("ngTemplateOutlet",e.previousIconTemplate)}}function CO(n,t){if(n&1&&A(0,"span",26),n&2){let e=f(3).$implicit;d("ngClass",e.leftIcon)}}function TO(n,t){}function SO(n,t){n&1&&w(0,TO,0,0,"ng-template")}function EO(n,t){if(n&1&&(_(0,"span",27),w(1,SO,1,0,null,17),y()),n&2){let e=f(3).$implicit;m(),d("ngTemplateOutlet",e.leftIconTemplate)}}function OO(n,t){if(n&1&&A(0,"span",28),n&2){let e=f(3).$implicit;d("ngClass",e.rightIcon)}}function AO(n,t){}function kO(n,t){n&1&&w(0,AO,0,0,"ng-template")}function PO(n,t){if(n&1&&(_(0,"span",29),w(1,kO,1,0,null,17),y()),n&2){let e=f(3).$implicit;m(),d("ngTemplateOutlet",e.rightIconTemplate)}}function MO(n,t){if(n&1&&(B(0),w(1,CO,1,1,"span",21)(2,EO,2,1,"span",22),_(3,"span",23),N(4),y(),w(5,OO,1,1,"span",24)(6,PO,2,1,"span",25),U()),n&2){let e=f(2).$implicit;m(),d("ngIf",e.leftIcon&&!e.leftIconTemplate),m(),d("ngIf",e.leftIconTemplate),m(2),ye(e.header),m(),d("ngIf",e.rightIcon&&!e.rightIconTemplate),m(),d("ngIf",e.rightIconTemplate)}}function RO(n,t){n&1&&re(0)}function DO(n,t){if(n&1){let e=H();_(0,"TimesIcon",32),L("click",function(r){E(e);let s=f(3).$implicit,a=f();return O(a.close(r,s))}),y()}n&2&&d("styleClass","p-tabview-close")}function NO(n,t){n&1&&A(0,"span",33)}function FO(n,t){}function LO(n,t){n&1&&w(0,FO,0,0,"ng-template")}function jO(n,t){if(n&1&&(B(0),w(1,DO,1,1,"TimesIcon",30)(2,NO,1,0,"span",31)(3,LO,1,0,null,17),U()),n&2){let e=f(2).$implicit;m(),d("ngIf",!e.closeIconTemplate),m(),d("ngIf",e.closeIconTemplate),m(),d("ngTemplateOutlet",e.closeIconTemplate)}}function VO(n,t){if(n&1){let e=H();_(0,"li",19)(1,"a",20),L("click",function(r){E(e);let s=f().$implicit,a=f();return O(a.open(r,s))})("keydown",function(r){E(e);let s=f().$implicit,a=f();return O(a.onTabKeyDown(r,s))}),w(2,MO,7,5,"ng-container",16)(3,RO,1,0,"ng-container",17)(4,jO,4,3,"ng-container",16),y()()}if(n&2){let e=f(),i=e.$implicit,r=e.index,s=f();ee(i.headerStyleClass),d("ngClass",qe(19,bO,i.selected,i.disabled))("ngStyle",i.headerStyle),k("data-p-disabled",i.disabled),m(),d("pTooltip",i.tooltip)("tooltipPosition",i.tooltipPosition)("positionStyle",i.tooltipPositionStyle)("tooltipStyleClass",i.tooltipStyleClass),k("id",s.getTabHeaderActionId(i.id))("aria-controls",s.getTabContentId(i.id))("aria-selected",i.selected)("tabindex",i.disabled||!i.selected?"-1":s.tabindex)("aria-disabled",i.disabled)("data-pc-index",r)("data-pc-section","headeraction"),m(),d("ngIf",!i.headerTemplate),m(),d("ngTemplateOutlet",i.headerTemplate),m(),d("ngIf",i.closable)}}function zO(n,t){if(n&1&&w(0,VO,5,22,"li",18),n&2){let e=t.$implicit;d("ngIf",!e.closed)}}function $O(n,t){n&1&&A(0,"ChevronRightIcon"),n&2&&k("aria-hidden",!0)}function BO(n,t){}function UO(n,t){n&1&&w(0,BO,0,0,"ng-template")}function HO(n,t){if(n&1){let e=H();_(0,"button",34,5),L("click",function(){E(e);let r=f();return O(r.navForward())}),w(2,$O,1,1,"ChevronRightIcon",16)(3,UO,1,0,null,17),y()}if(n&2){let e=f();k("tabindex",e.tabindex)("aria-label",e.nextButtonAriaLabel),m(2),d("ngIf",!e.nextIconTemplate),m(),d("ngTemplateOutlet",e.nextIconTemplate)}}var Pp=(()=>{class n{el;viewContainer;cd;closable=!1;get headerStyle(){return this._headerStyle}set headerStyle(e){this._headerStyle=e,this.tabView.cd.markForCheck()}get headerStyleClass(){return this._headerStyleClass}set headerStyleClass(e){this._headerStyleClass=e,this.tabView.cd.markForCheck()}cache=!0;tooltip;tooltipPosition="top";tooltipPositionStyle="absolute";tooltipStyleClass;get selected(){return!!this._selected}set selected(e){this._selected=e,this.loaded||this.cd.detectChanges(),e&&(this.loaded=!0)}get disabled(){return!!this._disabled}set disabled(e){this._disabled=e,this.tabView.cd.markForCheck()}get header(){return this._header}set header(e){this._header=e,Promise.resolve().then(()=>{this.tabView.updateInkBar(),this.tabView.cd.markForCheck()})}get leftIcon(){return this._leftIcon}set leftIcon(e){this._leftIcon=e,this.tabView.cd.markForCheck()}get rightIcon(){return this._rightIcon}set rightIcon(e){this._rightIcon=e,this.tabView.cd.markForCheck()}templates;closed=!1;view=null;_headerStyle;_headerStyleClass;_selected;_disabled;_header;_leftIcon;_rightIcon=void 0;loaded=!1;id;contentTemplate;headerTemplate;leftIconTemplate;rightIconTemplate;closeIconTemplate;tabView;constructor(e,i,r,s){this.el=i,this.viewContainer=r,this.cd=s,this.tabView=e,this.id=dt()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"righticon":this.rightIconTemplate=e.template;break;case"lefticon":this.leftIconTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}ngOnDestroy(){this.view=null}static \u0275fac=function(i){return new(i||n)(D(oi(()=>Mp)),D(We),D(jo),D(Xe))};static \u0275cmp=Z({type:n,selectors:[["p-tabPanel"]],contentQueries:function(i,r,s){if(i&1&&Me(s,Le,4),i&2){let a;W(a=Q())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{closable:[M.HasDecoratorInputTransform,"closable","closable",j],headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",cache:[M.HasDecoratorInputTransform,"cache","cache",j],tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",selected:"selected",disabled:"disabled",header:"header",leftIcon:"leftIcon",rightIcon:"rightIcon"},features:[Ge],ngContentSelectors:F_,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(i,r){i&1&&(Ht(),w(0,dO,3,6,"div",0)),i&2&&d("ngIf",!r.closed)},dependencies:[Be,Ke],encapsulation:2})}return n})(),Mp=(()=>{class n{platformId;el;cd;renderer;style;styleClass;controlClose;scrollable;get activeIndex(){return this._activeIndex}set activeIndex(e){if(this._activeIndex=e,this.preventActiveIndexPropagation){this.preventActiveIndexPropagation=!1;return}this.tabs&&this.tabs.length&&this._activeIndex!=null&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0,this.tabChanged=!0,this.updateScrollBar(e))}selectOnFocus=!1;nextButtonAriaLabel;prevButtonAriaLabel;autoHideButtons=!0;tabindex=0;onChange=new $;onClose=new $;activeIndexChange=new $;content;navbar;prevBtn;nextBtn;inkbar;tabPanels;templates;initialized;tabs;_activeIndex;preventActiveIndexPropagation;tabChanged;backwardIsDisabled=!0;forwardIsDisabled=!1;tabChangesSubscription;nextIconTemplate;previousIconTemplate;resizeObserver;container;list;buttonVisible;elementToObserve;constructor(e,i,r,s){this.platformId=e,this.el=i,this.cd=r,this.renderer=s}ngAfterContentInit(){this.initTabs(),this.tabChangesSubscription=this.tabPanels.changes.subscribe(e=>{this.initTabs(),this.refreshButtonState()}),this.templates.forEach(e=>{switch(e.getType()){case"previousicon":this.previousIconTemplate=e.template;break;case"nexticon":this.nextIconTemplate=e.template;break}})}ngAfterViewInit(){ft(this.platformId)&&this.autoHideButtons&&this.bindResizeObserver()}bindResizeObserver(){this.container=C.findSingle(this.el.nativeElement,'[data-pc-section="navcontent"]'),this.list=C.findSingle(this.el.nativeElement,'[data-pc-section="nav"]'),this.resizeObserver=new ResizeObserver(()=>{this.list.offsetWidth>=this.container.offsetWidth?this.buttonVisible=!0:this.buttonVisible=!1,this.updateButtonState(),this.cd.detectChanges()}),this.resizeObserver.observe(this.container)}unbindResizeObserver(){this.resizeObserver.unobserve(this.elementToObserve.nativeElement),this.resizeObserver=null}ngAfterViewChecked(){ft(this.platformId)&&this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}ngOnDestroy(){this.tabChangesSubscription&&this.tabChangesSubscription.unsubscribe(),this.resizeObserver&&this.unbindResizeObserver()}getTabHeaderActionId(e){return`${e}_header_action`}getTabContentId(e){return`${e}_content`}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(this.activeIndex!=null&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}onTabKeyDown(e,i){switch(e.code){case"ArrowLeft":this.onTabArrowLeftKey(e);break;case"ArrowRight":this.onTabArrowRightKey(e);break;case"Home":this.onTabHomeKey(e);break;case"End":this.onTabEndKey(e);break;case"PageDown":this.onTabEndKey(e);break;case"PageUp":this.onTabHomeKey(e);break;case"Enter":case"Space":this.open(e,i);break;default:break}}onTabArrowLeftKey(e){let i=this.findPrevHeaderAction(e.target.parentElement),r=C.getAttribute(i,"data-pc-index");i?this.changeFocusedTab(e,i,r):this.onTabEndKey(e),e.preventDefault()}onTabArrowRightKey(e){let i=this.findNextHeaderAction(e.target.parentElement),r=C.getAttribute(i,"data-pc-index");i?this.changeFocusedTab(e,i,r):this.onTabHomeKey(e),e.preventDefault()}onTabHomeKey(e){let i=this.findFirstHeaderAction(),r=C.getAttribute(i,"data-pc-index");this.changeFocusedTab(e,i,r),e.preventDefault()}onTabEndKey(e){let i=this.findLastHeaderAction(),r=C.getAttribute(i,"data-pc-index");this.changeFocusedTab(e,i,r),e.preventDefault()}changeFocusedTab(e,i,r){if(i&&(C.focus(i),i.scrollIntoView({block:"nearest"}),this.selectOnFocus)){let s=this.tabs[r];this.open(e,s)}}findNextHeaderAction(e,i=!1){let r=i?e:e.nextElementSibling;return r?C.getAttribute(r,"data-p-disabled")||C.getAttribute(r,"data-pc-section")==="inkbar"?this.findNextHeaderAction(r):C.findSingle(r,'[data-pc-section="headeraction"]'):null}findPrevHeaderAction(e,i=!1){let r=i?e:e.previousElementSibling;return r?C.getAttribute(r,"data-p-disabled")||C.getAttribute(r,"data-pc-section")==="inkbar"?this.findPrevHeaderAction(r):C.findSingle(r,'[data-pc-section="headeraction"]'):null}findFirstHeaderAction(){let e=this.navbar.nativeElement.firstElementChild;return this.findNextHeaderAction(e,!0)}findLastHeaderAction(){let e=this.navbar.nativeElement.lastElementChild,i=C.getAttribute(e,"data-pc-section")==="inkbar"?e.previousElementSibling:e;return this.findPrevHeaderAction(i,!0)}open(e,i){if(i.disabled){e&&e.preventDefault();return}if(!i.selected){let r=this.findSelectedTab();r&&(r.selected=!1),this.tabChanged=!0,i.selected=!0;let s=this.findTabIndex(i);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(s),this.onChange.emit({originalEvent:e,index:s}),this.updateScrollBar(s)}e&&e.preventDefault()}close(e,i){this.controlClose?this.onClose.emit({originalEvent:e,index:this.findTabIndex(i),close:()=>{this.closeTab(i)}}):(this.closeTab(i),this.onClose.emit({originalEvent:e,index:this.findTabIndex(i)}))}closeTab(e){if(!e.disabled){if(e.selected){this.tabChanged=!0,e.selected=!1;for(let i=0;i<this.tabs.length;i++){let r=this.tabs[i];if(!r.closed&&!e.disabled){r.selected=!0;break}}}e.closed=!0}}findSelectedTab(){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].selected)return this.tabs[e];return null}findTabIndex(e){let i=-1;for(let r=0;r<this.tabs.length;r++)if(this.tabs[r]==e){i=r;break}return i}getBlockableElement(){return this.el.nativeElement.children[0]}updateInkBar(){if(ft(this.platformId)&&this.navbar){let e=C.findSingle(this.navbar.nativeElement,"li.p-highlight");if(!e)return;this.inkbar.nativeElement.style.width=C.getWidth(e)+"px",this.inkbar.nativeElement.style.left=C.getOffset(e).left-C.getOffset(this.navbar.nativeElement).left+"px"}}updateScrollBar(e){let i=this.navbar.nativeElement.children[e];i&&i.scrollIntoView({block:"nearest"})}updateButtonState(){let e=this.content.nativeElement,{scrollLeft:i,scrollWidth:r}=e,s=C.getWidth(e);this.backwardIsDisabled=i===0,this.forwardIsDisabled=Math.round(i)===r-s}refreshButtonState(){this.container=C.findSingle(this.el.nativeElement,'[data-pc-section="navcontent"]'),this.list=C.findSingle(this.el.nativeElement,'[data-pc-section="nav"]'),this.list.offsetWidth>=this.container.offsetWidth&&(this.list.offsetWidth>=this.container.offsetWidth?this.buttonVisible=!0:this.buttonVisible=!1,this.updateButtonState(),this.cd.markForCheck())}onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()}getVisibleButtonWidths(){return[this.prevBtn?.nativeElement,this.nextBtn?.nativeElement].reduce((e,i)=>i?e+C.getWidth(i):e,0)}navBackward(){let e=this.content.nativeElement,i=C.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft-i;e.scrollLeft=r<=0?0:r}navForward(){let e=this.content.nativeElement,i=C.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft+i,s=e.scrollWidth-i;e.scrollLeft=r>=s?s:r}static \u0275fac=function(i){return new(i||n)(D(Et),D(We),D(Xe),D(Ot))};static \u0275cmp=Z({type:n,selectors:[["p-tabView"]],contentQueries:function(i,r,s){if(i&1&&(Me(s,Pp,4),Me(s,Le,4)),i&2){let a;W(a=Q())&&(r.tabPanels=a),W(a=Q())&&(r.templates=a)}},viewQuery:function(i,r){if(i&1&&(me(pO,5),me(hO,5),me(mO,5),me(fO,5),me(gO,5),me(_O,5)),i&2){let s;W(s=Q())&&(r.content=s.first),W(s=Q())&&(r.navbar=s.first),W(s=Q())&&(r.prevBtn=s.first),W(s=Q())&&(r.nextBtn=s.first),W(s=Q())&&(r.inkbar=s.first),W(s=Q())&&(r.elementToObserve=s.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",controlClose:[M.HasDecoratorInputTransform,"controlClose","controlClose",j],scrollable:[M.HasDecoratorInputTransform,"scrollable","scrollable",j],activeIndex:"activeIndex",selectOnFocus:[M.HasDecoratorInputTransform,"selectOnFocus","selectOnFocus",j],nextButtonAriaLabel:"nextButtonAriaLabel",prevButtonAriaLabel:"prevButtonAriaLabel",autoHideButtons:[M.HasDecoratorInputTransform,"autoHideButtons","autoHideButtons",j],tabindex:[M.HasDecoratorInputTransform,"tabindex","tabindex",we]},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},features:[Ge],ngContentSelectors:F_,decls:14,vars:13,consts:[["elementToObserve",""],["content",""],["navbar",""],["inkbar",""],["prevBtn",""],["nextBtn",""],[3,"ngClass","ngStyle"],[1,"p-tabview-nav-container"],["class","p-tabview-nav-prev p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-nav-content",3,"scroll"],["role","tablist",1,"p-tabview-nav"],["ngFor","",3,"ngForOf"],["role","presentation","aria-hidden","true",1,"p-tabview-ink-bar"],["class","p-tabview-nav-next p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-panels"],["type","button","pRipple","",1,"p-tabview-nav-prev","p-tabview-nav-btn","p-link",3,"click"],[4,"ngIf"],[4,"ngTemplateOutlet"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"click","keydown","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],["class","p-tabview-left-icon",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],["class","p-tabview-right-icon",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-left-icon"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-right-icon"],[3,"styleClass","click",4,"ngIf"],["class","tab.closeIconTemplate",4,"ngIf"],[3,"click","styleClass"],[1,"tab.closeIconTemplate"],["type","button","pRipple","",1,"p-tabview-nav-next","p-tabview-nav-btn","p-link",3,"click"]],template:function(i,r){if(i&1){let s=H();Ht(),_(0,"div",6)(1,"div",7,0),w(3,IO,4,4,"button",8),_(4,"div",9,1),L("scroll",function(o){return E(s),O(r.onScroll(o))}),_(6,"ul",10,2),w(8,zO,1,1,"ng-template",11),A(9,"li",12,3),y()(),w(11,HO,4,4,"button",13),y(),_(12,"div",14),Ct(13),y()()}i&2&&(ee(r.styleClass),d("ngClass",le(11,yO,r.scrollable))("ngStyle",r.style),k("data-pc-name","tabview"),m(3),d("ngIf",r.scrollable&&!r.backwardIsDisabled&&r.autoHideButtons),m(),k("data-pc-section","navcontent"),m(2),k("data-pc-section","nav"),m(2),d("ngForOf",r.tabs),m(),k("data-pc-section","inkbar"),m(2),d("ngIf",r.scrollable&&!r.forwardIsDisabled&&r.buttonVisible))},dependencies:()=>[He,vt,Be,Ke,Ze,Xn,ei,ot,Ap,kp],styles:[`@layer primeng{.p-tabview-nav-container{position:relative}.p-tabview-scrollable .p-tabview-nav-container{overflow:hidden}.p-tabview-nav-content{overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:none;overscroll-behavior:contain auto}.p-tabview-nav{display:inline-flex;min-width:100%;margin:0;padding:0;list-style-type:none;flex:1 1 auto}.p-tabview-nav-link{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;position:relative;text-decoration:none;overflow:hidden}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1;white-space:nowrap}.p-tabview-nav-btn{position:absolute;top:0;z-index:2;height:100%;display:flex;align-items:center;justify-content:center}.p-tabview-nav-prev{left:0}.p-tabview-nav-next{right:0}.p-tabview-nav-content::-webkit-scrollbar{display:none}.p-tabview-close{z-index:1}}
`],encapsulation:2,changeDetection:0})}return n})(),L_=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,Ue,In,li,ot,Ap,kp,Ue]})}return n})();var KO=["*"];function GO(n,t){if(n&1&&A(0,"span",5),n&2){let e=f(2);d("ngClass",e.icon)}}function ZO(n,t){if(n&1&&(B(0),w(1,GO,1,1,"span",4),U()),n&2){let e=f();m(),d("ngIf",e.icon)}}function WO(n,t){}function QO(n,t){n&1&&w(0,WO,0,0,"ng-template")}function JO(n,t){if(n&1&&(_(0,"span",6),w(1,QO,1,0,null,7),y()),n&2){let e=f();m(),d("ngTemplateOutlet",e.iconTemplate)}}var j_=(()=>{class n{cd;get style(){return this._style}set style(e){this._style=e,this.cd.markForCheck()}styleClass;severity;value;icon;rounded;templates;iconTemplate;_style;ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"icon":this.iconTemplate=e.template;break}})}constructor(e){this.cd=e}containerClass(){return{"p-tag p-component":!0,"p-tag-info":this.severity==="info","p-tag-success":this.severity==="success","p-tag-warning":this.severity==="warning","p-tag-danger":this.severity==="danger","p-tag-rounded":this.rounded}}static \u0275fac=function(i){return new(i||n)(D(Xe))};static \u0275cmp=Z({type:n,selectors:[["p-tag"]],contentQueries:function(i,r,s){if(i&1&&Me(s,Le,4),i&2){let a;W(a=Q())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",severity:"severity",value:"value",icon:"icon",rounded:[M.HasDecoratorInputTransform,"rounded","rounded",j]},features:[Ge],ngContentSelectors:KO,decls:6,vars:7,consts:[[3,"ngClass","ngStyle"],[4,"ngIf"],["class","p-tag-icon",4,"ngIf"],[1,"p-tag-value"],["class","p-tag-icon",3,"ngClass",4,"ngIf"],[1,"p-tag-icon",3,"ngClass"],[1,"p-tag-icon"],[4,"ngTemplateOutlet"]],template:function(i,r){i&1&&(Ht(),_(0,"span",0),Ct(1),w(2,ZO,2,1,"ng-container",1)(3,JO,2,1,"span",2),_(4,"span",3),N(5),y()()),i&2&&(ee(r.styleClass),d("ngClass",r.containerClass())("ngStyle",r.style),m(2),d("ngIf",!r.iconTemplate),m(),d("ngIf",r.iconTemplate),m(2),ye(r.value))},dependencies:[He,Be,Ke,Ze],styles:[`@layer primeng{.p-tag{display:inline-flex;align-items:center;justify-content:center}.p-tag-icon,.p-tag-value,.p-tag-icon.pi{line-height:1.5}.p-tag.p-tag-rounded{border-radius:10rem}}
`],encapsulation:2,changeDetection:0})}return n})(),V_=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,Ue,Ue]})}return n})();var XO=["input"];function eA(n,t){if(n&1){let e=H();_(0,"TimesIcon",5),L("click",function(){E(e);let r=f(2);return O(r.clear())}),y()}n&2&&(d("styleClass","p-inputmask-clear-icon"),k("data-pc-section","clearIcon"))}function tA(n,t){}function iA(n,t){n&1&&w(0,tA,0,0,"ng-template")}function nA(n,t){if(n&1){let e=H();_(0,"span",6),L("click",function(){E(e);let r=f(2);return O(r.clear())}),w(1,iA,1,0,null,7),y()}if(n&2){let e=f(2);k("data-pc-section","clearIcon"),m(),d("ngTemplateOutlet",e.clearIconTemplate)}}function rA(n,t){if(n&1&&(B(0),w(1,eA,1,2,"TimesIcon",3)(2,nA,2,2,"span",4),U()),n&2){let e=f();m(),d("ngIf",!e.clearIconTemplate),m(),d("ngIf",e.clearIconTemplate)}}var sA={provide:Ei,useExisting:oi(()=>Rp),multi:!0},Rp=(()=>{class n{document;platformId;el;cd;config;type="text";slotChar="_";autoClear=!0;showClear=!1;style;inputId;styleClass;placeholder;size;maxlength;tabindex;title;variant="outlined";ariaLabel;ariaLabelledBy;ariaRequired;disabled;readonly;unmask;name;required;characterPattern="[A-Za-z]";autofocus;set autoFocus(e){this.autofocus=e,console.warn("autoFocus is deprecated. Use autofocus property instead.")}autocomplete;keepBuffer=!1;get mask(){return this._mask}set mask(e){this._mask=e,this.initMask(),this.writeValue(""),this.onModelChange(this.value)}onComplete=new $;onFocus=new $;onBlur=new $;onInput=new $;onKeydown=new $;onClear=new $;inputViewChild;templates;clearIconTemplate;value;_mask;onModelChange=()=>{};onModelTouched=()=>{};input;filled;defs;tests;partialPosition;firstNonMaskPos;lastRequiredNonMaskPos;len;oldVal;buffer;defaultBuffer;focusText;caretTimeoutId;androidChrome=!0;focused;_variant="outlined";get inputClass(){return{"p-inputmask":!0}}constructor(e,i,r,s,a){this.document=e,this.platformId=i,this.el=r,this.cd=s,this.config=a}ngOnInit(){if(ft(this.platformId)){let e=navigator.userAgent;this.androidChrome=/chrome/i.test(e)&&/android/i.test(e)}this.initMask()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"clearicon":this.clearIconTemplate=e.template;break}})}initMask(){this.tests=[],this.partialPosition=this.mask.length,this.len=this.mask.length,this.firstNonMaskPos=null,this.defs={9:"[0-9]",a:this.characterPattern,"*":`${this.characterPattern}|[0-9]`};let e=this.mask.split("");for(let i=0;i<e.length;i++){let r=e[i];r=="?"?(this.len--,this.partialPosition=i):this.defs[r]?(this.tests.push(new RegExp(this.defs[r])),this.firstNonMaskPos===null&&(this.firstNonMaskPos=this.tests.length-1),i<this.partialPosition&&(this.lastRequiredNonMaskPos=this.tests.length-1)):this.tests.push(null)}this.buffer=[];for(let i=0;i<e.length;i++){let r=e[i];r!="?"&&(this.defs[r]?this.buffer.push(this.getPlaceholder(i)):this.buffer.push(r))}this.defaultBuffer=this.buffer.join("")}writeValue(e){this.value=e,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.value==null||this.value==null?this.inputViewChild.nativeElement.value="":this.inputViewChild.nativeElement.value=this.value,this.checkVal(),this.focusText=this.inputViewChild.nativeElement.value,this.updateFilledState())}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}caret(e,i){let r,s,a;if(!(!this.inputViewChild?.nativeElement.offsetParent||this.inputViewChild.nativeElement!==this.inputViewChild.nativeElement.ownerDocument.activeElement))if(typeof e=="number")s=e,a=typeof i=="number"?i:s,this.inputViewChild.nativeElement.setSelectionRange?this.inputViewChild.nativeElement.setSelectionRange(s,a):this.inputViewChild.nativeElement.createTextRange&&(r=this.inputViewChild.nativeElement.createTextRange(),r.collapse(!0),r.moveEnd("character",a),r.moveStart("character",s),r.select());else return this.inputViewChild.nativeElement.setSelectionRange?(s=this.inputViewChild.nativeElement.selectionStart,a=this.inputViewChild.nativeElement.selectionEnd):this.document&&this.document.selection.createRange&&(r=this.document.createRange(),s=0-r.duplicate().moveStart("character",-1e5),a=s+r.text.length),{begin:s,end:a}}isCompleted(){let e;for(let i=this.firstNonMaskPos;i<=this.lastRequiredNonMaskPos;i++)if(this.tests[i]&&this.buffer[i]===this.getPlaceholder(i))return!1;return!0}getPlaceholder(e){return e<this.slotChar.length?this.slotChar.charAt(e):this.slotChar.charAt(0)}seekNext(e){for(;++e<this.len&&!this.tests[e];);return e}seekPrev(e){for(;--e>=0&&!this.tests[e];);return e}shiftL(e,i){let r,s;if(!(e<0)){for(r=e,s=this.seekNext(i);r<this.len;r++)if(this.tests[r]){if(s<this.len&&this.tests[r].test(this.buffer[s]))this.buffer[r]=this.buffer[s],this.buffer[s]=this.getPlaceholder(s);else break;s=this.seekNext(s)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,e))}}shiftR(e){let i,r,s,a;for(i=e,r=this.getPlaceholder(e);i<this.len;i++)if(this.tests[i])if(s=this.seekNext(i),a=this.buffer[i],this.buffer[i]=r,s<this.len&&this.tests[s].test(a))r=a;else break}handleAndroidInput(e){var i=this.inputViewChild?.nativeElement.value,r=this.caret();if(this.oldVal&&this.oldVal.length&&this.oldVal.length>i.length){for(this.checkVal(!0);r.begin>0&&!this.tests[r.begin-1];)r.begin--;if(r.begin===0)for(;r.begin<this.firstNonMaskPos&&!this.tests[r.begin];)r.begin++;setTimeout(()=>{this.caret(r.begin,r.begin),this.updateModel(e),this.isCompleted()&&this.onComplete.emit()},0)}else{for(this.checkVal(!0);r.begin<this.len&&!this.tests[r.begin];)r.begin++;setTimeout(()=>{this.caret(r.begin,r.begin),this.updateModel(e),this.isCompleted()&&this.onComplete.emit()},0)}}onInputBlur(e){if(this.focused=!1,this.onModelTouched(),this.keepBuffer||this.checkVal(),this.updateFilledState(),this.onBlur.emit(e),this.inputViewChild?.nativeElement.value!=this.focusText||this.inputViewChild?.nativeElement.value!=this.value){this.updateModel(e);let i=this.document.createEvent("HTMLEvents");i.initEvent("change",!0,!1),this.inputViewChild?.nativeElement.dispatchEvent(i)}}onInputKeydown(e){if(this.readonly)return;let i=e.which||e.keyCode,r,s,a,o;ft(this.platformId)&&(o=/iphone/i.test(C.getUserAgent())),this.oldVal=this.inputViewChild?.nativeElement.value,this.onKeydown.emit(e),i===8||i===46||o&&i===127?(r=this.caret(),s=r.begin,a=r.end,a-s===0&&(s=i!==46?this.seekPrev(s):a=this.seekNext(s-1),a=i===46?this.seekNext(a):a),this.clearBuffer(s,a),this.keepBuffer?this.shiftL(s,a-2):this.shiftL(s,a-1),this.updateModel(e),this.onInput.emit(e),e.preventDefault()):i===13?(this.onInputBlur(e),this.updateModel(e)):i===27&&(this.inputViewChild.nativeElement.value=this.focusText,this.caret(0,this.checkVal()),this.updateModel(e),e.preventDefault())}onKeyPress(e){if(!this.readonly){var i=e.which||e.keyCode,r=this.caret(),s,a,o,l;e.ctrlKey||e.altKey||e.metaKey||i<32||i>34&&i<41||(i&&i!==13&&(r.end-r.begin!==0&&(this.clearBuffer(r.begin,r.end),this.shiftL(r.begin,r.end-1)),s=this.seekNext(r.begin-1),s<this.len&&(a=String.fromCharCode(i),this.tests[s].test(a)&&(this.shiftR(s),this.buffer[s]=a,this.writeBuffer(),o=this.seekNext(s),C.isClient()&&/android/i.test(C.getUserAgent())?setTimeout(()=>{this.caret(o)},0):this.caret(o),r.begin<=this.lastRequiredNonMaskPos&&(l=this.isCompleted()),this.onInput.emit(e))),e.preventDefault()),this.updateModel(e),this.updateFilledState(),l&&this.onComplete.emit())}}clearBuffer(e,i){if(!this.keepBuffer){let r;for(r=e;r<i&&r<this.len;r++)this.tests[r]&&(this.buffer[r]=this.getPlaceholder(r))}}writeBuffer(){this.inputViewChild.nativeElement.value=this.buffer.join("")}checkVal(e){let i=this.inputViewChild?.nativeElement.value,r=-1,s,a,o;for(s=0,o=0;s<this.len;s++)if(this.tests[s]){for(this.buffer[s]=this.getPlaceholder(s);o++<i.length;)if(a=i.charAt(o-1),this.tests[s].test(a)){this.keepBuffer||(this.buffer[s]=a),r=s;break}if(o>i.length){this.clearBuffer(s+1,this.len);break}}else this.buffer[s]===i.charAt(o)&&o++,s<this.partialPosition&&(r=s);return e?this.writeBuffer():r+1<this.partialPosition?this.autoClear||this.buffer.join("")===this.defaultBuffer?(this.inputViewChild?.nativeElement.value&&(this.inputViewChild.nativeElement.value=""),this.clearBuffer(0,this.len)):this.writeBuffer():(this.writeBuffer(),this.inputViewChild.nativeElement.value=this.inputViewChild?.nativeElement.value.substring(0,r+1)),this.partialPosition?s:this.firstNonMaskPos}onInputFocus(e){if(this.readonly)return;this.focused=!0,clearTimeout(this.caretTimeoutId);let i;this.focusText=this.inputViewChild?.nativeElement.value,i=this.keepBuffer?this.inputViewChild?.nativeElement.value.length:this.checkVal(),this.caretTimeoutId=setTimeout(()=>{this.inputViewChild?.nativeElement===this.inputViewChild?.nativeElement.ownerDocument.activeElement&&(this.writeBuffer(),i==this.mask?.replace("?","").length?this.caret(0,i):this.caret(i))},10),this.onFocus.emit(e)}onInputChange(e){this.androidChrome?this.handleAndroidInput(e):this.handleInputChange(e),this.onInput.emit(e)}handleInputChange(e){this.readonly||setTimeout(()=>{var i=this.checkVal(!0);this.caret(i),this.updateModel(e),this.isCompleted()&&this.onComplete.emit()},0)}getUnmaskedValue(){let e=[];for(let i=0;i<this.buffer.length;i++){let r=this.buffer[i];this.tests[i]&&r!=this.getPlaceholder(i)&&e.push(r)}return e.join("")}updateModel(e){let i=this.unmask?this.getUnmaskedValue():e.target.value;(i!==null||i!==void 0)&&(this.value=i,this.onModelChange(this.value))}updateFilledState(){this.filled=this.inputViewChild?.nativeElement&&this.inputViewChild.nativeElement.value!=""}focus(){this.inputViewChild?.nativeElement.focus()}clear(){this.inputViewChild.nativeElement.value="",this.value=null,this.onModelChange(this.value),this.onClear.emit()}static \u0275fac=function(i){return new(i||n)(D(Kt),D(Et),D(We),D(Xe),D(Tt))};static \u0275cmp=Z({type:n,selectors:[["p-inputMask"]],contentQueries:function(i,r,s){if(i&1&&Me(s,Le,4),i&2){let a;W(a=Q())&&(r.templates=a)}},viewQuery:function(i,r){if(i&1&&me(XO,7),i&2){let s;W(s=Q())&&(r.inputViewChild=s.first)}},hostAttrs:[1,"p-element"],hostVars:6,hostBindings:function(i,r){i&2&&bn("p-inputwrapper-filled",r.filled)("p-inputwrapper-focus",r.focused)("p-inputmask-clearable",r.showClear&&!r.disabled)},inputs:{type:"type",slotChar:"slotChar",autoClear:[M.HasDecoratorInputTransform,"autoClear","autoClear",j],showClear:[M.HasDecoratorInputTransform,"showClear","showClear",j],style:"style",inputId:"inputId",styleClass:"styleClass",placeholder:"placeholder",size:[M.HasDecoratorInputTransform,"size","size",we],maxlength:[M.HasDecoratorInputTransform,"maxlength","maxlength",we],tabindex:"tabindex",title:"title",variant:"variant",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",ariaRequired:[M.HasDecoratorInputTransform,"ariaRequired","ariaRequired",j],disabled:[M.HasDecoratorInputTransform,"disabled","disabled",j],readonly:[M.HasDecoratorInputTransform,"readonly","readonly",j],unmask:[M.HasDecoratorInputTransform,"unmask","unmask",j],name:"name",required:[M.HasDecoratorInputTransform,"required","required",j],characterPattern:"characterPattern",autofocus:[M.HasDecoratorInputTransform,"autofocus","autofocus",j],autoFocus:[M.HasDecoratorInputTransform,"autoFocus","autoFocus",j],autocomplete:"autocomplete",keepBuffer:[M.HasDecoratorInputTransform,"keepBuffer","keepBuffer",j],mask:"mask"},outputs:{onComplete:"onComplete",onFocus:"onFocus",onBlur:"onBlur",onInput:"onInput",onKeydown:"onKeydown",onClear:"onClear"},features:[qt([sA]),Ge],decls:3,vars:24,consts:[["input",""],["pInputText","","pAutoFocus","",3,"focus","blur","keydown","keypress","input","paste","ngClass","ngStyle","disabled","readonly","variant","autofocus"],[4,"ngIf"],[3,"styleClass","click",4,"ngIf"],["class","p-inputmask-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-inputmask-clear-icon",3,"click"],[4,"ngTemplateOutlet"]],template:function(i,r){if(i&1){let s=H();_(0,"input",1,0),L("focus",function(o){return E(s),O(r.onInputFocus(o))})("blur",function(o){return E(s),O(r.onInputBlur(o))})("keydown",function(o){return E(s),O(r.onInputKeydown(o))})("keypress",function(o){return E(s),O(r.onKeyPress(o))})("input",function(o){return E(s),O(r.onInputChange(o))})("paste",function(o){return E(s),O(r.handleInputChange(o))}),y(),w(2,rA,3,2,"ng-container",2)}i&2&&(ee(r.styleClass),d("ngClass",r.inputClass)("ngStyle",r.style)("disabled",r.disabled)("readonly",r.readonly)("variant",r.variant)("autofocus",r.autofocus),k("id",r.inputId)("type",r.type)("name",r.name)("placeholder",r.placeholder)("title",r.title)("size",r.size)("autocomplete",r.autocomplete)("maxlength",r.maxlength)("tabindex",r.tabindex)("aria-label",r.ariaLabel)("aria-labelledBy",r.ariaLabelledBy)("aria-required",r.ariaRequired)("required",r.required)("data-pc-name","inputmask")("data-pc-section","root"),m(2),d("ngIf",r.value!=null&&r.filled&&r.showClear&&!r.disabled))},dependencies:()=>[He,Be,Ke,Ze,Jn,Gn,ot],styles:[`@layer primeng{.p-inputmask-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputmask-clearable{position:relative}}
`],encapsulation:2,changeDetection:0})}return n})(),z_=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Ae({imports:[ue,Yn,Zn,ot,Ue]})}return n})();var $_=(()=>{let t=class t{constructor(){if(be.supabaseUrl&&be.supabaseKey)this.supabase=Gt(be.supabaseUrl,be.supabaseKey);else throw new Error("Supabase URL or key is undefined.")}getUpdatesByProject(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabase.from("project_updates").select("*").eq("project_id",i);if(s)throw s;return r})}createUpdate(i,r,s,a){return h(this,null,function*(){let{data:o,error:l}=yield this.supabase.from("project_updates").insert([{project_id:i,creator_id:r,title:s,description:a}]);if(l)throw l;return o})}updateUpdate(i,r,s){return h(this,null,function*(){let{data:a,error:o}=yield this.supabase.from("project_updates").update({title:r,description:s,updated_at:new Date}).eq("update_id",i);if(o)throw o;return a})}deleteUpdate(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabase.from("project_updates").delete().eq("update_id",i);if(s)throw s;return r})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var B_=(()=>{let t=class t{constructor(){if(be.supabaseUrl&&be.supabaseKey)this.supabase=Gt(be.supabaseUrl,be.supabaseKey);else throw new Error("Supabase URL or key is undefined.")}getCommentsByUpdate(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabase.from("update_comments").select("*").eq("update_id",i);if(s)throw s;return r})}createComment(i,r,s,a){return h(this,null,function*(){let{data:o,error:l}=yield this.supabase.from("update_comments").insert([{update_id:i,user_id:r,full_name:s,comment:a}]);if(l)throw l;return o})}updateComment(i,r){return h(this,null,function*(){let{data:s,error:a}=yield this.supabase.from("update_comments").update({comment:r,updated_at:new Date}).eq("comment_id",i);if(a)throw a;return s})}deleteComment(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabase.from("update_comments").delete().eq("comment_id",i);if(s)throw s;return r})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var U_=(()=>{let t=class t{constructor(){if(be.supabaseUrl&&be.supabaseKey)this.supabase=Gt(be.supabaseUrl,be.supabaseKey);else throw new Error("Supabase URL or key is undefined.")}getActivitiesByProject(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabase.from("project_activities").select("*").eq("project_id",i);if(s)throw s;return r})}getActivitiesByUser(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabase.from("project_activities").select("*").eq("user_id",i);if(s)throw s;return r})}createActivity(i,r,s,a,o){return h(this,null,function*(){let{data:l,error:u}=yield this.supabase.from("project_activities").insert([{project_id:i,user_id:r,full_name:s,amount_spent:a,description:o}]);if(u)throw u;return l})}updateActivity(i,r,s,a){return h(this,null,function*(){let{data:o,error:l}=yield this.supabase.from("project_activities").update({full_name:r,amount_spent:s,description:a,updated_at:new Date}).eq("id",i);if(l)throw l;return o})}deleteActivity(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabase.from("project_activities").delete().eq("id",i);if(s)throw s;return r})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var H_=(()=>{let t=class t{constructor(){if(be.supabaseUrl&&be.supabaseKey)this.supabase=Gt(be.supabaseUrl,be.supabaseKey);else throw new Error("Supabase URL or key is undefined.")}getReportsByProject(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabase.from("project_reports").select("*").eq("proyecto_id",i);if(s)throw s;return r})}getReportsByUser(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabase.from("project_reports").select("*").eq("user_id",i);if(s)throw s;return r})}createReport(i,r,s){return h(this,null,function*(){let{data:a,error:o}=yield this.supabase.from("project_reports").insert([{proyecto_id:i,user_id:r,motivo:s}]);if(o)throw o;return a})}updateReport(i,r){return h(this,null,function*(){let{data:s,error:a}=yield this.supabase.from("project_reports").update({motivo:r,updated_at:new Date}).eq("id",i);if(a)throw a;return s})}deleteReport(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabase.from("project_reports").delete().eq("id",i);if(s)throw s;return r})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var dA=()=>({height:"10px"}),q_=()=>({width:"100%"}),K_=()=>({width:"35rem"}),G_=()=>({width:"45rem"}),Z_=()=>({height:"200px"});function pA(n,t){n&1&&A(0,"p-tag",5),n&2&&d("rounded",!0)}function hA(n,t){if(n&1){let e=H();_(0,"p-button",62),L("onClick",function(){E(e);let r=f();return O(r.onShowReportDialog())}),y(),_(1,"p-dialog",63),Nt("visibleChange",function(r){E(e);let s=f();return Dt(s.showReportDialog,r)||(s.showReportDialog=r),O(r)}),_(2,"div",25),N(3," Explicanos los motivos... "),y(),_(4,"div",27)(5,"div",17)(6,"label",64),N(7,"Motivo"),y(),_(8,"input",65),Nt("ngModelChange",function(r){E(e);let s=f();return Dt(s.reasonForReport,r)||(s.reasonForReport=r),O(r)}),y()(),_(9,"div",35)(10,"p-button",36),L("click",function(){E(e);let r=f();return O(r.onHideReportDialog())}),y(),_(11,"p-button",66),L("click",function(){E(e);let r=f();return O(r.onReportProject())}),y()()()()}if(n&2){let e=f();m(),Qe(Fe(5,K_)),d("modal",!0),Rt("visible",e.showReportDialog),m(7),Rt("ngModel",e.reasonForReport)}}function mA(n,t){if(n&1&&A(0,"p-tag",67),n&2){let e=t.$implicit;d("rounded",!0)("value",e)}}function fA(n,t){if(n&1){let e=H();_(0,"div")(1,"p-button",68),L("onClick",function(){E(e);let r=f();return O(r.showCreateActivityDialog())}),y(),_(2,"p-dialog",69),Nt("visibleChange",function(r){E(e);let s=f();return Dt(s.createActivityDialogVisible,r)||(s.createActivityDialogVisible=r),O(r)}),_(3,"div",50)(4,"div",17)(5,"label",70),N(6,"Monto gastado"),y(),_(7,"p-inputNumber",71),Nt("ngModelChange",function(r){E(e);let s=f();return Dt(s.newActivity.amount_spent,r)||(s.newActivity.amount_spent=r),O(r)}),y()(),_(8,"div",17)(9,"label",72),N(10,"Descripcion"),y(),_(11,"p-editor",73),Nt("ngModelChange",function(r){E(e);let s=f();return Dt(s.newActivity.description,r)||(s.newActivity.description=r),O(r)}),y()()(),_(12,"div",74)(13,"p-button",75),L("onClick",function(){E(e);let r=f();return O(r.hideCreateActivityDialog())}),y(),_(14,"p-button",76),L("onClick",function(){E(e);let r=f();return O(r.addActivity())}),y(),A(15,"p-toast"),y()()()}if(n&2){let e=f();m(),d("outlined",!0)("rounded",!0),m(),Qe(Fe(12,G_)),d("modal",!0),Rt("visible",e.createActivityDialogVisible),m(5),d("minFractionDigits",2)("maxFractionDigits",2),Rt("ngModel",e.newActivity.amount_spent),m(4),Qe(Fe(13,Z_)),Rt("ngModel",e.newActivity.description)}}function gA(n,t){if(n&1&&(_(0,"div",55)(1,"div",77)(2,"div",78)(3,"div",55),A(4,"img",79),_(5,"span",80),N(6),y()(),A(7,"p-tag",81),y(),_(8,"div",82),A(9,"div",83),y()()()),n&2){let e=t.$implicit;m(6),ye(e==null?null:e.full_name),m(),xh("value","-",e==null?null:e.amount_spent," Bs."),d("rounded",!0),m(2),d("innerHTML",e==null?null:e.description,ks)}}function _A(n,t){if(n&1){let e=H();_(0,"div",84)(1,"p-button",85),L("onClick",function(){E(e);let r=f();return O(r.showCreateUpdateDialog())}),y(),_(2,"p-dialog",86),Nt("visibleChange",function(r){E(e);let s=f();return Dt(s.createUpdateDialogVisible,r)||(s.createUpdateDialogVisible=r),O(r)}),_(3,"div",50)(4,"div",17)(5,"label",87),N(6,"Titulo"),y(),_(7,"input",88),Nt("ngModelChange",function(r){E(e);let s=f();return Dt(s.newUpdate.title,r)||(s.newUpdate.title=r),O(r)}),y()(),_(8,"div",17)(9,"label",72),N(10,"Contenido"),y(),_(11,"p-editor",73),Nt("ngModelChange",function(r){E(e);let s=f();return Dt(s.newUpdate.description,r)||(s.newUpdate.description=r),O(r)}),y()()(),_(12,"div",74)(13,"p-button",75),L("onClick",function(){E(e);let r=f();return O(r.hideCreateUpdateDialog())}),y(),_(14,"p-button",76),L("onClick",function(){E(e);let r=f();return O(r.createUpdate())}),y()()()()}if(n&2){let e=f();m(2),Qe(Fe(8,G_)),d("modal",!0),Rt("visible",e.createUpdateDialogVisible),m(5),Rt("ngModel",e.newUpdate.title),m(4),Qe(Fe(9,Z_)),Rt("ngModel",e.newUpdate.description)}}function yA(n,t){if(n&1&&(_(0,"div")(1,"div",97),A(2,"img",79),_(3,"div",98)(4,"span",80),N(5),y(),_(6,"span",91),N(7),y()()()()),n&2){let e=t.$implicit;m(5),ye(e==null?null:e.full_name),m(2),ye(e==null?null:e.comment)}}function bA(n,t){if(n&1){let e=H();_(0,"div",61)(1,"div",84)(2,"div",89),A(3,"img",90),_(4,"span",91),N(5),y()()(),_(6,"div",30)(7,"div",92),N(8),y(),A(9,"div",83),y(),A(10,"div",93),_(11,"div",94),N(12,"Commentarios"),y(),Hn(13,yA,8,2,"div",null,Un),_(15,"div")(16,"div",55)(17,"input",95),Nt("ngModelChange",function(r){E(e);let s=f();return Dt(s.newComment,r)||(s.newComment=r),O(r)}),y(),_(18,"p-button",96),L("onClick",function(){let r=E(e).$implicit,s=f();return O(s.createComment(r.update_id))}),y()()()()}if(n&2){let e=t.$implicit,i=f();m(5),ye(e==null?null:e.creator),m(3),Je(" ",e.title," "),m(),d("innerHTML",e.description,ks),m(4),qn(e==null?null:e.comments),m(4),Rt("ngModel",i.newComment)}}var W_=(()=>{let t=class t{constructor(i,r,s,a,o,l,u,p,g,b){this.route=i,this.projectService=r,this.donationService=s,this.messageService=a,this.projectUpdateService=o,this.updateCommentService=l,this.authService=u,this.projectActivityService=p,this.aiService=g,this.projectReportService=b,this.project={},this.dialogVisible=!1,this.donationForm=new Ns({}),this.createUpdateDialogVisible=!1,this.updates=[],this.newUpdate={title:"",description:""},this.newComment="",this.isCreator=!1,this.createActivityDialogVisible=!1,this.activities=[],this.newActivity={amount_spent:0,description:""},this.totalAmountSpent=0,this.showReportDialog=!1,this.reasonForReport="",this.projectAlreadyReported=!1}ngOnInit(){let i=localStorage.getItem("session");this.userSession=JSON.parse(i),this.setDonationForm(),this.getProjectDetails()}setDonationForm(){this.donationForm=new Ns({amount:new ti("",_i.required)})}getProjectDetails(){let i=this.route.snapshot.params.id;this.projectService.getProjectById(i).then(r=>{this.project=r,console.log(this.project.user_id,this.userSession.id),this.isCreator=this.project.user_id===this.userSession.id,this.loadUpdates(),this.getProjectActivities()}),this.project,this.projectReportService.getReportsByUser(this.userSession.id).then(r=>{r.length>0&&(this.projectAlreadyReported=!0)})}showPaymentDialog(){this.dialogVisible=!0}hidePaymentDialog(){this.dialogVisible=!1}goBack(){window.history.back()}donate(){return h(this,null,function*(){let i=this.project.project_id,r=this.donationForm.value.amount;yield this.donationService.createDonation(this.userSession.id,i,r).then(()=>{this.projectService.updateAmountRaised(i,r).then(()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Gracias por tu donaci\xF3n!",life:3e3})}),this.getProjectDetails()}),this.hidePaymentDialog()})}showCreateActivityDialog(){this.createActivityDialogVisible=!0}hideCreateActivityDialog(){this.createActivityDialogVisible=!1}getProjectActivities(){return h(this,null,function*(){try{this.activities=yield this.projectActivityService.getActivitiesByProject(this.project.project_id),this.activities.map(i=>{this.totalAmountSpent+=i.amount_spent})}catch(i){console.error("Error fetching project activities:",i)}})}addActivity(){return h(this,null,function*(){let r=(yield this.authService.getUserProfile(this.userSession.id)).data[0].full_name;if(this.newActivity.amount_spent>this.project.amount_raised){this.messageService.add({severity:"error",summary:"Error",detail:"El monto gastado es mayor al monto recaudado",life:3e3});return}let s=yield this.aiService.validateActivity(this.project.project_name,this.project.project_description,this.newActivity.amount_spent,this.newActivity.description);s=s.replace(/<[^>]*>?/gm,""),s=s.replace(/`/g,"");let a=JSON.parse(s);if(a.value===!1){this.messageService.add({severity:"error",summary:"Error",detail:a.explanation,life:8e3});return}try{let o=yield this.projectActivityService.createActivity(this.project.project_id,this.userSession.id,r,this.newActivity.amount_spent,this.newActivity.description);this.activities.push(o),this.getProjectActivities(),this.hideCreateActivityDialog()}catch(o){console.error("Error creating activity:",o)}})}showCreateUpdateDialog(){this.createUpdateDialogVisible=!0}hideCreateUpdateDialog(){this.createUpdateDialogVisible=!1}loadUpdates(){return h(this,null,function*(){this.updates=yield this.projectUpdateService.getUpdatesByProject(this.project.project_id);for(let r of this.updates)r.comments=yield this.updateCommentService.getCommentsByUpdate(r.update_id);let i=yield this.authService.getUserProfile(this.project.user_id);i=i.data[0].full_name;for(let r of this.updates)r.creator=i})}createUpdate(){return h(this,null,function*(){yield this.projectUpdateService.createUpdate(this.project.project_id,this.userSession.id,this.newUpdate.title,this.newUpdate.description).then(()=>{this.messageService.add({severity:"success",summary:"Actualizaci\xF3n creada",detail:"La actualizaci\xF3n ha sido creada",life:3e3}),this.hideCreateUpdateDialog()}),this.newUpdate={title:"",description:""},this.loadUpdates()})}createComment(i){return h(this,null,function*(){let r=yield this.authService.getUserProfile(this.userSession.id);yield this.updateCommentService.createComment(i,this.userSession.id,r.data[0].full_name,this.newComment).then(()=>{this.messageService.add({severity:"success",summary:"Comentario creado",detail:"El comentario ha sido creado",life:3e3})}),this.newComment="",this.loadUpdates()})}onReportProject(){this.projectReportService.createReport(this.project.project_id,this.userSession.id,this.reasonForReport).then(()=>{this.messageService.add({severity:"info",summary:"Reportar proyecto",detail:"El proyecto ha sido reportado",life:3e3}),this.onHideReportDialog()})}onShowReportDialog(){this.showReportDialog=!0}onHideReportDialog(){this.showReportDialog=!1}};t.\u0275fac=function(r){return new(r||t)(D(Ah),D(er),D(Gc),D(an),D($_),D(B_),D(Ls),D(U_),D(qc),D(H_))},t.\u0275cmp=Z({type:t,selectors:[["app-project-info"]],standalone:!0,features:[qt([an]),xe],decls:107,vars:43,consts:[[1,"flex","flex-col","mt-4"],["icon","pi pi-arrow-left",3,"onClick","rounded","outlined"],["header","Informacion del proyecto"],[1,"flex","flex-row","justify-between"],[1,"font-bold","text-3xl"],["severity","danger","icon","pi pi-exclamation-triangle","value","Reportado",3,"rounded"],[1,"flex","gap-4"],[1,"w-2/3","flex","flex-col","gap-4"],[1,"h-96","w-auto","object-none","rounded-2xl",3,"src"],[1,"flex"],[1,"mr-4"],["severity","success","icon","pi pi-check-circle",3,"rounded","value",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-2"],["severity","info","icon","pi pi-map-marker",3,"rounded","value"],["severity","contrast","icon","pi pi-objects-column",3,"rounded","value"],[1,"flex","flex-col"],[1,"font-bold","text-xl"],[1,"flex","flex-col","gap-2"],["icon","pi pi-file","severity","primary","size","large"],["target","_blank",1,"text-custom-purple",3,"href"],[1,"w-1/3"],[1,"flex","flex-col","gap-2","mt-4"],[3,"value","showValue"],["label","Donar","icon","pi pi-heart",3,"onClick","rounded"],["header","Realizar donacion",3,"visibleChange","modal","visible"],[1,"block","mb-5","bg-custom-purple","p-2","text-white","rounded-lg"],[1,"flex","flex-col","gap-4",3,"formGroup"],[1,"flex","flex-col","gap-2","w-full"],["for","required-budget"],["id","required-budget","inputId","minmaxfraction","mode","currency","currency","BOB","formControlName","amount",3,"minFractionDigits","maxFractionDigits"],[1,"flex","flex-col","gap-1"],["htmlFor","cardNumber"],["mask","9999 9999 9999 9999","placeholder","1234 1234 1234"],["mask","99/99","placeholder","00/00"],["mask","999","placeholder","CVC"],[1,"flex","justify-content-end","gap-2"],["label","Cancelar","severity","secondary",3,"click"],["label","Donar",3,"click"],["header","Actividades del proyecto"],[1,"flex","gap-12"],[1,"w-1/4","flex","flex-col","gap-4"],[1,"p-4","bg-custom-yellow","rounded-lg","flex","flex-col","gap-4"],[1,"flex","justify-between","items-center"],[1,"text-black","text-base"],["severity","primary","icon","pi pi-check-circle",3,"rounded"],[1,"text-black","font-bold","mt-8","text-5xl"],[1,"p-4","bg-custom-purple","rounded-lg","flex","flex-col"],[1,"text-white","text-base"],[1,"text-white","font-bold","mt-8","text-5xl"],[1,"w-3/4"],[1,"flex","flex-col","gap-4"],[1,"text-3xl","font-medium","m-0"],[4,"ngIf"],[1,"text-xl","font-medium"],[1,"text-xl","font-bold"],[1,"flex","gap-2"],["header","Foro"],[1,"flex","flex-col","items-center","justify-center"],[1,"flex","gap-8","items-center"],["class","",4,"ngIf"],[1,"flex","flex-col","gap-8","items-center","justify-center"],[1,"bg-custom-purple","px-16","py-6","rounded-lg","flex","flex-col","gap-2"],["label","Reportar","severity","danger",3,"onClick"],["header","Reportar proyecto",3,"visibleChange","modal","visible"],["for","project-name"],["pInputText","","id","project-name","aria-describedby","project-name",3,"ngModelChange","ngModel"],["label","Reportar",3,"click"],["severity","success","icon","pi pi-check-circle",3,"rounded","value"],["label","Crear actividad",3,"onClick","outlined","rounded"],["header","Crear actividad",3,"visibleChange","modal","visible"],["for","amount"],["id","required-budget","inputId","minmaxfraction","mode","currency","currency","BOB",3,"ngModelChange","minFractionDigits","maxFractionDigits","ngModel"],["for","description"],[3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-4","mt-8"],["label","Cancelar","severity","secondary",3,"onClick"],["label","Crear","severity","primary",3,"onClick"],[1,"flex","flex-col","gap-2","bg-indigo-600","rounded-md","p-4","lg:min-w-[500px]"],[1,"flex","justify-between"],["src","https://static.vecteezy.com/system/resources/thumbnails/008/442/086/small_2x/illustration-of-human-icon-user-symbol-icon-modern-design-on-blank-background-free-vector.jpg",1,"h-6","w-6","rounded-full"],[1,"text-white","font-semibold"],["severity","danger",3,"rounded","value"],[1,"flex","flex-col","gap-1","m-0","bg-indigo-600","rounded-lg"],[1,"ql-editor","p-0","opacity-90","font-sans","leading-normal","text-white","mt-4","text-base",3,"innerHTML"],[1,""],["label","Crear publicacion",3,"onClick"],["header","Crear actualizacion",3,"visibleChange","modal","visible"],["for","title"],["pInputText","","id","title","aria-describedby","title",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-4"],["src","https://static.vecteezy.com/system/resources/thumbnails/008/442/086/small_2x/illustration-of-human-icon-user-symbol-icon-modern-design-on-blank-background-free-vector.jpg",1,"h-10","w-10","rounded-full"],[1,"text-white"],[1,"text-custom-purple","text-center","font-semibold","text-2xl","m-0","bg-white","p-2","rounded-lg"],[1,"h-0.5","bg-white","rounded-lg","mt-8"],[1,"text-xl","text-white"],["pInputText","","placeholder","Escribe un comentario",3,"ngModelChange","ngModel"],["label","Comentar",3,"onClick"],[1,"flex","items-start","gap-2"],[1,"flex","flex-col","gap-1","p-2","bg-indigo-600","rounded-lg"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"p-button",1),L("onClick",function(){return s.goBack()}),y(),_(2,"p-tabView")(3,"p-tabPanel",2)(4,"div",3)(5,"h2",4),N(6),y(),w(7,pA,1,1,"p-tag",5)(8,hA,12,6),y(),_(9,"div",6)(10,"div",7),A(11,"img",8),_(12,"div",9)(13,"span",10),N(14),y(),w(15,mA,1,2,"p-tag",11),y(),_(16,"div",12),A(17,"p-tag",13)(18,"p-tag",14),y(),_(19,"div",15)(20,"span",16),N(21,"Descripcion"),y(),_(22,"p"),N(23),y()(),_(24,"div",15)(25,"span",16),N(26,"Presupuesto detallado"),y(),_(27,"p"),N(28),y()(),_(29,"div",17)(30,"span",16),N(31,"Documentos"),y(),_(32,"div",12),A(33,"p-button",18),_(34,"a",19),N(35,"Ver documento"),y()()()(),_(36,"div",20)(37,"div",21)(38,"span")(39,"span",16),N(40),y(),N(41),y(),A(42,"p-progressBar",22),_(43,"p-button",23),L("onClick",function(){return s.showPaymentDialog()}),y(),_(44,"p-dialog",24),Nt("visibleChange",function(o){return Dt(s.dialogVisible,o)||(s.dialogVisible=o),o}),_(45,"div",25),N(46," \u2764 Gracias por tu apoyo! "),y(),_(47,"form",26)(48,"div",27)(49,"label",28),N(50,"Monto"),y(),A(51,"p-inputNumber",29),y(),_(52,"div",30)(53,"label",31),N(54,"Numero de tarjeta"),y(),A(55,"p-inputMask",32),y(),_(56,"div",6)(57,"div",30)(58,"label",31),N(59,"Expiracion"),y(),A(60,"p-inputMask",33),y(),_(61,"div",30)(62,"label",31),N(63,"Expiracion"),y(),A(64,"p-inputMask",34),y()(),_(65,"div",35)(66,"p-button",36),L("click",function(){return s.hidePaymentDialog()}),y(),_(67,"p-button",37),L("click",function(){return s.donate()}),y()()()(),A(68,"p-toast"),y()()()(),_(69,"p-tabPanel",38)(70,"div",39)(71,"div",40)(72,"div",41)(73,"div",42)(74,"span",43),N(75,"Monto recaudado"),y(),A(76,"p-tag",44),y(),_(77,"span",45),N(78),y()(),_(79,"div",46)(80,"div",42)(81,"span",47),N(82,"Monto restante"),y(),A(83,"p-tag",44),y(),_(84,"span",48),N(85),y()()(),_(86,"div",49)(87,"div",50)(88,"div",6)(89,"h2",51),N(90," Todas las actividades "),y(),w(91,fA,16,14,"div",52),y(),_(92,"h3",53),N(93," Total gastado "),_(94,"span",54),N(95),y()(),Hn(96,gA,10,5,"div",55,Un),y()()()(),_(98,"p-tabPanel",56)(99,"div",57)(100,"div",58)(101,"h2"),N(102,"Actualizaciones del proyecto"),y(),w(103,_A,15,10,"div",59),y(),_(104,"div",60),Hn(105,bA,19,4,"div",61,Un),y()()()()()),r&2&&(m(),d("rounded",!0)("outlined",!0),m(5),ye(s.project.project_name),m(),wh(7,s.projectAlreadyReported?7:8),m(4),d("src",s.project.project_image,fi),m(3),Je("Fecha de creacion: ",s.project.created_at," "),m(),d("ngForOf",s.project.project_goals),m(2),d("rounded",!0)("value",s.project.project_location),m(),d("rounded",!0)("value",s.project.infrastructure_type),m(5),ye(s.project.project_description),m(5),ye(s.project.budget_description),m(6),Kn("href",s.project.document_url,fi),m(6),Je("Bs. ",s.project.amount_raised," "),m(),Je(" recaudado de Bs. ",s.project.required_budget,""),m(),Qe(Fe(39,dA)),d("value",s.project.amount_raised/s.project.required_budget)("showValue",!1),m(),Qe(Fe(40,q_)),d("rounded",!0),m(),Qe(Fe(41,K_)),d("modal",!0),Rt("visible",s.dialogVisible),m(3),d("formGroup",s.donationForm),m(4),d("minFractionDigits",2)("maxFractionDigits",2),m(4),Qe(Fe(42,q_)),m(21),d("rounded",!0),m(2),Je("+",s.project.amount_raised," Bs."),m(5),d("rounded",!0),m(2),Je("+",s.project.amount_raised-s.totalAmountSpent," Bs."),m(6),d("ngIf",s.isCreator),m(4),Je("",s.totalAmountSpent," Bs."),m(),qn(s.activities),m(7),d("ngIf",s.isCreator),m(2),qn(s.updates))},dependencies:[ue,vt,Be,L_,Mp,Pp,gt,Qn,Cn,cn,V_,j_,sl,rl,Yn,Jn,z_,Rp,ll,Ra,ul,Au,nl,il,tl,Yo,Wo,Qo,Jo,Xo,el,Fh,Dh,gi]});let n=t;return n})();var Q_=(()=>{let t=class t{constructor(){if(be.supabaseUrl&&be.supabaseKey)this.supabase=Gt(be.supabaseUrl,be.supabaseKey);else throw new Error("Supabase URL or key is undefined.")}getUserProfile(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabase.from("user_profiles").select("*").eq("id",i).single();return s?(console.error("Error fetching user profile:",s),null):r})}upsertUserProfile(i){return h(this,null,function*(){let{data:r,error:s}=yield this.supabase.from("user_profiles").upsert(i);return s?(console.error("Error upserting user profile:",s),null):r})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var J_=(()=>{let t=class t{constructor(i,r){this.fb=i,this.userProfileService=r,this.userId="user-uuid",this.userProfileForm=this.fb.group({full_name:["",_i.required]})}ngOnInit(){this.loadUserProfile()}loadUserProfile(){return h(this,null,function*(){let i=yield this.userProfileService.getUserProfile(this.userId);i&&this.userProfileForm.patchValue(i)})}onSubmit(){return h(this,null,function*(){if(this.userProfileForm.valid){let i={id:this.userId,full_name:this.userProfileForm.get("full_name")?.value},r=yield this.userProfileService.upsertUserProfile(i);alert(r?"Perfil de usuario actualizado correctamente":"Hubo un error al actualizar el perfil de usuario")}})}};t.\u0275fac=function(r){return new(r||t)(D(Nh),D(Q_))},t.\u0275cmp=Z({type:t,selectors:[["app-my-profile"]],standalone:!0,features:[xe],decls:8,vars:1,consts:[[1,"user-profile-container"],[3,"ngSubmit"],["for","fullName"],["id","fullName","formControlName","full_name","type","text"],["type","submit",3,"disabled"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"form",1),L("ngSubmit",function(){return s.onSubmit()}),_(2,"div")(3,"label",2),N(4,"Nombre Completo:"),y(),A(5,"input",3),y(),_(6,"button",4),N(7," Guardar "),y()()()),r&2&&(m(6),d("disabled",s.userProfileForm.invalid))}});let n=t;return n})();var Y_=[{path:"",component:Lh},{path:"login",loadComponent:()=>import("./chunk-7AXB6RWT.js")},{path:"register",loadComponent:()=>import("./chunk-WLRG3KNP.js")},{path:"app",component:P_,canActivate:[M_],children:[{path:"dashboard",component:jh},{path:"manage-projects",component:A_},{path:"explore-projects",component:R_},{path:"my-donations",component:N_},{path:"my-profile",component:J_},{path:"project-details/:id",component:W_}]}];function X_(n){return new $e(3e3,!1)}function wA(){return new $e(3100,!1)}function xA(){return new $e(3101,!1)}function IA(n){return new $e(3001,!1)}function CA(n){return new $e(3003,!1)}function TA(n){return new $e(3004,!1)}function SA(n,t){return new $e(3005,!1)}function EA(){return new $e(3006,!1)}function OA(){return new $e(3007,!1)}function AA(n,t){return new $e(3008,!1)}function kA(n){return new $e(3002,!1)}function PA(n,t,e,i,r){return new $e(3010,!1)}function MA(){return new $e(3011,!1)}function RA(){return new $e(3012,!1)}function DA(){return new $e(3200,!1)}function NA(){return new $e(3202,!1)}function FA(){return new $e(3013,!1)}function LA(n){return new $e(3014,!1)}function jA(n){return new $e(3015,!1)}function VA(n){return new $e(3016,!1)}function zA(n,t){return new $e(3404,!1)}function $A(n){return new $e(3502,!1)}function BA(n){return new $e(3503,!1)}function UA(){return new $e(3300,!1)}function HA(n){return new $e(3504,!1)}function qA(n){return new $e(3301,!1)}function KA(n,t){return new $e(3302,!1)}function GA(n){return new $e(3303,!1)}function ZA(n,t){return new $e(3400,!1)}function WA(n){return new $e(3401,!1)}function QA(n){return new $e(3402,!1)}function JA(n,t){return new $e(3505,!1)}function Or(n){switch(n.length){case 0:return new Ds;case 1:return n[0];default:return new hu(n)}}function h0(n,t,e=new Map,i=new Map){let r=[],s=[],a=-1,o=null;if(t.forEach(l=>{let u=l.get("offset"),p=u==a,g=p&&o||new Map;l.forEach((b,x)=>{let I=x,P=b;if(x!=="offset")switch(I=n.normalizePropertyName(I,r),P){case Zo:P=e.get(x);break;case on:P=i.get(x);break;default:P=n.normalizeStyleValue(x,I,P,r);break}g.set(I,P)}),p||s.push(g),o=g,a=u}),r.length)throw $A(r);return s}function ih(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&Dp(e,"start",n)));break;case"done":n.onDone(()=>i(e&&Dp(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&Dp(e,"destroy",n)));break}}function Dp(n,t,e){let i=e.totalTime,r=!!e.disabled,s=nh(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,i??n.totalTime,r),a=n._data;return a!=null&&(s._data=a),s}function nh(n,t,e,i,r="",s=0,a){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!a}}function Ii(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function e0(n){let t=n.indexOf(":"),e=n.substring(1,t),i=n.slice(t+1);return[e,i]}var YA=typeof document>"u"?null:document.documentElement;function rh(n){let t=n.parentNode||n.host||null;return t===YA?null:t}function XA(n){return n.substring(1,6)=="ebkit"}var xs=null,t0=!1;function ek(n){xs||(xs=tk()||{},t0=xs.style?"WebkitAppearance"in xs.style:!1);let t=!0;return xs.style&&!XA(n)&&(t=n in xs.style,!t&&t0&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in xs.style)),t}function tk(){return typeof document<"u"?document.body:null}function m0(n,t){for(;t;){if(t===n)return!0;t=rh(t)}return!1}function f0(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let i=n.querySelector(t);return i?[i]:[]}var sh=(()=>{let t=class t{validateStyleProperty(i){return ek(i)}matchesElement(i,r){return!1}containsElement(i,r){return m0(i,r)}getParentElement(i){return rh(i)}query(i,r,s){return f0(i,r,s)}computeStyle(i,r,s){return s||""}animate(i,r,s,a,o,l=[],u){return new Ds(s,a)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac});let n=t;return n})(),ch=class ch{};ch.NOOP=new sh;var Ts=ch,Ss=class{};var ik=1e3,g0="{{",nk="}}",_0="ng-enter",zp="ng-leave",Zc="ng-trigger",Xc=".ng-trigger",i0="ng-animating",$p=".ng-animating";function zn(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Bp(parseFloat(t[1]),t[2])}function Bp(n,t){switch(t){case"s":return n*ik;default:return n}}function eu(n,t,e){return n.hasOwnProperty("duration")?n:rk(n,t,e)}function rk(n,t,e){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,a="";if(typeof n=="string"){let o=n.match(i);if(o===null)return t.push(X_(n)),{duration:0,delay:0,easing:""};r=Bp(parseFloat(o[1]),o[2]);let l=o[3];l!=null&&(s=Bp(parseFloat(l),o[4]));let u=o[5];u&&(a=u)}else r=n;if(!e){let o=!1,l=t.length;r<0&&(t.push(wA()),o=!0),s<0&&(t.push(xA()),o=!0),o&&t.splice(l,0,X_(n))}return{duration:r,delay:s,easing:a}}function sk(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function yn(n,t,e){t.forEach((i,r)=>{let s=ah(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i})}function Cs(n,t){t.forEach((e,i)=>{let r=ah(i);n.style[r]=""})}function Po(n){return Array.isArray(n)?n.length==1?n[0]:Mh(n):n}function ak(n,t,e){let i=t.params||{},r=y0(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(IA(s))})}var Up=new RegExp(`${g0}\\s*(.+?)\\s*${nk}`,"g");function y0(n){let t=[];if(typeof n=="string"){let e;for(;e=Up.exec(n);)t.push(e[1]);Up.lastIndex=0}return t}function Ro(n,t,e){let i=`${n}`,r=i.replace(Up,(s,a)=>{let o=t[a];return o==null&&(e.push(CA(a)),o=""),o.toString()});return r==i?n:r}var ok=/-+([a-z0-9])/g;function ah(n){return n.replace(ok,(...t)=>t[1].toUpperCase())}function lk(n,t){return n===0||t===0}function ck(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,a)=>{i.has(a)||r.push(a),i.set(a,s)}),r.length)for(let s=1;s<t.length;s++){let a=t[s];r.forEach(o=>a.set(o,oh(n,o)))}}return t}function xi(n,t,e){switch(t.type){case Re.Trigger:return n.visitTrigger(t,e);case Re.State:return n.visitState(t,e);case Re.Transition:return n.visitTransition(t,e);case Re.Sequence:return n.visitSequence(t,e);case Re.Group:return n.visitGroup(t,e);case Re.Animate:return n.visitAnimate(t,e);case Re.Keyframes:return n.visitKeyframes(t,e);case Re.Style:return n.visitStyle(t,e);case Re.Reference:return n.visitReference(t,e);case Re.AnimateChild:return n.visitAnimateChild(t,e);case Re.AnimateRef:return n.visitAnimateRef(t,e);case Re.Query:return n.visitQuery(t,e);case Re.Stagger:return n.visitStagger(t,e);default:throw TA(t.type)}}function oh(n,t){return window.getComputedStyle(n)[t]}var uk=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),tu=class extends Ss{normalizePropertyName(t,e){return ah(t)}normalizeStyleValue(t,e,i,r){let s="",a=i.toString().trim();if(uk.has(e)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let o=i.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&o[1].length==0&&r.push(SA(t,i))}return a+s}};var iu="*";function dk(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>pk(i,e,t)):e.push(n),e}function pk(n,t,e){if(n[0]==":"){let l=hk(n,e);if(typeof l=="function"){t.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(jA(n)),t;let r=i[1],s=i[2],a=i[3];t.push(n0(r,a));let o=r==iu&&a==iu;s[0]=="<"&&!o&&t.push(n0(a,r))}function hk(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(VA(n)),"* => *"}}var Wc=new Set(["true","1"]),Qc=new Set(["false","0"]);function n0(n,t){let e=Wc.has(n)||Qc.has(n),i=Wc.has(t)||Qc.has(t);return(r,s)=>{let a=n==iu||n==r,o=t==iu||t==s;return!a&&e&&typeof r=="boolean"&&(a=r?Wc.has(n):Qc.has(n)),!o&&i&&typeof s=="boolean"&&(o=s?Wc.has(t):Qc.has(t)),a&&o}}var b0=":self",mk=new RegExp(`s*${b0}s*,?`,"g");function v0(n,t,e,i){return new Hp(n).build(t,e,i)}var r0="",Hp=class{constructor(t){this._driver=t}build(t,e,i){let r=new qp(e);return this._resetContextStyleTimingState(r),xi(this,Po(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector=r0,t.collectedStyles=new Map,t.collectedStyles.set(r0,new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0,s=[],a=[];return t.name.charAt(0)=="@"&&e.errors.push(EA()),t.definitions.forEach(o=>{if(this._resetContextStyleTimingState(e),o.type==Re.State){let l=o,u=l.name;u.toString().split(/\s*,\s*/).forEach(p=>{l.name=p,s.push(this.visitState(l,e))}),l.name=u}else if(o.type==Re.Transition){let l=this.visitTransition(o,e);i+=l.queryCount,r+=l.depCount,a.push(l)}else e.errors.push(OA())}),{type:Re.Trigger,name:t.name,states:s,transitions:a,queryCount:i,depCount:r,options:null}}visitState(t,e){let i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){let s=new Set,a=r||{};i.styles.forEach(o=>{o instanceof Map&&o.forEach(l=>{y0(l).forEach(u=>{a.hasOwnProperty(u)||s.add(u)})})}),s.size&&e.errors.push(AA(t.name,[...s.values()]))}return{type:Re.State,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let i=xi(this,Po(t.animation),e),r=dk(t.expr,e.errors);return{type:Re.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Is(t.options)}}visitSequence(t,e){return{type:Re.Sequence,steps:t.steps.map(i=>xi(this,i,e)),options:Is(t.options)}}visitGroup(t,e){let i=e.currentTime,r=0,s=t.steps.map(a=>{e.currentTime=i;let o=xi(this,a,e);return r=Math.max(r,e.currentTime),o});return e.currentTime=r,{type:Re.Group,steps:s,options:Is(t.options)}}visitAnimate(t,e){let i=yk(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:Si({});if(s.type==Re.Keyframes)r=this.visitKeyframes(s,e);else{let a=t.styles,o=!1;if(!a){o=!0;let u={};i.easing&&(u.easing=i.easing),a=Si(u)}e.currentTime+=i.duration+i.delay;let l=this.visitStyle(a,e);l.isEmptyStep=o,r=l}return e.currentAnimateTimings=null,{type:Re.Animate,timings:i,style:r,options:null}}visitStyle(t,e){let i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){let i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let o of r)typeof o=="string"?o===on?i.push(o):e.errors.push(kA(o)):i.push(new Map(Object.entries(o)));let s=!1,a=null;return i.forEach(o=>{if(o instanceof Map&&(o.has("easing")&&(a=o.get("easing"),o.delete("easing")),!s)){for(let l of o.values())if(l.toString().indexOf(g0)>=0){s=!0;break}}}),{type:Re.Style,styles:i,easing:a,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){let i=e.currentAnimateTimings,r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(a=>{typeof a!="string"&&a.forEach((o,l)=>{let u=e.collectedStyles.get(e.currentQuerySelector),p=u.get(l),g=!0;p&&(s!=r&&s>=p.startTime&&r<=p.endTime&&(e.errors.push(PA(l,p.startTime,p.endTime,s,r)),g=!1),s=p.startTime),g&&u.set(l,{startTime:s,endTime:r}),e.options&&ak(o,e.options,e.errors)})})}visitKeyframes(t,e){let i={type:Re.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(MA()),i;let r=1,s=0,a=[],o=!1,l=!1,u=0,p=t.steps.map(T=>{let F=this._makeStyleAst(T,e),q=F.offset!=null?F.offset:_k(F.styles),X=0;return q!=null&&(s++,X=F.offset=q),l=l||X<0||X>1,o=o||X<u,u=X,a.push(X),F});l&&e.errors.push(RA()),o&&e.errors.push(DA());let g=t.steps.length,b=0;s>0&&s<g?e.errors.push(NA()):s==0&&(b=r/(g-1));let x=g-1,I=e.currentTime,P=e.currentAnimateTimings,S=P.duration;return p.forEach((T,F)=>{let q=b>0?F==x?1:b*F:a[F],X=q*S;e.currentTime=I+P.delay+X,P.duration=X,this._validateStyleAst(T,e),T.offset=q,i.styles.push(T)}),i}visitReference(t,e){return{type:Re.Reference,animation:xi(this,Po(t.animation),e),options:Is(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:Re.AnimateChild,options:Is(t.options)}}visitAnimateRef(t,e){return{type:Re.AnimateRef,animation:this.visitReference(t.animation,e),options:Is(t.options)}}visitQuery(t,e){let i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;let[s,a]=fk(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,Ii(e.collectedStyles,e.currentQuerySelector,new Map);let o=xi(this,Po(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:Re.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:o,originalSelector:t.selector,options:Is(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(FA());let i=t.timings==="full"?{duration:0,delay:0,easing:"full"}:eu(t.timings,e.errors,!0);return{type:Re.Stagger,animation:xi(this,Po(t.animation),e),timings:i,options:null}}};function fk(n){let t=!!n.split(/\s*,\s*/).find(e=>e==b0);return t&&(n=n.replace(mk,"")),n=n.replace(/@\*/g,Xc).replace(/@\w+/g,e=>Xc+"-"+e.slice(1)).replace(/:animating/g,$p),[n,t]}function gk(n){return n?c({},n):null}var qp=class{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function _k(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function yk(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=eu(n,t).duration;return Np(s,0,"")}let e=n;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Np(0,0,"");return s.dynamic=!0,s.strValue=e,s}let r=eu(e,t);return Np(r.duration,r.delay,r.easing)}function Is(n){return n?(n=c({},n),n.params&&(n.params=gk(n.params))):n={},n}function Np(n,t,e){return{duration:n,delay:t,easing:e}}function lh(n,t,e,i,r,s,a=null,o=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:a,subTimeline:o}}var Do=class{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},bk=1,vk=":enter",wk=new RegExp(vk,"g"),xk=":leave",Ik=new RegExp(xk,"g");function w0(n,t,e,i,r,s=new Map,a=new Map,o,l,u=[]){return new Kp().buildKeyframes(n,t,e,i,r,s,a,o,l,u)}var Kp=class{buildKeyframes(t,e,i,r,s,a,o,l,u,p=[]){u=u||new Do;let g=new Gp(t,e,u,r,s,p,[]);g.options=l;let b=l.delay?zn(l.delay):0;g.currentTimeline.delayNextStep(b),g.currentTimeline.setStyles([a],null,g.errors,l),xi(this,i,g);let x=g.timelines.filter(I=>I.containsAnimation());if(x.length&&o.size){let I;for(let P=x.length-1;P>=0;P--){let S=x[P];if(S.element===e){I=S;break}}I&&!I.allowOnlyTimelineStyles()&&I.setStyles([o],null,g.errors,l)}return x.length?x.map(I=>I.buildKeyframes()):[lh(e,[],[],[],0,b,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let i=e.subInstructions.get(e.element);if(i){let r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,a=this._visitSubInstructions(i,r,r.options);s!=a&&e.transformIntoNewTimeline(a)}e.previousNode=t}visitAnimateRef(t,e){let i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(let r of t){let s=r?.delay;if(s){let a=typeof s=="number"?s:zn(Ro(s,r?.params??{},e.errors));i.delayNextStep(a)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime,a=i.duration!=null?zn(i.duration):null,o=i.delay!=null?zn(i.delay):null;return a!==0&&t.forEach(l=>{let u=e.appendInstructionToTimeline(l,a,o);s=Math.max(s,u.duration+u.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),xi(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let i=e.subContextCount,r=e,s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==Re.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=nu);let a=zn(s.delay);r.delayNextStep(a)}t.steps.length&&(t.steps.forEach(a=>xi(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let i=[],r=e.currentTimeline.currentTime,s=t.options&&t.options.delay?zn(t.options.delay):0;t.steps.forEach(a=>{let o=e.createSubContext(t.options);s&&o.delayNextStep(s),xi(this,a,o),r=Math.max(r,o.currentTimeline.currentTime),i.push(o.currentTimeline)}),i.forEach(a=>e.currentTimeline.mergeTimelineCollectedStyles(a)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let i=t.strValue,r=e.params?Ro(i,e.params,e.errors):i;return eu(r,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());let s=t.style;s.type==Re.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,o=e.createSubContext().currentTimeline;o.easing=i.easing,t.styles.forEach(l=>{let u=l.offset||0;o.forwardTime(u*s),o.setStyles(l.styles,l.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){let i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?zn(r.delay):0;s&&(e.previousNode.type===Re.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=nu);let a=i,o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let l=null;o.forEach((u,p)=>{e.currentQueryIndex=p;let g=e.createSubContext(t.options,u);s&&g.delayNextStep(s),u===e.element&&(l=g.currentTimeline),xi(this,t.animation,g),g.currentTimeline.applyStylesToKeyframe();let b=g.currentTimeline.currentTime;a=Math.max(a,b)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let i=e.parentContext,r=e.currentTimeline,s=t.timings,a=Math.abs(s.duration),o=a*(e.currentQueryTotal-1),l=a*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=o-l;break;case"full":l=i.currentStaggerTime;break}let p=e.currentTimeline;l&&p.delayNextStep(l);let g=p.currentTime;xi(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-g+(r.startTime-i.currentTimeline.startTime)}},nu={},Gp=class n{constructor(t,e,i,r,s,a,o,l){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=a,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=nu,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new ru(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let i=t,r=this.options;i.duration!=null&&(r.duration=zn(i.duration)),i.delay!=null&&(r.delay=zn(i.delay));let s=i.params;if(s){let a=r.params;a||(a=this.options.params={}),Object.keys(s).forEach(o=>{(!e||!a.hasOwnProperty(o))&&(a[o]=Ro(s[o],a,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){let r=e||this.element,s=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=nu,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){let r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new Zp(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,a){let o=[];if(r&&o.push(this.element),t.length>0){t=t.replace(wk,"."+this._enterClassName),t=t.replace(Ik,"."+this._leaveClassName);let l=i!=1,u=this._driver.query(this.element,t,l);i!==0&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),o.push(...u)}return!s&&o.length==0&&a.push(LA(e)),o}},ru=class n{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=bk,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||on),this._currentKeyframe.set(e,on);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);let s=r&&r.params||{},a=Ck(t,this._globalTimelineStyles);for(let[o,l]of a){let u=Ro(l,s,i);this._pendingStyles.set(o,u),this._localTimelineStyles.has(o)||this._backFill.set(o,this._globalTimelineStyles.get(o)??on),this._updateStyle(o,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{let r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((o,l)=>{let u=new Map([...this._backFill,...o]);u.forEach((p,g)=>{p===Zo?t.add(g):p===on&&e.add(g)}),i||u.set("offset",l/this.duration),r.push(u)});let s=[...t.values()],a=[...e.values()];if(i){let o=r[0],l=new Map(o);o.set("offset",0),l.set("offset",1),r=[o,l]}return lh(this.element,r,s,a,this.duration,this.startTime,this.easing,!1)}},Zp=class extends ru{constructor(t,e,i,r,s,a,o=!1){super(t,e,a.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=o,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],a=i+e,o=e/a,l=new Map(t[0]);l.set("offset",0),s.push(l);let u=new Map(t[0]);u.set("offset",s0(o)),s.push(u);let p=t.length-1;for(let g=1;g<=p;g++){let b=new Map(t[g]),x=b.get("offset"),I=e+x*i;b.set("offset",s0(I/a)),s.push(b)}i=a,e=0,r="",t=s}return lh(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}};function s0(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function Ck(n,t){let e=new Map,i;return n.forEach(r=>{if(r==="*"){i??=t.keys();for(let s of i)e.set(s,on)}else for(let[s,a]of r)e.set(s,a)}),e}function a0(n,t,e,i,r,s,a,o,l,u,p,g,b){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:a,timelines:o,queriedElements:l,preStyleProps:u,postStyleProps:p,totalTime:g,errors:b}}var Fp={},su=class{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return Tk(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return t!==void 0&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,a,o,l,u,p){let g=[],b=this.ast.options&&this.ast.options.params||Fp,x=o&&o.params||Fp,I=this.buildStyles(i,x,g),P=l&&l.params||Fp,S=this.buildStyles(r,P,g),T=new Set,F=new Map,q=new Map,X=r==="void",K={params:x0(P,b),delay:this.ast.options?.delay},J=p?[]:w0(t,e,this.ast.animation,s,a,I,S,K,u,g),_e=0;return J.forEach(Oe=>{_e=Math.max(Oe.duration+Oe.delay,_e)}),g.length?a0(e,this._triggerName,i,r,X,I,S,[],[],F,q,_e,g):(J.forEach(Oe=>{let Ne=Oe.element,pi=Ii(F,Ne,new Set);Oe.preStyleProps.forEach(It=>pi.add(It));let xt=Ii(q,Ne,new Set);Oe.postStyleProps.forEach(It=>xt.add(It)),Ne!==e&&T.add(Ne)}),a0(e,this._triggerName,i,r,X,I,S,J,[...T.values()],F,q,_e))}};function Tk(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}function x0(n,t){let e=c({},t);return Object.entries(n).forEach(([i,r])=>{r!=null&&(e[i]=r)}),e}var Wp=class{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){let i=new Map,r=x0(t,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,o)=>{a&&(a=Ro(a,r,e));let l=this.normalizer.normalizePropertyName(o,e);a=this.normalizer.normalizeStyleValue(o,l,a,e),i.set(o,a)})}),i}};function Sk(n,t,e){return new Qp(n,t,e)}var Qp=class{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new Wp(r.style,s,i))}),o0(this.states,"true","1"),o0(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new su(t,r,this.states))}),this.fallbackTransition=Ek(t,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(a=>a.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}};function Ek(n,t,e){let i=[(a,o)=>!0],r={type:Re.Sequence,steps:[],options:null},s={type:Re.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new su(n,s,t)}function o0(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var Ok=new Do,Jp=class{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){let i=[],r=[],s=v0(this._driver,e,i,r);if(i.length)throw BA(i);r.length&&void 0,this._animations.set(t,s)}_buildPlayer(t,e,i){let r=t.element,s=h0(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){let r=[],s=this._animations.get(t),a,o=new Map;if(s?(a=w0(this._driver,e,s,_0,zp,new Map,new Map,i,Ok,r),a.forEach(p=>{let g=Ii(o,p.element,new Map);p.postStyleProps.forEach(b=>g.set(b,null))})):(r.push(UA()),a=[]),r.length)throw HA(r);o.forEach((p,g)=>{p.forEach((b,x)=>{p.set(x,this._driver.computeStyle(g,x,on))})});let l=a.map(p=>{let g=o.get(p.element);return this._buildPlayer(p,new Map,g)}),u=Or(l);return this._playersById.set(t,u),u.onDestroy(()=>this.destroy(t)),this.players.push(u),u}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw qA(t);return e}listen(t,e,i,r){let s=nh(e,"","","");return ih(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if(i=="register"){this.register(t,r[0]);return}if(i=="create"){let a=r[0]||{};this.create(t,e,a);return}let s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t);break}}},l0="ng-animate-queued",Ak=".ng-animate-queued",Lp="ng-animate-disabled",kk=".ng-animate-disabled",Pk="ng-star-inserted",Mk=".ng-star-inserted",Rk=[],I0={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Dk={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},en="__ng_removed",No=class{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let i=t&&t.hasOwnProperty("value"),r=i?t.value:t;if(this.value=Fk(r),i){let s=t,{value:a}=s,o=Ee(s,["value"]);this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let i=this.options.params;Object.keys(e).forEach(r=>{i[r]==null&&(i[r]=e[r])})}}},Mo="void",jp=new No(Mo),Yp=class{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Di(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw KA(i,e);if(i==null||i.length==0)throw GA(e);if(!Lk(i))throw ZA(i,e);let s=Ii(this._elementListeners,t,[]),a={name:e,phase:i,callback:r};s.push(a);let o=Ii(this._engine.statesByElement,t,new Map);return o.has(e)||(Di(t,Zc),Di(t,Zc+"-"+e),o.set(e,jp)),()=>{this._engine.afterFlush(()=>{let l=s.indexOf(a);l>=0&&s.splice(l,1),this._triggers.has(e)||o.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw WA(t);return e}trigger(t,e,i,r=!0){let s=this._getTrigger(e),a=new Fo(this.id,e,t),o=this._engine.statesByElement.get(t);o||(Di(t,Zc),Di(t,Zc+"-"+e),this._engine.statesByElement.set(t,o=new Map));let l=o.get(e),u=new No(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),o.set(e,u),l||(l=jp),!(u.value===Mo)&&l.value===u.value){if(!zk(l.params,u.params)){let P=[],S=s.matchStyles(l.value,l.params,P),T=s.matchStyles(u.value,u.params,P);P.length?this._engine.reportError(P):this._engine.afterFlush(()=>{Cs(t,S),yn(t,T)})}return}let b=Ii(this._engine.playersByElement,t,[]);b.forEach(P=>{P.namespaceId==this.id&&P.triggerName==e&&P.queued&&P.destroy()});let x=s.matchTransition(l.value,u.value,t,u.params),I=!1;if(!x){if(!r)return;x=s.fallbackTransition,I=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:x,fromState:l,toState:u,player:a,isFallbackTransition:I}),I||(Di(t,l0),a.onStart(()=>{Sa(t,l0)})),a.onDone(()=>{let P=this.players.indexOf(a);P>=0&&this.players.splice(P,1);let S=this._engine.playersByElement.get(t);if(S){let T=S.indexOf(a);T>=0&&S.splice(T,1)}}),this.players.push(a),b.push(a),a}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let i=this._engine.driver.query(t,Xc,!0);i.forEach(r=>{if(r[en])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(a=>a.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){let s=this._engine.statesByElement.get(t),a=new Map;if(s){let o=[];if(s.forEach((l,u)=>{if(a.set(u,l.value),this._triggers.has(u)){let p=this.trigger(t,u,Mo,r);p&&o.push(p)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,a),i&&Or(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){let r=new Set;e.forEach(s=>{let a=s.name;if(r.has(a))return;r.add(a);let l=this._triggers.get(a).fallbackTransition,u=i.get(a)||jp,p=new No(Mo),g=new Fo(this.id,a,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:a,transition:l,fromState:u,toState:p,player:g,isFallbackTransition:!0})})}}removeNode(t,e){let i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let a=t;for(;a=a.parentNode;)if(i.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{let s=t[en];(!s||s===I0)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Di(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,a=this._elementListeners.get(s);a&&a.forEach(o=>{if(o.name==i.triggerName){let l=nh(s,i.triggerName,i.fromState.value,i.toState.value);l._data=t,ih(i.player,o.phase,l,o.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{let s=i.transition.ast.depCount,a=r.transition.ast.depCount;return s==0||a==0?s-a:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},Xp=class{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i,r){this.bodyNode=t,this.driver=e,this._normalizer=i,this.scheduler=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,a)=>{}}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){let i=new Yp(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let a=!1,o=this.driver.getParentElement(e);for(;o;){let l=r.get(o);if(l){let u=i.indexOf(l);i.splice(u+1,0,t),a=!0;break}o=this.driver.getParentElement(o)}a||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,i=this.statesByElement.get(t);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}}return e}trigger(t,e,i,r){if(Jc(e)){let s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!Jc(e))return;let s=e[en];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let a=this.collectedLeaveElements.indexOf(e);a>=0&&this.collectedLeaveElements.splice(a,1)}if(t){let a=this._fetchNamespace(t);a&&a.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Di(t,Lp)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Sa(t,Lp))}removeNode(t,e,i){if(Jc(e)){this.scheduler?.notify();let r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);let s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[en]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return Jc(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,Xc,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,$p,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Or(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[en];if(e&&e.setForRemoval){if(t[en]=I0,e.namespaceId){this.destroyInnerAnimations(t);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Lp)&&this.markElementAsDisabled(t,!1),this.driver.query(t,kk,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Di(r,Pk)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?Or(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw QA(t)}_flushAnimations(t,e){let i=new Do,r=[],s=new Map,a=[],o=new Map,l=new Map,u=new Map,p=new Set;this.disabledNodes.forEach(te=>{p.add(te);let ce=this.driver.query(te,Ak,!0);for(let pe=0;pe<ce.length;pe++)p.add(ce[pe])});let g=this.bodyNode,b=Array.from(this.statesByElement.keys()),x=d0(b,this.collectedEnterElements),I=new Map,P=0;x.forEach((te,ce)=>{let pe=_0+P++;I.set(ce,pe),te.forEach(ze=>Di(ze,pe))});let S=[],T=new Set,F=new Set;for(let te=0;te<this.collectedLeaveElements.length;te++){let ce=this.collectedLeaveElements[te],pe=ce[en];pe&&pe.setForRemoval&&(S.push(ce),T.add(ce),pe.hasAnimation?this.driver.query(ce,Mk,!0).forEach(ze=>T.add(ze)):F.add(ce))}let q=new Map,X=d0(b,Array.from(T));X.forEach((te,ce)=>{let pe=zp+P++;q.set(ce,pe),te.forEach(ze=>Di(ze,pe))}),t.push(()=>{x.forEach((te,ce)=>{let pe=I.get(ce);te.forEach(ze=>Sa(ze,pe))}),X.forEach((te,ce)=>{let pe=q.get(ce);te.forEach(ze=>Sa(ze,pe))}),S.forEach(te=>{this.processLeaveNode(te)})});let K=[],J=[];for(let te=this._namespaceList.length-1;te>=0;te--)this._namespaceList[te].drainQueuedTransitions(e).forEach(pe=>{let ze=pe.player,St=pe.element;if(K.push(ze),this.collectedEnterElements.length){let zt=St[en];if(zt&&zt.setForMove){if(zt.previousTriggersValues&&zt.previousTriggersValues.has(pe.triggerName)){let kr=zt.previousTriggersValues.get(pe.triggerName),Ci=this.statesByElement.get(pe.element);if(Ci&&Ci.has(pe.triggerName)){let Lo=Ci.get(pe.triggerName);Lo.value=kr,Ci.set(pe.triggerName,Lo)}}ze.destroy();return}}let nn=!g||!this.driver.containsElement(g,St),mi=q.get(St),$n=I.get(St),ct=this._buildInstruction(pe,i,$n,mi,nn);if(ct.errors&&ct.errors.length){J.push(ct);return}if(nn){ze.onStart(()=>Cs(St,ct.fromStyles)),ze.onDestroy(()=>yn(St,ct.toStyles)),r.push(ze);return}if(pe.isFallbackTransition){ze.onStart(()=>Cs(St,ct.fromStyles)),ze.onDestroy(()=>yn(St,ct.toStyles)),r.push(ze);return}let uh=[];ct.timelines.forEach(zt=>{zt.stretchStartingKeyframe=!0,this.disabledNodes.has(zt.element)||uh.push(zt)}),ct.timelines=uh,i.append(St,ct.timelines);let k0={instruction:ct,player:ze,element:St};a.push(k0),ct.queriedElements.forEach(zt=>Ii(o,zt,[]).push(ze)),ct.preStyleProps.forEach((zt,kr)=>{if(zt.size){let Ci=l.get(kr);Ci||l.set(kr,Ci=new Set),zt.forEach((Lo,uu)=>Ci.add(uu))}}),ct.postStyleProps.forEach((zt,kr)=>{let Ci=u.get(kr);Ci||u.set(kr,Ci=new Set),zt.forEach((Lo,uu)=>Ci.add(uu))})});if(J.length){let te=[];J.forEach(ce=>{te.push(JA(ce.triggerName,ce.errors))}),K.forEach(ce=>ce.destroy()),this.reportError(te)}let _e=new Map,Oe=new Map;a.forEach(te=>{let ce=te.element;i.has(ce)&&(Oe.set(ce,ce),this._beforeAnimationBuild(te.player.namespaceId,te.instruction,_e))}),r.forEach(te=>{let ce=te.element;this._getPreviousPlayers(ce,!1,te.namespaceId,te.triggerName,null).forEach(ze=>{Ii(_e,ce,[]).push(ze),ze.destroy()})});let Ne=S.filter(te=>p0(te,l,u)),pi=new Map;u0(pi,this.driver,F,u,on).forEach(te=>{p0(te,l,u)&&Ne.push(te)});let It=new Map;x.forEach((te,ce)=>{u0(It,this.driver,new Set(te),l,Zo)}),Ne.forEach(te=>{let ce=pi.get(te),pe=It.get(te);pi.set(te,new Map([...ce?.entries()??[],...pe?.entries()??[]]))});let tn=[],hi=[],Ar={};a.forEach(te=>{let{element:ce,player:pe,instruction:ze}=te;if(i.has(ce)){if(p.has(ce)){pe.onDestroy(()=>yn(ce,ze.toStyles)),pe.disabled=!0,pe.overrideTotalTime(ze.totalTime),r.push(pe);return}let St=Ar;if(Oe.size>1){let mi=ce,$n=[];for(;mi=mi.parentNode;){let ct=Oe.get(mi);if(ct){St=ct;break}$n.push(mi)}$n.forEach(ct=>Oe.set(ct,St))}let nn=this._buildAnimation(pe.namespaceId,ze,_e,s,It,pi);if(pe.setRealPlayer(nn),St===Ar)tn.push(pe);else{let mi=this.playersByElement.get(St);mi&&mi.length&&(pe.parentPlayer=Or(mi)),r.push(pe)}}else Cs(ce,ze.fromStyles),pe.onDestroy(()=>yn(ce,ze.toStyles)),hi.push(pe),p.has(ce)&&r.push(pe)}),hi.forEach(te=>{let ce=s.get(te.element);if(ce&&ce.length){let pe=Or(ce);te.setRealPlayer(pe)}}),r.forEach(te=>{te.parentPlayer?te.syncPlayerEvents(te.parentPlayer):te.destroy()});for(let te=0;te<S.length;te++){let ce=S[te],pe=ce[en];if(Sa(ce,zp),pe&&pe.hasAnimation)continue;let ze=[];if(o.size){let nn=o.get(ce);nn&&nn.length&&ze.push(...nn);let mi=this.driver.query(ce,$p,!0);for(let $n=0;$n<mi.length;$n++){let ct=o.get(mi[$n]);ct&&ct.length&&ze.push(...ct)}}let St=ze.filter(nn=>!nn.destroyed);St.length?jk(this,ce,St):this.processLeaveNode(ce)}return S.length=0,tn.forEach(te=>{this.players.push(te),te.onDone(()=>{te.destroy();let ce=this.players.indexOf(te);this.players.splice(ce,1)}),te.play()}),tn}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let a=[];if(e){let o=this.playersByQueriedElement.get(t);o&&(a=o)}else{let o=this.playersByElement.get(t);if(o){let l=!s||s==Mo;o.forEach(u=>{u.queued||!l&&u.triggerName!=r||a.push(u)})}}return(i||r)&&(a=a.filter(o=>!(i&&i!=o.namespaceId||r&&r!=o.triggerName))),a}_beforeAnimationBuild(t,e,i){let r=e.triggerName,s=e.element,a=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:r;for(let l of e.timelines){let u=l.element,p=u!==s,g=Ii(i,u,[]);this._getPreviousPlayers(u,p,a,o,e.toState).forEach(x=>{let I=x.getRealPlayer();I.beforeDestroy&&I.beforeDestroy(),x.destroy(),g.push(x)})}Cs(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,a){let o=e.triggerName,l=e.element,u=[],p=new Set,g=new Set,b=e.timelines.map(I=>{let P=I.element;p.add(P);let S=P[en];if(S&&S.removedBeforeQueried)return new Ds(I.duration,I.delay);let T=P!==l,F=Vk((i.get(P)||Rk).map(_e=>_e.getRealPlayer())).filter(_e=>{let Oe=_e;return Oe.element?Oe.element===P:!1}),q=s.get(P),X=a.get(P),K=h0(this._normalizer,I.keyframes,q,X),J=this._buildPlayer(I,K,F);if(I.subTimeline&&r&&g.add(P),T){let _e=new Fo(t,o,P);_e.setRealPlayer(J),u.push(_e)}return J});u.forEach(I=>{Ii(this.playersByQueriedElement,I.element,[]).push(I),I.onDone(()=>Nk(this.playersByQueriedElement,I.element,I))}),p.forEach(I=>Di(I,i0));let x=Or(b);return x.onDestroy(()=>{p.forEach(I=>Sa(I,i0)),yn(l,e.toStyles)}),g.forEach(I=>{Ii(r,I,[]).push(x)}),x}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Ds(t.duration,t.delay)}},Fo=class{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new Ds,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>ih(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ii(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function Nk(n,t,e){let i=n.get(t);if(i){if(i.length){let r=i.indexOf(e);i.splice(r,1)}i.length==0&&n.delete(t)}return i}function Fk(n){return n??null}function Jc(n){return n&&n.nodeType===1}function Lk(n){return n=="start"||n=="done"}function c0(n,t){let e=n.style.display;return n.style.display=t??"none",e}function u0(n,t,e,i,r){let s=[];e.forEach(l=>s.push(c0(l)));let a=[];i.forEach((l,u)=>{let p=new Map;l.forEach(g=>{let b=t.computeStyle(u,g,r);p.set(g,b),(!b||b.length==0)&&(u[en]=Dk,a.push(u))}),n.set(u,p)});let o=0;return e.forEach(l=>c0(l,s[o++])),a}function d0(n,t){let e=new Map;if(n.forEach(o=>e.set(o,[])),t.length==0)return e;let i=1,r=new Set(t),s=new Map;function a(o){if(!o)return i;let l=s.get(o);if(l)return l;let u=o.parentNode;return e.has(u)?l=u:r.has(u)?l=i:l=a(u),s.set(o,l),l}return t.forEach(o=>{let l=a(o);l!==i&&e.get(l).push(o)}),e}function Di(n,t){n.classList?.add(t)}function Sa(n,t){n.classList?.remove(t)}function jk(n,t,e){Or(e).onDone(()=>n.processLeaveNode(t))}function Vk(n){let t=[];return C0(n,t),t}function C0(n,t){for(let e=0;e<n.length;e++){let i=n[e];i instanceof hu?C0(i.players,t):t.push(i)}}function zk(n,t){let e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}function p0(n,t,e){let i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}var Oa=class{constructor(t,e,i,r){this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(s,a)=>{},this._transitionEngine=new Xp(t.body,e,i,r),this._timelineEngine=new Jp(t.body,e,i),this._transitionEngine.onRemovalComplete=(s,a)=>this.onRemovalComplete(s,a)}registerTrigger(t,e,i,r,s){let a=t+"-"+r,o=this._triggerCache[a];if(!o){let l=[],u=[],p=v0(this._driver,s,l,u);if(l.length)throw zA(r,l);u.length&&void 0,o=Sk(r,p,this._normalizer),this._triggerCache[a]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if(i.charAt(0)=="@"){let[s,a]=e0(i),o=r;this._timelineEngine.command(s,e,a,o)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if(i.charAt(0)=="@"){let[a,o]=e0(i);return this._timelineEngine.listen(a,e,o,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function $k(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=Vp(t[0]),t.length>1&&(i=Vp(t[t.length-1]))):t instanceof Map&&(e=Vp(t)),e||i?new eh(n,e,i):null}var Ea=class Ea{constructor(t,e,i){this._element=t,this._startStyles=e,this._endStyles=i,this._state=0;let r=Ea.initialStylesByElement.get(t);r||Ea.initialStylesByElement.set(t,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&yn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(yn(this._element,this._initialStyles),this._endStyles&&(yn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Ea.initialStylesByElement.delete(this._element),this._startStyles&&(Cs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Cs(this._element,this._endStyles),this._endStyles=null),yn(this._element,this._initialStyles),this._state=3)}};Ea.initialStylesByElement=new WeakMap;var eh=Ea;function Vp(n){let t=null;return n.forEach((e,i)=>{Bk(i)&&(t=t||new Map,t.set(i,e))}),t}function Bk(n){return n==="display"||n==="position"}var au=class{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&t.set(r,this._finished?i:oh(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},ou=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return m0(t,e)}getParentElement(t){return rh(t)}query(t,e,i){return f0(t,e,i)}computeStyle(t,e,i){return oh(t,e)}animate(t,e,i,r,s,a=[]){let o=r==0?"both":"forwards",l={duration:i,delay:r,fill:o};s&&(l.easing=s);let u=new Map,p=a.filter(x=>x instanceof au);lk(i,r)&&p.forEach(x=>{x.currentSnapshot.forEach((I,P)=>u.set(P,I))});let g=sk(e).map(x=>new Map(x));g=ck(t,g,u);let b=$k(t,g);return new au(t,g,l,b)}};var Yc="@",T0="@.disabled",lu=class{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){e.charAt(0)==Yc&&e==T0?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},th=class extends lu{constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){e.charAt(0)==Yc?e.charAt(1)=="."&&e==T0?(i=i===void 0?!0:!!i,this.disableAnimations(t,i)):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if(e.charAt(0)==Yc){let r=Uk(t),s=e.slice(1),a="";return s.charAt(0)!=Yc&&([s,a]=Hk(s)),this.engine.listen(this.namespaceId,r,s,a,o=>{let l=o._data||-1;this.factory.scheduleListenerCallback(l,i,o)})}return this.delegate.listen(t,e,i)}};function Uk(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Hk(n){let t=n.indexOf("."),e=n.substring(0,t),i=n.slice(t+1);return[e,i]}var cu=class{constructor(t,e,i){this.delegate=t,this.engine=e,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(r,s)=>{let a=s?.parentNode(r);a&&s.removeChild(a,r)}}createRenderer(t,e){let i="",r=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let u=this._rendererCache,p=u.get(r);if(!p){let g=()=>u.delete(r);p=new lu(i,r,this.engine,g),u.set(r,p)}return p}let s=e.id,a=e.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);let o=u=>{Array.isArray(u)?u.forEach(o):this.engine.registerTrigger(s,a,t,u.name,u)};return e.data.animation.forEach(o),new th(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,i){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[a,o]=s;a(o)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Kk=(()=>{let t=class t extends Oa{constructor(i,r,s){super(i,r,s,Pr(_h,{optional:!0}))}ngOnDestroy(){this.flush()}};t.\u0275fac=function(r){return new(r||t)(Os(Kt),Os(Ts),Os(Ss))},t.\u0275prov=mt({token:t,factory:t.\u0275fac});let n=t;return n})();function Gk(){return new tu}function Zk(n,t,e){return new cu(n,t,e)}var S0=[{provide:Ss,useFactory:Gk},{provide:Oa,useClass:Kk},{provide:yh,useFactory:Zk,deps:[Sh,Oa,Bt]}],Wk=[{provide:Ts,useFactory:()=>new ou},{provide:du,useValue:"BrowserAnimations"},...S0],MZ=[{provide:Ts,useClass:sh},{provide:du,useValue:"NoopAnimations"},...S0];function E0(){return bh("NgEagerAnimations"),[...Wk]}var O0={providers:[Ph(Y_),Th(),E0()]};var A0=(()=>{let t=class t{constructor(i){this.primengConfig=i,this.title="Ecofin"}ngOnInit(){this.primengConfig.ripple=!0}};t.\u0275fac=function(r){return new(r||t)(D(Tt))},t.\u0275cmp=Z({type:t,selectors:[["app-root"]],standalone:!0,features:[xe],decls:1,vars:0,template:function(r,s){r&1&&A(0,"router-outlet")},dependencies:[Ho]});let n=t;return n})();Eh(A0,O0).catch(n=>console.error(n));
